# An√°lisis Semi√≥tico y Contrato Operativo: Terminal Drive (VAULT_ENGINE)

> **Cambio de Paradigma:** De "Dashboard de Ingeniero" (Pasivo/Informativo) a "Cabina de Operaciones" (Activo/Ejecutable).

## 1. Definici√≥n Ontol√≥gica

La **Terminal Drive** no es una ventana de visualizaci√≥n; es un manipulador teleoperado de la realidad f√≠sica del usuario (Google Drive). Cada interacci√≥n en la UI debe tener una repercusi√≥n f√≠sica inmediata y confirmada.

*   **Significante (UI):** Una rejilla de objetos manipulables y un panel de control lateral.
*   **Significado (Mental):** "Mi disco duro en la nube".
*   **Pragm√°tica (Uso):** Organizar, limpiar y estructurar el conocimiento.

---

## 2. Anatom√≠a de la Interfaz (Layout)

La interfaz se divide en dos hemisferios funcionales que dialogan entre s√≠.

### A. El Espacio de Carga (Main Viewport)
Es el √°rea donde residen los objetos. Debe sentirse como una mesa de trabajo, no como una lista de Excel.
*   **Representaci√≥n**: Alternancia fluida entre `GRID` (Visual/Espacial) y `LIST` (T√©cnico/Denso).
*   **Navegaci√≥n**: Breadcrumbs interactivos que permiten saltos no lineales.
*   **Scroll**: Independiente. El contenido se desborda dentro de su contenedor, nunca rompe el chasis.

### B. El Inspector Contextual (Panel Lateral Derecho)
El panel derecho abandona su rol decorativo ("Vital Signs") para convertirse en una **Herramienta Activa**. Su contenido muta seg√∫n el estado del foco.

#### Estado 0: Reposo (No Selection)
Cuando no hay nada seleccionado, informa sobre el contenedor actual (La Carpeta).
*   **Telemetry**: Espacio libre, Cuota de API (√∫til para saber si el sistema "respira").
*   **Global Actions**: Acciones que afectan a la carpeta actual:
    *   `[UPLOAD]`: Inyectar materia nueva.
    *   `[NEW_FOLDER]`: Crear estructura.
    *   `[SYNC]`: Forzar re-lectura de la realidad.

#### Estado 1: Foco Activo (Item Selected)
Cuando el usuario selecciona un nodo (Click), el panel se transforma.
*   **Header**: Muestra el icono gigante, nombre completo y tipo MIME real.
*   **Meta-Data**: 
    *   *ID*: UUID copiable.
    *   *Size*: Peso humano (KB/MB).
    *   *Created/Modified*: Fechas relativas ("hace 2 horas").
*   **Control Deck (Protocolos Ejecutables):**
    En lugar de listar `/path/to/command`, se muestran **Gatillos**:
    *   `[OPEN/ENTER]`: (Primary Action) Entrar en carpeta o abrir editor JSON.
    *   `[RENAME]`: Input para cambiar identidad.
    *   `[MOVE]`: Selector de destino.
    *   `[TRASH]`: (Danger Zone) Eliminar nodo.

---

## 3. Protocolos de Interacci√≥n (Interaction Flow)

### Navegaci√≥n (Drill-Down)
*   **Acci√≥n**: Doble Click en Carpeta.
*   **Reacci√≥n Sistem√°tica**:
    1.  Bloqueo UI parcial (Scanning...).
    2.  Petici√≥n `drive:listContents(id)`.
    3.  Actualizaci√≥n de Breadcrumbs.
    4.  Renderizado de nuevos nodos.

### Inyecci√≥n de Datos (Upload)
*   **Acci√≥n**: Drag & Drop sobre el Espacio de Carga.
*   **Feedback**: Barra de progreso real en el Panel Lateral (Estado: Transferencia).

### Mutaci√≥n de Identidad (Rename)
*   **Acci√≥n**: Click en nombre en el Inspector -> Escribir -> Enter.
*   **Reacci√≥n**:
    1.  Lock optimista (El nombre cambia en UI).
    2.  Env√≠o as√≠ncrono `drive:rename`.
    3.  Si falla -> Revertir y mostrar Snack Error.

---

## 4. Axiomas Visuales

1.  **Honestidad de Tipo**: 
    *   Las carpetas SOY `DIRECTORY` (Color: Accent/Primary).
    *   Los archivos SON `FILE` (Color: Neutral/Soft).
    *   No usar iconos gen√©ricos si se conoce el mimeType (ej: usar icono de c√≥digo para `.json`).

2.  **Jerarqu√≠a de Atenci√≥n**:
    *   El usuario mira el centro (Grid).
    *   El usuario *act√∫a* en la derecha (Inspector).
    *   El feedback (Logs) ocurre abajo, confirmando la acci√≥n.

---

## 5. Mockup Funcional (Especificaci√≥n del Inspector)

```json
// Estado: Selecci√≥n de Archivo "presupuesto.pdf"
{
  "panel_mode": "INSPECTOR",
  "header": {
    "icon": "üìÑ",
    "title": "presupuesto_2026.pdf",
    "badge": "PDF_DOCUMENT"
  },
  "properties": [
    { "label": "SIZE", "value": "2.4 MB" },
    { "label": "MODIFIED", "value": "Today, 10:42 AM" },
    { "label": "OWNER", "value": "javir@" }
  ],
  "actions": [
    { "label": "DOWNLOAD", "icon": "‚¨áÔ∏è", "intent": "PRIMARY" },
    { "label": "RENAME",   "icon": "‚úèÔ∏è", "intent": "NEUTRAL" },
    { "label": "MOVE",     "icon": "‚ÜóÔ∏è", "intent": "NEUTRAL" },
    { "label": "DELETE",   "icon": "üóëÔ∏è", "intent": "DESTRUCTIVE" }
  ]
}
```
Arquitectura Implementada:
VaultEngine (UI)
    ‚Üì execute('DELETE_VAULT_ITEM', payload)
AxiomaticStore (State Manager)
    ‚Üì adapter.call('drive', 'deleteItem', payload)
SovereignAdapter (Bridge)
    ‚Üì google.script.run.drive_deleteItem(payload)
DriveAdapter.gs (Backend)
    ‚Üì DriveApp.getFileById(id).setTrashed(true)
Google Drive API
Flujo de Interacci√≥n:
Usuario hace clic en archivo ‚Üí Selecci√≥n visual (borde accent)
Inspector muestra metadata ‚Üí Nombre, tama√±o, MIME, fecha
Usuario hace clic en DELETE ‚Üí Confirmaci√≥n nativa
Usuario confirma ‚Üí Llamada al Store ‚Üí Backend ‚Üí Drive API
Respuesta exitosa ‚Üí Archivo removido del vault + Log de √©xito