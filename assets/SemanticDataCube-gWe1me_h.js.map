{"version":3,"file":"SemanticDataCube-gWe1me_h.js","sources":["../../src/modules/Nivel_1_Views/OMD-09_ISK/components/SemanticDataCube.jsx"],"sourcesContent":["/**\n * modules/isk/components/SemanticDataCube.jsx\n * \n * DHARMA: Cubo de Datos SemÃ¡nticos con Drag & Drop para Bindings.\n * \n * ZONA A: Navigator - Lista de variables disponibles desde MCEP.\n */\n\nimport React, { useState, useEffect } from 'react';\nimport './SemanticDataCube.css';\n\nexport function SemanticDataCube() {\n    const [capabilities, setCapabilities] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const [draggedVariable, setDraggedVariable] = useState(null);\n\n    useEffect(() => {\n        fetchCapabilities();\n    }, []);\n\n    async function fetchCapabilities() {\n        try {\n            const response = await fetch('/api/indra/getMCEPManifest', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' }\n            });\n\n            if (!response.ok) {\n                // FALLBACK: Mock Data for Local Development (\"First Light\")\n                console.warn(\"[SemanticDataCube] API unavailable, using Holodeck Simulation.\");\n                setCapabilities(MOCK_CAPABILITIES);\n                setLoading(false);\n                return;\n            }\n\n            const data = await response.json();\n            setCapabilities(data.tools || []);\n            setLoading(false);\n        } catch (err) {\n            // FALLBACK: Mock Data for Network Errors\n            console.warn(\"[SemanticDataCube] Network error, engaging Holodeck Simulation.\", err);\n            setCapabilities(MOCK_CAPABILITIES);\n            setLoading(false);\n        }\n    }\n\n    // Datos simulados para \"Primera Luz\"\n    const MOCK_CAPABILITIES = [\n        { function: { name: \"gravity_control\", description: \"Control universal gravitational constant (G)\" } },\n        { function: { name: \"time_dilation\", description: \"Adjust local temporal flow rate\" } },\n        { function: { name: \"quantum_flux\", description: \"Probability amplitude of spatial nodes\" } },\n        { function: { name: \"entity_spawner\", description: \"Instantiate archetype entities in Zone B\" } },\n        { function: { name: \"light_intensity\", description: \"Global illumination flux (Lumens)\" } }\n    ];\n\n    function handleDragStart(variable) {\n        setDraggedVariable(variable);\n        console.log('[SemanticDataCube] Drag started:', variable);\n    }\n\n    function handleDragEnd() {\n        setDraggedVariable(null);\n        console.log('[SemanticDataCube] Drag ended');\n    }\n\n    if (loading) {\n        return (\n            <div className=\"semantic-data-cube\">\n                <div className=\"cube-header\">\n                    <h3>ðŸ“Š Data Cube</h3>\n                </div>\n                <div className=\"cube-loading\">Loading capabilities...</div>\n            </div>\n        );\n    }\n\n    if (error) {\n        return (\n            <div className=\"semantic-data-cube\">\n                <div className=\"cube-header\">\n                    <h3>ðŸ“Š Data Cube</h3>\n                </div>\n                <div className=\"cube-error\">Error: {error}</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"semantic-data-cube\">\n            <div className=\"cube-header\">\n                <h3>ðŸ“Š Data Cube</h3>\n                <span className=\"cube-count\">{capabilities.length} variables</span>\n            </div>\n\n            <div className=\"cube-search\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search variables...\"\n                    className=\"cube-search-input\"\n                />\n            </div>\n\n            <div className=\"cube-variables\">\n                {capabilities.map((cap, index) => (\n                    <div\n                        key={index}\n                        className={`cube-variable ${draggedVariable === cap ? 'dragging' : ''}`}\n                        draggable\n                        onDragStart={() => handleDragStart(cap)}\n                        onDragEnd={handleDragEnd}\n                    >\n                        <span className=\"variable-icon\">ðŸ”—</span>\n                        <div className=\"variable-info\">\n                            <div className=\"variable-name\">{cap.function?.name || 'Unknown'}</div>\n                            <div className=\"variable-description\">\n                                {cap.function?.description || 'No description'}\n                            </div>\n                        </div>\n                    </div>\n                ))}\n            </div>\n\n            {capabilities.length === 0 && (\n                <div className=\"cube-empty\">\n                    No capabilities available. Check Core connection.\n                </div>\n            )}\n        </div>\n    );\n}\n\n// Metadata para INDRACore alignment\nSemanticDataCube.metadata = {\n    archetype: 'SENSOR',\n    semantic_intent: 'PROBE',\n    description: 'Semantic Data Cube with drag & drop for variable bindings'\n};\n\n\n\n"],"names":["SemanticDataCube","capabilities","setCapabilities","useState","loading","setLoading","error","setError","draggedVariable","setDraggedVariable","useEffect","fetchCapabilities","response","MOCK_CAPABILITIES","data","err","handleDragStart","variable","handleDragEnd","jsxs","jsx","cap","index","_a","_b"],"mappings":"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"}