import{r as a,j as t}from"./index-Bm9IvC3F.js";const N=()=>{const[l,d]=a.useState([]),[r,n]=a.useState(null),[p,c]=a.useState(1),[o,y]=a.useState("INFINITE"),h=a.useRef(null);a.useEffect(()=>{const e=s=>{const{type:i,x:m,y:v}=s.detail,x={id:`ent_${Date.now()}`,type:i,x:m||100,y:v||100,w:120,h:80,fill:"var(--accent-primary)",label:`New ${i}`,opacity:.9,links:[]};d(u=>[...u,x])};return window.addEventListener("isk-spawn-entity",e),()=>window.removeEventListener("isk-spawn-entity",e)},[l.length]);const w=e=>{n(e);const s=l.find(i=>i.id===e);window.dispatchEvent(new CustomEvent("isk-entity-selected",{detail:{id:s.id,type:s.type,pivots:{GEOMETRY:{transform:{x:s.x,y:s.y,z:0},dimension:{w:s.w,h:s.h},style:{fill:s.fill,opacity:s.opacity}},REACTION:{logic:{label:s.label},links:s.links},ASSETS:{image:{src:""}}}}}))};return t.jsxs("div",{className:`spatial-stage ${o.toLowerCase()}`,ref:h,onClick:()=>n(null),children:[t.jsx("div",{className:"canvas-grid-overlay"}),t.jsx("div",{className:"entities-layer",style:{transform:`scale(${p})`},children:l.map(e=>t.jsx("div",{className:`spatial-entity ${e.type.toLowerCase()} ${r===e.id?"active":""}`,onClick:s=>{s.stopPropagation(),w(e.id)},style:{left:e.x,top:e.y,width:e.w,height:e.h,backgroundColor:e.fill,opacity:e.opacity},children:t.jsx("span",{className:"entity-label",children:e.label})},e.id))}),t.jsxs("div",{className:"canvas-viewport-hud glass",children:[t.jsxs("span",{className:"mode-indicator",children:[o," VIEW"]}),t.jsxs("div",{className:"hud-controls",children:[t.jsx("button",{onClick:()=>c(e=>Math.min(e+.1,2)),children:"+"}),t.jsx("button",{onClick:()=>c(e=>Math.max(e-.1,.5)),children:"-"}),t.jsx("button",{onClick:()=>y(e=>e==="INFINITE"?"PAGED":"INFINITE"),children:"âš¡"})]})]})]})};export{N as SpatialCanvas,N as default};
//# sourceMappingURL=SpatialCanvas-DlHenAF1.js.map
