const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SemanticDataCube-BSLzXMtx.js","assets/SemanticDataCube-eP7qemwd.css","assets/SpatialCanvas-DlHenAF1.js","assets/SpatialCanvas-MojIPDI7.css"])))=>i.map(i=>d[i]);
var Yd=Object.defineProperty;var Hd=(e,t,r)=>t in e?Yd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ia=(e,t,r)=>Hd(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();function Wd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fc={exports:{}},Ys={},hc={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dn=Symbol.for("react.element"),Kd=Symbol.for("react.portal"),Qd=Symbol.for("react.fragment"),Xd=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),qd=Symbol.for("react.provider"),Zd=Symbol.for("react.context"),ep=Symbol.for("react.forward_ref"),tp=Symbol.for("react.suspense"),rp=Symbol.for("react.memo"),np=Symbol.for("react.lazy"),$i=Symbol.iterator;function sp(e){return e===null||typeof e!="object"?null:(e=$i&&e[$i]||e["@@iterator"],typeof e=="function"?e:null)}var mc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xc=Object.assign,gc={};function zr(e,t,r){this.props=e,this.context=t,this.refs=gc,this.updater=r||mc}zr.prototype.isReactComponent={};zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vc(){}vc.prototype=zr.prototype;function Uo(e,t,r){this.props=e,this.context=t,this.refs=gc,this.updater=r||mc}var Fo=Uo.prototype=new vc;Fo.constructor=Uo;xc(Fo,zr.prototype);Fo.isPureReactComponent=!0;var Yi=Array.isArray,yc=Object.prototype.hasOwnProperty,Bo={current:null},Ec={key:!0,ref:!0,__self:!0,__source:!0};function Sc(e,t,r){var n,s={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)yc.call(t,n)&&!Ec.hasOwnProperty(n)&&(s[n]=t[n]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)s[n]===void 0&&(s[n]=c[n]);return{$$typeof:Dn,type:e,key:o,ref:i,props:s,_owner:Bo.current}}function ap(e,t){return{$$typeof:Dn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Dn}function op(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Hi=/\/+/g;function la(e,t){return typeof e=="object"&&e!==null&&e.key!=null?op(""+e.key):t.toString(36)}function is(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Dn:case Kd:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+la(i,0):n,Yi(s)?(r="",e!=null&&(r=e.replace(Hi,"$&/")+"/"),is(s,t,r,"",function(u){return u})):s!=null&&(zo(s)&&(s=ap(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Hi,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",Yi(e))for(var c=0;c<e.length;c++){o=e[c];var l=n+la(o,c);i+=is(o,t,r,l,s)}else if(l=sp(e),typeof l=="function")for(e=l.call(e),c=0;!(o=e.next()).done;)o=o.value,l=n+la(o,c++),i+=is(o,t,r,l,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Bn(e,t,r){if(e==null)return e;var n=[],s=0;return is(e,n,"","",function(o){return t.call(r,o,s++)}),n}function ip(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Re={current:null},ls={transition:null},lp={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ls,ReactCurrentOwner:Bo};function Nc(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Bn,forEach:function(e,t,r){Bn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Bn(e,function(){t++}),t},toArray:function(e){return Bn(e,function(t){return t})||[]},only:function(e){if(!zo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Component=zr;Q.Fragment=Qd;Q.Profiler=Jd;Q.PureComponent=Uo;Q.StrictMode=Xd;Q.Suspense=tp;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lp;Q.act=Nc;Q.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=xc({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Bo.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)yc.call(t,l)&&!Ec.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&c!==void 0?c[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:Dn,type:e.type,key:s,ref:o,props:n,_owner:i}};Q.createContext=function(e){return e={$$typeof:Zd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qd,_context:e},e.Consumer=e};Q.createElement=Sc;Q.createFactory=function(e){var t=Sc.bind(null,e);return t.type=e,t};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:ep,render:e}};Q.isValidElement=zo;Q.lazy=function(e){return{$$typeof:np,_payload:{_status:-1,_result:e},_init:ip}};Q.memo=function(e,t){return{$$typeof:rp,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=ls.transition;ls.transition={};try{e()}finally{ls.transition=t}};Q.unstable_act=Nc;Q.useCallback=function(e,t){return Re.current.useCallback(e,t)};Q.useContext=function(e){return Re.current.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e){return Re.current.useDeferredValue(e)};Q.useEffect=function(e,t){return Re.current.useEffect(e,t)};Q.useId=function(){return Re.current.useId()};Q.useImperativeHandle=function(e,t,r){return Re.current.useImperativeHandle(e,t,r)};Q.useInsertionEffect=function(e,t){return Re.current.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return Re.current.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return Re.current.useMemo(e,t)};Q.useReducer=function(e,t,r){return Re.current.useReducer(e,t,r)};Q.useRef=function(e){return Re.current.useRef(e)};Q.useState=function(e){return Re.current.useState(e)};Q.useSyncExternalStore=function(e,t,r){return Re.current.useSyncExternalStore(e,t,r)};Q.useTransition=function(){return Re.current.useTransition()};Q.version="18.3.1";hc.exports=Q;var w=hc.exports;const xe=Wd(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp=w,up=Symbol.for("react.element"),dp=Symbol.for("react.fragment"),pp=Object.prototype.hasOwnProperty,fp=cp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hp={key:!0,ref:!0,__self:!0,__source:!0};function Ac(e,t,r){var n,s={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)pp.call(t,n)&&!hp.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:up,type:e,key:o,ref:i,props:s,_owner:fp.current}}Ys.Fragment=dp;Ys.jsx=Ac;Ys.jsxs=Ac;fc.exports=Ys;var a=fc.exports,Ga={},bc={exports:{}},Ge={},Tc={exports:{}},_c={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,U){var D=R.length;R.push(U);e:for(;0<D;){var G=D-1>>>1,B=R[G];if(0<s(B,U))R[G]=U,R[D]=B,D=G;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var U=R[0],D=R.pop();if(D!==U){R[0]=D;e:for(var G=0,B=R.length,W=B>>>1;G<W;){var re=2*(G+1)-1,ne=R[re],se=re+1,ve=R[se];if(0>s(ne,D))se<B&&0>s(ve,ne)?(R[G]=ve,R[se]=D,G=se):(R[G]=ne,R[re]=D,G=re);else if(se<B&&0>s(ve,D))R[G]=ve,R[se]=D,G=se;else break e}}return U}function s(R,U){var D=R.sortIndex-U.sortIndex;return D!==0?D:R.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var l=[],u=[],f=1,h=null,m=3,g=!1,E=!1,N=!1,b=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(R){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=R)n(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=r(u)}}function S(R){if(N=!1,v(R),!E)if(r(l)!==null)E=!0,O(y);else{var U=r(u);U!==null&&V(S,U.startTime-R)}}function y(R,U){E=!1,N&&(N=!1,d(L),L=-1),g=!0;var D=m;try{for(v(U),h=r(l);h!==null&&(!(h.expirationTime>U)||R&&!M());){var G=h.callback;if(typeof G=="function"){h.callback=null,m=h.priorityLevel;var B=G(h.expirationTime<=U);U=e.unstable_now(),typeof B=="function"?h.callback=B:h===r(l)&&n(l),v(U)}else n(l);h=r(l)}if(h!==null)var W=!0;else{var re=r(u);re!==null&&V(S,re.startTime-U),W=!1}return W}finally{h=null,m=D,g=!1}}var A=!1,_=null,L=-1,z=5,C=-1;function M(){return!(e.unstable_now()-C<z)}function k(){if(_!==null){var R=e.unstable_now();C=R;var U=!0;try{U=_(!0,R)}finally{U?x():(A=!1,_=null)}}else A=!1}var x;if(typeof p=="function")x=function(){p(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,I=T.port2;T.port1.onmessage=k,x=function(){I.postMessage(null)}}else x=function(){b(k,0)};function O(R){_=R,A||(A=!0,x())}function V(R,U){L=b(function(){R(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){E||g||(E=!0,O(y))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var D=m;m=U;try{return R()}finally{m=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var D=m;m=R;try{return U()}finally{m=D}},e.unstable_scheduleCallback=function(R,U,D){var G=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?G+D:G):D=G,R){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=D+B,R={id:f++,callback:U,priorityLevel:R,startTime:D,expirationTime:B,sortIndex:-1},D>G?(R.sortIndex=D,t(u,R),r(l)===null&&R===r(u)&&(N?(d(L),L=-1):N=!0,V(S,D-G))):(R.sortIndex=B,t(l,R),E||g||(E=!0,O(y))),R},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(R){var U=m;return function(){var D=m;m=U;try{return R.apply(this,arguments)}finally{m=D}}}})(_c);Tc.exports=_c;var mp=Tc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=w,ze=mp;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cc=new Set,gn={};function ur(e,t){Dr(e,t),Dr(e+"Capture",t)}function Dr(e,t){for(gn[e]=t,e=0;e<t.length;e++)Cc.add(t[e])}var Nt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=Object.prototype.hasOwnProperty,gp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wi={},Ki={};function vp(e){return Va.call(Ki,e)?!0:Va.call(Wi,e)?!1:gp.test(e)?Ki[e]=!0:(Wi[e]=!0,!1)}function yp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ep(e,t,r,n){if(t===null||typeof t>"u"||yp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,r,n,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Go=/[\-:]([a-z])/g;function Vo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Go,Vo);Ae[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Go,Vo);Ae[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Go,Vo);Ae[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function $o(e,t,r,n){var s=Ae.hasOwnProperty(t)?Ae[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ep(t,r,s,n)&&(r=null),n||s===null?vp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var _t=xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zn=Symbol.for("react.element"),mr=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),Yo=Symbol.for("react.strict_mode"),$a=Symbol.for("react.profiler"),Ic=Symbol.for("react.provider"),wc=Symbol.for("react.context"),Ho=Symbol.for("react.forward_ref"),Ya=Symbol.for("react.suspense"),Ha=Symbol.for("react.suspense_list"),Wo=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Rc=Symbol.for("react.offscreen"),Qi=Symbol.iterator;function Yr(e){return e===null||typeof e!="object"?null:(e=Qi&&e[Qi]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Object.assign,ca;function rn(e){if(ca===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ca=t&&t[1]||""}return`
`+ca+e}var ua=!1;function da(e,t){if(!e||ua)return"";ua=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),i=s.length-1,c=o.length-1;1<=i&&0<=c&&s[i]!==o[c];)c--;for(;1<=i&&0<=c;i--,c--)if(s[i]!==o[c]){if(i!==1||c!==1)do if(i--,c--,0>c||s[i]!==o[c]){var l=`
`+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=c);break}}}finally{ua=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?rn(e):""}function Sp(e){switch(e.tag){case 5:return rn(e.type);case 16:return rn("Lazy");case 13:return rn("Suspense");case 19:return rn("SuspenseList");case 0:case 2:case 15:return e=da(e.type,!1),e;case 11:return e=da(e.type.render,!1),e;case 1:return e=da(e.type,!0),e;default:return""}}function Wa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xr:return"Fragment";case mr:return"Portal";case $a:return"Profiler";case Yo:return"StrictMode";case Ya:return"Suspense";case Ha:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wc:return(e.displayName||"Context")+".Consumer";case Ic:return(e._context.displayName||"Context")+".Provider";case Ho:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wo:return t=e.displayName||null,t!==null?t:Wa(e.type)||"Memo";case wt:t=e._payload,e=e._init;try{return Wa(e(t))}catch{}}return null}function Np(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wa(t);case 8:return t===Yo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $t(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ap(e){var t=Oc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gn(e){e._valueTracker||(e._valueTracker=Ap(e))}function Lc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Oc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ka(e,t){var r=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xi(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=$t(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jc(e,t){t=t.checked,t!=null&&$o(e,"checked",t,!1)}function Qa(e,t){jc(e,t);var r=$t(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xa(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xa(e,t.type,$t(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ji(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xa(e,t,r){(t!=="number"||Ss(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var nn=Array.isArray;function Cr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+$t(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ja(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qi(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(F(92));if(nn(r)){if(1<r.length)throw Error(F(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:$t(r)}}function Dc(e,t){var r=$t(t.value),n=$t(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Zi(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vn,Pc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ln={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bp=["Webkit","ms","Moz","O"];Object.keys(ln).forEach(function(e){bp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ln[t]=ln[e]})});function Mc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ln.hasOwnProperty(e)&&ln[e]?(""+t).trim():t+"px"}function Uc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Mc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Tp=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Za(e,t){if(t){if(Tp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function eo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var to=null;function Ko(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ro=null,Ir=null,wr=null;function el(e){if(e=Mn(e)){if(typeof ro!="function")throw Error(F(280));var t=e.stateNode;t&&(t=Xs(t),ro(e.stateNode,e.type,t))}}function Fc(e){Ir?wr?wr.push(e):wr=[e]:Ir=e}function Bc(){if(Ir){var e=Ir,t=wr;if(wr=Ir=null,el(e),t)for(e=0;e<t.length;e++)el(t[e])}}function zc(e,t){return e(t)}function Gc(){}var pa=!1;function Vc(e,t,r){if(pa)return e(t,r);pa=!0;try{return zc(e,t,r)}finally{pa=!1,(Ir!==null||wr!==null)&&(Gc(),Bc())}}function yn(e,t){var r=e.stateNode;if(r===null)return null;var n=Xs(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(F(231,t,typeof r));return r}var no=!1;if(Nt)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){no=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{no=!1}function _p(e,t,r,n,s,o,i,c,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var cn=!1,Ns=null,As=!1,so=null,Cp={onError:function(e){cn=!0,Ns=e}};function Ip(e,t,r,n,s,o,i,c,l){cn=!1,Ns=null,_p.apply(Cp,arguments)}function wp(e,t,r,n,s,o,i,c,l){if(Ip.apply(this,arguments),cn){if(cn){var u=Ns;cn=!1,Ns=null}else throw Error(F(198));As||(As=!0,so=u)}}function dr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $c(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tl(e){if(dr(e)!==e)throw Error(F(188))}function Rp(e){var t=e.alternate;if(!t){if(t=dr(e),t===null)throw Error(F(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return tl(s),e;if(o===n)return tl(s),t;o=o.sibling}throw Error(F(188))}if(r.return!==n.return)r=s,n=o;else{for(var i=!1,c=s.child;c;){if(c===r){i=!0,r=s,n=o;break}if(c===n){i=!0,n=s,r=o;break}c=c.sibling}if(!i){for(c=o.child;c;){if(c===r){i=!0,r=o,n=s;break}if(c===n){i=!0,n=o,r=s;break}c=c.sibling}if(!i)throw Error(F(189))}}if(r.alternate!==n)throw Error(F(190))}if(r.tag!==3)throw Error(F(188));return r.stateNode.current===r?e:t}function Yc(e){return e=Rp(e),e!==null?Hc(e):null}function Hc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Hc(e);if(t!==null)return t;e=e.sibling}return null}var Wc=ze.unstable_scheduleCallback,rl=ze.unstable_cancelCallback,Op=ze.unstable_shouldYield,Lp=ze.unstable_requestPaint,pe=ze.unstable_now,jp=ze.unstable_getCurrentPriorityLevel,Qo=ze.unstable_ImmediatePriority,Kc=ze.unstable_UserBlockingPriority,bs=ze.unstable_NormalPriority,Dp=ze.unstable_LowPriority,Qc=ze.unstable_IdlePriority,Hs=null,pt=null;function kp(e){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Hs,e,void 0,(e.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:Up,Pp=Math.log,Mp=Math.LN2;function Up(e){return e>>>=0,e===0?32:31-(Pp(e)/Mp|0)|0}var $n=64,Yn=4194304;function sn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ts(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var c=i&~s;c!==0?n=sn(c):(o&=i,o!==0&&(n=sn(o)))}else i=r&~s,i!==0?n=sn(i):o!==0&&(n=sn(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-tt(t),s=1<<r,n|=e[r],t&=~s;return n}function Fp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-tt(o),c=1<<i,l=s[i];l===-1?(!(c&r)||c&n)&&(s[i]=Fp(c,t)):l<=t&&(e.expiredLanes|=c),o&=~c}}function ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xc(){var e=$n;return $n<<=1,!($n&4194240)&&($n=64),e}function fa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function kn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tt(t),e[t]=r}function zp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-tt(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function Xo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-tt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var J=0;function Jc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qc,Jo,Zc,eu,tu,oo=!1,Hn=[],Pt=null,Mt=null,Ut=null,En=new Map,Sn=new Map,Ot=[],Gp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nl(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":En.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(t.pointerId)}}function Wr(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Mn(t),t!==null&&Jo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Vp(e,t,r,n,s){switch(t){case"focusin":return Pt=Wr(Pt,e,t,r,n,s),!0;case"dragenter":return Mt=Wr(Mt,e,t,r,n,s),!0;case"mouseover":return Ut=Wr(Ut,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return En.set(o,Wr(En.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,Sn.set(o,Wr(Sn.get(o)||null,e,t,r,n,s)),!0}return!1}function ru(e){var t=Zt(e.target);if(t!==null){var r=dr(t);if(r!==null){if(t=r.tag,t===13){if(t=$c(r),t!==null){e.blockedOn=t,tu(e.priority,function(){Zc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=io(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);to=n,r.target.dispatchEvent(n),to=null}else return t=Mn(r),t!==null&&Jo(t),e.blockedOn=r,!1;t.shift()}return!0}function sl(e,t,r){cs(e)&&r.delete(t)}function $p(){oo=!1,Pt!==null&&cs(Pt)&&(Pt=null),Mt!==null&&cs(Mt)&&(Mt=null),Ut!==null&&cs(Ut)&&(Ut=null),En.forEach(sl),Sn.forEach(sl)}function Kr(e,t){e.blockedOn===t&&(e.blockedOn=null,oo||(oo=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,$p)))}function Nn(e){function t(s){return Kr(s,e)}if(0<Hn.length){Kr(Hn[0],e);for(var r=1;r<Hn.length;r++){var n=Hn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Pt!==null&&Kr(Pt,e),Mt!==null&&Kr(Mt,e),Ut!==null&&Kr(Ut,e),En.forEach(t),Sn.forEach(t),r=0;r<Ot.length;r++)n=Ot[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ot.length&&(r=Ot[0],r.blockedOn===null);)ru(r),r.blockedOn===null&&Ot.shift()}var Rr=_t.ReactCurrentBatchConfig,_s=!0;function Yp(e,t,r,n){var s=J,o=Rr.transition;Rr.transition=null;try{J=1,qo(e,t,r,n)}finally{J=s,Rr.transition=o}}function Hp(e,t,r,n){var s=J,o=Rr.transition;Rr.transition=null;try{J=4,qo(e,t,r,n)}finally{J=s,Rr.transition=o}}function qo(e,t,r,n){if(_s){var s=io(e,t,r,n);if(s===null)Aa(e,t,n,Cs,r),nl(e,n);else if(Vp(s,e,t,r,n))n.stopPropagation();else if(nl(e,n),t&4&&-1<Gp.indexOf(e)){for(;s!==null;){var o=Mn(s);if(o!==null&&qc(o),o=io(e,t,r,n),o===null&&Aa(e,t,n,Cs,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Aa(e,t,n,null,r)}}var Cs=null;function io(e,t,r,n){if(Cs=null,e=Ko(n),e=Zt(e),e!==null)if(t=dr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$c(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cs=e,null}function nu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jp()){case Qo:return 1;case Kc:return 4;case bs:case Dp:return 16;case Qc:return 536870912;default:return 16}default:return 16}}var jt=null,Zo=null,us=null;function su(){if(us)return us;var e,t=Zo,r=t.length,n,s="value"in jt?jt.value:jt.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[o-n];n++);return us=s.slice(e,1<n?1-n:void 0)}function ds(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wn(){return!0}function al(){return!1}function Ve(e){function t(r,n,s,o,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wn:al,this.isPropagationStopped=al,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),t}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ei=Ve(Gr),Pn=ue({},Gr,{view:0,detail:0}),Wp=Ve(Pn),ha,ma,Qr,Ws=ue({},Pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ti,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(ha=e.screenX-Qr.screenX,ma=e.screenY-Qr.screenY):ma=ha=0,Qr=e),ha)},movementY:function(e){return"movementY"in e?e.movementY:ma}}),ol=Ve(Ws),Kp=ue({},Ws,{dataTransfer:0}),Qp=Ve(Kp),Xp=ue({},Pn,{relatedTarget:0}),xa=Ve(Xp),Jp=ue({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),qp=Ve(Jp),Zp=ue({},Gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ef=Ve(Zp),tf=ue({},Gr,{data:0}),il=Ve(tf),rf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function af(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sf[e])?!!t[e]:!1}function ti(){return af}var of=ue({},Pn,{key:function(e){if(e.key){var t=rf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ti,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lf=Ve(of),cf=ue({},Ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Ve(cf),uf=ue({},Pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ti}),df=Ve(uf),pf=ue({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ff=Ve(pf),hf=ue({},Ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mf=Ve(hf),xf=[9,13,27,32],ri=Nt&&"CompositionEvent"in window,un=null;Nt&&"documentMode"in document&&(un=document.documentMode);var gf=Nt&&"TextEvent"in window&&!un,au=Nt&&(!ri||un&&8<un&&11>=un),cl=" ",ul=!1;function ou(e,t){switch(e){case"keyup":return xf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gr=!1;function vf(e,t){switch(e){case"compositionend":return iu(t);case"keypress":return t.which!==32?null:(ul=!0,cl);case"textInput":return e=t.data,e===cl&&ul?null:e;default:return null}}function yf(e,t){if(gr)return e==="compositionend"||!ri&&ou(e,t)?(e=su(),us=Zo=jt=null,gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return au&&t.locale!=="ko"?null:t.data;default:return null}}var Ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ef[e.type]:t==="textarea"}function lu(e,t,r,n){Fc(n),t=Is(t,"onChange"),0<t.length&&(r=new ei("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var dn=null,An=null;function Sf(e){yu(e,0)}function Ks(e){var t=Er(e);if(Lc(t))return e}function Nf(e,t){if(e==="change")return t}var cu=!1;if(Nt){var ga;if(Nt){var va="oninput"in document;if(!va){var pl=document.createElement("div");pl.setAttribute("oninput","return;"),va=typeof pl.oninput=="function"}ga=va}else ga=!1;cu=ga&&(!document.documentMode||9<document.documentMode)}function fl(){dn&&(dn.detachEvent("onpropertychange",uu),An=dn=null)}function uu(e){if(e.propertyName==="value"&&Ks(An)){var t=[];lu(t,An,e,Ko(e)),Vc(Sf,t)}}function Af(e,t,r){e==="focusin"?(fl(),dn=t,An=r,dn.attachEvent("onpropertychange",uu)):e==="focusout"&&fl()}function bf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ks(An)}function Tf(e,t){if(e==="click")return Ks(t)}function _f(e,t){if(e==="input"||e==="change")return Ks(t)}function Cf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nt=typeof Object.is=="function"?Object.is:Cf;function bn(e,t){if(nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Va.call(t,s)||!nt(e[s],t[s]))return!1}return!0}function hl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ml(e,t){var r=hl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hl(r)}}function du(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?du(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pu(){for(var e=window,t=Ss();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ss(e.document)}return t}function ni(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function If(e){var t=pu(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&du(r.ownerDocument.documentElement,r)){if(n!==null&&ni(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=ml(r,o);var i=ml(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wf=Nt&&"documentMode"in document&&11>=document.documentMode,vr=null,lo=null,pn=null,co=!1;function xl(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;co||vr==null||vr!==Ss(n)||(n=vr,"selectionStart"in n&&ni(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pn&&bn(pn,n)||(pn=n,n=Is(lo,"onSelect"),0<n.length&&(t=new ei("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vr)))}function Kn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yr={animationend:Kn("Animation","AnimationEnd"),animationiteration:Kn("Animation","AnimationIteration"),animationstart:Kn("Animation","AnimationStart"),transitionend:Kn("Transition","TransitionEnd")},ya={},fu={};Nt&&(fu=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Qs(e){if(ya[e])return ya[e];if(!yr[e])return e;var t=yr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in fu)return ya[e]=t[r];return e}var hu=Qs("animationend"),mu=Qs("animationiteration"),xu=Qs("animationstart"),gu=Qs("transitionend"),vu=new Map,gl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ht(e,t){vu.set(e,t),ur(t,[e])}for(var Ea=0;Ea<gl.length;Ea++){var Sa=gl[Ea],Rf=Sa.toLowerCase(),Of=Sa[0].toUpperCase()+Sa.slice(1);Ht(Rf,"on"+Of)}Ht(hu,"onAnimationEnd");Ht(mu,"onAnimationIteration");Ht(xu,"onAnimationStart");Ht("dblclick","onDoubleClick");Ht("focusin","onFocus");Ht("focusout","onBlur");Ht(gu,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var an="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lf=new Set("cancel close invalid load scroll toggle".split(" ").concat(an));function vl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,wp(n,t,void 0,e),e.currentTarget=null}function yu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var c=n[i],l=c.instance,u=c.currentTarget;if(c=c.listener,l!==o&&s.isPropagationStopped())break e;vl(s,c,u),o=l}else for(i=0;i<n.length;i++){if(c=n[i],l=c.instance,u=c.currentTarget,c=c.listener,l!==o&&s.isPropagationStopped())break e;vl(s,c,u),o=l}}}if(As)throw e=so,As=!1,so=null,e}function ae(e,t){var r=t[mo];r===void 0&&(r=t[mo]=new Set);var n=e+"__bubble";r.has(n)||(Eu(t,e,2,!1),r.add(n))}function Na(e,t,r){var n=0;t&&(n|=4),Eu(r,e,n,t)}var Qn="_reactListening"+Math.random().toString(36).slice(2);function Tn(e){if(!e[Qn]){e[Qn]=!0,Cc.forEach(function(r){r!=="selectionchange"&&(Lf.has(r)||Na(r,!1,e),Na(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qn]||(t[Qn]=!0,Na("selectionchange",!1,t))}}function Eu(e,t,r,n){switch(nu(t)){case 1:var s=Yp;break;case 4:s=Hp;break;default:s=qo}r=s.bind(null,t,r,e),s=void 0,!no||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Aa(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var c=n.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;i=i.return}for(;c!==null;){if(i=Zt(c),i===null)return;if(l=i.tag,l===5||l===6){n=o=i;continue e}c=c.parentNode}}n=n.return}Vc(function(){var u=o,f=Ko(r),h=[];e:{var m=vu.get(e);if(m!==void 0){var g=ei,E=e;switch(e){case"keypress":if(ds(r)===0)break e;case"keydown":case"keyup":g=lf;break;case"focusin":E="focus",g=xa;break;case"focusout":E="blur",g=xa;break;case"beforeblur":case"afterblur":g=xa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Qp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=df;break;case hu:case mu:case xu:g=qp;break;case gu:g=ff;break;case"scroll":g=Wp;break;case"wheel":g=mf;break;case"copy":case"cut":case"paste":g=ef;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ll}var N=(t&4)!==0,b=!N&&e==="scroll",d=N?m!==null?m+"Capture":null:m;N=[];for(var p=u,v;p!==null;){v=p;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,d!==null&&(S=yn(p,d),S!=null&&N.push(_n(p,S,v)))),b)break;p=p.return}0<N.length&&(m=new g(m,E,null,r,f),h.push({event:m,listeners:N}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==to&&(E=r.relatedTarget||r.fromElement)&&(Zt(E)||E[At]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(E=r.relatedTarget||r.toElement,g=u,E=E?Zt(E):null,E!==null&&(b=dr(E),E!==b||E.tag!==5&&E.tag!==6)&&(E=null)):(g=null,E=u),g!==E)){if(N=ol,S="onMouseLeave",d="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(N=ll,S="onPointerLeave",d="onPointerEnter",p="pointer"),b=g==null?m:Er(g),v=E==null?m:Er(E),m=new N(S,p+"leave",g,r,f),m.target=b,m.relatedTarget=v,S=null,Zt(f)===u&&(N=new N(d,p+"enter",E,r,f),N.target=v,N.relatedTarget=b,S=N),b=S,g&&E)t:{for(N=g,d=E,p=0,v=N;v;v=hr(v))p++;for(v=0,S=d;S;S=hr(S))v++;for(;0<p-v;)N=hr(N),p--;for(;0<v-p;)d=hr(d),v--;for(;p--;){if(N===d||d!==null&&N===d.alternate)break t;N=hr(N),d=hr(d)}N=null}else N=null;g!==null&&yl(h,m,g,N,!1),E!==null&&b!==null&&yl(h,b,E,N,!0)}}e:{if(m=u?Er(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var y=Nf;else if(dl(m))if(cu)y=_f;else{y=bf;var A=Af}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(y=Tf);if(y&&(y=y(e,u))){lu(h,y,r,f);break e}A&&A(e,m,u),e==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&Xa(m,"number",m.value)}switch(A=u?Er(u):window,e){case"focusin":(dl(A)||A.contentEditable==="true")&&(vr=A,lo=u,pn=null);break;case"focusout":pn=lo=vr=null;break;case"mousedown":co=!0;break;case"contextmenu":case"mouseup":case"dragend":co=!1,xl(h,r,f);break;case"selectionchange":if(wf)break;case"keydown":case"keyup":xl(h,r,f)}var _;if(ri)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else gr?ou(e,r)&&(L="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(L="onCompositionStart");L&&(au&&r.locale!=="ko"&&(gr||L!=="onCompositionStart"?L==="onCompositionEnd"&&gr&&(_=su()):(jt=f,Zo="value"in jt?jt.value:jt.textContent,gr=!0)),A=Is(u,L),0<A.length&&(L=new il(L,e,null,r,f),h.push({event:L,listeners:A}),_?L.data=_:(_=iu(r),_!==null&&(L.data=_)))),(_=gf?vf(e,r):yf(e,r))&&(u=Is(u,"onBeforeInput"),0<u.length&&(f=new il("onBeforeInput","beforeinput",null,r,f),h.push({event:f,listeners:u}),f.data=_))}yu(h,t)})}function _n(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Is(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=yn(e,r),o!=null&&n.unshift(_n(e,o,s)),o=yn(e,t),o!=null&&n.push(_n(e,o,s))),e=e.return}return n}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yl(e,t,r,n,s){for(var o=t._reactName,i=[];r!==null&&r!==n;){var c=r,l=c.alternate,u=c.stateNode;if(l!==null&&l===n)break;c.tag===5&&u!==null&&(c=u,s?(l=yn(r,o),l!=null&&i.unshift(_n(r,l,c))):s||(l=yn(r,o),l!=null&&i.push(_n(r,l,c)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var jf=/\r\n?/g,Df=/\u0000|\uFFFD/g;function El(e){return(typeof e=="string"?e:""+e).replace(jf,`
`).replace(Df,"")}function Xn(e,t,r){if(t=El(t),El(e)!==t&&r)throw Error(F(425))}function ws(){}var uo=null,po=null;function fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ho=typeof setTimeout=="function"?setTimeout:void 0,kf=typeof clearTimeout=="function"?clearTimeout:void 0,Sl=typeof Promise=="function"?Promise:void 0,Pf=typeof queueMicrotask=="function"?queueMicrotask:typeof Sl<"u"?function(e){return Sl.resolve(null).then(e).catch(Mf)}:ho;function Mf(e){setTimeout(function(){throw e})}function ba(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Nn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Nn(t)}function Ft(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),dt="__reactFiber$"+Vr,Cn="__reactProps$"+Vr,At="__reactContainer$"+Vr,mo="__reactEvents$"+Vr,Uf="__reactListeners$"+Vr,Ff="__reactHandles$"+Vr;function Zt(e){var t=e[dt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[At]||r[dt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Nl(e);e!==null;){if(r=e[dt])return r;e=Nl(e)}return t}e=r,r=e.parentNode}return null}function Mn(e){return e=e[dt]||e[At],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Er(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function Xs(e){return e[Cn]||null}var xo=[],Sr=-1;function Wt(e){return{current:e}}function oe(e){0>Sr||(e.current=xo[Sr],xo[Sr]=null,Sr--)}function ee(e,t){Sr++,xo[Sr]=e.current,e.current=t}var Yt={},Ce=Wt(Yt),ke=Wt(!1),sr=Yt;function kr(e,t){var r=e.type.contextTypes;if(!r)return Yt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pe(e){return e=e.childContextTypes,e!=null}function Rs(){oe(ke),oe(Ce)}function Al(e,t,r){if(Ce.current!==Yt)throw Error(F(168));ee(Ce,t),ee(ke,r)}function Su(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(F(108,Np(e)||"Unknown",s));return ue({},r,n)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yt,sr=Ce.current,ee(Ce,e),ee(ke,ke.current),!0}function bl(e,t,r){var n=e.stateNode;if(!n)throw Error(F(169));r?(e=Su(e,t,sr),n.__reactInternalMemoizedMergedChildContext=e,oe(ke),oe(Ce),ee(Ce,e)):oe(ke),ee(ke,r)}var gt=null,Js=!1,Ta=!1;function Nu(e){gt===null?gt=[e]:gt.push(e)}function Bf(e){Js=!0,Nu(e)}function Kt(){if(!Ta&&gt!==null){Ta=!0;var e=0,t=J;try{var r=gt;for(J=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gt=null,Js=!1}catch(s){throw gt!==null&&(gt=gt.slice(e+1)),Wc(Qo,Kt),s}finally{J=t,Ta=!1}}return null}var Nr=[],Ar=0,Ls=null,js=0,$e=[],Ye=0,ar=null,vt=1,yt="";function Xt(e,t){Nr[Ar++]=js,Nr[Ar++]=Ls,Ls=e,js=t}function Au(e,t,r){$e[Ye++]=vt,$e[Ye++]=yt,$e[Ye++]=ar,ar=e;var n=vt;e=yt;var s=32-tt(n)-1;n&=~(1<<s),r+=1;var o=32-tt(t)+s;if(30<o){var i=s-s%5;o=(n&(1<<i)-1).toString(32),n>>=i,s-=i,vt=1<<32-tt(t)+s|r<<s|n,yt=o+e}else vt=1<<o|r<<s|n,yt=e}function si(e){e.return!==null&&(Xt(e,1),Au(e,1,0))}function ai(e){for(;e===Ls;)Ls=Nr[--Ar],Nr[Ar]=null,js=Nr[--Ar],Nr[Ar]=null;for(;e===ar;)ar=$e[--Ye],$e[Ye]=null,yt=$e[--Ye],$e[Ye]=null,vt=$e[--Ye],$e[Ye]=null}var Be=null,Fe=null,ie=!1,et=null;function bu(e,t){var r=He(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Tl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Be=e,Fe=Ft(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Be=e,Fe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ar!==null?{id:vt,overflow:yt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=He(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Be=e,Fe=null,!0):!1;default:return!1}}function go(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vo(e){if(ie){var t=Fe;if(t){var r=t;if(!Tl(e,t)){if(go(e))throw Error(F(418));t=Ft(r.nextSibling);var n=Be;t&&Tl(e,t)?bu(n,r):(e.flags=e.flags&-4097|2,ie=!1,Be=e)}}else{if(go(e))throw Error(F(418));e.flags=e.flags&-4097|2,ie=!1,Be=e}}}function _l(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Be=e}function Jn(e){if(e!==Be)return!1;if(!ie)return _l(e),ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fo(e.type,e.memoizedProps)),t&&(t=Fe)){if(go(e))throw Tu(),Error(F(418));for(;t;)bu(e,t),t=Ft(t.nextSibling)}if(_l(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Fe=Ft(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Fe=null}}else Fe=Be?Ft(e.stateNode.nextSibling):null;return!0}function Tu(){for(var e=Fe;e;)e=Ft(e.nextSibling)}function Pr(){Fe=Be=null,ie=!1}function oi(e){et===null?et=[e]:et.push(e)}var zf=_t.ReactCurrentBatchConfig;function Xr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(F(309));var n=r.stateNode}if(!n)throw Error(F(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var c=s.refs;i===null?delete c[o]:c[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(F(284));if(!r._owner)throw Error(F(290,e))}return e}function qn(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cl(e){var t=e._init;return t(e._payload)}function _u(e){function t(d,p){if(e){var v=d.deletions;v===null?(d.deletions=[p],d.flags|=16):v.push(p)}}function r(d,p){if(!e)return null;for(;p!==null;)t(d,p),p=p.sibling;return null}function n(d,p){for(d=new Map;p!==null;)p.key!==null?d.set(p.key,p):d.set(p.index,p),p=p.sibling;return d}function s(d,p){return d=Vt(d,p),d.index=0,d.sibling=null,d}function o(d,p,v){return d.index=v,e?(v=d.alternate,v!==null?(v=v.index,v<p?(d.flags|=2,p):v):(d.flags|=2,p)):(d.flags|=1048576,p)}function i(d){return e&&d.alternate===null&&(d.flags|=2),d}function c(d,p,v,S){return p===null||p.tag!==6?(p=La(v,d.mode,S),p.return=d,p):(p=s(p,v),p.return=d,p)}function l(d,p,v,S){var y=v.type;return y===xr?f(d,p,v.props.children,S,v.key):p!==null&&(p.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===wt&&Cl(y)===p.type)?(S=s(p,v.props),S.ref=Xr(d,p,v),S.return=d,S):(S=vs(v.type,v.key,v.props,null,d.mode,S),S.ref=Xr(d,p,v),S.return=d,S)}function u(d,p,v,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=ja(v,d.mode,S),p.return=d,p):(p=s(p,v.children||[]),p.return=d,p)}function f(d,p,v,S,y){return p===null||p.tag!==7?(p=nr(v,d.mode,S,y),p.return=d,p):(p=s(p,v),p.return=d,p)}function h(d,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=La(""+p,d.mode,v),p.return=d,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case zn:return v=vs(p.type,p.key,p.props,null,d.mode,v),v.ref=Xr(d,null,p),v.return=d,v;case mr:return p=ja(p,d.mode,v),p.return=d,p;case wt:var S=p._init;return h(d,S(p._payload),v)}if(nn(p)||Yr(p))return p=nr(p,d.mode,v,null),p.return=d,p;qn(d,p)}return null}function m(d,p,v,S){var y=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return y!==null?null:c(d,p,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zn:return v.key===y?l(d,p,v,S):null;case mr:return v.key===y?u(d,p,v,S):null;case wt:return y=v._init,m(d,p,y(v._payload),S)}if(nn(v)||Yr(v))return y!==null?null:f(d,p,v,S,null);qn(d,v)}return null}function g(d,p,v,S,y){if(typeof S=="string"&&S!==""||typeof S=="number")return d=d.get(v)||null,c(p,d,""+S,y);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case zn:return d=d.get(S.key===null?v:S.key)||null,l(p,d,S,y);case mr:return d=d.get(S.key===null?v:S.key)||null,u(p,d,S,y);case wt:var A=S._init;return g(d,p,v,A(S._payload),y)}if(nn(S)||Yr(S))return d=d.get(v)||null,f(p,d,S,y,null);qn(p,S)}return null}function E(d,p,v,S){for(var y=null,A=null,_=p,L=p=0,z=null;_!==null&&L<v.length;L++){_.index>L?(z=_,_=null):z=_.sibling;var C=m(d,_,v[L],S);if(C===null){_===null&&(_=z);break}e&&_&&C.alternate===null&&t(d,_),p=o(C,p,L),A===null?y=C:A.sibling=C,A=C,_=z}if(L===v.length)return r(d,_),ie&&Xt(d,L),y;if(_===null){for(;L<v.length;L++)_=h(d,v[L],S),_!==null&&(p=o(_,p,L),A===null?y=_:A.sibling=_,A=_);return ie&&Xt(d,L),y}for(_=n(d,_);L<v.length;L++)z=g(_,d,L,v[L],S),z!==null&&(e&&z.alternate!==null&&_.delete(z.key===null?L:z.key),p=o(z,p,L),A===null?y=z:A.sibling=z,A=z);return e&&_.forEach(function(M){return t(d,M)}),ie&&Xt(d,L),y}function N(d,p,v,S){var y=Yr(v);if(typeof y!="function")throw Error(F(150));if(v=y.call(v),v==null)throw Error(F(151));for(var A=y=null,_=p,L=p=0,z=null,C=v.next();_!==null&&!C.done;L++,C=v.next()){_.index>L?(z=_,_=null):z=_.sibling;var M=m(d,_,C.value,S);if(M===null){_===null&&(_=z);break}e&&_&&M.alternate===null&&t(d,_),p=o(M,p,L),A===null?y=M:A.sibling=M,A=M,_=z}if(C.done)return r(d,_),ie&&Xt(d,L),y;if(_===null){for(;!C.done;L++,C=v.next())C=h(d,C.value,S),C!==null&&(p=o(C,p,L),A===null?y=C:A.sibling=C,A=C);return ie&&Xt(d,L),y}for(_=n(d,_);!C.done;L++,C=v.next())C=g(_,d,L,C.value,S),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?L:C.key),p=o(C,p,L),A===null?y=C:A.sibling=C,A=C);return e&&_.forEach(function(k){return t(d,k)}),ie&&Xt(d,L),y}function b(d,p,v,S){if(typeof v=="object"&&v!==null&&v.type===xr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case zn:e:{for(var y=v.key,A=p;A!==null;){if(A.key===y){if(y=v.type,y===xr){if(A.tag===7){r(d,A.sibling),p=s(A,v.props.children),p.return=d,d=p;break e}}else if(A.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===wt&&Cl(y)===A.type){r(d,A.sibling),p=s(A,v.props),p.ref=Xr(d,A,v),p.return=d,d=p;break e}r(d,A);break}else t(d,A);A=A.sibling}v.type===xr?(p=nr(v.props.children,d.mode,S,v.key),p.return=d,d=p):(S=vs(v.type,v.key,v.props,null,d.mode,S),S.ref=Xr(d,p,v),S.return=d,d=S)}return i(d);case mr:e:{for(A=v.key;p!==null;){if(p.key===A)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){r(d,p.sibling),p=s(p,v.children||[]),p.return=d,d=p;break e}else{r(d,p);break}else t(d,p);p=p.sibling}p=ja(v,d.mode,S),p.return=d,d=p}return i(d);case wt:return A=v._init,b(d,p,A(v._payload),S)}if(nn(v))return E(d,p,v,S);if(Yr(v))return N(d,p,v,S);qn(d,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(r(d,p.sibling),p=s(p,v),p.return=d,d=p):(r(d,p),p=La(v,d.mode,S),p.return=d,d=p),i(d)):r(d,p)}return b}var Mr=_u(!0),Cu=_u(!1),Ds=Wt(null),ks=null,br=null,ii=null;function li(){ii=br=ks=null}function ci(e){var t=Ds.current;oe(Ds),e._currentValue=t}function yo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Or(e,t){ks=e,ii=br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(De=!0),e.firstContext=null)}function Ke(e){var t=e._currentValue;if(ii!==e)if(e={context:e,memoizedValue:t,next:null},br===null){if(ks===null)throw Error(F(308));br=e,ks.dependencies={lanes:0,firstContext:e}}else br=br.next=e;return t}var er=null;function ui(e){er===null?er=[e]:er.push(e)}function Iu(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ui(t)):(r.next=s.next,s.next=r),t.interleaved=r,bt(e,n)}function bt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Rt=!1;function di(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Et(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,X&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,bt(e,r)}return s=n.interleaved,s===null?(t.next=t,ui(n)):(t.next=s.next,s.next=t),n.interleaved=t,bt(e,r)}function ps(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xo(e,r)}}function Il(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ps(e,t,r,n){var s=e.updateQueue;Rt=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var l=c,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var f=e.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==i&&(c===null?f.firstBaseUpdate=u:c.next=u,f.lastBaseUpdate=l))}if(o!==null){var h=s.baseState;i=0,f=u=l=null,c=o;do{var m=c.lane,g=c.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=e,N=c;switch(m=t,g=r,N.tag){case 1:if(E=N.payload,typeof E=="function"){h=E.call(g,h,m);break e}h=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=N.payload,m=typeof E=="function"?E.call(g,h,m):E,m==null)break e;h=ue({},h,m);break e;case 2:Rt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[c]:m.push(c))}else g={eventTime:g,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(u=f=g,l=h):f=f.next=g,i|=m;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;m=c,c=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);ir|=i,e.lanes=i,e.memoizedState=h}}function wl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(F(191,s));s.call(n)}}}var Un={},ft=Wt(Un),In=Wt(Un),wn=Wt(Un);function tr(e){if(e===Un)throw Error(F(174));return e}function pi(e,t){switch(ee(wn,t),ee(In,e),ee(ft,Un),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qa(t,e)}oe(ft),ee(ft,t)}function Ur(){oe(ft),oe(In),oe(wn)}function Ru(e){tr(wn.current);var t=tr(ft.current),r=qa(t,e.type);t!==r&&(ee(In,e),ee(ft,r))}function fi(e){In.current===e&&(oe(ft),oe(In))}var le=Wt(0);function Ms(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _a=[];function hi(){for(var e=0;e<_a.length;e++)_a[e]._workInProgressVersionPrimary=null;_a.length=0}var fs=_t.ReactCurrentDispatcher,Ca=_t.ReactCurrentBatchConfig,or=0,ce=null,me=null,ye=null,Us=!1,fn=!1,Rn=0,Gf=0;function be(){throw Error(F(321))}function mi(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!nt(e[r],t[r]))return!1;return!0}function xi(e,t,r,n,s,o){if(or=o,ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=e===null||e.memoizedState===null?Hf:Wf,e=r(n,s),fn){o=0;do{if(fn=!1,Rn=0,25<=o)throw Error(F(301));o+=1,ye=me=null,t.updateQueue=null,fs.current=Kf,e=r(n,s)}while(fn)}if(fs.current=Fs,t=me!==null&&me.next!==null,or=0,ye=me=ce=null,Us=!1,t)throw Error(F(300));return e}function gi(){var e=Rn!==0;return Rn=0,e}function lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?ce.memoizedState=ye=e:ye=ye.next=e,ye}function Qe(){if(me===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=me.next;var t=ye===null?ce.memoizedState:ye.next;if(t!==null)ye=t,me=e;else{if(e===null)throw Error(F(310));me=e,e={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},ye===null?ce.memoizedState=ye=e:ye=ye.next=e}return ye}function On(e,t){return typeof t=="function"?t(e):t}function Ia(e){var t=Qe(),r=t.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=e;var n=me,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var c=i=null,l=null,u=o;do{var f=u.lane;if((or&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(c=l=h,i=n):l=l.next=h,ce.lanes|=f,ir|=f}u=u.next}while(u!==null&&u!==o);l===null?i=n:l.next=c,nt(n,t.memoizedState)||(De=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,ce.lanes|=o,ir|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wa(e){var t=Qe(),r=t.queue;if(r===null)throw Error(F(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);nt(o,t.memoizedState)||(De=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Ou(){}function Lu(e,t){var r=ce,n=Qe(),s=t(),o=!nt(n.memoizedState,s);if(o&&(n.memoizedState=s,De=!0),n=n.queue,vi(ku.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||ye!==null&&ye.memoizedState.tag&1){if(r.flags|=2048,Ln(9,Du.bind(null,r,n,s,t),void 0,null),Ee===null)throw Error(F(349));or&30||ju(r,t,s)}return s}function ju(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Du(e,t,r,n){t.value=r,t.getSnapshot=n,Pu(t)&&Mu(e)}function ku(e,t,r){return r(function(){Pu(t)&&Mu(e)})}function Pu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!nt(e,r)}catch{return!0}}function Mu(e){var t=bt(e,1);t!==null&&rt(t,e,1,-1)}function Rl(e){var t=lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:On,lastRenderedState:e},t.queue=e,e=e.dispatch=Yf.bind(null,ce,e),[t.memoizedState,e]}function Ln(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Uu(){return Qe().memoizedState}function hs(e,t,r,n){var s=lt();ce.flags|=e,s.memoizedState=Ln(1|t,r,void 0,n===void 0?null:n)}function qs(e,t,r,n){var s=Qe();n=n===void 0?null:n;var o=void 0;if(me!==null){var i=me.memoizedState;if(o=i.destroy,n!==null&&mi(n,i.deps)){s.memoizedState=Ln(t,r,o,n);return}}ce.flags|=e,s.memoizedState=Ln(1|t,r,o,n)}function Ol(e,t){return hs(8390656,8,e,t)}function vi(e,t){return qs(2048,8,e,t)}function Fu(e,t){return qs(4,2,e,t)}function Bu(e,t){return qs(4,4,e,t)}function zu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gu(e,t,r){return r=r!=null?r.concat([e]):null,qs(4,4,zu.bind(null,t,e),r)}function yi(){}function Vu(e,t){var r=Qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $u(e,t){var r=Qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&mi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Yu(e,t,r){return or&21?(nt(r,t)||(r=Xc(),ce.lanes|=r,ir|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,De=!0),e.memoizedState=r)}function Vf(e,t){var r=J;J=r!==0&&4>r?r:4,e(!0);var n=Ca.transition;Ca.transition={};try{e(!1),t()}finally{J=r,Ca.transition=n}}function Hu(){return Qe().memoizedState}function $f(e,t,r){var n=Gt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Wu(e))Ku(t,r);else if(r=Iu(e,t,r,n),r!==null){var s=we();rt(r,e,n,s),Qu(r,t,n)}}function Yf(e,t,r){var n=Gt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Wu(e))Ku(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,c=o(i,r);if(s.hasEagerState=!0,s.eagerState=c,nt(c,i)){var l=t.interleaved;l===null?(s.next=s,ui(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=Iu(e,t,s,n),r!==null&&(s=we(),rt(r,e,n,s),Qu(r,t,n))}}function Wu(e){var t=e.alternate;return e===ce||t!==null&&t===ce}function Ku(e,t){fn=Us=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qu(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xo(e,r)}}var Fs={readContext:Ke,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},Hf={readContext:Ke,useCallback:function(e,t){return lt().memoizedState=[e,t===void 0?null:t],e},useContext:Ke,useEffect:Ol,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,hs(4194308,4,zu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return hs(4,2,e,t)},useMemo:function(e,t){var r=lt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=lt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$f.bind(null,ce,e),[n.memoizedState,e]},useRef:function(e){var t=lt();return e={current:e},t.memoizedState=e},useState:Rl,useDebugValue:yi,useDeferredValue:function(e){return lt().memoizedState=e},useTransition:function(){var e=Rl(!1),t=e[0];return e=Vf.bind(null,e[1]),lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ce,s=lt();if(ie){if(r===void 0)throw Error(F(407));r=r()}else{if(r=t(),Ee===null)throw Error(F(349));or&30||ju(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,Ol(ku.bind(null,n,o,e),[e]),n.flags|=2048,Ln(9,Du.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=lt(),t=Ee.identifierPrefix;if(ie){var r=yt,n=vt;r=(n&~(1<<32-tt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Rn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Gf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wf={readContext:Ke,useCallback:Vu,useContext:Ke,useEffect:vi,useImperativeHandle:Gu,useInsertionEffect:Fu,useLayoutEffect:Bu,useMemo:$u,useReducer:Ia,useRef:Uu,useState:function(){return Ia(On)},useDebugValue:yi,useDeferredValue:function(e){var t=Qe();return Yu(t,me.memoizedState,e)},useTransition:function(){var e=Ia(On)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Ou,useSyncExternalStore:Lu,useId:Hu,unstable_isNewReconciler:!1},Kf={readContext:Ke,useCallback:Vu,useContext:Ke,useEffect:vi,useImperativeHandle:Gu,useInsertionEffect:Fu,useLayoutEffect:Bu,useMemo:$u,useReducer:wa,useRef:Uu,useState:function(){return wa(On)},useDebugValue:yi,useDeferredValue:function(e){var t=Qe();return me===null?t.memoizedState=e:Yu(t,me.memoizedState,e)},useTransition:function(){var e=wa(On)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Ou,useSyncExternalStore:Lu,useId:Hu,unstable_isNewReconciler:!1};function qe(e,t){if(e&&e.defaultProps){t=ue({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Eo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ue({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zs={isMounted:function(e){return(e=e._reactInternals)?dr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=we(),s=Gt(e),o=Et(n,s);o.payload=t,r!=null&&(o.callback=r),t=Bt(e,o,s),t!==null&&(rt(t,e,s,n),ps(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=we(),s=Gt(e),o=Et(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Bt(e,o,s),t!==null&&(rt(t,e,s,n),ps(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=we(),n=Gt(e),s=Et(r,n);s.tag=2,t!=null&&(s.callback=t),t=Bt(e,s,n),t!==null&&(rt(t,e,n,r),ps(t,e,n))}};function Ll(e,t,r,n,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!bn(r,n)||!bn(s,o):!0}function Xu(e,t,r){var n=!1,s=Yt,o=t.contextType;return typeof o=="object"&&o!==null?o=Ke(o):(s=Pe(t)?sr:Ce.current,n=t.contextTypes,o=(n=n!=null)?kr(e,s):Yt),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zs,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function jl(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Zs.enqueueReplaceState(t,t.state,null)}function So(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},di(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Ke(o):(o=Pe(t)?sr:Ce.current,s.context=kr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Eo(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Zs.enqueueReplaceState(s,s.state,null),Ps(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Fr(e,t){try{var r="",n=t;do r+=Sp(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Ra(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function No(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Qf=typeof WeakMap=="function"?WeakMap:Map;function Ju(e,t,r){r=Et(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){zs||(zs=!0,Lo=n),No(e,t)},r}function qu(e,t,r){r=Et(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){No(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){No(e,t),typeof n!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Dl(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Qf;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=ch.bind(null,e,t,r),t.then(e,e))}function kl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pl(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Et(-1,1),t.tag=2,Bt(r,t,1))),r.lanes|=1),e)}var Xf=_t.ReactCurrentOwner,De=!1;function Ie(e,t,r,n){t.child=e===null?Cu(t,null,r,n):Mr(t,e.child,r,n)}function Ml(e,t,r,n,s){r=r.render;var o=t.ref;return Or(t,s),n=xi(e,t,r,n,o,s),r=gi(),e!==null&&!De?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tt(e,t,s)):(ie&&r&&si(t),t.flags|=1,Ie(e,t,n,s),t.child)}function Ul(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Ci(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Zu(e,t,o,n,s)):(e=vs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:bn,r(i,n)&&e.ref===t.ref)return Tt(e,t,s)}return t.flags|=1,e=Vt(o,n),e.ref=t.ref,e.return=t,t.child=e}function Zu(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(bn(o,n)&&e.ref===t.ref)if(De=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(De=!0);else return t.lanes=e.lanes,Tt(e,t,s)}return Ao(e,t,r,n,s)}function ed(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(_r,Ue),Ue|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(_r,Ue),Ue|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,ee(_r,Ue),Ue|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,ee(_r,Ue),Ue|=n;return Ie(e,t,s,r),t.child}function td(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,r,n,s){var o=Pe(r)?sr:Ce.current;return o=kr(t,o),Or(t,s),r=xi(e,t,r,n,o,s),n=gi(),e!==null&&!De?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Tt(e,t,s)):(ie&&n&&si(t),t.flags|=1,Ie(e,t,r,s),t.child)}function Fl(e,t,r,n,s){if(Pe(r)){var o=!0;Os(t)}else o=!1;if(Or(t,s),t.stateNode===null)ms(e,t),Xu(t,r,n),So(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var l=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ke(u):(u=Pe(r)?sr:Ce.current,u=kr(t,u));var f=r.getDerivedStateFromProps,h=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==n||l!==u)&&jl(t,i,n,u),Rt=!1;var m=t.memoizedState;i.state=m,Ps(t,n,i,s),l=t.memoizedState,c!==n||m!==l||ke.current||Rt?(typeof f=="function"&&(Eo(t,r,f,n),l=t.memoizedState),(c=Rt||Ll(t,r,c,n,m,l,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=u,n=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,wu(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:qe(t.type,c),i.props=u,h=t.pendingProps,m=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ke(l):(l=Pe(r)?sr:Ce.current,l=kr(t,l));var g=r.getDerivedStateFromProps;(f=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==h||m!==l)&&jl(t,i,n,l),Rt=!1,m=t.memoizedState,i.state=m,Ps(t,n,i,s);var E=t.memoizedState;c!==h||m!==E||ke.current||Rt?(typeof g=="function"&&(Eo(t,r,g,n),E=t.memoizedState),(u=Rt||Ll(t,r,u,n,m,E,l)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,E,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,E,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=E),i.props=n,i.state=E,i.context=l,n=u):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return bo(e,t,r,n,o,s)}function bo(e,t,r,n,s,o){td(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&bl(t,r,!1),Tt(e,t,o);n=t.stateNode,Xf.current=t;var c=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Mr(t,e.child,null,o),t.child=Mr(t,null,c,o)):Ie(e,t,c,o),t.memoizedState=n.state,s&&bl(t,r,!0),t.child}function rd(e){var t=e.stateNode;t.pendingContext?Al(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Al(e,t.context,!1),pi(e,t.containerInfo)}function Bl(e,t,r,n,s){return Pr(),oi(s),t.flags|=256,Ie(e,t,r,n),t.child}var To={dehydrated:null,treeContext:null,retryLane:0};function _o(e){return{baseLanes:e,cachePool:null,transitions:null}}function nd(e,t,r){var n=t.pendingProps,s=le.current,o=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ee(le,s&1),e===null)return vo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=ra(i,n,0,null),e=nr(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=_o(r),t.memoizedState=To,e):Ei(t,i));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return Jf(e,t,i,n,c,s,r);if(o){o=n.fallback,i=t.mode,s=e.child,c=s.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Vt(s,l),n.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=Vt(c,o):(o=nr(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?_o(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=To,n}return o=e.child,e=o.sibling,n=Vt(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ei(e,t){return t=ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zn(e,t,r,n){return n!==null&&oi(n),Mr(t,e.child,null,r),e=Ei(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jf(e,t,r,n,s,o,i){if(r)return t.flags&256?(t.flags&=-257,n=Ra(Error(F(422))),Zn(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=ra({mode:"visible",children:n.children},s,0,null),o=nr(o,s,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Mr(t,e.child,null,i),t.child.memoizedState=_o(i),t.memoizedState=To,o);if(!(t.mode&1))return Zn(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var c=n.dgst;return n=c,o=Error(F(419)),n=Ra(o,n,void 0),Zn(e,t,i,n)}if(c=(i&e.childLanes)!==0,De||c){if(n=Ee,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,bt(e,s),rt(n,e,s,-1))}return _i(),n=Ra(Error(F(421))),Zn(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=uh.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Fe=Ft(s.nextSibling),Be=t,ie=!0,et=null,e!==null&&($e[Ye++]=vt,$e[Ye++]=yt,$e[Ye++]=ar,vt=e.id,yt=e.overflow,ar=t),t=Ei(t,n.children),t.flags|=4096,t)}function zl(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),yo(e.return,t,r)}function Oa(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function sd(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Ie(e,t,n.children,r),n=le.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zl(e,r,t);else if(e.tag===19)zl(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ee(le,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ms(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Oa(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ms(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Oa(t,!0,r,null,o);break;case"together":Oa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ms(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ir|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,r=Vt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function qf(e,t,r){switch(t.tag){case 3:rd(t),Pr();break;case 5:Ru(t);break;case 1:Pe(t.type)&&Os(t);break;case 4:pi(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ee(Ds,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ee(le,le.current&1),t.flags|=128,null):r&t.child.childLanes?nd(e,t,r):(ee(le,le.current&1),e=Tt(e,t,r),e!==null?e.sibling:null);ee(le,le.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return sd(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ee(le,le.current),n)break;return null;case 22:case 23:return t.lanes=0,ed(e,t,r)}return Tt(e,t,r)}var ad,Co,od,id;ad=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Co=function(){};od=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,tr(ft.current);var o=null;switch(r){case"input":s=Ka(e,s),n=Ka(e,n),o=[];break;case"select":s=ue({},s,{value:void 0}),n=ue({},n,{value:void 0}),o=[];break;case"textarea":s=Ja(e,s),n=Ja(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ws)}Za(r,n);var i;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var c=s[u];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gn.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(c=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(l!=null||c!=null))if(u==="style")if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,c=c?c.__html:void 0,l!=null&&c!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gn.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ae("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};id=function(e,t,r,n){r!==n&&(t.flags|=4)};function Jr(e,t){if(!ie)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Zf(e,t,r){var n=t.pendingProps;switch(ai(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return Pe(t.type)&&Rs(),Te(t),null;case 3:return n=t.stateNode,Ur(),oe(ke),oe(Ce),hi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Jn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,et!==null&&(ko(et),et=null))),Co(e,t),Te(t),null;case 5:fi(t);var s=tr(wn.current);if(r=t.type,e!==null&&t.stateNode!=null)od(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(F(166));return Te(t),null}if(e=tr(ft.current),Jn(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[dt]=t,n[Cn]=o,e=(t.mode&1)!==0,r){case"dialog":ae("cancel",n),ae("close",n);break;case"iframe":case"object":case"embed":ae("load",n);break;case"video":case"audio":for(s=0;s<an.length;s++)ae(an[s],n);break;case"source":ae("error",n);break;case"img":case"image":case"link":ae("error",n),ae("load",n);break;case"details":ae("toggle",n);break;case"input":Xi(n,o),ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ae("invalid",n);break;case"textarea":qi(n,o),ae("invalid",n)}Za(r,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="children"?typeof c=="string"?n.textContent!==c&&(o.suppressHydrationWarning!==!0&&Xn(n.textContent,c,e),s=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Xn(n.textContent,c,e),s=["children",""+c]):gn.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&ae("scroll",n)}switch(r){case"input":Gn(n),Ji(n,o,!0);break;case"textarea":Gn(n),Zi(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=ws)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[dt]=t,e[Cn]=n,ad(e,t,!1,!1),t.stateNode=e;e:{switch(i=eo(r,n),r){case"dialog":ae("cancel",e),ae("close",e),s=n;break;case"iframe":case"object":case"embed":ae("load",e),s=n;break;case"video":case"audio":for(s=0;s<an.length;s++)ae(an[s],e);s=n;break;case"source":ae("error",e),s=n;break;case"img":case"image":case"link":ae("error",e),ae("load",e),s=n;break;case"details":ae("toggle",e),s=n;break;case"input":Xi(e,n),s=Ka(e,n),ae("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ue({},n,{value:void 0}),ae("invalid",e);break;case"textarea":qi(e,n),s=Ja(e,n),ae("invalid",e);break;default:s=n}Za(r,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var l=c[o];o==="style"?Uc(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Pc(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&vn(e,l):typeof l=="number"&&vn(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(gn.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ae("scroll",e):l!=null&&$o(e,o,l,i))}switch(r){case"input":Gn(e),Ji(e,n,!1);break;case"textarea":Gn(e),Zi(e);break;case"option":n.value!=null&&e.setAttribute("value",""+$t(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Cr(e,!!n.multiple,o,!1):n.defaultValue!=null&&Cr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ws)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Te(t),null;case 6:if(e&&t.stateNode!=null)id(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(F(166));if(r=tr(wn.current),tr(ft.current),Jn(t)){if(n=t.stateNode,r=t.memoizedProps,n[dt]=t,(o=n.nodeValue!==r)&&(e=Be,e!==null))switch(e.tag){case 3:Xn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xn(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[dt]=t,t.stateNode=n}return Te(t),null;case 13:if(oe(le),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ie&&Fe!==null&&t.mode&1&&!(t.flags&128))Tu(),Pr(),t.flags|=98560,o=!1;else if(o=Jn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(F(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(F(317));o[dt]=t}else Pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Te(t),o=!1}else et!==null&&(ko(et),et=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||le.current&1?ge===0&&(ge=3):_i())),t.updateQueue!==null&&(t.flags|=4),Te(t),null);case 4:return Ur(),Co(e,t),e===null&&Tn(t.stateNode.containerInfo),Te(t),null;case 10:return ci(t.type._context),Te(t),null;case 17:return Pe(t.type)&&Rs(),Te(t),null;case 19:if(oe(le),o=t.memoizedState,o===null)return Te(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)Jr(o,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ms(e),i!==null){for(t.flags|=128,Jr(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ee(le,le.current&1|2),t.child}e=e.sibling}o.tail!==null&&pe()>Br&&(t.flags|=128,n=!0,Jr(o,!1),t.lanes=4194304)}else{if(!n)if(e=Ms(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!ie)return Te(t),null}else 2*pe()-o.renderingStartTime>Br&&r!==1073741824&&(t.flags|=128,n=!0,Jr(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=pe(),t.sibling=null,r=le.current,ee(le,n?r&1|2:r&1),t):(Te(t),null);case 22:case 23:return Ti(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ue&1073741824&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function eh(e,t){switch(ai(t),t.tag){case 1:return Pe(t.type)&&Rs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ur(),oe(ke),oe(Ce),hi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return fi(t),null;case 13:if(oe(le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));Pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(le),null;case 4:return Ur(),null;case 10:return ci(t.type._context),null;case 22:case 23:return Ti(),null;case 24:return null;default:return null}}var es=!1,_e=!1,th=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Tr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){de(e,t,n)}else r.current=null}function Io(e,t,r){try{r()}catch(n){de(e,t,n)}}var Gl=!1;function rh(e,t){if(uo=_s,e=pu(),ni(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,c=-1,l=-1,u=0,f=0,h=e,m=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(c=i+s),h!==o||n!==0&&h.nodeType!==3||(l=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++u===s&&(c=i),m===o&&++f===n&&(l=i),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=c===-1||l===-1?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(po={focusedElem:e,selectionRange:r},_s=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var N=E.memoizedProps,b=E.memoizedState,d=t.stateNode,p=d.getSnapshotBeforeUpdate(t.elementType===t.type?N:qe(t.type,N),b);d.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(S){de(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return E=Gl,Gl=!1,E}function hn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Io(t,r,o)}s=s.next}while(s!==n)}}function ea(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function wo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ld(e){var t=e.alternate;t!==null&&(e.alternate=null,ld(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dt],delete t[Cn],delete t[mo],delete t[Uf],delete t[Ff])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cd(e){return e.tag===5||e.tag===3||e.tag===4}function Vl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ro(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ws));else if(n!==4&&(e=e.child,e!==null))for(Ro(e,t,r),e=e.sibling;e!==null;)Ro(e,t,r),e=e.sibling}function Oo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Oo(e,t,r),e=e.sibling;e!==null;)Oo(e,t,r),e=e.sibling}var Se=null,Ze=!1;function It(e,t,r){for(r=r.child;r!==null;)ud(e,t,r),r=r.sibling}function ud(e,t,r){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Hs,r)}catch{}switch(r.tag){case 5:_e||Tr(r,t);case 6:var n=Se,s=Ze;Se=null,It(e,t,r),Se=n,Ze=s,Se!==null&&(Ze?(e=Se,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Se.removeChild(r.stateNode));break;case 18:Se!==null&&(Ze?(e=Se,r=r.stateNode,e.nodeType===8?ba(e.parentNode,r):e.nodeType===1&&ba(e,r),Nn(e)):ba(Se,r.stateNode));break;case 4:n=Se,s=Ze,Se=r.stateNode.containerInfo,Ze=!0,It(e,t,r),Se=n,Ze=s;break;case 0:case 11:case 14:case 15:if(!_e&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Io(r,t,i),s=s.next}while(s!==n)}It(e,t,r);break;case 1:if(!_e&&(Tr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){de(r,t,c)}It(e,t,r);break;case 21:It(e,t,r);break;case 22:r.mode&1?(_e=(n=_e)||r.memoizedState!==null,It(e,t,r),_e=n):It(e,t,r);break;default:It(e,t,r)}}function $l(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new th),t.forEach(function(n){var s=dh.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Je(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:Se=c.stateNode,Ze=!1;break e;case 3:Se=c.stateNode.containerInfo,Ze=!0;break e;case 4:Se=c.stateNode.containerInfo,Ze=!0;break e}c=c.return}if(Se===null)throw Error(F(160));ud(o,i,s),Se=null,Ze=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){de(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dd(t,e),t=t.sibling}function dd(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Je(t,e),ot(e),n&4){try{hn(3,e,e.return),ea(3,e)}catch(N){de(e,e.return,N)}try{hn(5,e,e.return)}catch(N){de(e,e.return,N)}}break;case 1:Je(t,e),ot(e),n&512&&r!==null&&Tr(r,r.return);break;case 5:if(Je(t,e),ot(e),n&512&&r!==null&&Tr(r,r.return),e.flags&32){var s=e.stateNode;try{vn(s,"")}catch(N){de(e,e.return,N)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&jc(s,o),eo(c,i);var u=eo(c,o);for(i=0;i<l.length;i+=2){var f=l[i],h=l[i+1];f==="style"?Uc(s,h):f==="dangerouslySetInnerHTML"?Pc(s,h):f==="children"?vn(s,h):$o(s,f,h,u)}switch(c){case"input":Qa(s,o);break;case"textarea":Dc(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Cr(s,!!o.multiple,g,!1):m!==!!o.multiple&&(o.defaultValue!=null?Cr(s,!!o.multiple,o.defaultValue,!0):Cr(s,!!o.multiple,o.multiple?[]:"",!1))}s[Cn]=o}catch(N){de(e,e.return,N)}}break;case 6:if(Je(t,e),ot(e),n&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(N){de(e,e.return,N)}}break;case 3:if(Je(t,e),ot(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Nn(t.containerInfo)}catch(N){de(e,e.return,N)}break;case 4:Je(t,e),ot(e);break;case 13:Je(t,e),ot(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Ai=pe())),n&4&&$l(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(_e=(u=_e)||f,Je(t,e),_e=u):Je(t,e),ot(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Y=e,f=e.child;f!==null;){for(h=Y=f;Y!==null;){switch(m=Y,g=m.child,m.tag){case 0:case 11:case 14:case 15:hn(4,m,m.return);break;case 1:Tr(m,m.return);var E=m.stateNode;if(typeof E.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(N){de(n,r,N)}}break;case 5:Tr(m,m.return);break;case 22:if(m.memoizedState!==null){Hl(h);continue}}g!==null?(g.return=m,Y=g):Hl(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=h.stateNode,l=h.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,c.style.display=Mc("display",i))}catch(N){de(e,e.return,N)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(N){de(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Je(t,e),ot(e),n&4&&$l(e);break;case 21:break;default:Je(t,e),ot(e)}}function ot(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(cd(r)){var n=r;break e}r=r.return}throw Error(F(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(vn(s,""),n.flags&=-33);var o=Vl(e);Oo(e,o,s);break;case 3:case 4:var i=n.stateNode.containerInfo,c=Vl(e);Ro(e,c,i);break;default:throw Error(F(161))}}catch(l){de(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nh(e,t,r){Y=e,pd(e)}function pd(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var s=Y,o=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||es;if(!i){var c=s.alternate,l=c!==null&&c.memoizedState!==null||_e;c=es;var u=_e;if(es=i,(_e=l)&&!u)for(Y=s;Y!==null;)i=Y,l=i.child,i.tag===22&&i.memoizedState!==null?Wl(s):l!==null?(l.return=i,Y=l):Wl(s);for(;o!==null;)Y=o,pd(o),o=o.sibling;Y=s,es=c,_e=u}Yl(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Y=o):Yl(e)}}function Yl(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:_e||ea(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!_e)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:qe(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&wl(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}wl(t,i,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Nn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}_e||t.flags&512&&wo(t)}catch(m){de(t,t.return,m)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Hl(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Wl(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ea(4,t)}catch(l){de(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){de(t,s,l)}}var o=t.return;try{wo(t)}catch(l){de(t,o,l)}break;case 5:var i=t.return;try{wo(t)}catch(l){de(t,i,l)}}}catch(l){de(t,t.return,l)}if(t===e){Y=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Y=c;break}Y=t.return}}var sh=Math.ceil,Bs=_t.ReactCurrentDispatcher,Si=_t.ReactCurrentOwner,We=_t.ReactCurrentBatchConfig,X=0,Ee=null,he=null,Ne=0,Ue=0,_r=Wt(0),ge=0,jn=null,ir=0,ta=0,Ni=0,mn=null,Le=null,Ai=0,Br=1/0,xt=null,zs=!1,Lo=null,zt=null,ts=!1,Dt=null,Gs=0,xn=0,jo=null,xs=-1,gs=0;function we(){return X&6?pe():xs!==-1?xs:xs=pe()}function Gt(e){return e.mode&1?X&2&&Ne!==0?Ne&-Ne:zf.transition!==null?(gs===0&&(gs=Xc()),gs):(e=J,e!==0||(e=window.event,e=e===void 0?16:nu(e.type)),e):1}function rt(e,t,r,n){if(50<xn)throw xn=0,jo=null,Error(F(185));kn(e,r,n),(!(X&2)||e!==Ee)&&(e===Ee&&(!(X&2)&&(ta|=r),ge===4&&Lt(e,Ne)),Me(e,n),r===1&&X===0&&!(t.mode&1)&&(Br=pe()+500,Js&&Kt()))}function Me(e,t){var r=e.callbackNode;Bp(e,t);var n=Ts(e,e===Ee?Ne:0);if(n===0)r!==null&&rl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&rl(r),t===1)e.tag===0?Bf(Kl.bind(null,e)):Nu(Kl.bind(null,e)),Pf(function(){!(X&6)&&Kt()}),r=null;else{switch(Jc(n)){case 1:r=Qo;break;case 4:r=Kc;break;case 16:r=bs;break;case 536870912:r=Qc;break;default:r=bs}r=Ed(r,fd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function fd(e,t){if(xs=-1,gs=0,X&6)throw Error(F(327));var r=e.callbackNode;if(Lr()&&e.callbackNode!==r)return null;var n=Ts(e,e===Ee?Ne:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Vs(e,n);else{t=n;var s=X;X|=2;var o=md();(Ee!==e||Ne!==t)&&(xt=null,Br=pe()+500,rr(e,t));do try{ih();break}catch(c){hd(e,c)}while(!0);li(),Bs.current=o,X=s,he!==null?t=0:(Ee=null,Ne=0,t=ge)}if(t!==0){if(t===2&&(s=ao(e),s!==0&&(n=s,t=Do(e,s))),t===1)throw r=jn,rr(e,0),Lt(e,n),Me(e,pe()),r;if(t===6)Lt(e,n);else{if(s=e.current.alternate,!(n&30)&&!ah(s)&&(t=Vs(e,n),t===2&&(o=ao(e),o!==0&&(n=o,t=Do(e,o))),t===1))throw r=jn,rr(e,0),Lt(e,n),Me(e,pe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(F(345));case 2:Jt(e,Le,xt);break;case 3:if(Lt(e,n),(n&130023424)===n&&(t=Ai+500-pe(),10<t)){if(Ts(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){we(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ho(Jt.bind(null,e,Le,xt),t);break}Jt(e,Le,xt);break;case 4:if(Lt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-tt(n);o=1<<i,i=t[i],i>s&&(s=i),n&=~o}if(n=s,n=pe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sh(n/1960))-n,10<n){e.timeoutHandle=ho(Jt.bind(null,e,Le,xt),n);break}Jt(e,Le,xt);break;case 5:Jt(e,Le,xt);break;default:throw Error(F(329))}}}return Me(e,pe()),e.callbackNode===r?fd.bind(null,e):null}function Do(e,t){var r=mn;return e.current.memoizedState.isDehydrated&&(rr(e,t).flags|=256),e=Vs(e,t),e!==2&&(t=Le,Le=r,t!==null&&ko(t)),e}function ko(e){Le===null?Le=e:Le.push.apply(Le,e)}function ah(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!nt(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lt(e,t){for(t&=~Ni,t&=~ta,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tt(t),n=1<<r;e[r]=-1,t&=~n}}function Kl(e){if(X&6)throw Error(F(327));Lr();var t=Ts(e,0);if(!(t&1))return Me(e,pe()),null;var r=Vs(e,t);if(e.tag!==0&&r===2){var n=ao(e);n!==0&&(t=n,r=Do(e,n))}if(r===1)throw r=jn,rr(e,0),Lt(e,t),Me(e,pe()),r;if(r===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jt(e,Le,xt),Me(e,pe()),null}function bi(e,t){var r=X;X|=1;try{return e(t)}finally{X=r,X===0&&(Br=pe()+500,Js&&Kt())}}function lr(e){Dt!==null&&Dt.tag===0&&!(X&6)&&Lr();var t=X;X|=1;var r=We.transition,n=J;try{if(We.transition=null,J=1,e)return e()}finally{J=n,We.transition=r,X=t,!(X&6)&&Kt()}}function Ti(){Ue=_r.current,oe(_r)}function rr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,kf(r)),he!==null)for(r=he.return;r!==null;){var n=r;switch(ai(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rs();break;case 3:Ur(),oe(ke),oe(Ce),hi();break;case 5:fi(n);break;case 4:Ur();break;case 13:oe(le);break;case 19:oe(le);break;case 10:ci(n.type._context);break;case 22:case 23:Ti()}r=r.return}if(Ee=e,he=e=Vt(e.current,null),Ne=Ue=t,ge=0,jn=null,Ni=ta=ir=0,Le=mn=null,er!==null){for(t=0;t<er.length;t++)if(r=er[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=s,n.next=i}r.pending=n}er=null}return e}function hd(e,t){do{var r=he;try{if(li(),fs.current=Fs,Us){for(var n=ce.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Us=!1}if(or=0,ye=me=ce=null,fn=!1,Rn=0,Si.current=null,r===null||r.return===null){ge=1,jn=t,he=null;break}e:{var o=e,i=r.return,c=r,l=t;if(t=Ne,c.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=c,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=kl(i);if(g!==null){g.flags&=-257,Pl(g,i,c,o,t),g.mode&1&&Dl(o,u,t),t=g,l=u;var E=t.updateQueue;if(E===null){var N=new Set;N.add(l),t.updateQueue=N}else E.add(l);break e}else{if(!(t&1)){Dl(o,u,t),_i();break e}l=Error(F(426))}}else if(ie&&c.mode&1){var b=kl(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Pl(b,i,c,o,t),oi(Fr(l,c));break e}}o=l=Fr(l,c),ge!==4&&(ge=2),mn===null?mn=[o]:mn.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var d=Ju(o,l,t);Il(o,d);break e;case 1:c=l;var p=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(zt===null||!zt.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=qu(o,c,t);Il(o,S);break e}}o=o.return}while(o!==null)}gd(r)}catch(y){t=y,he===r&&r!==null&&(he=r=r.return);continue}break}while(!0)}function md(){var e=Bs.current;return Bs.current=Fs,e===null?Fs:e}function _i(){(ge===0||ge===3||ge===2)&&(ge=4),Ee===null||!(ir&268435455)&&!(ta&268435455)||Lt(Ee,Ne)}function Vs(e,t){var r=X;X|=2;var n=md();(Ee!==e||Ne!==t)&&(xt=null,rr(e,t));do try{oh();break}catch(s){hd(e,s)}while(!0);if(li(),X=r,Bs.current=n,he!==null)throw Error(F(261));return Ee=null,Ne=0,ge}function oh(){for(;he!==null;)xd(he)}function ih(){for(;he!==null&&!Op();)xd(he)}function xd(e){var t=yd(e.alternate,e,Ue);e.memoizedProps=e.pendingProps,t===null?gd(e):he=t,Si.current=null}function gd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=eh(r,t),r!==null){r.flags&=32767,he=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,he=null;return}}else if(r=Zf(r,t,Ue),r!==null){he=r;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);ge===0&&(ge=5)}function Jt(e,t,r){var n=J,s=We.transition;try{We.transition=null,J=1,lh(e,t,r,n)}finally{We.transition=s,J=n}return null}function lh(e,t,r,n){do Lr();while(Dt!==null);if(X&6)throw Error(F(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(zp(e,o),e===Ee&&(he=Ee=null,Ne=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ts||(ts=!0,Ed(bs,function(){return Lr(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=We.transition,We.transition=null;var i=J;J=1;var c=X;X|=4,Si.current=null,rh(e,r),dd(r,e),If(po),_s=!!uo,po=uo=null,e.current=r,nh(r),Lp(),X=c,J=i,We.transition=o}else e.current=r;if(ts&&(ts=!1,Dt=e,Gs=s),o=e.pendingLanes,o===0&&(zt=null),kp(r.stateNode),Me(e,pe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(zs)throw zs=!1,e=Lo,Lo=null,e;return Gs&1&&e.tag!==0&&Lr(),o=e.pendingLanes,o&1?e===jo?xn++:(xn=0,jo=e):xn=0,Kt(),null}function Lr(){if(Dt!==null){var e=Jc(Gs),t=We.transition,r=J;try{if(We.transition=null,J=16>e?16:e,Dt===null)var n=!1;else{if(e=Dt,Dt=null,Gs=0,X&6)throw Error(F(331));var s=X;for(X|=4,Y=e.current;Y!==null;){var o=Y,i=o.child;if(Y.flags&16){var c=o.deletions;if(c!==null){for(var l=0;l<c.length;l++){var u=c[l];for(Y=u;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:hn(8,f,o)}var h=f.child;if(h!==null)h.return=f,Y=h;else for(;Y!==null;){f=Y;var m=f.sibling,g=f.return;if(ld(f),f===u){Y=null;break}if(m!==null){m.return=g,Y=m;break}Y=g}}}var E=o.alternate;if(E!==null){var N=E.child;if(N!==null){E.child=null;do{var b=N.sibling;N.sibling=null,N=b}while(N!==null)}}Y=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Y=i;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hn(9,o,o.return)}var d=o.sibling;if(d!==null){d.return=o.return,Y=d;break e}Y=o.return}}var p=e.current;for(Y=p;Y!==null;){i=Y;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Y=v;else e:for(i=p;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ea(9,c)}}catch(y){de(c,c.return,y)}if(c===i){Y=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,Y=S;break e}Y=c.return}}if(X=s,Kt(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Hs,e)}catch{}n=!0}return n}finally{J=r,We.transition=t}}return!1}function Ql(e,t,r){t=Fr(r,t),t=Ju(e,t,1),e=Bt(e,t,1),t=we(),e!==null&&(kn(e,1,t),Me(e,t))}function de(e,t,r){if(e.tag===3)Ql(e,e,r);else for(;t!==null;){if(t.tag===3){Ql(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zt===null||!zt.has(n))){e=Fr(r,e),e=qu(t,e,1),t=Bt(t,e,1),e=we(),t!==null&&(kn(t,1,e),Me(t,e));break}}t=t.return}}function ch(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=we(),e.pingedLanes|=e.suspendedLanes&r,Ee===e&&(Ne&r)===r&&(ge===4||ge===3&&(Ne&130023424)===Ne&&500>pe()-Ai?rr(e,0):Ni|=r),Me(e,t)}function vd(e,t){t===0&&(e.mode&1?(t=Yn,Yn<<=1,!(Yn&130023424)&&(Yn=4194304)):t=1);var r=we();e=bt(e,t),e!==null&&(kn(e,t,r),Me(e,r))}function uh(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vd(e,r)}function dh(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(t),vd(e,r)}var yd;yd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ke.current)De=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return De=!1,qf(e,t,r);De=!!(e.flags&131072)}else De=!1,ie&&t.flags&1048576&&Au(t,js,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ms(e,t),e=t.pendingProps;var s=kr(t,Ce.current);Or(t,r),s=xi(null,t,n,e,s,r);var o=gi();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pe(n)?(o=!0,Os(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,di(t),s.updater=Zs,t.stateNode=s,s._reactInternals=t,So(t,n,e,r),t=bo(null,t,n,!0,o,r)):(t.tag=0,ie&&o&&si(t),Ie(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ms(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=fh(n),e=qe(n,e),s){case 0:t=Ao(null,t,n,e,r);break e;case 1:t=Fl(null,t,n,e,r);break e;case 11:t=Ml(null,t,n,e,r);break e;case 14:t=Ul(null,t,n,qe(n.type,e),r);break e}throw Error(F(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),Ao(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),Fl(e,t,n,s,r);case 3:e:{if(rd(t),e===null)throw Error(F(387));n=t.pendingProps,o=t.memoizedState,s=o.element,wu(e,t),Ps(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Fr(Error(F(423)),t),t=Bl(e,t,n,r,s);break e}else if(n!==s){s=Fr(Error(F(424)),t),t=Bl(e,t,n,r,s);break e}else for(Fe=Ft(t.stateNode.containerInfo.firstChild),Be=t,ie=!0,et=null,r=Cu(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Pr(),n===s){t=Tt(e,t,r);break e}Ie(e,t,n,r)}t=t.child}return t;case 5:return Ru(t),e===null&&vo(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,fo(n,s)?i=null:o!==null&&fo(n,o)&&(t.flags|=32),td(e,t),Ie(e,t,i,r),t.child;case 6:return e===null&&vo(t),null;case 13:return nd(e,t,r);case 4:return pi(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Mr(t,null,n,r):Ie(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),Ml(e,t,n,s,r);case 7:return Ie(e,t,t.pendingProps,r),t.child;case 8:return Ie(e,t,t.pendingProps.children,r),t.child;case 12:return Ie(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,ee(Ds,n._currentValue),n._currentValue=i,o!==null)if(nt(o.value,i)){if(o.children===s.children&&!ke.current){t=Tt(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){i=o.child;for(var l=c.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=Et(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),yo(o.return,r,t),c.lanes|=r;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(F(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),yo(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ie(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Or(t,r),s=Ke(s),n=n(s),t.flags|=1,Ie(e,t,n,r),t.child;case 14:return n=t.type,s=qe(n,t.pendingProps),s=qe(n.type,s),Ul(e,t,n,s,r);case 15:return Zu(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),ms(e,t),t.tag=1,Pe(n)?(e=!0,Os(t)):e=!1,Or(t,r),Xu(t,n,s),So(t,n,s,r),bo(null,t,n,!0,e,r);case 19:return sd(e,t,r);case 22:return ed(e,t,r)}throw Error(F(156,t.tag))};function Ed(e,t){return Wc(e,t)}function ph(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(e,t,r,n){return new ph(e,t,r,n)}function Ci(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fh(e){if(typeof e=="function")return Ci(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ho)return 11;if(e===Wo)return 14}return 2}function Vt(e,t){var r=e.alternate;return r===null?(r=He(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function vs(e,t,r,n,s,o){var i=2;if(n=e,typeof e=="function")Ci(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case xr:return nr(r.children,s,o,t);case Yo:i=8,s|=8;break;case $a:return e=He(12,r,t,s|2),e.elementType=$a,e.lanes=o,e;case Ya:return e=He(13,r,t,s),e.elementType=Ya,e.lanes=o,e;case Ha:return e=He(19,r,t,s),e.elementType=Ha,e.lanes=o,e;case Rc:return ra(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ic:i=10;break e;case wc:i=9;break e;case Ho:i=11;break e;case Wo:i=14;break e;case wt:i=16,n=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=He(i,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function nr(e,t,r,n){return e=He(7,e,n,t),e.lanes=r,e}function ra(e,t,r,n){return e=He(22,e,n,t),e.elementType=Rc,e.lanes=r,e.stateNode={isHidden:!1},e}function La(e,t,r){return e=He(6,e,null,t),e.lanes=r,e}function ja(e,t,r){return t=He(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hh(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fa(0),this.expirationTimes=fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fa(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ii(e,t,r,n,s,o,i,c,l){return e=new hh(e,t,r,c,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=He(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},di(o),e}function mh(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Sd(e){if(!e)return Yt;e=e._reactInternals;e:{if(dr(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var r=e.type;if(Pe(r))return Su(e,r,t)}return t}function Nd(e,t,r,n,s,o,i,c,l){return e=Ii(r,n,!0,e,s,o,i,c,l),e.context=Sd(null),r=e.current,n=we(),s=Gt(r),o=Et(n,s),o.callback=t??null,Bt(r,o,s),e.current.lanes=s,kn(e,s,n),Me(e,n),e}function na(e,t,r,n){var s=t.current,o=we(),i=Gt(s);return r=Sd(r),t.context===null?t.context=r:t.pendingContext=r,t=Et(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Bt(s,t,i),e!==null&&(rt(e,s,i,o),ps(e,s,i)),i}function $s(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wi(e,t){Xl(e,t),(e=e.alternate)&&Xl(e,t)}function xh(){return null}var Ad=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ri(e){this._internalRoot=e}sa.prototype.render=Ri.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));na(e,t,null,null)};sa.prototype.unmount=Ri.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){na(null,e,null,null)}),t[At]=null}};function sa(e){this._internalRoot=e}sa.prototype.unstable_scheduleHydration=function(e){if(e){var t=eu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ot.length&&t!==0&&t<Ot[r].priority;r++);Ot.splice(r,0,e),r===0&&ru(e)}};function Oi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jl(){}function gh(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=$s(i);o.call(u)}}var i=Nd(t,n,e,0,null,!1,!1,"",Jl);return e._reactRootContainer=i,e[At]=i.current,Tn(e.nodeType===8?e.parentNode:e),lr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var c=n;n=function(){var u=$s(l);c.call(u)}}var l=Ii(e,0,!1,null,null,!1,!1,"",Jl);return e._reactRootContainer=l,e[At]=l.current,Tn(e.nodeType===8?e.parentNode:e),lr(function(){na(t,l,r,n)}),l}function oa(e,t,r,n,s){var o=r._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var c=s;s=function(){var l=$s(i);c.call(l)}}na(t,i,e,s)}else i=gh(r,t,e,s,n);return $s(i)}qc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=sn(t.pendingLanes);r!==0&&(Xo(t,r|1),Me(t,pe()),!(X&6)&&(Br=pe()+500,Kt()))}break;case 13:lr(function(){var n=bt(e,1);if(n!==null){var s=we();rt(n,e,1,s)}}),wi(e,1)}};Jo=function(e){if(e.tag===13){var t=bt(e,134217728);if(t!==null){var r=we();rt(t,e,134217728,r)}wi(e,134217728)}};Zc=function(e){if(e.tag===13){var t=Gt(e),r=bt(e,t);if(r!==null){var n=we();rt(r,e,t,n)}wi(e,t)}};eu=function(){return J};tu=function(e,t){var r=J;try{return J=e,t()}finally{J=r}};ro=function(e,t,r){switch(t){case"input":if(Qa(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Xs(n);if(!s)throw Error(F(90));Lc(n),Qa(n,s)}}}break;case"textarea":Dc(e,r);break;case"select":t=r.value,t!=null&&Cr(e,!!r.multiple,t,!1)}};zc=bi;Gc=lr;var vh={usingClientEntryPoint:!1,Events:[Mn,Er,Xs,Fc,Bc,bi]},qr={findFiberByHostInstance:Zt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yh={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yc(e),e===null?null:e.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||xh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rs.isDisabled&&rs.supportsFiber)try{Hs=rs.inject(yh),pt=rs}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vh;Ge.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oi(t))throw Error(F(200));return mh(e,t,null,r)};Ge.createRoot=function(e,t){if(!Oi(e))throw Error(F(299));var r=!1,n="",s=Ad;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ii(e,1,!1,null,null,r,!1,n,s),e[At]=t.current,Tn(e.nodeType===8?e.parentNode:e),new Ri(t)};Ge.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Yc(t),e=e===null?null:e.stateNode,e};Ge.flushSync=function(e){return lr(e)};Ge.hydrate=function(e,t,r){if(!aa(t))throw Error(F(200));return oa(null,e,t,!0,r)};Ge.hydrateRoot=function(e,t,r){if(!Oi(e))throw Error(F(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",i=Ad;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Nd(t,null,e,1,r??null,s,!1,o,i),e[At]=t.current,Tn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new sa(t)};Ge.render=function(e,t,r){if(!aa(t))throw Error(F(200));return oa(null,e,t,!1,r)};Ge.unmountComponentAtNode=function(e){if(!aa(e))throw Error(F(40));return e._reactRootContainer?(lr(function(){oa(null,null,e,!1,function(){e._reactRootContainer=null,e[At]=null})}),!0):!1};Ge.unstable_batchedUpdates=bi;Ge.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!aa(r))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return oa(e,t,r,!1,n)};Ge.version="18.3.1-next-f1338f8080-20240426";function bd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bd)}catch(e){console.error(e)}}bd(),bc.exports=Ge;var Eh=bc.exports,ql=Eh;Ga.createRoot=ql.createRoot,Ga.hydrateRoot=ql.hydrateRoot;const Sh={BASE_URL:"/indra-os/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GAS_URL:"https://placeholder-backend.example.com"},ns=(e,t)=>Sh[e]||t,Zl=e=>{const t=localStorage.getItem(e);return!t||t==="undefined"||t==="null"?"":t},kt={CORE_URL:Zl("INDRA_OVERRIDE_URL")||ns("VITE_CORE_URL","https://script.google.com/macros/s/AKfycbydiid-N9D6YW-Q5ldpRAhpi9pv6mDRwfMuFaQ97EXhR1qg8bbknwMiPI8xIL6an16o/exec"),SYSTEM_TOKEN:Zl("INDRA_SESSION_TOKEN")||ns("VITE_SYSTEM_TOKEN",""),CLIENT_NAME:ns("VITE_CLIENT_NAME","INDRA_V2_STARK"),VERSION:ns("VITE_VERSION","2.0.0")},Nh=e=>{e&&e.startsWith("http")&&(localStorage.setItem("INDRA_OVERRIDE_URL",e),console.log(" URL del Core actualizada en persistencia local. Recargando..."),window.location.reload())};class Ah{constructor(){this.config={url:kt.CORE_URL,getApiKey:()=>localStorage.getItem("INDRA_SESSION_TOKEN")||kt.SYSTEM_TOKEN||"",clientName:kt.CLIENT_NAME,version:kt.VERSION};const t=this.config.apiKey||"",r=t.length>0?`${t.length} chars (starts: ${t.substring(0,3)}... ends: ...${t.substring(t.length-2)})`:"EMPTY";console.warn(`[CORE] Initializing with URL: ${this.config.url} | Token: ${r}`)}init(t,r){this.config.url=t,this.config.apiKey=r,console.warn(`[CORE] Re-Initialized for: ${t}`)}async call(t,r,n={}){var c,l;if(!this.config.url)throw new Error("CORE_NOT_INITIALIZED: Debes llamar a init(url, key) antes de realizar peticiones.");const s=this.config.getApiKey(),o=s.length>0?`${s.length} chars (starts: ${s.substring(0,3)}... ends: ...${s.substring(s.length-2)})`:"EMPTY";console.warn(`[CORE] Call: ${t}:${r} | Token: ${o}`);const i={executor:t,method:r,payload:n,Axiom:s,systemToken:s,context:{timestamp:Date.now(),client:this.config.clientName,version:this.config.version}};try{console.warn(`[CORE]  Awaiting fetch to: ${this.config.url}...`);const u=await fetch(this.config.url,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(i)});if(console.warn(`[CORE]  Response Status: ${u.status} ${u.statusText}`),!u.ok)throw new Error(`HTTP_ERROR: ${u.status}`);const f=await u.text();console.warn(`[CORE]  Raw Response (${f.length} chars):`,f.substring(0,150)+"...");let h;try{const m=this._sanitizeResponse(f);h=JSON.parse(m),console.warn("[CORE]  Parsed JSON keys:",Object.keys(h))}catch(m){throw this._handleTransmissionError(f,m),new Error("CORE_PARSING_ERROR: La respuesta del Core no es un JSON vlido.")}if(h&&h._SIGNAL){const{_SIGNAL:m,payload:g}=h;return console.warn(`[CORE]  Signal Intercepted: ${m}`),h}if(this._validateSovereignResponse(h),h.success===!1){console.error("[CORE] Veto Error:",h.error);const m=new Error(((c=h.error)==null?void 0:c.message)||"Error desconocido en el Core");throw(l=h.error)!=null&&l.code&&(m.code=h.error.code),m}return h.result}catch(u){if(u.name==="TypeError"&&u.message==="Failed to fetch"){console.group(" [CORE] Fallo Crtico de Handshake (Network Break)"),console.error("Contexto:",`${t}:${r}`),console.warn("Posibles Causas:"),console.warn("1. La URL del Core ha caducado (necesitas nuevo despliegue GAS)."),console.warn("2. Bloqueo de CORS (GAS ha devuelto una pgina de error HTML)."),console.warn("3. Ests offline o el dominio script.google.com es inalcanzable."),console.warn("URL Intentada:",this.config.url),console.groupEnd();const f=new Error(`FALLO_DE_CONEXIN: El Core en ${this.config.url} no responde.`);throw f.code="NETWORK_DISRUPTION",f}throw console.error(`[CORE] Transmission Fail (${t}:${r}):`,u),u}}_sanitizeResponse(t){const r=t.indexOf("{"),n=t.lastIndexOf("}");return r!==-1&&n!==-1&&r<n?t.substring(r,n+1):t}_validateSovereignResponse(t){if(!t||typeof t!="object")throw new Error("VIOLACIN_DE_SOBERANA: La respuesta no es un objeto vlido.");if(t.success===void 0)throw new Error("VIOLACIN_DE_SOBERANA: Estructura de respuesta corrupta (missing success bit).")}_handleTransmissionError(t,r){console.group(" [CORE] Handshake Failure: Sovereign Membrane Breach"),console.error("Error Detail:",r.message),console.warn("Raw Payload (possible leak):",t),console.groupEnd()}async executeAction(t,r={}){const n={action:t,payload:r};return await this.call("system","executeAction",n)}}const St=new Ah,Po=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"})),Da={SLOT_NODE:{technical_id:"slot_node",label:"Cotizador Inteligente (Slot Node)",functional_name:"Calculadora de Realidad",description:"Nodo compuesto para proyecciones multifacticas y formularios inteligentes.",ARCHETYPE:"UTILITY",ARCHETYPES:["UTILITY","SLOT","NODE"],DOMAIN:"UI_PROJECTION",visibility:"PUBLIC",isVirtual:!0,config:{archetype:"SLOT",icon:"Layout"}}},ec=Object.freeze({BRIDGE:"CANVAS_MAIN",IDEATION:"CANVAS_MAIN",DASHBOARD:"CANVAS_MAIN",ORCHESTRATION:"CANVAS_MAIN",COMMUNICATION:"CANVAS_MAIN",ASSISTANCE:"CANVAS_MAIN",INSPECTION:"CANVAS_MAIN",DIAGNOSTIC:"CANVAS_MAIN",GATE:"CANVAS_MAIN",NAVIGATION:"CANVAS_MAIN",EXPLORATION:"CANVAS_MAIN",IDENTITY:"CANVAS_MAIN",MONITORING:"TERMINAL_STATUS",SYSTEM:"HIDDEN"}),tc="CANVAS_MAIN";function bh(e){if(!e)return tc;const t=(e.SEMANTIC_INTENT||e.semantic_intent||"").toUpperCase(),r=(e.ARCHETYPE||e.archetype||"").toUpperCase();if(t&&ec[t])return ec[t];const n=(e.LABEL||"").toUpperCase();return n.includes("GATEWAY")||n.includes("COMMANDER")||n.includes("SYSTEM")?"SIDEBAR_SECONDARY":r==="SERVICE"?"TERMINAL_STATUS":tc}class Th{constructor(){this._ontology={},this._genotype={},this._renderManifest=[],this._modulesByLevel={},this._schemas={},this._enrichedRegistry={},this._isCompiled=!1}get ontology(){return this._ontology}get isCompiled(){return this._isCompiled}setArtifactSchemas(t){this._schemas=t||{},console.log(`[LawCompiler] Esquemas de artefactos inyectados: ${Object.keys(this._schemas).length} tipos.`)}getArtifactSchema(t){var r,n;return t?((r=this._schemas)==null?void 0:r[t])||((n=this._schemas)==null?void 0:n[t.toUpperCase()]):null}setOntology(t,r){this._ontology=t||{},this._genotype=r||{},console.log(`[LawCompiler] Ontologa inyectada: ${Object.keys(this._ontology).length} activos.`)}_deepMerge(t,r){if(!t||typeof t!="object")return r;if(!r||typeof r!="object")return t;const n={...t};for(const s in r){const o=r[s],i=n[s];Array.isArray(o)?n[s]=o:o&&typeof o=="object"&&!Array.isArray(o)?n[s]=this._deepMerge(i||{},o):n[s]=o}return n}compile(){console.log("[LawCompiler] Iniciando compilacin de leyes (Enriquecimiento Fenotpico)...");const t=Object.entries(Da).filter(([n,s])=>s.isVirtual).map(([n,s])=>({...s,id:n}));console.log(`[LawCompiler]  Virtual Items Found: ${t.length}`),t.forEach(n=>console.log(`  - ${n.id} (${n.ARCHETYPE})`));const r=[...Object.values(this._ontology),...t];return this._enrichedRegistry={},this._renderManifest=r.map((n,s)=>{const o=n.id||n.ID||`UNKNOWN_ID_${s}`;let i=Da[o];i||(i=Object.values(Da).find(f=>f.technical_id===o)||{});const c=this._deepMerge(i,n),l=i.config?{...i.config}:{};l.icon&&typeof l.icon!="string"&&(l.icon=null);const u={...c,id:o,omd:c.omd||c.OMD||o||i.technical_id||"UNKNOWN_OMD",slot:c.slot||c.SLOT||i.slot||bh(c),LABEL:c.LABEL||c.label||i.LABEL||i.functional_name||"UNIT_SKELETON",ARCHETYPE:c.ARCHETYPE||i.ARCHETYPE||(l.archetype||"SERVICE").toUpperCase(),DOMAIN:c.DOMAIN||i.DOMAIN||(l.intent||"SYSTEM").toUpperCase(),layer:c.LEVEL||c.level||i.layer||"NIVEL_3",CAPABILITIES:this._normalizeCapabilities(c.CAPABILITIES||c.capabilities||c.methods||{}),ui_layout_hint:c.ui_layout_hint||i.ui_layout_hint||"LAYOUT_SMART_FORM"};return Object.keys(u).forEach(f=>{const h=u[f];(typeof h=="function"||typeof h=="symbol")&&delete u[f]}),this._enrichedRegistry[o.toLowerCase()]=u,u}),this._modulesByLevel={},this._renderManifest.forEach(n=>{const s=n.layer||0,o=typeof s=="string"?parseInt(s.split("_")[1])||0:s;this._modulesByLevel[o]||(this._modulesByLevel[o]=[]),this._modulesByLevel[o].push(n)}),console.log(`[LawCompiler] Compilacin finalizada. Manifiesto: ${this._renderManifest.length} items.`),this._isCompiled=!0,this._renderManifest}_normalizeCapabilities(t){const r={};let n=[];return Array.isArray(t)?n=t.map(s=>[s,{}]):typeof t=="object"&&t!==null&&(n=Object.entries(t)),n.forEach(([s,o])=>{const i=typeof o=="object"&&o!==null?o:{};let c=i.io;if(!c){const l=String(s).toLowerCase();l.match(/^(get|read|fetch|list|scan|query|search|check|retrieve)/)?c="READ":l.match(/^(set|write|update|create|delete|add|remove|send|post|exec|insert|append)/)?c="WRITE":l.match(/^(on|listen|sub|watch)/)?c="STREAM":c="TRIGGER"}r[s]={...i,io:c,type:i.type||"SIGNAL",human_label:i.human_label||i.desc||s},typeof r[s].icon!="string"&&delete r[s].icon}),r}getCanon(t){if(!t)return null;const r=String(t).toLowerCase();return this._enrichedRegistry[r]?this._enrichedRegistry[r]:this._ontology[t]?this._ontology[t]:Object.values(this._ontology).find(s=>(s.id||s.ID||"").toLowerCase()===r)}getRenderManifest(){return this._renderManifest}getCompatibleNodes(t){if(!this._isCompiled)return[];const r=(t||"").toUpperCase();return this._renderManifest.filter(n=>{const s=(n.ARCHETYPE||"").toUpperCase();return r==="VAULT"||r==="DATABASE"?["LLM","SERVICE","NODE","SLOT","EMAIL"].includes(s):r==="LLM"||r==="SERVICE"||r==="NODE"?["SLOT","EMAIL","CHAT","DATABASE"].includes(s):!1}).slice(0,5)}getModulesByLevel(t){return this._modulesByLevel[t]||[]}}const q=new Th,_h=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));class Ch{constructor(){return this.isLabMode=window.location.href.includes("mode=lab"),this.isIgnited=!1,this.sovereigntyStatus="STANDBY",this.L0=null,new Proxy(this,{get:(t,r)=>r in t?t[r]:(n,s)=>t.call(r,n,s)})}async runSystemAudit(){return await this.call("public","runSystemAudit",{})}async call(t,r,n={}){return await St.call(t,r,n)}async executeAction(t,r={}){return await St.executeAction(t,r)}async ignite(){const t=(n,s="warn")=>{window.INDRA_DEBUG&&window.INDRA_DEBUG.logs.push({msg:n,level:s,time:new Date().toLocaleTimeString(),node:"ADAPTER"}),console[s==="error"?"error":"log"](` [SovereignAdapter] ${n}`)};t("[IGNITION] Iniciando descubrimiento core...");const r=localStorage.getItem("INDRA_GENOTYPE_L0");if(r&&!this.isLabMode)try{this.L0=JSON.parse(r),this.isIgnited=!0,this.sovereigntyStatus="ACTIVE",this.L0.COMPONENT_REGISTRY&&q.setOntology(this.L0.COMPONENT_REGISTRY,this.L0),t(` [L0] Cache restaurado v${this.L0.VERSION}.`)}catch{localStorage.removeItem("INDRA_GENOTYPE_L0")}try{t("Sincronizando Genotipo con el Core...");const n=await St.call("system","getSovereignGenotype",{});n&&n.COMPONENT_REGISTRY&&(this.L0=n,this.isIgnited=!0,this.sovereigntyStatus="ACTIVE",localStorage.setItem("INDRA_GENOTYPE_L0",JSON.stringify(this.L0)),q.setOntology(this.L0.COMPONENT_REGISTRY,this.L0),this.L0.ARTIFACT_SCHEMAS&&q.setArtifactSchemas(this.L0.ARTIFACT_SCHEMAS),t(" Genotipo Sincronizado correctamente.","info"))}catch(n){t(` Fallo en sincronizacin core: ${n.message}`,"error"),this.L0||(this.sovereigntyStatus="LOCKED")}return{success:this.sovereigntyStatus==="ACTIVE",status:this.sovereigntyStatus,genotype:this.L0,error:this.sovereigntyStatus==="LOCKED"?"CORE_UNREACHABLE":null}}async getCanon(t){return this.L0?q.getCanon(t):null}}const fe=new Ch,rc=e=>{let t;const r=new Set,n=(u,f)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,m))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>l,subscribe:u=>(r.add(u),()=>r.delete(u))},l=t=e(n,s,c);return c},Ih=e=>e?rc(e):rc,wh=e=>e;function Rh(e,t=wh){const r=xe.useSyncExternalStore(e.subscribe,xe.useCallback(()=>t(e.getState()),[e,t]),xe.useCallback(()=>t(e.getInitialState()),[e,t]));return xe.useDebugValue(r),r}const nc=e=>{const t=Ih(e),r=n=>Rh(t,n);return Object.assign(r,t),r},Li=e=>e?nc(e):nc,Oh=e=>(t,r,n)=>{const s=n.subscribe;return n.subscribe=(i,c,l)=>{let u=i;if(c){const f=(l==null?void 0:l.equalityFn)||Object.is;let h=i(n.getState());u=m=>{const g=i(m);if(!f(h,g)){const E=h;c(h=g,E)}},l!=null&&l.fireImmediately&&c(h,h)}return s(u)},e(t,r,n)},Lh=Oh,jh="INDRA_COSMOS_DB",Dh=1,it="realities";let kh=class{constructor(){this.db=null,this.initPromise=this._init()}async _init(){return new Promise((t,r)=>{const n=indexedDB.open(jh,Dh);n.onupgradeneeded=s=>{const o=s.target.result;o.objectStoreNames.contains(it)||o.createObjectStore(it,{keyPath:"id"})},n.onsuccess=s=>{this.db=s.target.result,console.log("[AxiomaticDB]  L2 Repository connected."),t(this.db)},n.onerror=s=>{console.error("[AxiomaticDB]  Failed to open IndexedDB:",s.target.error),r(s.target.error)}})}async ensureDB(){if(await this.initPromise,!this.db)throw new Error("Database not initialized")}async setItem(t,r){return await this.ensureDB(),new Promise((n,s)=>{const c=this.db.transaction([it],"readwrite").objectStore(it).put({id:t,data:r,updatedAt:Date.now()});c.onsuccess=()=>n(!0),c.onerror=()=>s(c.error)})}async getItem(t){return await this.ensureDB(),new Promise((r,n)=>{const i=this.db.transaction([it],"readonly").objectStore(it).get(t);i.onsuccess=()=>r(i.result?i.result.data:null),i.onerror=()=>n(i.error)})}async deleteCosmos(t){return await this.ensureDB(),new Promise((r,n)=>{const i=this.db.transaction([it],"readwrite").objectStore(it).delete(t);i.onsuccess=()=>r(!0),i.onerror=()=>n(i.error)})}async purge(){return await this.ensureDB(),new Promise((t,r)=>{const o=this.db.transaction([it],"readwrite").objectStore(it).clear();o.onsuccess=()=>t(!0),o.onerror=()=>r(o.error)})}};const je=new kh,H=Li(Lh((e,t)=>({session:{id:null,status:"BOOTING",mode:"STANDARD",last_validated:null,currentRevisionHash:null,revisionCycle:0,hashInitialized:!1,isLoading:!1,syncStatus:"SYNCED",failedSyncAttempts:0,lastSyncTimestamp:null,lastSyncError:null},interdiction:{active:!1,reason:null},setSessionAuthorized:(r,n="STANDARD")=>{console.log(`[AxiomaticState]  Session Authorized: ${r} [${n}]`),e({session:{id:r,status:"READY",mode:n,last_validated:Date.now()},interdiction:{active:n==="ARCHEOLOGICAL",reason:n==="ARCHEOLOGICAL"?"READ_ONLY_RECOVERY":null}})},terminateSession:r=>{console.warn(`[AxiomaticState]  Session Terminated: ${r}`),e({session:{id:null,status:"TERMINATED",mode:"STANDARD",last_validated:null,hashInitialized:!0},interdiction:{active:!1,reason:null}})},engageWorldLock:r=>{console.log(`[AxiomaticState]  World Lock Engaged: ${r}`),e(n=>({interdiction:{active:!0,reason:r}}))},releaseWorldLock:()=>{console.log("[AxiomaticState]  World Lock Released"),e(r=>({interdiction:{active:!1,reason:null}}))},igniteHash:async()=>{try{console.log("[AxiomaticState]  Recalling temporal identity from Iron Memory...");let r=await je.getItem("INDRA_REVISION_HASH");r||(r=localStorage.getItem("INDRA_REVISION_HASH"),r&&console.info("[AxiomaticState]  Fallback to Legacy Memory successful.")),e(n=>({session:{...n.session,currentRevisionHash:r,hashInitialized:!0}}))}catch(r){console.error("[AxiomaticState]  Memory corrupted during ignition:",r),e(n=>({session:{...n.session,hashInitialized:!0}}))}},updateRevisionHash:r=>{r&&(localStorage.setItem("INDRA_REVISION_HASH",r),je.setItem("INDRA_REVISION_HASH",r).catch(n=>console.warn("[AxiomaticState] Failed to persist hash to Iron Memory:",n)),e(n=>({session:{...n.session,currentRevisionHash:r,revisionCycle:n.session.revisionCycle+1,hashInitialized:!0}})))},isWriteAllowed:()=>{const r=t();return r.interdiction.active?!1:r.session.id===null?!0:r.session.status==="READY"},setLoading:r=>{e(n=>{const s=n.interdiction.reason,o=s&&s!=="TRANSIT_RESONANCE",i=r?!0:s==="TRANSIT_RESONANCE"?!1:n.interdiction.active;return{session:{...n.session,isLoading:r},interdiction:{active:i,reason:r?o?s:"TRANSIT_RESONANCE":s==="TRANSIT_RESONANCE"?null:s}}})},updateSyncStatus:(r,n=null)=>{e(s=>{const o={session:{...s.session,syncStatus:r,lastSyncError:n}};if(r==="SYNCED"&&(o.session.lastSyncTimestamp=Date.now(),o.session.failedSyncAttempts=0,console.log("%c  [AxiomaticState] Sync SUCCESS - Reality backed up","color: #10b981")),r==="RETRY"||r==="OFFLINE"){o.session.failedSyncAttempts=s.session.failedSyncAttempts+1;const i=o.session.failedSyncAttempts;console.warn(`%c  [AxiomaticState] Sync FAIL (attempt ${i}) - ${(n==null?void 0:n.message)||"Unknown error"}`,"color: #f59e0b"),i>=4&&r==="RETRY"&&(o.session.syncStatus="OFFLINE",console.error("%c  [AxiomaticState] Entering OFFLINE MODE","color: #ef4444; font-weight: bold"))}return o})}})));window.INDRA_AXIOMATIC_STATE=H;const Ph=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),ys={transmute:(e,t)=>{const r=H.getState();let n=(e==null?void 0:e.result)!==void 0?e.result:e;if(Array.isArray(n)&&(n=n[0]),!n)return e;if(!n.id&&(n.cosmos_id||n.ID||n.cosmosId)&&(n.id=n.cosmos_id||n.ID||n.cosmosId),n._SIGNAL)return Mh(n._SIGNAL,n.payload||n);if(n.error)throw Uh(n.error,t),new Error(`[Transmuter] Blocked Error: ${n.error}`);if(t==="SYNC"&&n.id&&r.session.id&&n.id!==r.session.id)throw console.error(`[Transmuter]  Ghost Data Detected! Incoming: ${n.id}, Session: ${r.session.id}`),new Error("[Transmuter] Identity Mismatch blocked.");return n}};function Mh(e,t){const r=H.getState();switch(e){case"PATIENCE_TOKEN":return console.log("[Transmuter]  Patience Token received. Identifying as Dark Matter..."),{...t,_SIGNAL:"PATIENCE_TOKEN"};case"FORCE_EJECT":throw console.warn("[Transmuter]  FORCE EJECT SIGNAL RECEIVED."),r.terminateSession("CORE_EJECT_COMMAND"),new Error("CORE_EJECT");case"RECOVERY_MODE":return console.warn("[Transmuter]  RECOVERY MODE SIGNAL RECEIVED."),t&&t.id&&r.setSessionAuthorized(t.id,"ARCHEOLOGICAL"),t;default:return console.warn(`[Transmuter] Unknown Signal: ${e}`),t}}function Uh(e,t){const r=H.getState(),n=(e||"").toUpperCase();(n.includes("NOT FOUND")||n.includes("DELETED")||n.includes("NO EXISTE"))&&(t==="MOUNT"||t==="SYNC")&&(console.error(`[Transmuter]  Fatal Reality Error detected: ${n}`),r.terminateSession("REALITY_NOT_FOUND")),(n.includes("LOCKED")||n.includes("READ ONLY"))&&(console.warn("[Transmuter]  Locking Session due to server restriction."),r.engageWorldLock("SERVER_MANDATE"))}class Fh{constructor(){this.batchQueue=[],this.batchTimer=null,this.BATCH_WINDOW_MS=100}async call(t,r,n={}){const s=H.getState();if(this._detectWriteIntent(r)&&(s.session.hashInitialized||(console.log("[InterdictionUnit]  Waiting for temporal reification before write..."),await this._waitFor(()=>H.getState().session.hashInitialized)),!s.isWriteAllowed())){const i=s.interdiction.reason||s.session.status;throw console.warn(`[InterdictionUnit]  DEFERRED: ${t}.${r} [Reason: ${i}]`),new Error(`[Interdiction] ${i}`)}return new Promise((i,c)=>{this.batchQueue.push({service:t,method:r,payload:n,resolve:i,reject:c}),this.batchTimer||(this.batchTimer=setTimeout(()=>this._flushBatch(),this.BATCH_WINDOW_MS))})}async _flushBatch(){var r,n,s,o;const t=[...this.batchQueue];if(this.batchQueue=[],this.batchTimer=null,t.length!==0){try{console.log(`[InterdictionUnit]  Dispatching Batch of ${t.length} commands...`);const i=H.getState().session.currentRevisionHash,c=t.map(f=>({service:f.service,method:f.method,payload:{...f.payload,revisionHash:i,_revisionHash:i}})),l=(n=(r=window.useSyncOrchestrator)==null?void 0:r.getState)==null?void 0:n.call(r);if(l&&typeof l.prepareSnapshot=="function"){const f=l.prepareSnapshot();f&&(((s=f.artifacts)==null?void 0:s.length)>0||((o=f.relationships)==null?void 0:o.length)>0)&&(console.info(`%c  [Interdiction] Piggybacking reality snapshot (${f.artifacts.length} nodes)`,"color: #10b981; font-weight: bold;"),c.forEach(h=>{h.payload._carriedReality=!0,h.payload.snapshot=f}))}const u=await St.call("system","executeBatch",{commands:c});if(Array.isArray(u)){let f=null;u.forEach((h,m)=>{const g=t[m];if(g)try{const E=ys.transmute(h,g.method);console.log(`[InterdictionUnit]  Resolving: ${g.service}.${g.method}`,{response:E}),g.resolve(E),g._resolved=!0,h&&h._snapshot&&(f=h._snapshot),g.method==="stabilizeAxiomaticReality"&&(f=E)}catch(E){console.error(`[InterdictionUnit]  Rejecting: ${g.service}.${g.method}`,E.message),g.reject(E),g._resolved=!1}}),f&&(f.success?H.getState().updateSyncStatus("SYNCED"):H.getState().updateSyncStatus("RETRY",new Error(f.error||"Snapshot sync failed")))}else throw new Error(u.error||"Invalid Batch Response from Gateway.")}catch(i){console.error("[InterdictionUnit]  Batch Execution Failed:",i.message),t.forEach(u=>u.reject(i));const c=H.getState(),l=c.session.failedSyncAttempts;if(c.session.syncStatus!=="OFFLINE"){c.updateSyncStatus("RETRY",i);const u=[5e3,1e4,3e4],f=u[Math.min(l,u.length-1)];l<3&&(console.warn(`%c  [InterdictionUnit] Retry scheduled in ${f/1e3}s...`,"color: #fbbf24"),setTimeout(async()=>{var h,m,g,E;try{const N=(m=(h=window.useSyncOrchestrator)==null?void 0:h.getState)==null?void 0:m.call(h);if(N&&typeof N.prepareSnapshot=="function"){const b=N.prepareSnapshot();b&&(((g=b.artifacts)==null?void 0:g.length)>0||((E=b.relationships)==null?void 0:E.length)>0)&&((await St.call("sensing","stabilizeAxiomaticReality",{snapshot:b,_carriedReality:!0,_isRetry:!0})).success?H.getState().updateSyncStatus("SYNCED"):H.getState().updateSyncStatus("RETRY",new Error("Retry failed")))}}catch(N){console.error("[InterdictionUnit] Retry attempt failed:",N),H.getState().updateSyncStatus("RETRY",N)}},f))}}t.some(i=>i.method==="stabilizeAxiomaticReality")&&t.some(i=>i.method==="stabilizeAxiomaticReality"&&i._resolved===!0)}}async _waitFor(t){return new Promise(r=>{const n=()=>{t()?r():setTimeout(n,100)};n()})}_detectWriteIntent(t){const r=t.toUpperCase();return r.includes("SAVE")||r.includes("WRITE")||r.includes("DELETE")||r.includes("CREATE")||r.includes("UPDATE")||r.includes("PATCH")||r.includes("MOVE")||r.includes("RENAME")}}const ut=new Fh;class Bh{constructor(){this.enabled=localStorage.getItem("BACKEND_LOGS_ENABLED")==="true"||!0}processResponse(t,r){return!this.enabled||!t._logs||(console.group(` [BACKEND] ${r}`),t._logs.forEach(n=>{const s={DEBUG:"",INFO:"",WARN:"",ERROR:"",FATAL:"",USER:""}[n.level]||"",o={DEBUG:"color: #888",INFO:"color: #0066cc",WARN:"color: #ff9900",ERROR:"color: #cc0000",FATAL:"color: #ff0000; font-weight: bold",USER:"color: #00cc00"}[n.level]||"";console.log(`%c${s} [${n.component}] ${n.message}`,o,n.data||"")}),console.groupEnd(),delete t._logs),t}toggle(t){this.enabled=t,localStorage.setItem("BACKEND_LOGS_ENABLED",t.toString()),console.log(`Backend logs ${t?"enabled":"disabled"}`)}isEnabled(){return this.enabled}}const ka=new Bh;class jr{static setDispatcher(t){this.dispatcher=t}static log(t,r,n={}){this.dispatcher&&this.dispatcher({type:"LOG_ENTRY",payload:{source:"Validator_IO_node_Data",level:t,message:r,timestamp:new Date().toISOString(),...n}})}static scrub(t,r="UNKNOWN"){if(!t){const i=`[Validator_IO_node_Data] FATAL: Null response in ${r}`;throw this.log("FATAL",i),new Error(i)}const n=t.result!==void 0?t.result:t;if(t._SIGNAL&&t._SIGNAL!=="PATIENCE_TOKEN"&&t._SIGNAL!=="REALITY_CONFLICT")return t;const s=n.artifacts||n.ARTIFACTS,o=n.id||n.ID||n.uuid;if(r.includes("mountCosmos")){const i=[];if(o||i.push("ID/UUID"),s||i.push("ARTIFACTS"),i.length>0){const c=`VIOLACIN_DE_Soberana: El contrato de '${r}' carece de campos mandatorios: ${i.join(", ")}`;throw console.error(`[Validator_IO_node_Data] Contract Violation in ${r}:`,n),this.log("FATAL",c,{context:r,missing:i}),new Error(c)}this.log("SUCCESS",` Reality '${o}' Certified (Integrity: 100%)`,{context:r})}return t}static validateRelationship(t,r,n){var c,l;if(!t||!r)return!1;const s=(c=t.CAPABILITIES)==null?void 0:c[n.sourcePort],o=(l=r.CAPABILITIES)==null?void 0:l[n.targetPort];if(!s||!o)return this.log("WARNING",` Invalid Ports: ${n.sourcePort} -> ${n.targetPort}`),!1;if(!(s.type===o.type||s.type==="SIGNAL"||o.type==="SIGNAL")){const u=` POLARITY ERROR: Cannot connect ${s.type} to ${o.type}`;return this.log("FATAL",u,{source:t.LABEL,target:r.LABEL}),!1}return!0}static validateBatch(t){if(!Array.isArray(t)){const r="[Validator_IO_node_Data] Invalid Batch: Expected Array.";throw this.log("FATAL",r),new Error(r)}return t}}ia(jr,"dispatcher",null);class zh{constructor(){this.activeCosmosId=null,this.memoryCache=new Map,this.pendingRequests=new Map,this.PERSISTENCE_KEY="INDRA_CORTEX_CACHE_V1",this._loadPersistence(),this.syncQueue=Promise.resolve(),this.isSyncing=!1,this.lastRevisionHash=null;try{this.lockChannel=new BroadcastChannel("INDRA_SATTVA_LOCK");const t=Date.now();this.lockChannel.onmessage=r=>{r.data.type==="CHECK_ALIVE"?Date.now()-t>2e3&&this.lockChannel.postMessage({type:"I_AM_ALIVE",timestamp:t}):r.data.type==="I_AM_ALIVE"&&Date.now()-t<2e3&&(console.error(" [CRITICAL] Instance Conflict. Locking UI."),window.dispatchEvent(new CustomEvent("INDRA_LOCKDOWN",{detail:{reason:"MULTIPLE_TABS"}})))},this.lockChannel.postMessage({type:"CHECK_ALIVE"}),window.addEventListener("beforeunload",()=>{this.lockChannel.close()})}catch{console.warn("BroadcastChannel not supported. IndraLock disabled.")}this.compressionEngine={compress:async t=>{try{const n=new Blob([JSON.stringify(t)]).stream().pipeThrough(new CompressionStream("gzip")),o=await new Response(n).blob();return new Promise(i=>{const c=new FileReader;c.onloadend=()=>{const l=c.result;i(l.split(",")[1])},c.readAsDataURL(o)})}catch{return console.warn("Compression failed, fallback to raw JSON."),null}}}}_loadPersistence(){try{const t=localStorage.getItem(this.PERSISTENCE_KEY);if(t){const r=JSON.parse(t);Object.keys(r).forEach(n=>this.memoryCache.set(n,r[n]))}}catch{console.warn("[ContextClient] Memory corruption detected. Resetting Cortex.")}}_savePersistence(){try{const t=Object.fromEntries(this.memoryCache);localStorage.setItem(this.PERSISTENCE_KEY,JSON.stringify(t))}catch{}}async igniteReflexes(t){console.log(" [Cortex] Igniting Autonomic Reflexes...");const r=this.memoryCache.get("availableCosmos");r&&t({type:"UPDATE_COSMOS_REGISTRY",payload:r}),this.listAvailableCosmos(!1).then(n=>{t({type:"UPDATE_COSMOS_REGISTRY",payload:n.artifacts||[]})}).catch(n=>console.warn("[Cortex] Reflex fizzled:",n))}async listAvailableCosmos(t=!1){const r=`availableCosmos_${t}`;if(this.pendingRequests.has(r))return this.pendingRequests.get(r);const n=(async()=>{try{const s=await ut.call("cosmos","listAvailableCosmos",{includeAll:t}),o=jr.scrub(s,"listAvailableCosmos"),i=ka.processResponse(o,"listAvailableCosmos");if(i&&i.artifacts){const c=i.artifacts.filter(l=>(l.type==="COSMOS"||l.name&&l.name.toLowerCase().includes("cosmos")||l.identity&&l.identity.label)&&!(l.id&&String(l.id).startsWith("temp_")));this.memoryCache.set(r,c),t||this.memoryCache.set("availableCosmos",c),this._savePersistence(),i.artifacts=c}return i}catch(s){throw console.error(` [Cortex] Synapse Failed: ${s.message}`),s}finally{this.pendingRequests.delete(r)}})();return this.pendingRequests.set(r,n),n}async mountCosmos(t){if(!t)throw new Error("[ContextClient] cosmosId is required to mount.");try{const r=localStorage.getItem(`INDRA_COSMOS_${t}`);if(r){const c=JSON.parse(r);this.activeCosmosId=t,this.lastRevisionHash=c._local_hash||"unknown",console.log(" [ContextClient] L7 Cache Hit. Instant Mount.")}const n=await ut.call("cosmos","mountCosmos",{cosmosId:t});if(!n||!n.payload){if(n&&n.nodes)return console.warn("[ContextClient]  Legacy Response detected."),this.activeCosmosId=t,n;throw new Error("Invalid Reality Envelope received.")}const s=n.payload;this.lastRevisionHash=n.revision_hash;try{s._local_hash=n.revision_hash,localStorage.setItem(`INDRA_COSMOS_${t}`,JSON.stringify(s))}catch{console.warn("L7 Cache Full")}const o=jr.scrub(s,"mountCosmos"),i=ka.processResponse(o,"mountCosmos");if(i)return this.activeCosmosId=t,i;throw new Error("Empty payload in envelope.")}catch(r){throw console.error(` [ContextClient] Failed to mount: ${r.message}`),r}}async saveCosmos(t){if(!t)throw new Error("[ContextClient] Invalid cosmos object");try{localStorage.setItem(`INDRA_COSMOS_${this.activeCosmosId}`,JSON.stringify(t)),console.log(" [ContextClient] Local Save Secured.")}catch{console.warn(" [ContextClient] LocalStorage Full. Risk of data loss.")}return this._enqueueUpload(t)}async _enqueueUpload(t){return this.syncQueue=this.syncQueue.then(async()=>{this.isSyncing=!0;try{console.log(" [ContextClient] Compressing & Uploading...");const r=await this.compressionEngine.compress(t),n=await ut.call("cosmos","saveCosmos",{cosmosId:this.activeCosmosId,content_base64:r,revisionHash:this.lastRevisionHash||"force"});return n&&n.success&&n.new_revision_hash&&(this.lastRevisionHash=n.new_revision_hash,console.log(` [ContextClient] Cloud Sync Complete. Hash: ${n.new_revision_hash.substr(0,8)}`)),n}catch(r){return console.error(` [ContextClient] Background Sync Failed: ${r.message}`),{success:!1,local_saved:!0,error:r.message}}finally{this.isSyncing=!1}}),{success:!0,optimistic:!0}}async deleteCosmos(t){const n=(this.memoryCache.get("availableCosmos")||[]).filter(s=>s.id!==t);this.memoryCache.set("availableCosmos",n),this._savePersistence();try{console.log(` [ContextClient] Deep Cleaning: ${t}`),localStorage.removeItem(`INDRA_COSMOS_${t}`),await je.deleteCosmos(`COSMOS_STATE_${t}`),localStorage.getItem("LAST_ACTIVE_COSMOS_ID")===t&&(localStorage.removeItem("LAST_ACTIVE_COSMOS_ID"),window.AxiomaticStore&&window.AxiomaticStore.dispatch&&window.AxiomaticStore.dispatch({type:"CLEAR_COSMOS_SESSION"}))}catch(s){console.warn("[ContextClient] Deep Clean partial failure:",s)}try{const s=await ut.call("cosmos","deleteCosmos",{cosmosId:t}),o=jr.scrub(s,"deleteCosmos");return ka.processResponse(o,"deleteCosmos")}catch(s){throw console.error(` [ContextClient] Delete failed: ${s.message}`),s}}}const ss=new zh,on={COMPONENT_REGISTRY:{DRIVE:{LABEL:"Google Drive",ARCHETYPE:"VAULT",DOMAIN:"SYSTEM_CORE",CAPABILITIES:{search:{io:"READ",type:"DATAFRAME",desc:"Global semantic search"},upload:{io:"WRITE",type:"BLOB",desc:"Blob storage ingestion"},sync:{io:"REFRESH",type:"SIGNAL",desc:"Force state consistency"},move:{io:"WRITE",type:"SIGNAL",desc:"Relocate atomic unit"}},VITAL_SIGNS:{LATENCY:{criticality:"NOMINAL",value:"45ms",trend:"stable"},STORAGE:{criticality:"WARNING",value:"85%",trend:"rising"},API_QUOTA:{criticality:"NOMINAL",value:"1200/min",trend:"stable"}},UI_LAYOUT:{SIDE_PANEL:"ENABLED",TERMINAL_STREAM:"ENABLED"}},NOTION:{LABEL:"Notion",ARCHETYPE:"VAULT",DOMAIN:"KNOWLEDGE_GRAPH",CAPABILITIES:{listContents:{io:"READ",type:"DATAFRAME",desc:"Explora estructura del grafo"},search:{io:"READ",type:"DATAFRAME",desc:"Bsqueda semntica global"},query_db:{io:"READ",type:"DATAFRAME",desc:"Consulta tablas y bases de datos"},read_content:{io:"READ",type:"DATAFRAME",desc:"Lectura de bloques como Markdown"}},VITAL_SIGNS:{API_RATE:{criticality:"NOMINAL",value:"3/sec",trend:"flat"},TOKEN_STATUS:{criticality:"NOMINAL",value:"VALID",trend:"stable"}}},EMAIL:{LABEL:"Terminal Mail",ARCHETYPE:"ADAPTER",DOMAIN:"COMMUNICATION",CAPABILITIES:{send:{io:"WRITE",type:"SIGNAL",desc:"Dispatch secure courier",inputs:{to:{type:"string"},subject:{type:"string"},body:{type:"DATAFRAME"},attachment:{type:"BLOB"},accountId:{type:"string"}}},scan:{io:"READ",type:"DATAFRAME",desc:"Inbox telemetry search"}},VITAL_SIGNS:{SCAN:{criticality:"NOMINAL",value:"ACTIVE",trend:"stable"},QUOTA_USED:{criticality:"NOMINAL",value:"12%",trend:"flat"}}},SLOT_MANAGER:{LABEL:"Reality Slot",ARCHETYPE:"SLOT",DOMAIN:"ORCHESTRATION",CAPABILITIES:{RENDER_VIEW:{label:"Proyectar Vista",icon:"",status:"CONNECTED",value:"ACTIVE",desc:"Proyectar vista hacia el dashboard"},EXPORT_PDF:{label:"Exportar PDF",icon:"",status:"DEFAULT",value:"READY",desc:"Materializar documento esttico"},STYLE_SYNC:{label:"Sincrona ADN",icon:"",status:"CONNECTED",value:"v1.2",desc:"Sincronizar ADN visual"},DATA_BRIDGE:{label:"Puente de Datos",icon:"",status:"BROKEN",value:"OFFLINE",desc:"Enlace fsico con el Core"}},views:[{id:"v1",label:"Tablero de Control",type:"DASHBOARD"},{id:"v2",label:"Factura Impresa",type:"DOCUMENT_PAGINATED"}]},COSMOS:{LABEL:"Cosmos Reality",ARCHETYPE:"REALITY",DOMAIN:"SPATIAL",CAPABILITIES:{GRAVITY:{label:"Gravedad",icon:"",status:"CONNECTED",value:"9.8m/s"},ENTROPY:{label:"Entropa",icon:"",status:"DEFAULT",value:"LOW"},DIMENSIONS:{label:"Dimensiones",icon:"",status:"CONNECTED",value:"3D + TIME"}}},LLM:{LABEL:"Cognitive Engine",ARCHETYPE:"SERVICE",DOMAIN:"INTELLIGENCE",CAPABILITIES:{generate:{io:"WRITE",type:"SIGNAL",desc:"Generar texto creativo",inputs:{prompt:{type:"string"}}},analyze:{io:"READ",type:"DATAFRAME",desc:"Analizar sentimiento/entidades"},chat:{io:"STREAM",type:"SIGNAL",desc:"Conversacin continua"}},VITAL_SIGNS:{TOKENS_PM:{criticality:"NOMINAL",value:"450",trend:"stable"},LATENCY:{criticality:"WARNING",value:"1.2s",trend:"rising"}}},NODE:{LABEL:"Generic Processor",ARCHETYPE:"NODE",DOMAIN:"LOGIC",CAPABILITIES:{PROCESS:{label:"Procesador",icon:"",status:"CONNECTED",value:"8 Cores"},MEMORY:{label:"Memoria RAM",icon:"",status:"CONNECTED",value:"16GB"},UPTIME:{label:"Tiempo Activo",icon:"",status:"DEFAULT",value:"12d 4h"}},VITAL_SIGNS:{CPU:{criticality:"NOMINAL",value:"12%",trend:"stable"}}},DATABASE:{LABEL:"Generic DB",ARCHETYPE:"DATABASE",DOMAIN:"DATA_L1",CAPABILITIES:{QUERY:{label:"Consultas",icon:"",status:"CONNECTED",value:"SQL_INIT"},PERSISTENCE:{label:"Persistencia",icon:"",status:"CONNECTED",value:"NOMINAL"},SCHEMA_VOL:{label:"Volumen",icon:"",status:"DEFAULT",value:"1.2 TB"}},VITAL_SIGNS:{CONNECTIONS:{criticality:"NOMINAL",value:"4/10",trend:"flat"}},data:{type:"DATABASE",columns:[{id:"id",label:"ID",type:"number"},{id:"nombre",label:"Nombre",type:"string"},{id:"contacto",label:"Contacto",type:"string"},{id:"estado",label:"Estado",type:"tag"},{id:"prioridad",label:"Prioridad",type:"number"}],rows:[{id:1,nombre:"Empresa Alpha",contacto:"Juan Perez",estado:"ACTIVO",prioridad:5},{id:2,nombre:"Beta Dynamics",contacto:"Maria Garcia",estado:"PENDIENTE",prioridad:3},{id:3,nombre:"Gamma Solutions",contacto:"Luis Rodriguez",estado:"INACTIVO",prioridad:1},{id:4,nombre:"Delta Systems",contacto:"Ana Martinez",estado:"ACTIVO",prioridad:4},{id:5,nombre:"Epsilon Tech",contacto:"Carlos Sanchez",estado:"ACTIVO",prioridad:2}]}}},GARAGE_PROTOTYPES:{VAULT:{id:"garage_vault",LABEL:"PROTOTYPE_VAULT",ARCHETYPE:"VAULT",DOMAIN:"SYSTEM",items:[{id:"g1",name:"Prototype Folder A",type:"DIRECTORY"},{id:"g2",name:"Prototype Folder B",type:"DIRECTORY"},{id:"g3",name:"Mock_Database.db",type:"DATABASE"},{id:"g4",name:"Design_System.pdf",type:"FILE",mimeType:"application/pdf"}]},DATABASE:{id:"garage_db",LABEL:"PROTOTYPE_DB",ARCHETYPE:"DATABASE",DOMAIN:"DATA_L1",data:{columns:[{id:"id",label:"ID",type:"string"},{id:"status",label:"Status",type:"tag"},{id:"value",label:"Value",type:"number"}],rows:[{id:"row_1",status:"ACTIVE",value:100},{id:"row_2",status:"PENDING",value:50},{id:"row_3",status:"CLOSED",value:75}]}},SLOT:{id:"garage_slot",LABEL:"PROTOTYPE_SLOT",ARCHETYPE:"SLOT",DOMAIN:"ORCHESTRATION",CAPABILITIES:{RENDER_VIEW:{label:"Proyectar Vista",icon:"TV_SCREEN",status:"CONNECTED",value:"ACTIVE",desc:"Proyectar vista hacia el dashboard"},EXPORT_PDF:{label:"Exportar PDF",icon:"PDF",status:"DEFAULT",value:"READY",desc:"Materializar documento esttico"},STYLE_SYNC:{label:"Sincrona ADN",icon:"SYNC",status:"CONNECTED",value:"v1.2",desc:"Sincronizar ADN visual"},DATA_BRIDGE:{label:"Puente de Datos",icon:"BRIDGE",status:"BROKEN",value:"OFFLINE",desc:"Enlace fsico con el Core"}},views:[{id:"v1",label:"Tablero de Control",type:"DASHBOARD"},{id:"v2",label:"Factura Impresa",type:"DOCUMENT_PAGINATED"}]},COMMUNICATION:{id:"garage_comm",LABEL:"PROTOTYPE_COMM",ARCHETYPE:"COMMUNICATION",DOMAIN:"COMMUNICATION",CAPABILITIES:{INBOX:{label:"Bandeja de Entrada",icon:"CHAT",status:"CONNECTED",value:"12 New"},SYNC_MAIL:{label:"Sincronizar",icon:"SYNC",status:"DEFAULT",value:"LIVE"}}},LLM:{id:"garage_llm",LABEL:"PROTOTYPE_LLM",ARCHETYPE:"SERVICE",DOMAIN:"INTELLIGENCE",CAPABILITIES:{GENERATE:{label:"Generar",icon:"SYNC",status:"CONNECTED",value:"NOMINAL"},ANALYZE:{label:"Analizar",icon:"SYNC",status:"DEFAULT",value:"IDLE"}}},REALITY:{id:"garage_cosmos",LABEL:"PROTOTYPE_REALITY",ARCHETYPE:"REALITY",DOMAIN:"SPATIAL",CAPABILITIES:{GRAVITY:{label:"Gravedad",icon:"GRAVITY",status:"CONNECTED",value:"9.8m/s"},ENTROPY:{label:"Entropa",icon:"ENTROPY",status:"DEFAULT",value:"LOW"},DIMENSIONS:{label:"Dimensiones",icon:"DIMENSIONS",status:"CONNECTED",value:"3D + TIME"}}}}},Gh={db_notion_1:[{id:1,nombre:"Empresa Alpha",contacto:"Juan Perez",estado:"ACTIVO",prioridad:5},{id:2,nombre:"Beta Dynamics",contacto:"Maria Garcia",estado:"PENDIENTE",prioridad:3},{id:3,nombre:"Gamma Solutions",contacto:"Luis Rodriguez",estado:"INACTIVO",prioridad:1},{id:4,nombre:"Delta Systems",contacto:"Ana Martinez",estado:"ACTIVO",prioridad:4},{id:5,nombre:"Epsilon Tech",contacto:"Carlos Sanchez",estado:"ACTIVO",prioridad:2}]};class Vh{constructor(){this.contracts=new Map,this.metadataCache=new Map,this.storageKey="INDRA_PERSISTENCE_METADATA",this._loadMetadata(),this._registerDefaultContracts()}_registerDefaultContracts(){const t={vault_tree_ROOT:{hydrate:!0,scope:"COSMOS",ttl:3600,compute:"EAGER"},metadata:{hydrate:!0,scope:"COSMOS",ttl:3600,compute:"EAGER"}};this.registerContract("drive",t),this.registerContract("notion",t)}registerContract(t,r){!r||typeof r!="object"||(this.contracts.set(t,r),console.log(`[PersistenceManager]  Registered contract for ${t}`))}async hydrate(t,r){var o,i;const n={},s=Date.now();for(const[c,l]of this.contracts.entries()){n[c]={};for(const[u,f]of Object.entries(l)){if(!f.hydrate)continue;const h=`${c}.${u}`,m=(i=(o=t==null?void 0:t.persistence)==null?void 0:o[c])==null?void 0:i[u];let g=m;if(!g){const E=await je.getItem(h);E&&(g=E)}if(g&&g.timestamp&&(s-new Date(g.timestamp).getTime())/1e3<f.ttl){n[c][u]=g.data,console.log(`[PersistenceManager]  Hydrated ${h} from ${m?"COSMOS":"L2_DB"}`);continue}try{console.log(`[PersistenceManager]  Fetching fresh data for ${h}...`);const E=await this._fetchData(c,u,r);n[c][u]=E,await this.saveLocal(h,E)}catch(E){console.error(`[PersistenceManager]  Failed to fetch ${h}:`,E)}}}return n}async saveLocal(t,r){const n={data:r,timestamp:new Date().toISOString()};await je.setItem(t,n),this.metadataCache.set(t,{timestamp:n.timestamp}),this._saveMetadata()}updateFlowState(t,r,n){const s=this.contracts.get(t);if(!s||!s[r]||s[r].scope!=="COSMOS")return null;const o=`${t}.${r}`,i={data:n,timestamp:new Date().toISOString()};return this.saveLocal(o,n),{adapterId:t,dataKey:r,entry:i}}isCacheValid(t,r){const n=this.contracts.get(t);if(!n||!n[r]){if(r.startsWith("vault_tree_")){const c=this.metadataCache.get(`${t}.${r}`);return c?(Date.now()-new Date(c.timestamp).getTime())/1e3<3600:!1}return!1}const s=`${t}.${r}`,o=this.metadataCache.get(s);return o?(Date.now()-new Date(o.timestamp).getTime())/1e3<n[r].ttl:!1}async getCached(t,r){const n=`${t}.${r}`,s=await je.getItem(n);return s?s.data:null}async clearCache(t=null){if(t)for(const r of this.metadataCache.keys())r.startsWith(`${t}.`)&&(this.metadataCache.delete(r),await je.deleteCosmos(r));else this.metadataCache.clear(),await je.purge();this._saveMetadata()}async fetchContent(t,r,n){const{folderId:s="ROOT",query:o}=r,i=o?null:`${t}.vault_tree_${s}`,c=r.forceRefresh||r.refresh;if(i&&this.isCacheValid(t,`vault_tree_${s}`)&&!c){const l=await this.getCached(t,`vault_tree_${s}`);if(l)return console.log(`[PersistenceManager]  DB Hit for ${i}`),{items:l,fromCache:!0}}try{const l=r.accountId||null,u={folderId:s,query:o,accountId:l,forceRefresh:c},f=await n.executeAction(`${t}:listContents`,u);if(f&&f.error)throw new Error(`[${f.error_code||"UNKNOWN"}] ${f.error}`);const h=Array.isArray(f)?f:(f==null?void 0:f.results)||(f==null?void 0:f.items)||(f==null?void 0:f.artifacts)||(f==null?void 0:f.result)||[],m=(f==null?void 0:f.metadata)||{hydrationLevel:100,total:h?h.length:0};return i&&h&&await this.saveLocal(i,h),typeof f=="object"&&!Array.isArray(f)?{...f,items:h||[],metadata:m}:{items:h||[],metadata:m}}catch(l){throw console.error(`[PersistenceManager]  Signal Lost for ${t}:`,l),l}}async _fetchData(t,r,n){let s={folderId:"ROOT"};return r.startsWith("vault_tree_")&&(s.folderId=r.replace("vault_tree_","")),(await this.fetchContent(t,s,n)).items}async triggerBackgroundHydration(t,r,n){console.log("[PersistenceManager]  Background Hydration sequence initiated...");const s=(t==null?void 0:t.adapters)||[],o=[];try{for(const[i,c]of this.contracts.entries()){const l=s.includes(i);for(const[u,f]of Object.entries(c))(f.compute==="EAGER"||l&&f.hydrate)&&(this.isCacheValid(i,u)||o.push(this._fetchData(i,u,r).then(h=>this.saveLocal(`${i}.${u}`,h))))}o.length>0&&await Promise.all(o)}catch(i){console.error("[PersistenceManager]  Hydration sweep interrupted:",i)}finally{n&&n()}}_loadMetadata(){try{const t=localStorage.getItem(this.storageKey);if(t){const r=JSON.parse(t);for(const[n,s]of Object.entries(r))this.metadataCache.set(n,s)}}catch(t){console.warn("[PersistenceManager] Meta-error:",t)}}_saveMetadata(){try{const t=Object.fromEntries(this.metadataCache);localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(t){console.warn("[PersistenceManager] Meta-save fail:",t)}}async reconcileCosmosState(t,r=null){var i;console.log(" [DEBUG] reconcileCosmosState CALLED",{hasLocal:!!t,hasBackend:!!r,localArtifactsCount:((i=t==null?void 0:t.artifacts)==null?void 0:i.length)||0}),console.group(" [ADR-012] Reconciliation Protocol");let n=t,s="LOCAL";if(r){const c=new Date((t==null?void 0:t.last_modified)||(t==null?void 0:t._timestamp)||0).getTime(),l=new Date((r==null?void 0:r.last_modified)||(r==null?void 0:r._timestamp)||0).getTime();console.log(` Local timestamp: ${new Date(c).toISOString()}`),console.log(` Backend timestamp: ${new Date(l).toISOString()}`),l>c?(n=r,s="BACKEND",console.log(" Backend is newer, using backend state")):console.log(" Local is newer or equal, using local state")}else console.log(" Backend unavailable, using local state");const o=this._sanitizeCosmosState(n);return s==="LOCAL"&&r===null?console.log(" Backend unavailable, state will sync on next connection"):s==="LOCAL"&&r&&console.log(" Local is newer, should upload to backend"),console.log(` Reconciliation complete. Truth source: ${s}`),console.groupEnd(),o}_sanitizeCosmosState(t){var n;if(!t)return t;console.group(" [Hygiene] State Sanitization");const r={...t};if(Array.isArray(r.artifacts)){const s=r.artifacts.length,o=r.artifacts.filter(l=>!l._isDeleted),i=new Map;o.forEach(l=>{i.set(l.id,l)}),r.artifacts=Array.from(i.values());const c=r.artifacts.length;s!==c?console.warn(` Removed ${s-c} duplicate/zombie artifacts`):console.log(" Artifacts array is clean (no duplicates)"),r.artifacts=r.artifacts.map(l=>{if(!l.CAPABILITIES)return l;const u={...l.CAPABILITIES},f=Object.keys(u).find(m=>m.replace(/_/g," ").trim().toUpperCase()==="QUERY FILTER");f&&f!=="QUERY_FILTER"&&(u.QUERY_FILTER=u[f],delete u[f],console.log(` Normalized '${f}'  'QUERY_FILTER' for artifact ${l.id}`));const h={...l,CAPABILITIES:u};return l.data&&typeof l.data=="object"&&(h.data={...l.data,CAPABILITIES:u}),h})}if(Array.isArray(r.relationships)){const s=new Set(((n=r.artifacts)==null?void 0:n.map(c=>c.id))||[]),o=r.relationships.length;r.relationships=r.relationships.filter(c=>!c._isDeleted&&s.has(c.source)&&s.has(c.target));const i=r.relationships.length;o!==i&&console.warn(` Removed ${o-i} orphaned/zombie relationships`)}return console.log(" State sanitization complete"),console.groupEnd(),r}}const qt=new Vh;class $h{constructor(){ia(this,"lib",{map:(t,r,n,s,o)=>(t-r)*(o-s)/(n-r)+s,oscillate:(t,r)=>Math.sin(t*r*Math.PI*2)*.5+.5,lerp:(t,r,n)=>t+(r-t)*n});this.cache=new Map,this.allowedMathDocs=["sin","cos","tan","abs","min","max","pow","sqrt","exp","log","floor","ceil","round"],this.aliases=new Map}setAliases(t){for(const[r,n]of Object.entries(t))this.aliases.set(r,n)}compile(t){if(this.cache.has(t))return this.cache.get(t);const n=t.replace(/^{{|}}$/g,"").trim().split("|").map(u=>u.trim()),s=n[0],o=n.slice(1),i=this._buildJSExecutor(s,o),c=this._tryTranspileToGLSL(s,o),l={executor:i,glsl:c,dependencies:[s]};return this.cache.set(t,l),l}_buildJSExecutor(t,r){r.forEach(n=>{n.startsWith("map(")?n.match(/\(([^)]+)\)/)[1]:n.startsWith("oscillate(")&&n.match(/\(([^)]+)\)/)[1]});try{const s=(this.aliases.has(t)?this.aliases.get(t):t).replace(/[^a-zA-Z0-9_.]/g,"");return new Function("state","compiler",`
        "use strict";
        let val = state["${s}"];
        if (val === undefined) return 0;
        ${this._buildFilterLogic(r)}
        return val;
      `)}catch(n){return console.error("JIT Error compiling expression:",t,n),()=>0}}_buildFilterLogic(t){let r="";return t.forEach(n=>{const s=n.match(/^(\w+)\((.*)\)$/);if(s){const o=s[1],i=s[2];r+=`val = compiler.lib.${o}(val, ${i});
`}}),r}_tryTranspileToGLSL(t,r){let n=`state_${t.replace(/\./g,"_")}`;for(const s of r)if(s.startsWith("map(")){const o=s.match(/\((.*)\)/)[1].split(",").map(i=>i.trim());n=`mix(${o[2]}, ${o[3]}, clamp((${n} - ${o[0]}) / (${o[1]} - ${o[0]}), 0.0, 1.0))`}else return null;return n}}class Yh{constructor(){this.pools=new Map,this.activeNodes=new Map}get(t,r){this.pools.has(t)||this.pools.set(t,[]);const n=this.pools.get(t);let s;return n.length>0?(s=n.pop(),s.isActive=!0):s=this._createNodePrimitive(t),s.id=r,this.activeNodes.set(r,s),s}release(t){const r=this.activeNodes.get(t);if(!r)return;r.isActive=!1,this._resetNodeState(r),this.pools.get(r.type).push(r),this.activeNodes.delete(t)}releaseAll(){for(const t of this.activeNodes.keys())this.release(t)}_createNodePrimitive(t){return{type:t,id:null,isActive:!0,geometry:{},physiology:{bindings:[],uniforms:{}},_internal:{instanceId:-1,dirty:!0}}}_resetNodeState(t){t.geometry={},t.physiology.bindings=[],t.physiology.uniforms={},t._internal.dirty=!0}}class Hh{constructor(t){if(this.canvas=t,this.gl=t.getContext("webgl2",{antialias:!0,alpha:!0}),!this.gl)throw new Error("ISK: WebGL2 not supported by the environment.");this.programs=new Map,this.textures=new Map,this.vaos=new Map,this.textureSize=128,this._setupBaseEngine()}_setupBaseEngine(){const t=this.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0)}initArchetype(t,r,n){const s=this._createProgram(r,n);this.programs.set(t,s),this._setupInstancingBuffers(t)}render(t,r,n){const s=this.gl;s.clear(s.COLOR_BUFFER_BIT),this._updateDataTextures(t);for(const[o,i]of this.programs){s.useProgram(i),s.uniform2f(s.getUniformLocation(i,"u_resolution"),this.canvas.width,this.canvas.height),s.uniform1f(s.getUniformLocation(i,"u_interpolation"),n),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.textures.get("last")),s.uniform1i(s.getUniformLocation(i,"u_dataLast"),0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this.textures.get("current")),s.uniform1i(s.getUniformLocation(i,"u_dataCurrent"),1);const c=this.vaos.get(o);s.bindVertexArray(c),s.drawArraysInstanced(s.TRIANGLE_STRIP,0,4,r)}}_updateDataTextures(t){const r=this.gl;if(!this.textures.has("current")){this.textures.set("last",this._createDataTexture(t)),this.textures.set("current",this._createDataTexture(t)),this.lastBuffer=new Float32Array(t);return}r.bindTexture(r.TEXTURE_2D,this.textures.get("last")),r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.textureSize,this.textureSize,r.RGBA,r.FLOAT,this.lastBuffer),r.bindTexture(r.TEXTURE_2D,this.textures.get("current")),r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.textureSize,this.textureSize,r.RGBA,r.FLOAT,t),this.lastBuffer.set(t)}resizeDataTextures(t){this.textureSize=t,this.textures.has("current")&&(this.gl.deleteTexture(this.textures.get("last")),this.gl.deleteTexture(this.textures.get("current")),this.textures.delete("last"),this.textures.delete("current"))}_createDataTexture(t){const r=this.gl,n=r.createTexture();return r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,this.textureSize,this.textureSize,0,r.RGBA,r.FLOAT,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}_createProgram(t,r){const n=this.gl,s=this._compileShader(n.VERTEX_SHADER,t),o=this._compileShader(n.FRAGMENT_SHADER,r),i=n.createProgram();return n.attachShader(i,s),n.attachShader(i,o),n.linkProgram(i),i}_compileShader(t,r){const n=this.gl,s=n.createShader(t);return n.shaderSource(s,r),n.compileShader(s),n.getShaderParameter(s,n.COMPILE_STATUS)||console.error(n.getShaderInfoLog(s)),s}_setupInstancingBuffers(t){const r=this.gl,n=r.createVertexArray();r.bindVertexArray(n);const s=new Float32Array([-1,-1,1,-1,-1,1,1,1]),o=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,s,r.STATIC_DRAW);const i=0;r.enableVertexAttribArray(i),r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),this.vaos.set(t,n)}}const as={getBaseVertexShader:()=>`#version 300 es
        layout(location = 0) in vec2 a_position; // Geometra base (quad/unit circle)
        
        uniform sampler2D u_dataLast;
        uniform sampler2D u_dataCurrent;
        uniform float u_interpolation; // t entre frames
        uniform vec2 u_resolution;
        uniform float u_textureSize;

        out vec4 v_color;
        out float v_visibility;

        vec4 fetchData(int id, sampler2D tex) {
            int x = id % int(u_textureSize);
            int y = id / int(u_textureSize);
            return texelFetch(tex, ivec2(x, y), 0);
        }

        void main() {
            int id = gl_InstanceID;
            
            // Fetch de estados
            vec4 dataLast = fetchData(id, u_dataLast);
            vec4 dataCurrent = fetchData(id, u_dataCurrent);
            
            // Interpolacin L2 (Anti-Stuttering)
            vec2 pos = mix(dataLast.xy, dataCurrent.xy, u_interpolation);
            float radius = mix(dataLast.z, dataCurrent.z, u_interpolation);
            v_visibility = mix(dataLast.w, dataCurrent.w, u_interpolation);

            // Descarte temprano si no es visible
            if (v_visibility < 0.01) {
                gl_Position = vec4(2.0, 2.0, 2.0, 1.0); // Fuera del clip space
                return;
            }

            // Transformacin al Clip Space
            vec2 screenPos = (pos / u_resolution) * 2.0 - 1.0;
            vec2 scaledOffset = (a_position * radius * 2.0) / u_resolution;
            
            gl_Position = vec4(screenPos + scaledOffset, 0.0, 1.0);
            v_color = vec4(1.0); // Se sobreescribe en fragment shader si se desea
        }
    `,getCircleFragmentShader:()=>`#version 300 es
        precision highp float;
        in vec4 v_color;
        in float v_visibility;
        out vec4 fragColor;

        void main() {
            // Calculamos distancia al centro del quad para dibujar el crculo
            vec2 uv = gl_PointCoord * 2.0 - 1.0; 
            // Nota: En instancing manual usamos a_position como UV interna
            
            // Implementacin simplificada para el arquetipo Circle
            fragColor = vec4(0.0, 0.8, 1.0, v_visibility);
        }
    `,getArcFragmentShader:()=>`#version 300 es
        precision highp float;
        out vec4 fragColor;
        // ... Lgica de arco v3.2
        void main() {
            fragColor = vec4(1.0, 0.5, 0.0, 1.0);
        }
    `};class Wh{constructor(){this.schemaSnapshots=new Map}validateStructure(t,r){const n=new Set;for(const[s,o]of Object.entries(r))for(const[i,c]of Object.entries(o))c.dependencies.forEach(l=>{this._getValueByPath(t,l)===void 0&&n.add(l)});return n.size>0?{step:"HANDSHAKE",status:"CRITICAL",message:"Incoherencia Estructural Detectada",missing:Array.from(n)}:{status:"VALID"}}auditExploitation(t,r){const n=this._getAllPaths(t),s=new Set;for(const i of Object.values(r))for(const c of Object.values(i))c.dependencies.forEach(l=>s.add(l));const o=n.filter(i=>!s.has(i));return o.length>0?{status:"WARNING",message:"Sub-explotacin de Datos Detectada",unusedRatio:`${o.length}/${n.length}`,unusedFields:o}:{status:"OPTIMAL"}}createRefactorSnapshot(t,r){const n=JSON.stringify(this._getAllPaths(r).sort());this.schemaSnapshots.set(t,n)}checkRefactorDebt(t,r){if(!this.schemaSnapshots.has(t))return{status:"NEW"};const n=JSON.stringify(this._getAllPaths(r).sort()),s=this.schemaSnapshots.get(t);return n!==s?{status:"REFACTOR_ALARM",message:"Cambio de esquema detectado en el Core. El ISK puede estar desactualizado."}:{status:"SAFE"}}_getValueByPath(t,r){return r.split(".").reduce((n,s)=>n&&n[s],t)}_getAllPaths(t,r=""){return Object.keys(t).reduce((n,s)=>{const o=r?`${r}.${s}`:s;return typeof t[s]=="object"&&t[s]!==null&&!Array.isArray(t[s])?n.concat(this._getAllPaths(t[s],o)):n.concat([o])},[])}}const Kh={RECT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[100,100],min:[1,1]},u_fill:{type:"v4",default:[1,1,1,1]},u_stroke:{type:"v4",default:[0,0,0,1]},u_strokeWidth:{type:"f32",default:0,min:0,max:50},u_opacity:{type:"f32",default:1,min:0,max:1},u_cornerRadius:{type:"f32",default:0,min:0},u_visibility:{type:"f32",default:1,min:0,max:1}}},ELLIPSE:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_radius:{type:"f32",default:50,min:1},u_fill:{type:"v4",default:[1,1,1,1]},u_stroke:{type:"v4",default:[0,0,0,1]},u_opacity:{type:"f32",default:1,min:0,max:1},u_visibility:{type:"f32",default:1,min:0,max:1}}},TEXT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_fontSize:{type:"f32",default:14,min:1,max:200},u_color:{type:"v4",default:[1,1,1,1]},u_opacity:{type:"f32",default:1,min:0,max:1},u_weight:{type:"f32",default:400,min:100,max:900},u_visibility:{type:"f32",default:1,min:0,max:1}}},IMAGE:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[100,100]},u_opacity:{type:"f32",default:1,min:0,max:1},u_saturation:{type:"f32",default:1,min:0,max:2},u_visibility:{type:"f32",default:1,min:0,max:1}}},GROUP:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_scale:{type:"f32",default:1},u_rotation:{type:"f32",default:0},u_visibility:{type:"f32",default:1,min:0,max:1}}},FRAME:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[200,200]},u_padding:{type:"v4",default:[0,0,0,0]},u_gap:{type:"f32",default:0},u_fill:{type:"v4",default:[0,0,0,0]},u_visibility:{type:"f32",default:1,min:0,max:1}}},DATA_SLOT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_intensity:{type:"f32",default:.5,min:0,max:1},u_color:{type:"v4",default:[.5,1,.5,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}},REPEATER:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_count:{type:"f32",default:1,min:1,max:1e3},u_offset:{type:"v2",default:[0,50]},u_visibility:{type:"f32",default:1,min:0,max:1}}},ARC:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_innerRadius:{type:"f32",default:40},u_outerRadius:{type:"f32",default:50},u_startAngle:{type:"f32",default:0},u_endAngle:{type:"f32",default:180},u_fill:{type:"v4",default:[0,.5,1,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}},LINE:{properties:{u_start:{type:"v3",default:[0,0,0]},u_end:{type:"v3",default:[100,100,0]},u_thickness:{type:"f32",default:2,min:.1},u_color:{type:"v4",default:[1,1,1,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}}},Qh={roles:Kh};class Xh{constructor(t){this.kernel=t,this.registry=Qh.roles,this.persistenceBuffer=null}processMessage(t){const{payload:r,integrity:n}=t,{target_id:s,property:o,value:i,action:c}=r,l=this.kernel.pool.activeNodes.get(s);if(!l)return this._logError("ERR_ENTITY_NOT_FOUND",`Target ${s} does not exist in pool.`),!1;const u=this.registry[l.type];if(!u)return this._logError("ERR_INVALID_ROLE",`Role ${l.type} is not defined in ContractRegistry.`),!1;const f=u.properties[o];return f?this._validateValue(i,f)?(this.kernel.worker&&this.kernel.worker.postMessage({action:"HFS_UPDATE",payload:{target_id:s,property:o,value:i}}),n.persistence>0&&this.persistenceBuffer&&this.persistenceBuffer.queueChange(t),!0):(this._logError("ERR_TYPE_VIOLATION",`Value for ${o} does not match expected type ${f.type} or is out of range.`),!1):(this._logError("ERR_INVALID_PROPERTY",`Property ${o} is not valid for role ${l.type}.`),!1)}_validateValue(t,r){const{type:n,min:s,max:o}=r;switch(n){case"f32":if(typeof t!="number"||s!==void 0&&t<s||o!==void 0&&t>o)return!1;break;case"v2":if(!Array.isArray(t)||t.length!==2||s&&(t[0]<s[0]||t[1]<s[1]))return!1;break;case"v3":if(!Array.isArray(t)||t.length!==3)return!1;break;case"v4":if(!Array.isArray(t)||t.length!==4)return!1;break;case"str":if(typeof t!="string")return!1;break;case"bool":if(typeof t!="boolean")return!1;break}return!0}_logError(t,r){console.warn(`[ISK-USSP] ${t}: ${r}`)}setPersistenceBuffer(t){this.persistenceBuffer=t}}const Jh="modulepreload",qh=function(e){return"/indra-os/"+e},sc={},cr=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=qh(l),l in sc)return;sc[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Jh,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return s.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};class Zh{constructor(t=300){this.debounceTime=t,this.queue=new Map,this.timer=null,this.isProcessing=!1}queueChange(t){const{target_id:r,property:n}=t.payload,s=`${r}.${n}`;this.queue.set(s,t),this._resetTimer()}_resetTimer(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>this._flush(),this.debounceTime)}async _flush(){if(this.queue.size===0||this.isProcessing)return;this.isProcessing=!0;const t=Array.from(this.queue.values());this.queue.clear();try{console.log(`[ISK-USSP] Persisting ${t.length} changes to Core...`);const r=await fe.call("indra","commitSpatialChanges",{changes:t.map(n=>n.payload)});r.status==="success"?console.log(`[ISK-USSP] Persistence successful: ${r.summary}`):this._handleFailure(t)}catch(r){console.error("[ISK-USSP] Persistence error:",r),this._handleFailure(t)}finally{this.isProcessing=!1}}async _handleFailure(t){console.warn(`[ISK-USSP] Persistence failed for ${t.length} items. Moving to Iron Memory (AxiomaticDB).`);try{const n=[...await AxiomaticDB.getItem("USSP_RETRY_QUEUE")||[],...t];n.length>500&&(console.error("[ISK-USSP]  PRESSURE RELIEF: Backup queue exceeding safety limits. Engaging World Lock."),(await cr(async()=>{const{default:o}=await Promise.resolve().then(()=>Ph);return{default:o}},void 0)).default.getState().engageWorldLock("USSP_BUFFER_FULL")),await AxiomaticDB.setItem("USSP_RETRY_QUEUE",n)}catch(r){console.error("[ISK-USSP] Critical: Failed to save to Iron Memory.",r)}}}const em=Li((e,t)=>({snapshot:{nodes:{},edges:[],metadata:{}},history:[],historyPointer:-1,hydrate:r=>{e({snapshot:r,history:[JSON.stringify(r)],historyPointer:0})},applyChange:r=>{const{target_id:n,property:s,value:o}=r,i=t().snapshot,c={...i.nodes},l={...c[n]||{}};l[s.replace("u_","")]=o,c[n]=l;const u={...i,nodes:c};e({snapshot:u}),t()._recordHistory(u)},undo:()=>{const{history:r,historyPointer:n}=t();if(n>0){const s=n-1;e({snapshot:JSON.parse(r[s]),historyPointer:s})}},redo:()=>{const{history:r,historyPointer:n}=t();if(n<r.length-1){const s=n+1;e({snapshot:JSON.parse(r[s]),historyPointer:s})}},_recordHistory:r=>{const{history:n,historyPointer:s}=t(),o=JSON.stringify(r);if(o===n[s])return;const i=n.slice(0,s+1);i.push(o),i.length>50&&i.shift(),e({history:i,historyPointer:i.length-1})}}));class Td{constructor(){this.compiler=new $h,this.pool=new Yh,this.integrity=new Wh,this.bridge=new Xh(this),this.persistence=new Zh,this.bridge.setPersistenceBuffer(this.persistence),this.worker=null,this.laws=new Map,this.compiledLaws={},this.state={nodes:[],lastReification:{},lastUpdateTime:Date.now(),targetFrameRate:60,integrity:{status:"INITIALIZING"},sequenceId:0,lastProcessedSequenceId:-1},this.textureSize=128,this.dataBuffer=new Float32Array(this.textureSize*this.textureSize*4),this.renderer=null,this._initWorker()}setCanvas(t){this.renderer=new Hh(t),this._setupArchetypes()}loadLaws(t){this.pool.releaseAll(),this.laws.clear(),this.compiledLaws={};const r=t.length;this._ensureTextureCapacity(r);let n=0;t.forEach(o=>{this.laws.set(o.identity.uuid,o);const i=this._compilePhysiology(o);this.compiledLaws[o.identity.uuid]={executors:i,index:n++},this.pool.get(o.dna.archetype,o.identity.uuid)}),this._syncWorker();const s={"core.power":0,"time.now":0};this.integrity.createRefactorSnapshot("INITIAL_LOAD",s),em.getState().hydrate({nodes:{},edges:[],metadata:{}})}update(t){const r=this.integrity.validateStructure(t,this.compiledLaws);if(this.state.integrity=r,r.status==="CRITICAL"){console.error("ISK INTEGRITY CRITICAL:",r.message,r.missing);return}const n=this.integrity.checkRefactorDebt("INITIAL_LOAD",t);n.status==="REFACTOR_ALARM"&&(this.state.integrity={status:"WARNING",message:n.message});const s=this.integrity.auditExploitation(t,this.compiledLaws);if(this.state.exploitation=s,this.worker){const o=++this.state.sequenceId;this.worker.postMessage({action:"UPDATE_STATE",payload:{state:t,sequenceId:o}})}}_compilePhysiology(t){var r;return((r=t.dna.geometry)==null?void 0:r.expressions)||{}}_initWorker(){try{this.worker=new Worker(new URL("/indra-os/assets/SpatialWorker-B4jZiYSs.js",import.meta.url)),this.worker.onmessage=t=>this._handleWorkerMessage(t)}catch(t){console.warn("ISK: Worker initialization failed. Falling back to Main Thread.",t)}}_syncWorker(){this.worker&&this.worker.postMessage({action:"INIT",payload:{laws:this.compiledLaws,textureSize:this.textureSize}})}_handleWorkerMessage(t){var i,c,l;const{action:r,results:n,sequenceId:s,isPartial:o}=t.data;if(r==="REIFICATION_RESULT"){if(!o&&s<=this.state.lastProcessedSequenceId)return;o||(this.state.lastProcessedSequenceId=s),this.dataBuffer.set(n);const u=(c=(i=window.AxiomaticStore)==null?void 0:i.getState)==null?void 0:c.call(i),f=((l=u==null?void 0:u.phenotype)==null?void 0:l.artifacts)||[],h=new Set(f.filter(E=>E._isDirty).map(E=>E.id)),m=Date.now();this._hysteresisMap||(this._hysteresisMap=new Map);let g=0;for(const[E,N]of this.laws){const b=g*4;if(h.has(E))this._hysteresisMap.set(E,m),this.dataBuffer[b+3]=.75;else{const p=this._hysteresisMap.get(E)||0;m-p<300?this.dataBuffer[b+3]=.75:this.dataBuffer[b+3]=1}g++}this.state.lastUpdateTime=Date.now()}}tick(){if(!this.renderer)return;const t=Date.now();if(this._fpsLastTime||(this._fpsLastTime=t,this._fpsFrames=0,this.panicMode=!1),this._fpsFrames++,t-this._fpsLastTime>1e3){const o=this._fpsFrames*1e3/(t-this._fpsLastTime);this._fpsLastTime=t,this._fpsFrames=0,o<30&&!this.panicMode?(console.warn(`[ProjectionKernel]  PANIC MODE: FPS dropped to ${Math.round(o)}. Throttling physics.`),this.panicMode=!0,this._syncPanicState()):o>45&&this.panicMode&&(console.log(`[ProjectionKernel]  STABILIZED: FPS recovered to ${Math.round(o)}. Restoring physics.`),this.panicMode=!1,this._syncPanicState())}const r=t-this.state.lastUpdateTime,n=1e3/this.state.targetFrameRate,s=Math.min(r/n,1);this.renderer.render(this.dataBuffer,this.laws.size,s)}_syncPanicState(){this.worker&&this.worker.postMessage({action:"SET_PANIC_MODE",payload:{enabled:this.panicMode}})}_setupArchetypes(){this.renderer&&(this.renderer.initArchetype("arc",as.getBaseVertexShader(),as.getArcFragmentShader()),this.renderer.initArchetype("circle",as.getBaseVertexShader(),as.getCircleFragmentShader()))}_applyReificationToNodes(){let t=0;for(const[r,n]of this.pool.activeNodes){const s=this.state.lastReification[r];if(s){const o=t*4;this.dataBuffer[o]=s.x||0,this.dataBuffer[o+1]=s.y||0,this.dataBuffer[o+2]=s.radius||0,this.dataBuffer[o+3]=n.isActive?1:0,n._internal.dirty=!0}t++}}_ensureTextureCapacity(t){let r=128;for(;r*r<t;)r*=2;r!==this.textureSize&&(console.log(`ISK: Re-scaling Data Texture to ${r}x${r} for ${t} nodes.`),this.textureSize=r,this.dataBuffer=new Float32Array(this.textureSize*this.textureSize*4),this.renderer&&this.renderer.resizeDataTextures(this.textureSize))}}class tm{constructor(){this.activePulses=new Set,this.dispatchFunction=null,this._maxTTL=10,this.pulseRegistry=new Map}setDispatcher(t){this.dispatchFunction=t}async propagate(t,r,n,s=10,o=new Set,i=null){var f,h,m,g,E,N;const{state:c,execute:l}=t;if(s<=0){console.warn(`[SynapticDispatcher]  TTL EXPIRED for ${r}. Signal auto-terminated.`);return}if(o.has(r)){console.warn(`[SynapticDispatcher]  LOOP DETECTED at ${r}. Breaking circuit.`);return}o.add(r);const u=((f=c.phenotype.relationships)==null?void 0:f.filter(b=>{var d;return b.source===r&&!b._isDeleted&&(!i||b.sourcePort===i||i==="onRowSelect"&&((d=b.sourcePort)==null?void 0:d.startsWith("col:")))}))||[];if(u.length!==0)for(const b of u){const d=c.phenotype.artifacts.find(S=>S.id===b.target&&!S._isDeleted);if(!d)continue;this._triggerPulse(b.id);const p=b.targetPort,v=(h=Object.entries(d.CAPABILITIES||{}).find(([S,y])=>S===p||y.io==="INPUT"||y.io==="WRITE"||y.io==="TRIGGER"))==null?void 0:h[0];if(v){console.log(`[SynapticDispatcher]  Flowing: ${r} [${b.sourcePort}] >> ${d.id} [${p}]`);let S=n;const y=c.phenotype.artifacts.find(L=>L.id===r),A=(m=y==null?void 0:y.CAPABILITIES)==null?void 0:m[b.sourcePort],_=((g=d.CAPABILITIES)==null?void 0:g[p])||((E=d.CAPABILITIES)==null?void 0:E[v]);if((N=b.sourcePort)!=null&&N.startsWith("col:")&&typeof n=="object"&&n!==null){const L=b.sourcePort.replace("col:","");S=n[L]!==void 0?n[L]:n,console.log(`[SynapticDispatcher]  Extracted [${L}] from row payload.`)}(A==null?void 0:A.type)==="BLOB"&&(_==null?void 0:_.type)==="DATAFRAME"?S=(n==null?void 0:n.name)||(n==null?void 0:n.id)||String(n):(_==null?void 0:_.type)==="SIGNAL"&&(S=null),this.dispatchFunction&&this.dispatchFunction({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Sinapsis: ${r} >> ${d.LABEL} (${(_==null?void 0:_.type)||"SIGNAL"})`,type:"SUCCESS"}}),setTimeout(()=>{l("EXECUTE_NODE_ACTION",{nodeId:d.id,capability:v,payload:S,_ttl:s-1,_visited:new Set(o)})},100)}setTimeout(()=>this._clearPulse(b.id),1e3)}}_triggerPulse(t){this.pulseRegistry.set(t,!0),this.dispatchFunction&&this.dispatchFunction({type:"PULSE_START",payload:t})}_clearPulse(t){this.pulseRegistry.delete(t),this.dispatchFunction&&this.dispatchFunction({type:"PULSE_END",payload:t})}isPulseActive(t){return this.pulseRegistry.has(t)}}const ac=new tm,ji=w.createContext(null);ji.displayName="AxiomaticContext";const Pa={sovereignty:{status:"UNKNOWN",mode:localStorage.getItem("INDRA_MODE")||"LIVE",theme:"dark",portalOpen:!1},ui:{dnaPanelOpen:!1,chaosPanelOpen:!1,currentLayer:localStorage.getItem("INDRA_ANCHOR_LAYER")||null,pendingConnection:null,vaultPanelOpen:!1},devLab:{perspective:"VAULT",targetId:"VAULT",isMockEnabled:!0}},rm=(e,t)=>{var r;switch(t.type){case"SET_CURRENT_LAYER":return t.payload?localStorage.setItem("INDRA_ANCHOR_LAYER",t.payload):localStorage.removeItem("INDRA_ANCHOR_LAYER"),{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,currentLayer:t.payload}}};case"TOGGLE_UI_PANEL":{const n=t.payload.panel,s=e.phenotype.ui;let o={...s};return n==="dna"&&(o.dnaPanelOpen=!s.dnaPanelOpen),n==="chaos"&&(o.chaosPanelOpen=!s.chaosPanelOpen),n==="vault"&&(o.vaultPanelOpen=!s.vaultPanelOpen),{...e,phenotype:{...e.phenotype,ui:o}}}case"SET_THEME":return{...e,sovereignty:{...e.sovereignty,theme:t.payload.theme}};case"SET_MODE":return localStorage.setItem("INDRA_MODE",t.payload.mode),{...e,sovereignty:{...e.sovereignty,mode:t.payload.mode}};case"TOGGLE_PORTAL":return{...e,sovereignty:{...e.sovereignty,portalOpen:t.payload!==void 0?t.payload:!e.sovereignty.portalOpen}};case"TOGGLE_VISUALIZATION_MODE":{const s=(((r=e.phenotype.activeLayout)==null?void 0:r.VIEW_MODE)||"GRAPH")==="GRAPH"?"DASHBOARD":"GRAPH";return{...e,phenotype:{...e.phenotype,activeLayout:{...e.phenotype.activeLayout||{},VIEW_MODE:s}}}}case"SET_LAB_PERSPECTIVE":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,perspective:t.payload}}};case"SET_LAB_TARGET":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,targetId:t.payload}}};case"TOGGLE_LAB_MOCK":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,isMockEnabled:!e.phenotype.devLab.isMockEnabled}}};case"SYSTEM_LOCKED":return{...e,sovereignty:{...e.sovereignty,status:"LOCKED",portalOpen:!1}};case"SYSTEM_HALTED":return{...e,sovereignty:{...e.sovereignty,status:"HALTED"}};case"SET_LAYOUT_DIRTY":return{...e,_layoutDirty:t.payload};default:return e}},Zr={MAIL:{threads:[{id:"m1",sender:"Indra Protocol",subject:"Welcome to the Nexus",preview:"Initial synchronization estab...",time:"Now",unread:!0,type:"MAIL"},{id:"m2",sender:"System Core",subject:"Weekly Digest",preview:"Performance metrics are stable.",time:"10:00 AM",unread:!1,type:"MAIL"},{id:"m3",sender:"Void Observer",subject:"Anomaly Detected",preview:"Sector 7 is showing irregular...",time:"Yesterday",unread:!0,type:"MAIL"}]},MESSAGING:{threads:[{id:"c1",sender:"Sarah Connor",preview:"Are you online?",time:"10:05 AM",unread:!0,type:"CHAT"},{id:"c2",sender:"Dev Team",preview:"Deployment successful.",time:"09:30 AM",unread:!1,type:"CHAT"}]},SOCIAL:{feed:[{id:"s1",user:"Design Bot",content:"New layout patterns available.",likes:42,type:"POST"},{id:"s2",user:"System",content:"v2.0 is live.",likes:128,type:"ANNOUNCEMENT"}]},DRIVE:{items:[{id:"d1",name:"Project Alpha",type:"DIRECTORY",mimeType:"application/vnd.google-apps.folder",lastUpdated:"Today"},{id:"d2",name:"Specs.pdf",type:"FILE",mimeType:"application/pdf",lastUpdated:"Yesterday"},{id:"d3",name:"Budget.xlsx",type:"FILE",mimeType:"application/vnd.google-apps.spreadsheet",lastUpdated:"Mon"}]},NOTION:{items:[{id:"n1",name:"Product Roadmap",type:"PAGE",url:"notion://mock/1",lastUpdated:"Today"},{id:"n2",name:"Design System",type:"Database",url:"notion://mock/2",lastUpdated:"3 days ago"},{id:"n3",name:"Meeting Notes",type:"PAGE",url:"notion://mock/3",lastUpdated:"Last week"}]},MEDIA:{playlist:[{id:"v1",title:"Demo Reel 2026",duration:"02:30",type:"VIDEO"},{id:"a1",title:"System Ambience",duration:"45:00",type:"AUDIO"}]},CALENDAR:{events:[{id:"e1",title:"Deep Work Session",start:"10:00",end:"12:00",type:"FOCUS"},{id:"e2",title:"Team Sync",start:"14:00",end:"14:30",type:"MEETING"}]}},nm=(e,t="SYSTEM")=>(console.warn(`[AxiomaticFallback]  Injecting Mock Data for ${e} (${t})`),Zr[e]?Zr[e]:t==="COMMUNICATION"?{...Zr.MAIL,...Zr.MESSAGING}:t==="SENSING"?Zr.Drive:{items:[],message:"No mock data available for this archetype."}),sm={phenotype:{vault:[],artifacts:[],relationships:[],silos:{},siloMetadata:{},cosmosIdentity:null,activeLayout:null,activeFlow:null,focusStack:[],activePulses:[],availableCosmos:[],discoveryStatus:"IDLE"}},am=(e,t)=>{var r,n,s,o,i,c,l,u,f,h,m,g,E,N,b,d,p,v,S,y,A,_,L,z,C,M,k;switch(t.type){case"SELECT_ARTIFACT":{const x=t.payload;if(!x||e.phenotype.cosmosIdentity&&x.id===e.phenotype.cosmosIdentity.id)return{...e,phenotype:{...e.phenotype,activeLayout:e.phenotype.cosmosIdentity,focusStack:[e.phenotype.cosmosIdentity].filter(Boolean)}};const T=[...e.phenotype.focusStack||[]];return T.some(I=>I.id===x.id)||T.push(x),{...e,phenotype:{...e.phenotype,activeLayout:x,focusStack:T}}}case"EXIT_FOCUS":{const x=[...e.phenotype.focusStack||[]];x.pop();const T=x[x.length-1]||e.phenotype.cosmosIdentity;return{...e,phenotype:{...e.phenotype,activeLayout:T,focusStack:x}}}case"VAULT_LOAD_SUCCESS":{const x=t.payload.nodeId||"unknown_node",T=t.payload.data,I=Array.isArray(T)?T:T.results||T.items||[];T.metadata||I.length;let O=e.phenotype.activeLayout;(O==null?void 0:O.id)===x&&(O={...O,...T,items:I});const V=((r=T.SCHEMA)==null?void 0:r.columns)||T.columns||[];let R=Array.isArray(V)?V:[];if(R.length===0&&I.length>0){const D=I[0],G=D.fields||D.properties||D.Properties||D;R=Object.keys(G).filter(B=>!B.startsWith("_")&&B!=="id"&&B!=="ID").map(B=>({id:B,label:B.toUpperCase()}))}const U=(e.phenotype.artifacts||[]).map(D=>{var B,W;if(D.id===x||((B=D.data)==null?void 0:B.id)===x){const re=((W=T.SCHEMA)==null?void 0:W.columns)||T.columns||D.ARCHETYPE==="DATABASE"||D.schemaId==="DATABASE_NODE",ne=re?{DATA_STREAM:{io:"STREAM",type:"TABLE",human_label:"DATA_SOURCE "}}:{},se={...D.CAPABILITIES,...ne};return se["QUERY FILTER"]&&(se.QUERY_FILTER||(se.QUERY_FILTER=se["QUERY FILTER"]),delete se["QUERY FILTER"]),{...D,ARCHETYPE:re?D.ARCHETYPE||"DATABASE":D.ARCHETYPE,schemaId:re?"DATABASE_NODE":D.schemaId,data:{...D.data,...T,items:I,_reifiedAt:Date.now()},CAPABILITIES:se}}return D});return{...e,phenotype:{...e.phenotype,activeLayout:O,artifacts:U,vault:I,silos:{...e.phenotype.silos,[x]:T},siloMetadata:{...e.phenotype.siloMetadata,[x]:{ORIGIN_SOURCE:T.ORIGIN_SOURCE,SCHEMA:T.SCHEMA,PAGINATION:T.PAGINATION,BURST_METADATA:T.BURST_METADATA,_loadedAt:Date.now()}}}}}case"VAULT_WRITE":{const x=t.payload,T=[x,...e.phenotype.vault.filter(I=>I.id!==x.id)];return{...e,phenotype:{...e.phenotype,vault:T}}}case"UPDATE_ARTIFACT_POSITION":{const{nodeId:x,x:T,y:I}=t.payload;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.map(O=>O.id===x?{...O,x:T,y:I,_isDirty:!0}:O)}}}case"ADD_ARTIFACT_REQUEST":{const{artifact:x,position:T,schemaId:I}=t.payload,V=(((n=e.phenotype.artifacts)==null?void 0:n.length)||0)*30,R=T||{x:V,y:V},U=x.LABEL||x.label||x.functional_name||x.name||"Manifested Protocol",D=(x.DOMAIN||x.domain||"SYSTEM").toUpperCase();let G=x.ARCHETYPE||x.archetype||"NODE",B=x.CAPABILITIES||x.capabilities||x.schemas||{};G==="BRIDGE"&&(G="VAULT");const W=x.mimeType||((s=x.data)==null?void 0:s.mimeType)||"",re=W==="application/vnd.indra.notion-db"||W==="application/vnd.google-apps.spreadsheet"||W.includes("sheet")||x.type==="DATABASE"||((o=x.data)==null?void 0:o.type)==="DATABASE"||G==="DATABASE";if(re){G="DATABASE",B={...B,onRowSelect:{io:"OUTPUT",type:"JSON",human_label:"Data Rows "},query:{io:"INPUT",type:"QUERY",human_label:"Query Filter "}};const ve=Object.keys(B).find(ht=>ht.replace(/_/g," ").trim().toUpperCase()==="QUERY FILTER");ve&&ve!=="QUERY_FILTER"?(B.QUERY_FILTER=B[ve],delete B[ve]):!ve&&!B.QUERY_FILTER&&(B.QUERY_FILTER={io:"INPUT",type:"QUERY",human_label:"QUERY_FILTER "},B.query&&delete B.query);const pr=((i=x.data)==null?void 0:i.columns)||x.columns||[];Array.isArray(pr)&&pr.forEach(ht=>{var $r;const st=ht.id||ht.ID;B[`col:${st}`]={io:"OUTPUT",type:(($r=ht.type)==null?void 0:$r.toUpperCase())||"STRING",human_label:`${ht.label||st} `}})}const ne=x.ARCHETYPES||((c=x.data)==null?void 0:c.ARCHETYPES)||[G];re&&!ne.includes("DATABASE")&&ne.push("DATABASE"),re&&!ne.includes("VAULT")&&ne.push("VAULT"),ne.includes("NODE")||ne.push("NODE");const se={id:x.id||`node_${crypto.randomUUID().split("-")[0]}_${Date.now().toString(36)}`,schemaId:re?"DATABASE_NODE":I||((x==null?void 0:x.type)==="DIRECTORY"?"FOLDER_NODE":"FILE_NODE"),LABEL:U,DOMAIN:D,ARCHETYPE:G,ARCHETYPES:ne,ORIGIN_SOURCE:(u=x.ORIGIN_SOURCE||x.origin||((l=x.data)==null?void 0:l.ORIGIN_SOURCE))==null?void 0:u.toLowerCase(),x:R.x,y:R.y,data:{...x,ARCHETYPES:ne,CAPABILITIES:B},CAPABILITIES:B,_isDirty:!0};return{...e,phenotype:{...e.phenotype,artifacts:[...e.phenotype.artifacts||[],se]}}}case"COSMOS_MOUNTED":{(f=t.payload)!=null&&f.flow_state;const x=t.payload.id||t.payload.cosmos_id||t.payload.ID,T=t.payload.LABEL||t.payload.label||((h=t.payload.identity)==null?void 0:h.label)||t.payload.NAME||t.payload.name||x,I={...t.payload,id:x,LABEL:T},O=((m=t.payload)==null?void 0:m.silos)||{},V=((g=t.payload)==null?void 0:g.siloMetadata)||{};let R=[];Object.entries(O).forEach(([B,W])=>{(!R.length||B==="drive"||B==="root"||B==="vault")&&(R=W)});const U=((E=t.payload)==null?void 0:E.artifacts)||[];console.group(" [COSMOS_MOUNTED] Diagnostic Report"),console.log(" Raw Payload Artifacts:",(N=t.payload)==null?void 0:N.artifacts),console.log(" Processed Artifacts Count:",U.length);const D=U.reduce((B,W)=>(B[W.id]=(B[W.id]||0)+1,B),{}),G=Object.entries(D).filter(([B,W])=>W>1);return G.length>0?(console.error(" DUPLICATES DETECTED IN BACKEND JSON:",G),G.forEach(([B,W])=>{console.log(`   ID: ${B} appears ${W} times`)})):console.log(" No duplicates in artifacts array"),console.groupEnd(),{...e,sovereignty:{...e.sovereignty,status:"ACTIVE"},phenotype:{...e.phenotype,cosmosIdentity:I,activeLayout:I,focusStack:I?[I]:[],isDeepHydrating:((b=t.payload)==null?void 0:b._SIGNAL)==="PATIENCE_TOKEN",ui:{...e.phenotype.ui,currentLayer:null},silos:{...e.phenotype.silos,...O},vault:R,siloMetadata:{...e.phenotype.siloMetadata,...V},artifacts:U,relationships:((d=t.payload)==null?void 0:d.relationships)||[]}}}case"ADD_RELATIONSHIP":{const{source:x,target:T,sourcePort:I,targetPort:O}=t.payload;if((e.phenotype.relationships||[]).some(G=>G.source===x&&G.target===T&&G.sourcePort===I&&G.targetPort===O))return e;const R=e.phenotype.artifacts.find(G=>G.id===x),U=e.phenotype.artifacts.find(G=>G.id===T);if(!jr.validateRelationship(R,U,t.payload))return e;const D={id:`rel_${crypto.randomUUID().split("-")[0]}_${Date.now().toString(36)}`,source:x,target:T,sourcePort:I,targetPort:O,created_at:new Date().toISOString(),_isDirty:!0};return{...e,phenotype:{...e.phenotype,relationships:[...e.phenotype.relationships||[],D],ui:{...e.phenotype.ui,pendingConnection:null},_relationshipsDirty:!0}}}case"VAULT_LOADING":{const x=(v=(p=t.payload)==null?void 0:p.nodeId)==null?void 0:v.toLowerCase();return{...e,phenotype:{...e.phenotype,siloMetadata:{...e.phenotype.siloMetadata,[x]:{...e.phenotype.siloMetadata[x],hydrationLevel:5,status:"SCANNING"}}}}}case"HYDRATION_LOADING":return e;case"VAULT_ITEM_DELETED":{const x=(t.payload.nodeId||"drive").toLowerCase(),T=e.phenotype.silos[x]||[],I=t.payload.itemId,O=Date.now(),V=(((y=(S=window.useAxiomaticState)==null?void 0:S.getState)==null?void 0:y.call(S))||{session:{revisionCycle:0}}).session.revisionCycle,R=e.phenotype.artifacts.map(B=>{var W;return((W=B.data)==null?void 0:W.id)===I?{...B,_isDeleted:!0,_isDirty:!0,_tombstoneAt:O,_deathCycle:V}:B}),U=R.filter(B=>{var W;return B._isDeleted&&((W=B.data)==null?void 0:W.id)===I}).map(B=>B.id),D=e.phenotype.relationships.map(B=>U.includes(B.source)||U.includes(B.target)?{...B,_isDeleted:!0,_isDirty:!0,_tombstoneAt:O,_deathCycle:V}:B),G=D!==e.phenotype.relationships;return{...e,phenotype:{...e.phenotype,vault:e.phenotype.vault.filter(B=>B.id!==I),silos:{...e.phenotype.silos,[x]:Array.isArray(T)?T.filter(B=>B.id!==I):T},artifacts:R,relationships:D,_relationshipsDirty:e.phenotype._relationshipsDirty||G}}}case"VAULT_ITEM_RENAMED":{const x=(t.payload.nodeId||"drive").toLowerCase(),T=e.phenotype.silos[x]||[],I=t.payload.itemId,O=t.payload.newName;let V=e.phenotype.cosmosIdentity;return(V==null?void 0:V.id)===I&&(V={...V,LABEL:O,name:O,identity:{...V.identity,label:O}}),{...e,phenotype:{...e.phenotype,cosmosIdentity:V,vault:e.phenotype.vault.map(R=>R.id===I?{...R,name:O}:R),silos:{...e.phenotype.silos,[x]:Array.isArray(T)?T.map(R=>R.id===I?{...R,name:O}:R):T},artifacts:e.phenotype.artifacts.map(R=>{var U;return((U=R.data)==null?void 0:U.id)===I?{...R,LABEL:O,_isDirty:!0}:R}),activeLayout:((A=e.phenotype.activeLayout)==null?void 0:A.id)===I?{...e.phenotype.activeLayout,LABEL:O,label:O}:e.phenotype.activeLayout}}}case"VAULT_ITEM_MOVED":{const x=(t.payload.nodeId||"drive").toLowerCase(),T=e.phenotype.silos[x]||[];return{...e,phenotype:{...e.phenotype,vault:e.phenotype.vault.filter(I=>I.id!==t.payload.itemId),silos:{...e.phenotype.silos,[x]:Array.isArray(T)?T.filter(I=>I.id!==t.payload.itemId):T}}}}case"HYDRATE_FROM_PERSISTENCE":{if(((_=e.phenotype.cosmosIdentity)==null?void 0:_.id)!==t.payload.cosmosId)return e;const x=t.payload.hydratedData||{},T=x.silos||{};let I=e.phenotype.vault;return T.drive?I=Array.isArray(T.drive)?T.drive:T.drive.items||T.drive.vault_tree||[]:T.root&&(I=Array.isArray(T.root)?T.root:T.root.items||T.root.vault_tree||[]),{...e,phenotype:{...e.phenotype,...x,vault:I,silos:{...e.phenotype.silos,...T},siloMetadata:updatedSiloMetadata,artifacts:updatedArtifacts}}}case"CLEAR_COSMOS_SESSION":return{...e,phenotype:{...e.phenotype,cosmosIdentity:null,activeLayout:null,activeFlow:null,artifacts:[],relationships:[],focusStack:[],ui:{...e.phenotype.ui,currentLayer:e.phenotype.ui.currentLayer==="DEV_LAB"?"DEV_LAB":"SELECTOR"}}};case"SET_PENDING_CONNECTION":return{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,pendingConnection:t.payload}}};case"PURGE_LOGICAL_DELETION":{const x=(L=t.payload)==null?void 0:L.ids;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.filter(T=>x?!(x.includes(T.id)&&T._isDeleted):!T._isDeleted),relationships:e.phenotype.relationships.filter(T=>x?!(x.includes(T.id)&&T._isDeleted):!T._isDeleted)}}}case"CLEAR_PENDING_CONNECTION":return{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,pendingConnection:null}}};case"PULSE_START":return{...e,phenotype:{...e.phenotype,activePulses:[...e.phenotype.activePulses,t.payload]}};case"PULSE_END":return{...e,phenotype:{...e.phenotype,activePulses:e.phenotype.activePulses.filter(x=>x!==t.payload)}};case"PURGE_TOMBSTONES":{const x=(((C=(z=window.useAxiomaticState)==null?void 0:z.getState)==null?void 0:C.call(z))||{session:{revisionCycle:0}}).session.revisionCycle,T=I=>I._isDeleted?x-(I._deathCycle||0)<2:!0;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.filter(T),relationships:e.phenotype.relationships.filter(T)}}}case"UPDATE_COSMOS_REGISTRY":return{...e,phenotype:{...e.phenotype,availableCosmos:t.payload||[],discoveryStatus:"READY"}};case"SET_DISCOVERY_STATUS":return{...e,phenotype:{...e.phenotype,discoveryStatus:t.payload}};case"REMOVE_ARTIFACT":{const x=t.payload.id,T=Date.now(),I=(((k=(M=window.useAxiomaticState)==null?void 0:M.getState)==null?void 0:k.call(M))||{session:{revisionCycle:0}}).session.revisionCycle,O=e.phenotype.artifacts.map(R=>String(R.id).toLowerCase()===String(x).toLowerCase()?{...R,_isDeleted:!0,_isDirty:!0,_tombstoneAt:T,_deathCycle:I}:R),V=e.phenotype.relationships.map(R=>{const U=String(R.source).toLowerCase()===String(x).toLowerCase(),D=String(R.target).toLowerCase()===String(x).toLowerCase();return U||D?{...R,_isDeleted:!0,_isDirty:!0,_tombstoneAt:T,_deathCycle:I}:R});return{...e,phenotype:{...e.phenotype,artifacts:O,relationships:V,_relationshipsDirty:!0}}}case"UPDATE_NODE":{const{id:x,updates:T}=t.payload;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.map(I=>I.id===x?{...I,...T,_isDirty:!0}:I)}}}default:return e}},om={NEVER_PERSISTED:["_isDirty","_simulated","_tombstoned","_liveData","_cache","_fetching","_error","_lastFetched","_adapterState","_uiState","_virtualData","_isGhost","_isMock"]};function im(e){if(!e||typeof e!="object")return console.warn("[DataConventions] Invalid artifact for cleaning:",e),e;const t={...e};return om.NEVER_PERSISTED.forEach(r=>{delete t[r]}),e.type,t}function lm(e){return Array.isArray(e)?e.map(t=>{const r={...t};return delete r._isDirty,delete r._simulated,delete r._tombstoned,delete r._uiState,r}):[]}const oc=Li((e,t)=>({lastSnapshotTime:null,snapshotCount:0,prepareSnapshot:()=>{var l,u,f;const r=(u=(l=window.AxiomaticStore)==null?void 0:l.getState)==null?void 0:u.call(l);if(!r||!((f=r.phenotype)!=null&&f.cosmosIdentity))return null;const n=r.phenotype.cosmosIdentity.id,s=H.getState(),o=(r.phenotype.artifacts||[]).filter(h=>!h._isGhost&&!h._isMock).map(h=>im(h)),i=lm(r.phenotype.relationships||[]),c={cosmosId:n,artifacts:o,relationships:i,activeLayout:r.phenotype.activeLayout,activeFlow:r.phenotype.activeFlow,devLab:r.phenotype.devLab,_timestamp:Date.now(),_revisionHash:s.session.currentRevisionHash};return e({lastSnapshotTime:Date.now(),snapshotCount:t().snapshotCount+1}),c},getStats:()=>({lastSnapshotTime:t().lastSnapshotTime,snapshotCount:t().snapshotCount,timeSinceLastSnapshot:t().lastSnapshotTime?Date.now()-t().lastSnapshotTime:null})})),cm={sovereignty:{...Pa.sovereignty,status:fe.sovereigntyStatus||"UNKNOWN",mode:localStorage.getItem("INDRA_MODE")||(window.location.href.includes("mode=lab")?"LAB":"LIVE"),genesisTime:Date.now()},genotype:null,phenotype:{...sm.phenotype,devLab:Pa.devLab,ui:Pa.ui,logs:[],availableCosmos:[],discoveryStatus:"IDLE",currentRevisionHash:null}},um=(e,t)=>{if(t.type==="LOG_ENTRY")return{...e,phenotype:{...e.phenotype,logs:[t.payload,...e.phenotype.logs].slice(0,50)}};if(t.type==="NUCLEAR_PURGE")return localStorage.removeItem("INDRA_GENOTYPE_L0"),localStorage.removeItem("INDRA_PERSISTENCE_CACHE"),window.location.reload(),e;if(t.type==="IGNITE_SYSTEM")return{...e,sovereignty:{...e.sovereignty,status:t.payload.sovereignty,portalOpen:!0},genotype:t.payload.genotype||e.genotype,phenotype:{...e.phenotype,logs:[{time:new Date().toLocaleTimeString(),msg:` SYSTEM IGNITION: ${t.payload.sovereignty}`,type:"SUCCESS"},...e.phenotype.logs].slice(0,50)}};let r=e;return r=rm(r,t),r=am(r,t),r},dm=({children:e})=>{const[t,r]=w.useReducer(um,cm),n=xe.useRef(new Td);w.useEffect(()=>{H.getState().igniteHash(),jr.setDispatcher(r),ac.setDispatcher(r),window.ISK_KERNEL=n.current;const c=H.subscribe(u=>{u.session.status==="TERMINATED"&&r({type:"CLEAR_COSMOS_SESSION"})}),l=u=>{var h,m,g,E,N;const f=oc.getState();if(f&&typeof f.prepareSnapshot=="function"){const b=f.prepareSnapshot();if(b&&(((h=b.artifacts)==null?void 0:h.length)>0||((m=b.relationships)==null?void 0:m.length)>0)){const d=(E=(g=window.AxiomaticStore)==null?void 0:g.getState)==null?void 0:E.call(g);(((N=d==null?void 0:d.phenotype)==null?void 0:N.artifacts)||[]).some(S=>S._isDirty)&&(u.preventDefault(),u.returnValue="")}}};return window.addEventListener("beforeunload",l),()=>{c(),window.removeEventListener("beforeunload",l)}},[]),w.useEffect(()=>{window.AxiomaticStore={getState:()=>t,dispatch:r,kernel:n.current},window.useSyncOrchestrator=oc},[t]);const s=async(c,l)=>{var u,f,h,m,g,E,N,b,d,p,v,S,y,A,_,L,z,C,M,k;if(console.error(`[EXECUTE]  ${c}`,{payload:l,thread:"AXIOM_MAIN"}),c==="IGNITE_SYSTEM"&&ss.igniteReflexes(r),c==="CLEAR_COSMOS_SESSION"&&(localStorage.removeItem("LAST_ACTIVE_COSMOS_ID"),qt.clearCache()),c==="MOUNT_COSMOS"){const x=l.cosmosId;H.getState().setLoading(!0),r({type:"VAULT_LOADING"}),r({type:"SET_CURRENT_LAYER",payload:null});let T=!1;const I=O=>{T||(T=!0,r({type:"SET_CURRENT_LAYER",payload:null}),H.getState().setLoading(!1),qt.triggerBackgroundHydration(O==null?void 0:O.activeLayout,fe))};try{const O=await je.getItem(`COSMOS_STATE_${x}`);if(O){console.info("%c  [Axiom:Store] Warm-up: Preparing local projection while validating with cloud...","color: #94a3b8;");const V=await qt.reconcileCosmosState(O,null);r({type:"COSMOS_MOUNTED",payload:V})}}catch(O){console.warn("[Axiom:Store] L2 Read failed:",O)}try{const O=await ss.mountCosmos(x),V=O.result||O,R=Array.isArray(V)?V[0]:V,U=(R==null?void 0:R.payload)||R;if(!U)throw new Error("Cosmos Data is empty or corrupted.");const D=U.id||U.cosmos_id||U.ID||x,G=await je.getItem(`COSMOS_STATE_${D}`),B=await qt.reconcileCosmosState(G,U);if(!G||U._revisionHash!==G._revisionHash){console.info("%c  [Axiom:Store] Cloud Consensus: Updating reality to latest server revision.","color: #38bdf8;"),r({type:"COSMOS_MOUNTED",payload:B});const W=O.revision_hash||(U==null?void 0:U.revision_hash)||O._revisionHash;W&&H.getState().updateRevisionHash(W),await je.setItem(`COSMOS_STATE_${D}`,B),T||I(B)}else T||I(B);H.getState().setSessionAuthorized(D),localStorage.setItem("LAST_ACTIVE_COSMOS_ID",D),r({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Cosmos '${(B==null?void 0:B.LABEL)||"unnamed"}' sincronizado`,type:"SUCCESS"}})}catch(O){console.error("%c  [Axiom:Store] Critical Mount Failure:","color: #ef4444;",O),H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`Error de Montaje: ${O.message}`,type:"ERROR"}}),T||(r({type:"CLEAR_COSMOS_SESSION"}),r({type:"SET_CURRENT_LAYER",payload:"SELECTOR"}),je.deleteCosmos(x))}return}if(c==="SELECT_ARTIFACT"){let x=l;if(typeof x=="string"){const T=q.getCanon(x)||((u=t.phenotype.artifacts)==null?void 0:u.find(I=>I.id===x));if(!T){console.error(`[Axiom:Store] FATAL: Cannot resolve identity for: ${x}`);return}x=T}if(r({type:"SELECT_ARTIFACT",payload:x}),(x==null?void 0:x.ARCHETYPE)==="DATABASE"||(x==null?void 0:x.type)==="DATABASE"||(f=x==null?void 0:x.mimeType)!=null&&f.includes("sheet")){const T=x.id||((h=x.data)==null?void 0:h.id),I=(m=t.phenotype.silos)==null?void 0:m[T];if(!I||I.length===0){const O=x.ORIGIN_SOURCE||((g=x.data)==null?void 0:g.ORIGIN_SOURCE),V=x.ACCOUNT_ID||((E=x.data)==null?void 0:E.ACCOUNT_ID);O&&(console.info(`%c[Reify:Middleware]  Pre-loading database: ${T} from ${O}`,"color: #38bdf8; font-weight: bold;"),s("FETCH_DATABASE_CONTENT",{databaseId:T,nodeId:O,accountId:V}))}}if((x==null?void 0:x.schemaId)==="FOLDER_NODE"||((N=x==null?void 0:x.data)==null?void 0:N.type)==="DIRECTORY"){const T=((b=x.data)==null?void 0:b.id)||x.id,I=(((d=x.data)==null?void 0:d.ORIGIN_SOURCE)||x.ORIGIN_SOURCE||"drive").toLowerCase();s("FETCH_VAULT_CONTENT",{folderId:T,nodeId:I})}return}if(c==="EXIT_FOCUS"){r({type:"SELECT_ARTIFACT",payload:null});return}if(c==="EXECUTE_NODE_ACTION"){const{nodeId:x,capability:T,payload:I,_ttl:O,_visited:V}=l,R=(p=t.phenotype.artifacts)==null?void 0:p.find(U=>U.id===x);if(!R)return;window.dispatchEvent(new CustomEvent("ISK_SYNAPTIC_PULSE",{detail:{nodeId:x}})),r({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Triggering ${R.LABEL} -> ${T}`,type:"INFO"}});try{const U=await fe.executeAction(`${((v=R.data)==null?void 0:v.id)||R.id}:${T}`,I);ac.propagate({state:t,execute:s},x,U,O!==void 0?O:10,V||new Set,T)}catch(U){r({type:"LOG_ENTRY",payload:{msg:` Flow Error: ${U.message}`,type:"ERROR"}})}return}if(c==="FETCH_VAULT_CONTENT"){const{folderId:x,query:T,accountId:I,nodeId:O,refresh:V}=l;let R=(O||"drive").toLowerCase();R==="vault_global"&&(R="drive");const U=x||"ROOT";H.getState().setLoading(!0),r({type:"VAULT_LOADING",payload:{nodeId:R,folderId:U}});try{const D=await qt.fetchContent(R,{folderId:U,query:T,accountId:I,forceRefresh:V},fe);H.getState().setLoading(!1),r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:R,data:D}})}catch(D){H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`[IO:${R.toUpperCase()}] Error: ${D.message}`,type:"ERROR"}})}return}if(c==="START_DISCOVERY"){r({type:"SET_DISCOVERY_STATUS",payload:"SCANNING"});try{const x=await ss.listAvailableCosmos(!0);r({type:"UPDATE_COSMOS_REGISTRY",payload:x.artifacts||[]})}catch(x){r({type:"LOG_ENTRY",payload:{msg:`Discovery Failed: ${x.message}`,type:"ERROR"}}),r({type:"UPDATE_COSMOS_REGISTRY",payload:[]})}return}if(c==="FETCH_DATABASE_CONTENT"){let{databaseId:x,nodeId:T,refresh:I,accountId:O}=l;const V=(S=t.phenotype.artifacts)==null?void 0:S.find(D=>{var G;return D.id===x||((G=D.data)==null?void 0:G.id)===x}),R=(V==null?void 0:V.ORIGIN_SOURCE)||((y=V==null?void 0:V.data)==null?void 0:y.ORIGIN_SOURCE);if(R&&R!==T&&(console.info(`%c[DB:COSMOS_RESOLVER]  Using deterministic origin from Cosmos: ${R}`,"color: #10b981; font-weight: bold;"),T=R),console.log(`%c[DB:IGNITION]  Origin: ${T||"AUTO"} | ID: ${x}`,"color: #fbbf24; font-weight: bold;"),!T){console.error(`[AxiomaticStore]  FETCH_DATABASE_CONTENT called without nodeId for database: ${x}`),r({type:"LOG_ENTRY",payload:{msg:`Cannot fetch database ${x}: origin source (nodeId) is missing`,type:"ERROR"}});return}const U=T.toLowerCase();H.getState().setLoading(!0);try{const D=await fe.executeAction("system:reifyDatabase",{databaseId:x,nodeId:U,accountId:O}),G=Array.isArray(D)?D:(D==null?void 0:D.results)||(D==null?void 0:D.items)||(D==null?void 0:D.results)||[],B=(D==null?void 0:D.SCHEMA)||null;r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:x,data:typeof D=="object"&&!Array.isArray(D)?{...D,items:G,SCHEMA:B}:{items:G,SCHEMA:B}}}),r({type:"LOG_ENTRY",payload:{msg:` Data reified: ${G.length} records retrieved.`,type:"SUCCESS"}})}catch(D){H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`[DB:${U.toUpperCase()}] Failure: ${D.message}`,type:"ERROR"}})}return}if(c==="TRACE_SOVEREIGN_DATABASE"){const{databaseId:x,nodeId:T}=l,I=(O,V)=>{console.group(`%c[ SOVEREIGN_TRACE] ${O}`,"color: #10b981; font-weight: bold;"),console.log("Context:",{databaseId:x,nodeId:T,timestamp:new Date().toISOString()}),V&&console.log("Payload:",V),console.groupEnd(),r({type:"LOG_ENTRY",payload:{msg:` [TRACE:${O}] ${x}`,type:"INFO"}})};if(I("IGNITION",l),!T||!x){I("FAILURE: Missing Params",{nodeId:T,databaseId:x});return}H.getState().setLoading(!0);try{I("ADAPTER_CALL_BEGIN",{action:"system:reifyDatabase",id:x});const O=await fe.executeAction("system:reifyDatabase",{databaseId:x,nodeId:T});I("ADAPTER_CALL_SUCCESS",{resultType:typeof O,isObject:typeof O=="object",hasResults:!!(O!=null&&O.results||O!=null&&O.items)});const V=Array.isArray(O)?O:(O==null?void 0:O.results)||(O==null?void 0:O.items)||[];I("DATA_REIFICATION",{rowCount:V.length}),r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:x,data:typeof O=="object"&&!Array.isArray(O)?{...O,items:V}:{items:V}}}),H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:` Trace Complete: ${V.length} records reified.`,type:"SUCCESS"}})}catch(O){I("CRITICAL_FAILURE",{error:O.message,stack:O.stack}),H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:` Trace Failed: ${O.message}`,type:"ERROR"}})}return}if(c==="INTEGRATE_SMART_NODE"){const{baseNode:x,config:T,schemaId:I}=l;console.log(`[Store]  Integrating Smart Node: ${x.name} using schema ${I}`);const O={id:`smart_${x.id}`,LABEL:((A=T.base_info)==null?void 0:A.label)||x.name,MATH_CAPABILITIES:{constructs:{EstimationLogic:{syntax:`PRICE = ${((_=T.pricing_logic)==null?void 0:_.base_rate)||0} * ${((L=T.pricing_logic)==null?void 0:L.complexity_factor)||1} ${(z=T.pricing_logic)!=null&&z.enable_urgency?"+ URGENCY_FEE":""}`}}}};r({type:"LOG_ENTRY",payload:{msg:`Indra Node Reified: ${O.LABEL}. Semantic bridge active.`,type:"SUCCESS"}});return}if(c==="BIND_TO_COSMOS"){const{artifact:x}=l,T=(C=t.phenotype.cosmosIdentity)==null?void 0:C.id;if(!T){r({type:"LOG_ENTRY",payload:{msg:"Debe haber un Cosmos activo para entrelazar artefactos.",type:"ERROR"}});return}r({type:"LOG_ENTRY",payload:{msg:`Entrelazando ${x.name}...`,type:"INFO"}});try{const I=await fe.call("system","bindArtifactToCosmos",{cosmosId:T,artifactId:x.id,metadata:{name:x.name,type:x.type,origin:x.origin||"VAULT"}});I!=null&&I.success&&(r({type:"LOG_ENTRY",payload:{msg:`Vnculo atmico establecido para ${x.name}`,type:"SUCCESS"}}),s("ADD_ARTIFACT_REQUEST",{artifact:{...x,LABEL:x.name,DOMAIN:"VAULT_BOND"}}))}catch(I){r({type:"LOG_ENTRY",payload:{msg:`Fallo de Entrelazamiento: ${I.message}`,type:"ERROR"}}),console.warn("[Store:Bind] Backend failed, manifesting locally only."),s("ADD_ARTIFACT_REQUEST",{artifact:x}),s("TOGGLE_UI_PANEL",{panel:"vault"})}return}if(c==="LINK_SLOT_PROPERTY"){const{slotId:x,propertyId:T,targetArtifact:I}=l;console.log(`[Axiom:Link]  Binding ${T} to ${I.id}`),r({type:"LOG_ENTRY",payload:{msg:` Vinculacin Axiomtica: ${T} <-> ${I.LABEL}`,type:"SUCCESS"}});return}if(c==="INJECT_PHANTOM_ARTIFACT"){const{engineId:x}=l;console.log(`[Axiom:Phantom]  Injecting Garage Prototype for: ${x}`);const T=(M=on.GARAGE_PROTOTYPES)==null?void 0:M[x];if(T){const I=JSON.parse(JSON.stringify(T)),O={...I,_isMock:!0,_isGhost:!0,LABEL:`${I.LABEL||x} (GARAGE)`};r({type:"ADD_ARTIFACT_REQUEST",payload:{artifact:O}}),r({type:"SET_LAB_TARGET",payload:O.id}),r({type:"LOG_ENTRY",payload:{msg:` Garage Mode Active: ${x}`,type:"INFO"}})}else r({type:"LOG_ENTRY",payload:{msg:` No prototype found for ${x}`,type:"WARNING"}});return}if(c==="DELETE_COSMOS"){const{cosmosId:x}=l,I=(t.phenotype.availableCosmos||[]).filter(O=>O.id!==x);r({type:"UPDATE_COSMOS_REGISTRY",payload:I});try{je.removeItem(`COSMOS_STATE_${x}`),localStorage.getItem("LAST_ACTIVE_COSMOS_ID")===x&&localStorage.removeItem("LAST_ACTIVE_COSMOS_ID")}catch(O){console.error("[Store:Delete] Failed to purge local L2 cache:",O)}((k=t.phenotype.cosmosIdentity)==null?void 0:k.id)===x&&r({type:"CLEAR_COSMOS_SESSION"}),ss.deleteCosmos(x).then(async()=>{r({type:"LOG_ENTRY",payload:{msg:`Cosmos ${x} borrado del servidor con xito.`,type:"SUCCESS"}}),s("START_DISCOVERY")}).catch(O=>{console.error("Delete Failed:",O),r({type:"LOG_ENTRY",payload:{msg:`Fallo al borrar en servidor: ${O.message}`,type:"ERROR"}}),s("START_DISCOVERY")});return}r({type:c,payload:l}),setTimeout(()=>{window.ISK_KERNEL&&window.ISK_KERNEL.update({...t,_lastAction:{type:c,payload:l}})},0)},o=H(c=>c.session.hashInitialized),i=H(c=>c.session.isLoading);return w.useEffect(()=>{if(!o)return;const c=localStorage.getItem("LAST_ACTIVE_COSMOS_ID");c&&!c.startsWith("temp_")&&!t.phenotype.cosmosIdentity&&!i&&s("MOUNT_COSMOS",{cosmosId:c})},[o,i]),w.useEffect(()=>{var h,m,g,E,N,b,d;const c=(h=t.phenotype.cosmosIdentity)==null?void 0:h.id;if(localStorage.setItem("INDRA_ANCHOR_LAYER",t.phenotype.ui.currentLayer||""),((m=t.phenotype.focusStack)==null?void 0:m.length)>0?localStorage.setItem("INDRA_FOCUS_STACK",JSON.stringify(t.phenotype.focusStack.map(p=>p.id))):localStorage.removeItem("INDRA_FOCUS_STACK"),c&&!c.toString().startsWith("temp_")&&localStorage.setItem("LAST_ACTIVE_COSMOS_ID",c),!(((g=t.phenotype.cosmosIdentity)==null?void 0:g.id)||((E=t.phenotype.cosmosIdentity)==null?void 0:E.cosmos_id)))return;const u=(((N=t.phenotype.artifacts)==null?void 0:N.length)||0)+(((b=t.phenotype.relationships)==null?void 0:b.length)||0),f=window._INDRA_LAST_STRUCT_COUNT||0;if(((d=t.session)==null?void 0:d.status)!=="HALTED"){const p={...t.phenotype.cosmosIdentity,artifacts:t.phenotype.artifacts,relationships:t.phenotype.relationships,silos:t.phenotype.silos,siloMetadata:t.phenotype.siloMetadata,activeLayout:t.phenotype.activeLayout,activeFlow:t.phenotype.activeFlow,_revisionHash:H.getState().session.currentRevisionHash,_localTimestamp:Date.now()};je.setItem(`COSMOS_STATE_${c}`,p),u!==f&&(window._INDRA_LAST_STRUCT_COUNT=u,console.info("%c  [Axiom:L2] Reality reified in local storage.","color: #38bdf8;"))}},[t.phenotype.cosmosIdentity,t.phenotype.artifacts,t.phenotype.relationships,t.phenotype.activeLayout,t.phenotype.activeFlow,t.phenotype.devLab]),w.useEffect(()=>H.subscribe(l=>l.session.isLoading,(l,u)=>{u===!0&&l===!1&&console.log("%c[Axiom:Guardian] Reality stabilized.","color: #00ffcc; font-weight: bold;")}),[t]),a.jsx(ji.Provider,{value:{state:t,dispatch:r,execute:s},children:e})},te=()=>{const e=w.useContext(ji);if(!e)throw new Error("useAxiomaticStore must be used within an AxiomaticProvider.");return e};class pm{constructor(){this.status="GENESIS",this.coherenceIndex=0}async assemble(){console.log(" [Assembler] Iniciando secuencia de ignicin soberana..."),this.status="STANDBY";try{const t=await fe.ignite();console.warn("[ATOMIC 5] Ignite returned to Assembler"),t.genotype&&t.genotype.COMPONENT_REGISTRY&&(console.warn("[ATOMIC 6] Injecting Ontology (Assembler side)..."),q.setOntology(t.genotype.COMPONENT_REGISTRY,t.genotype)),t.sovereignty==="LOCKED"||t.status,t.success||console.warn(" [Assembler] Handshake impuro detectado."),console.warn("[ATOMIC 7] Start Compilation..."),q.compile(),console.warn("[ATOMIC 8] Compilation Finished"),this._registerCoreModules(),console.warn("[ATOMIC 9] Core Modules Registered");const r=await this.verifyUniversalIntegrity();return console.warn("[ATOMIC 10] Integrity Checked"),console.log(" [Assembler] Phase 4: Activating Homeostasis Cycles..."),r.isCoherent?(this.status="ACTIVE",this.coherenceIndex=r.score):(this.status="DEGRADED",console.warn(" [Assembler] El sistema no es totalmente coherente:",r.errors)),console.log(` [Assembler] Sistema ensamblado. Estado: ${this.status} (Coherence: ${this.coherenceIndex}%)`),{success:!0,status:this.status,coherence:this.coherenceIndex,genotype:t.genotype,error:r.isCoherent?null:r.errors.join(", ")}}catch(t){return this.status="LOCKED",console.error(" [Assembler] Fallo crtico durante el ensamblaje. Forzando modo bloqueo:",t),{success:!0,status:"LOCKED",error:t.message||"Error desconocido"}}}async verifyUniversalIntegrity(){if(!fe.isIgnited||!fe.L0)return{isCoherent:!1,score:0,errors:["Genotipo L0 no hidratado"]};const t=[],r=q.getRenderManifest();fe.L0,console.log(" [Assembler] Iniciando Auditora de Coherencia..."),r.length===0&&t.push("ONTOLOGA VACA: No hay contratos para proyectar."),r.forEach(o=>{(!o.artefacts||o.artefacts.length===0)&&console.warn(`[Assembler] Host ${o.omd} inicializado sin artefactos activos.`),(!o.slot||o.slot==="UNDEFINED")&&t.push(`FRACTURA ANATMICA: El mdulo ${o.omd} no tiene un Slot asignado.`),o.functional_name==="UNIT_SKELETON"&&o.omd!=="OMD-00"&&console.warn(`[Assembler] Identidad Genrica detectada en ${o.omd}. Falta label en Core?`)});const n=Math.max(0,100-t.length*5),s=t.length===0;return s||console.error(" [Assembler] Auditora Fallida:",t),{isCoherent:s,score:n,errors:t}}_registerCoreModules(){const t=q.getModulesByLevel(3);console.log(` [Assembler] Backbone de Soberana registrado: ${t.length} mdulos.`)}getStatus(){return this.status}}const fm=new pm,K=({children:e,size:t=16,color:r="currentColor",className:n=""})=>a.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`inline-block transition-all duration-300 ${n}`,children:e}),j={System:e=>a.jsxs(K,{...e,children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("path",{d:"M12 8v8M8 12h8"})]}),Lock:e=>a.jsxs(K,{...e,children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cosmos:e=>a.jsxs(K,{...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2v2M12 20v2M2 12h2M20 12h2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12c0-5.52 4.48-10 10-10s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12z"})]}),Desktop:e=>a.jsxs(K,{...e,children:[a.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),a.jsx("path",{d:"M8 21h8M12 17v4"})]}),Lab:e=>a.jsx(K,{...e,children:a.jsx("path",{d:"M9 3h6M10 3v13a4 4 0 1 0 4 0V3M8.5 10h7"})}),Sync:e=>a.jsx(K,{...e,children:a.jsx("path",{d:"M1 4v6h6M23 20v-6h-6M20.49 9A9 9 0 0 0 5.64 5.64L1 10M3.51 15a9 9 0 0 0 14.85 3.36L23 14"})}),Sun:e=>a.jsxs(K,{...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),Moon:e=>a.jsx(K,{...e,children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Terminal:e=>a.jsxs(K,{...e,children:[a.jsx("polyline",{points:"4 17 10 11 4 5"}),a.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),List:e=>a.jsxs(K,{...e,children:[a.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),a.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),a.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),a.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),a.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),a.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Clock:e=>a.jsxs(K,{...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),ChevronDown:e=>a.jsx(K,{...e,children:a.jsx("polyline",{points:"6 9 12 15 18 9"})}),Plus:e=>a.jsxs(K,{...e,children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Eye:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),SidebarLeft:e=>a.jsxs(K,{...e,children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),SidebarRight:e=>a.jsxs(K,{...e,children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),a.jsx("line",{x1:"15",y1:"3",x2:"15",y2:"21"})]}),Search:e=>a.jsxs(K,{...e,children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:e=>a.jsx(K,{...e,children:a.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),Close:e=>a.jsxs(K,{...e,children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),ChevronRight:e=>a.jsx(K,{...e,children:a.jsx("polyline",{points:"9 18 15 12 9 6"})}),Activity:e=>a.jsx(K,{...e,children:a.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Trash:e=>a.jsxs(K,{...e,children:[a.jsx("polyline",{points:"3 6 5 6 21 6"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Sovereign:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M12 2L3 7v9c0 5 9 6 9 6s9-1 9-6V7l-9-5z"}),a.jsx("path",{d:"M12 22V12"}),a.jsx("path",{d:"M12 12l-5 3"}),a.jsx("path",{d:"M12 12l5 3"}),a.jsx("path",{d:"M12 7l-5 3"}),a.jsx("path",{d:"M12 7l5 3"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),Database:e=>a.jsxs(K,{...e,children:[a.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),a.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),a.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),Vault:e=>a.jsx(K,{...e,children:a.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Download:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a.jsx("polyline",{points:"7 10 12 15 17 10"}),a.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Inbox:e=>a.jsxs(K,{...e,children:[a.jsx("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),a.jsx("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})]}),Transform:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v10a4 4 0 0 0 4 4h6"}),a.jsx("path",{d:"M2 11h20"}),a.jsx("path",{d:"M7 6l-5 5 5 5"}),a.jsx("path",{d:"M17 16l5-5-5-5"})]}),Settings:e=>a.jsxs(K,{...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Help:e=>a.jsxs(K,{...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),a.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),ArrowRight:e=>a.jsxs(K,{...e,children:[a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),a.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Maximize:e=>a.jsx(K,{...e,children:a.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})}),Cpu:e=>a.jsxs(K,{...e,children:[a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}),a.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),a.jsx("line",{x1:"9",y1:"1",x2:"9",y2:"4"}),a.jsx("line",{x1:"15",y1:"1",x2:"15",y2:"4"}),a.jsx("line",{x1:"9",y1:"20",x2:"9",y2:"23"}),a.jsx("line",{x1:"15",y1:"20",x2:"15",y2:"23"}),a.jsx("line",{x1:"20",y1:"9",x2:"23",y2:"9"}),a.jsx("line",{x1:"20",y1:"15",x2:"23",y2:"15"}),a.jsx("line",{x1:"1",y1:"9",x2:"4",y2:"9"}),a.jsx("line",{x1:"1",y1:"15",x2:"4",y2:"15"})]}),Connect:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),a.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),TV_SCREEN:e=>a.jsxs(K,{...e,children:[a.jsx("rect",{x:"2",y:"3",width:"20",height:"15",rx:"2"}),a.jsx("path",{d:"M7 21h10"}),a.jsx("path",{d:"M12 18v3"})]}),PDF:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("path",{d:"M9 15h3a2 2 0 0 0 0-4H9v4Z"})]}),BRIDGE:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M3 11c8 0 10 0 18 0"}),a.jsx("path",{d:"M3 15c8 0 10 0 18 0"}),a.jsx("path",{d:"M6 11v4"}),a.jsx("path",{d:"M18 11v4"}),a.jsx("path",{d:"M12 11v4"})]}),GRAVITY:e=>a.jsx(K,{...e,children:a.jsx("path",{d:"m12 2 3 3h-2v12h2l-3 3-3-3h2V5H9l3-3Z"})}),ENTROPY:e=>a.jsxs(K,{...e,children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M8 12h8"}),a.jsx("path",{d:"M12 8v8"}),a.jsx("path",{d:"m15 9-6 6"}),a.jsx("path",{d:"m9 9 6 6"})]}),DIMENSIONS:e=>a.jsxs(K,{...e,children:[a.jsx("path",{d:"M21 3v18H3V3h18Zm-2 2H5v14h14V5Z"}),a.jsx("path",{d:"M12 8v8"}),a.jsx("path",{d:"M8 12h8"})]}),Check:e=>a.jsx(K,{...e,children:a.jsx("polyline",{points:"20 6 9 17 4 12"})})},hm=({title:e,domain:t,data:r,inspectorPanel:n,children:s,slotId:o})=>{var u;const[i,c]=w.useState(!1),l=o==null?void 0:o.includes("SIDEBAR");return a.jsxs("div",{className:`w-full h-full flex overflow-hidden relative bg-[var(--bg-deep)] ${l?"flex-col":"flex-row"}`,children:[a.jsxs("main",{className:"flex-1 h-full relative overflow-hidden flex flex-col min-w-0",children:[a.jsxs("header",{className:"h-14 border-b border-[var(--border-color)] flex items-center justify-between px-6 bg-[var(--surface-header)] backdrop-blur-md z-10 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] shadow-[0_0_8px_var(--accent)] animate-pulse"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h2",{className:"text-[10px] font-black tracking-[0.2em] text-[var(--text-primary)] uppercase truncate max-w-[150px]",children:e}),a.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:t})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("button",{onClick:()=>c(!i),className:`p-1.5 rounded-lg transition-all ${i?"bg-[var(--accent)] text-black":"text-[var(--text-secondary)] hover:bg-[var(--surface-header)]"}`,title:"Toggle Inspector",children:a.jsx(j.SidebarRight,{size:14})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden relative",children:s})]}),a.jsx("aside",{className:`
                    border-[var(--border-color)] bg-[var(--bg-secondary)] backdrop-blur-3xl transition-all duration-500 ease-out flex flex-col overflow-hidden
                    ${l?i?"h-1/2 w-full border-t":"h-0 w-full border-t-0":i?"w-[320px] h-full border-l":"w-0 h-full border-l-0"}
                `,style:{zIndex:30},children:a.jsxs("div",{className:`${l?"w-full":"w-[320px]"} h-full flex flex-col`,children:[a.jsxs("header",{className:"h-12 border-b border-[var(--border-subtle)] flex items-center px-6 shrink-0 justify-between bg-[var(--surface-header)]",children:[a.jsx("span",{className:"text-[8px] font-black tracking-[0.3em] text-[var(--accent)] uppercase opacity-60",children:"Intelligence_Unit"}),a.jsx("button",{onClick:()=>c(!1),className:"text-[var(--text-dim)] hover:text-[var(--text-primary)] p-1 rounded hover:bg-[var(--surface-header)] transition-colors",children:a.jsx(j.Close,{size:12})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-5",children:n}),!l&&a.jsx("footer",{className:"p-4 border-t border-[var(--border-subtle)] bg-[var(--surface-header)]",children:a.jsx("div",{className:"flex flex-col gap-2",children:a.jsxs("div",{className:"flex justify-between items-center text-[7px] font-mono text-[var(--text-dim)] uppercase",children:[a.jsx("span",{children:"Artifact_ID:"}),a.jsxs("span",{className:"text-[var(--accent)]",children:[(u=r==null?void 0:r.id)==null?void 0:u.slice(0,8),"..."]})]})})})]})}),a.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/carbon-fibre.png")'}})]})},Di=e=>{var i,c,l;const{state:t}=te(),r=H(u=>u.session.isLoading),n=((i=t.phenotype.siloMetadata)==null?void 0:i[e])||{hydrationLevel:0,status:"IDLE",total:0},s=((c=t.phenotype.silos)==null?void 0:c[e])||[];let o={label:"IDLE",color:"var(--text-dim)",progress:n.hydrationLevel,isHoneymoon:!1,pulse:!1};return r&&n.status==="SCANNING"?o={label:"RESONATING",color:"var(--accent)",progress:Math.max(n.hydrationLevel,10),pulse:!0}:s.length>0&&n.hydrationLevel>=100?o={label:"SYNCED",color:"var(--success)",progress:100,pulse:!1}:r&&(o={label:"HYDRATING",color:"var(--accent-bright)",progress:n.hydrationLevel,pulse:!0}),r&&((l=window.ISK_SIGNALS)==null?void 0:l.GLOBAL_RESONANCE)!==void 0&&(o.iskResonance=window.ISK_SIGNALS.GLOBAL_RESONANCE,o.opacity=.5+window.ISK_SIGNALS.GLOBAL_RESONANCE*.5),{...o,totalItems:s.length,metadata:n}},mm=({nodeId:e,className:t=""})=>{const{progress:r,signifierColor:n,pulse:s,iskResonance:o,opacity:i}=Di(e);return a.jsx("div",{className:`h-1.5 w-full bg-[var(--bg-deep)] rounded-full overflow-hidden border border-[var(--border-subtle)]/30 ${t}`,children:a.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${r}%`,backgroundColor:n||"var(--accent)",opacity:i!==void 0?i:1,boxShadow:s||o?`0 0 ${10+(o||0)*15}px ${n}`:"none",filter:o?`brightness(${1+o*.5})`:"none"}})})},_d=({schemaId:e,onCommit:t,onCancel:r,isLoading:n=!1,error:s=null})=>{const o=q.getArtifactSchema(e),[i,c]=w.useState({}),[l,u]=w.useState({});if(!o)return a.jsxs("div",{className:"p-6 text-[var(--error)] border border-[var(--error)]/20 rounded-xl bg-[var(--error)]/5 font-mono text-sm",children:["[PROJECTION_ERROR] Unknown Schema: ",e]});const f=(g,E)=>{c(N=>{const b={...N},d=g.split(".");let p=b;for(let v=0;v<d.length-1;v++)p[d[v]]||(p[d[v]]={}),p=p[d[v]];return p[d[d.length-1]]=E,b})},h=g=>{g.preventDefault(),t&&t(i)},m=(g,E,N)=>{var S,y;const b=N?`${N}.${g}`:g,d=N?((S=i[N])==null?void 0:S[g])||"":i[g]||"";if(E.type==="object"&&E.structure)return a.jsxs("div",{className:"mb-6 animate-in fade-in slide-in-from-top-2 duration-500",children:[a.jsxs("h4",{className:"text-[10px] uppercase tracking-[0.2em] text-[var(--accent)] font-black mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-[var(--accent)] rounded-full shadow-[0_0_8px_var(--accent)]"}),E.label||g]}),a.jsx("div",{className:"grid grid-cols-1 gap-4 pl-4 border-l border-[var(--border-subtle)]",children:Object.entries(E.structure).map(([A,_])=>m(A,_,b))})]},b);const p=Array.isArray(E.options)||Array.isArray(E.enum),v=E.options||(E.enum?E.enum.map(A=>({label:A,value:A})):[]);return a.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[a.jsxs("label",{className:"text-[10px] uppercase tracking-widest text-[var(--text-dim)] font-black flex justify-between",children:[a.jsx("span",{children:E.label||g}),((y=E.validation)==null?void 0:y.required)&&a.jsx("span",{className:"text-[var(--error)] font-mono text-[8px]",children:"* REQUIRED"})]}),p?a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full appearance-none bg-[var(--bg-deep)]/50 border border-[var(--border-subtle)] focus:border-[var(--accent)]/50 rounded-lg px-4 py-2.5 text-xs text-[var(--text-soft)] outline-none transition-all focus:shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)] cursor-pointer",value:d,onChange:A=>f(b,A.target.value),children:[a.jsx("option",{value:"",disabled:!0,children:"Selecciona una opcin..."}),v.map(A=>a.jsx("option",{value:A.value,children:A.label},A.value))]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-[var(--text-dim)]",children:""})]}):a.jsx("input",{type:"text",className:"bg-[var(--bg-deep)]/50 border border-[var(--border-subtle)] focus:border-[var(--accent)]/50 rounded-lg px-4 py-2.5 text-xs text-[var(--text-soft)] placeholder:text-[var(--text-dim)]/30 outline-none transition-all focus:shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)]",placeholder:`Ingresa ${E.label||g}...`,value:d,onChange:A=>f(b,A.target.value)}),E.description&&a.jsx("span",{className:"text-[9px] text-[var(--text-dim)] leading-relaxed italic",children:E.description})]},b)};return a.jsxs("form",{onSubmit:h,className:"flex flex-col h-full overflow-hidden",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-xl font-bold text-[var(--text-vibrant)] tracking-tight mb-1",children:["Create New ",e.replace("_V1","")]}),a.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Indra Axiomatic Projection Protocol v8.0"})]}),s&&a.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl animate-in shake duration-500",children:[a.jsx("p",{className:"text-[10px] text-red-500 font-bold uppercase tracking-widest mb-1 font-mono",children:" Veto Alert (Validation Fail)"}),a.jsx("p",{className:"text-[11px] text-red-400 opacity-80 italic",children:s})]}),Object.entries(o).map(([g,E])=>m(g,E))]}),a.jsxs("div",{className:"mt-8 flex gap-4 pt-6 border-t border-[var(--border-subtle)]",children:[a.jsx("button",{type:"button",onClick:r,className:"px-6 py-2.5 rounded-xl border border-[var(--border-subtle)] text-xs font-black uppercase tracking-widest text-[var(--text-dim)] hover:bg-[var(--bg-secondary)] hover:text-[var(--text-soft)] transition-all active:scale-[0.98]",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:n,className:`
                        flex-1 px-6 py-2.5 rounded-xl text-black text-xs font-black uppercase tracking-widest transition-all active:scale-[0.98] shadow-lg
                        ${n?"bg-[var(--accent)]/50 cursor-wait opacity-50":"bg-[var(--accent)] hover:brightness-125 shadow-[var(--accent)]/20"}
                    `,children:n?"Inyectando Realidad...":"Initialize Source"})]})]})},Cd=(e=[],t={})=>{const{initialSort:r={key:"name",direction:"asc"},searchKeys:n=["name","LABEL","type","mimeType"]}=t,[s,o]=w.useState(""),[i,c]=w.useState(r),[l,u]=w.useState({}),f=b=>b?String(b).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim():"",h=(b,d)=>{const p=f(b),v=f(d);if(p===v)return 1;if(p.startsWith(v))return .9;if(p.includes(v))return .7;if(v.length>3){let S=0,y=-1;for(let A of v){const _=p.indexOf(A,y+1);_>-1&&(S++,y=_)}if(S>=v.length-1)return .5}return 0},m=w.useMemo(()=>{if(!e)return[];let b=[...e];return Object.entries(l).forEach(([d,p])=>{p==null||p==="ALL"||(b=b.filter(v=>{const S=v[d];return typeof p=="function"?p(v):typeof p=="string"&&typeof S=="string"?f(S).includes(f(p)):S===p}))}),s&&!s.startsWith("/")&&(b=b.map(d=>{const p=n.map(S=>h(d[S],s)),v=Math.max(...p);return{...d,_prismScore:v}}).filter(d=>d._prismScore>0).sort((d,p)=>p._prismScore-d._prismScore)),i.key&&(!s||s.startsWith("/"))&&b.sort((d,p)=>{const v=d[i.key],S=p[i.key];return v<S?i.direction==="asc"?-1:1:v>S?i.direction==="asc"?1:-1:0}),b},[e,s,i,l,n]),g=w.useCallback((b,d)=>{u(p=>p[b]===d?p:{...p,[b]:d})},[]),E=w.useCallback(()=>u({}),[]),N=w.useCallback(b=>{c(d=>({key:b,direction:d.key===b&&d.direction==="asc"?"desc":"asc"}))},[]);return{data:m,searchTerm:s,setSearchTerm:o,activeFilters:l,setFilter:g,clearFilters:E,sortConfig:i,toggleSort:N,totalCount:e.length,filteredCount:m.length}},Es=({data:e={},perspective:t="VAULT",slotId:r})=>{var Fi;const{state:n,execute:s}=te(),o=H(P=>P.session.isLoading);n.sovereignty.mode;const i=[{id:"drive",label:"GDrive",icon:"Vault",color:"#4285F4"},{id:"notion",label:"Notion",icon:"List",color:"#000000"},{id:"local",label:"Local",icon:"Desktop",color:"#FF9800"},{id:"cosmos",label:"Cosmos",icon:"Cosmos",color:"#9C27B0"}],c=(e.id||"drive").toLowerCase(),[l,u]=w.useState(c),f=n.phenotype.artifacts||[],h=xe.useMemo(()=>new Set(Array.isArray(f)?f.map(P=>typeof P=="string"?P:P.id):[]),[f]),m=l.toLowerCase(),{label:g,progress:E,color:N,pulse:b}=Di(m),d=r==null?void 0:r.includes("SIDEBAR"),[p,v]=w.useState(""),[S,y]=w.useState("GRID"),[A,_]=w.useState([{id:"ROOT",name:"ROOT"}]),[L,z]=w.useState(!1),[C,M]=w.useState(null),[k,x]=w.useState(!1),[T,I]=w.useState(!1),[O,V]=w.useState(""),[R,U]=w.useState(""),[D,G]=w.useState({visible:!1,x:0,y:0,node:null}),[B,W]=w.useState(!1),[re,ne]=w.useState("ISK_ADAPTER_v1.0"),[se,ve]=w.useState(!1),[pr,ht]=w.useState([]),[st,$r]=w.useState(null);w.useEffect(()=>{e.id&&e.id.toLowerCase()!==l&&u(e.id.toLowerCase())},[e.id]),w.useEffect(()=>{(async()=>{try{const $=await fe.executeAction("tokenManager:listTokenAccounts",{provider:m});if(Array.isArray($)){ht($);const Z=$.find(Xe=>Xe.isDefault);Z&&$r(Z.id)}}catch($){console.warn(`[VaultEngine] Discovery failed for ${m}:`,$),ht([])}})(),_([{id:"ROOT",name:"ROOT"}]),M(null),v("")},[m]);const ki=l==="cosmos"?n.phenotype.artifacts||[]:(()=>{var $;const P=($=n.phenotype.silos)==null?void 0:$[m];return P?Array.isArray(P)?P:P.results||P.items||P.rows||[]:[]})(),Ct=xe.useMemo(()=>{const P=ki.filter(Z=>!Z._isDeleted);return Array.from(new Map(P.map(Z=>[Z.id,Z])).values())},[ki]),{data:Pi,setSearchTerm:Rd,setFilter:fr,activeFilters:Qt}=Cd(Ct,{searchKeys:["name","LABEL","mimeType","type"]});if(w.useEffect(()=>{p.startsWith("/")||Rd(p)},[p]),!m)return a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-10 bg-[var(--bg-deep)] border border-[var(--error)]/30 rounded-2xl animate-in zoom-in duration-300",children:[a.jsx("div",{className:"text-4xl mb-4",children:""}),a.jsx("h3",{className:"text-[var(--error)] font-bold text-lg mb-2 uppercase tracking-tighter",children:"Identity_Corrupted"}),a.jsx("p",{className:"text-[var(--text-dim)] text-xs text-center max-w-md font-mono mb-6",children:"Este motor de bveda no ha recibido un ID de nodo vlido desde el Core. El sistema no puede determinar qu silo de datos proyectar."}),a.jsxs("div",{className:"bg-[var(--surface-header)] p-4 rounded-xl border border-[var(--border-subtle)] w-full max-w-md",children:[a.jsx("span",{className:"text-[9px] font-black text-[var(--accent)] uppercase block mb-2",children:"Protocolo de Reparacin:"}),a.jsxs("ul",{className:"text-[10px] text-[var(--text-soft)] space-y-2 list-disc pl-4",children:[a.jsxs("li",{children:["Verifica que el adaptador en ",a.jsx("code",{className:"text-[var(--accent)]",children:"SystemAssembler.gs"})," est decorado correctamente."]}),a.jsxs("li",{children:["Asegrate de que el campo ",a.jsx("code",{className:"text-[var(--accent)]",children:"id"})," est presente en el objeto ",a.jsx("code",{className:"text-[var(--accent)]",children:"CANON"}),"."]}),a.jsxs("li",{children:["Ejecuta ",a.jsx("code",{className:"text-[var(--accent)]",children:"clasp push"})," para sincronizar los cambios de identidad."]})]})]})]});const Mi=xe.useRef(new Set);w.useEffect(()=>{(async()=>{if(l==="cosmos")return;const $="vault_tree_ROOT";if(qt.isCacheValid(m,$)){const Z=await qt.getCached(m,$);Z&&(!Ct||Ct.length===0)&&(at(` [Vault] Optimistic recall from L2 Repository: ${m}`,"SUCCESS"),s("VAULT_LOAD_SUCCESS",{nodeId:m,data:{items:Z,metadata:{hydrationLevel:100,source:"CACHE"}}}))}})()},[m,l]),w.useEffect(()=>{l!=="cosmos"&&(!Ct||Ct.length===0)&&!o&&!Mi.current.has(m)&&(console.log(`[VaultEngine:${m}] Silo empty. Triggering Ignition Discovery...`),Mi.current.add(m),s("FETCH_VAULT_CONTENT",{nodeId:m,folderId:"ROOT",accountId:st}))},[m,Ct.length,o,l]);const{LABEL:Od,DOMAIN:Qm}=e,at=(P,$="INFO")=>{s("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:P,type:$})},Ld=P=>{P.key==="Enter"&&(z(!0),at(`Iniciando Escaneo Neural para: "${p}"...`),p&&!p.startsWith("/")&&s("FETCH_VAULT_CONTENT",{nodeId:m,query:p}),setTimeout(()=>z(!1),800))},jd=(P,$)=>{P.stopPropagation(),M($)},Dd=(P,$)=>{var Z;P.stopPropagation(),$.type==="DIRECTORY"?(z(!0),at(`Deep Scan Initiated: ${$.name}...`,"INFO"),s("FETCH_VAULT_CONTENT",{nodeId:m,folderId:$.id,accountId:st}),_(Xe=>[...Xe,{id:$.id,name:$.name}]),setTimeout(()=>z(!1),500)):$.type==="DATABASE"||$.type==="GRID"||(Z=$.mimeType)!=null&&Z.includes("sheet")?(at(`Manifesting ${$.name} into Reality Engine...`,"SUCCESS"),s("SELECT_ARTIFACT",{...$,LABEL:$.name,ARCHETYPES:["DATABASE","VAULT"],ARCHETYPE:"DATABASE",DOMAIN:"DATABASE_L1",ORIGIN_SOURCE:l,ACCOUNT_ID:st}),(l==="VAULT_GLOBAL"||n.phenotype.ui.vaultPanelOpen)&&s("TOGGLE_UI_PANEL",{panel:"vault"})):at(`Opening file: ${$.name} (Preview not available in Kernel)`,"WARNING")},kd=()=>{M(null)},Pd=async()=>{C&&(at(`Eliminando ${C.name}...`,"WARNING"),await s("DELETE_VAULT_ITEM",{nodeId:m,itemId:C.id,itemName:C.name}),M(null))},Md=P=>{const $=A.slice(0,P+1),Z=$[$.length-1];z(!0),at(`Reverting to: ${Z.name}...`),s("FETCH_VAULT_CONTENT",{nodeId:m,folderId:Z.id==="ROOT"?"ROOT":Z.id,accountId:st}),_($),z(!1)},Ui=(P,$)=>{const Z=$.type==="DATABASE"||$.type==="GRID"||$.type==="database",Xe={...$,ARCHETYPE:Z?"DATABASE":$.ARCHETYPE||$.type||"FILE",ORIGIN_SOURCE:l};P.dataTransfer.setData("indra/artifact",JSON.stringify(Xe)),at(`Initiating data drag: ${$.name} [Archetype: ${Xe.ARCHETYPE}]`),P.currentTarget.style.opacity="0.5"},Ud=P=>{P.currentTarget.style.opacity="1"},Fd=(P,$)=>{P.preventDefault(),G({visible:!0,x:P.clientX,y:P.clientY,node:$}),M($)},Bd=P=>{var Xe;const $=P.type==="DATABASE"||P.type==="GRID"||P.mimeType==="application/vnd.indra.notion-db"||((Xe=P.mimeType)==null?void 0:Xe.includes("sheet")),Z={...P,LABEL:P.name,ARCHETYPE:$?"DATABASE":P.archetype||"NODE",DOMAIN:$?"DATA_ENGINE":P.DOMAIN||"SYSTEM_VAULT",ORIGIN_SOURCE:l,ACCOUNT_ID:st,VITAL_SIGNS:$?{IO_CONSISTENCY:{value:"NOMINAL",criticality:"NOMINAL"},HYDRATION:{value:"PARTIAL",criticality:"WARNING"}}:{}};s("BIND_TO_COSMOS",{artifact:Z}),u("cosmos")},zd=P=>{at(`Artifact defined: ${D.node.name}. Integrating into Cosmos...`,"SUCCESS"),s("INTEGRATE_SMART_NODE",{baseNode:D.node,config:P,schemaId:re}),W(!1),G({visible:!1,x:0,y:0,node:null})},Gd=()=>{var P,$,Z;return C?a.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right duration-300",children:[a.jsxs("div",{className:"p-6 border-b border-[var(--border-subtle)] bg-[var(--bg-secondary)]/10",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[var(--bg-primary)] border border-[var(--border-subtle)] flex items-center justify-center shadow-lg",children:a.jsx("span",{className:"text-4xl",children:C.type==="DATABASE"||(P=C.mimeType)!=null&&P.includes("sheet")?"":C.type==="DIRECTORY"?"":""})})}),a.jsx("h3",{className:"text-sm font-bold text-[var(--text-vibrant)] text-center break-words leading-tight mb-2",children:C.name}),a.jsx("div",{className:"flex justify-center",children:a.jsx("span",{className:`text-[9px] font-black px-2 py-1 rounded uppercase tracking-wider ${C.type==="DIRECTORY"?"bg-[var(--accent)]/10 text-[var(--accent)]":"bg-[var(--text-dim)]/10 text-[var(--text-dim)]"}`,children:C.type||"FILE"})})]}),a.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",children:[a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mb-4",children:"Meta Data"}),a.jsxs("div",{className:"space-y-4 font-mono text-[10px]",children:[a.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[a.jsx("span",{className:"text-[var(--text-dim)]",children:"Size"}),a.jsx("span",{className:"text-[var(--text-soft)]",children:($=C.raw)!=null&&$.size?(C.raw.size/1024).toFixed(1)+" KB":"--"})]}),a.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[a.jsx("span",{className:"text-[var(--text-dim)]",children:"MIME"}),a.jsx("span",{className:"text-[var(--text-soft)] truncate max-w-[120px]",title:C.mimeType,children:((Z=C.mimeType)==null?void 0:Z.split(".").pop())||"Unknown"})]}),a.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[a.jsx("span",{className:"text-[var(--text-dim)]",children:"Updated"}),a.jsx("span",{className:"text-[var(--text-soft)]",children:new Date(C.lastUpdated).toLocaleDateString()})]})]}),a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mt-8 mb-4",children:"Protocols"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>{V(C.name),x(!0)},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-primary)] border border-transparent hover:border-[var(--border-subtle)] transition-all text-left group",children:[a.jsx("svg",{className:"w-4 h-4 text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{className:"text-[10px] font-bold text-[var(--text-soft)]",children:"RENAME"})]}),a.jsxs("button",{onClick:()=>I(!0),className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-primary)] border border-transparent hover:border-[var(--border-subtle)] transition-all text-left group",children:[a.jsx("svg",{className:"w-4 h-4 text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),a.jsx("span",{className:"text-[10px] font-bold text-[var(--text-soft)]",children:"MOVE TO..."})]}),a.jsxs("button",{onClick:Pd,className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-red-500/10 border border-transparent hover:border-red-500/30 transition-all text-left group mt-4",children:[a.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsx("span",{className:"text-[10px] font-bold text-red-400",children:"DELETE"})]})]})]})]}):a.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right duration-300",children:[a.jsxs("div",{className:"p-6 border-b border-[var(--border-subtle)]",children:[a.jsx("div",{className:"flex items-center gap-2 mb-4",children:a.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Current Sector"})}),a.jsx("h3",{className:"text-lg font-bold text-[var(--text-vibrant)] truncate",children:A[A.length-1].name}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-[10px] font-mono text-[var(--text-dim)]",children:[a.jsx("span",{children:"Status"}),a.jsx("span",{style:{color:N},className:b?"animate-pulse":"",children:g})]}),a.jsxs("div",{className:"flex justify-between text-[10px] font-mono text-[var(--text-dim)] mt-2",children:[a.jsx("span",{children:"Hydration"}),a.jsxs("span",{children:[E,"%"]})]}),a.jsx(mm,{nodeId:m}),a.jsxs("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-50 block text-right",children:[Ct.length," items projected"]})]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>at("Upload Protocol Initiated"),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all group",children:[a.jsx("svg",{className:"w-5 h-5 text-[var(--text-soft)] group-hover:text-[var(--accent)] group-hover:scale-110 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)]",children:"UPLOAD"})]}),a.jsxs("button",{onClick:()=>s("FETCH_VAULT_CONTENT",{nodeId:m,folderId:A[A.length-1].id,refresh:!0}),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all group",children:[a.jsx("svg",{className:"w-5 h-5 text-[var(--text-soft)] group-hover:text-[var(--accent)] group-hover:rotate-180 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)]",children:"SYNC"})]})]})]})]})};return t==="VAULT"||t==="BRIDGE"||t==="STANDARD"?a.jsx(hm,{title:"ALMACN DE ARTEFACTOS",domain:"SYSTEM_VAULT",data:e,slotId:r,inspectorPanel:Gd(),children:a.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden relative",children:[a.jsxs("nav",{className:"flex items-center gap-1 p-2 bg-[var(--surface-header)] border-b border-[var(--border-subtle)] shrink-0 overflow-x-auto scrollbar-hide",children:[i.map(P=>a.jsxs("button",{onClick:()=>u(P.id),className:`
                                    flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all text-[9px] font-black uppercase tracking-widest
                                    ${l===P.id?"bg-[var(--accent)]/10 border-[var(--accent)]/40 text-[var(--accent)]":"bg-transparent border-transparent text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}
                                `,children:[j[P.icon]&&xe.createElement(j[P.icon],{size:10}),a.jsx("span",{className:d?"hidden xs:inline":"inline",children:P.label})]},P.id)),pr.length>1&&a.jsxs("div",{className:"ml-auto flex items-center gap-2 px-3 border-l border-[var(--border-subtle)]",children:[a.jsx("span",{className:"text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter",children:"Identity:"}),a.jsx("select",{className:"bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded px-2 py-0.5 text-[8px] font-mono text-[var(--accent)] outline-none cursor-pointer",value:st||"",onChange:P=>$r(P.target.value),children:pr.map(P=>a.jsxs("option",{value:P.id,children:[P.label," ",P.isDefault?"()":""]},P.id))})]})]}),!e.hideSearch&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-[var(--surface-header)] shrink-0",children:[a.jsxs("div",{className:"flex-1 relative group",children:[a.jsx(j.Search,{size:12,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"}),a.jsx("input",{type:"text",placeholder:"Escanear Bveda...",className:"w-full bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-full pl-10 pr-4 py-2 text-[10px] font-mono text-[var(--text-primary)] outline-none focus:border-[var(--accent)]/30 transition-all shadow-inner",value:p,onChange:P=>v(P.target.value),onKeyDown:Ld})]}),a.jsx("button",{onClick:()=>ve(!se),className:`p-2 rounded-full border transition-all duration-300 ${se?"bg-[var(--accent)] text-black border-[var(--accent)]":"bg-[var(--surface-header)] border-[var(--border-subtle)] text-[var(--text-dim)] hover:text-[var(--text-primary)]"}`,title:"Filtros de Proyeccin",children:a.jsx(j.Filter,{size:12})}),a.jsx("button",{onClick:()=>s("FETCH_VAULT_CONTENT",{nodeId:m,folderId:A[A.length-1].id,accountId:st,refresh:!0}),className:"p-2 rounded-full bg-[var(--surface-header)] border border-[var(--border-subtle)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all hover:rotate-180 duration-500",children:a.jsx(j.Sync,{size:12})})]}),se&&a.jsxs("div",{className:"px-6 py-2 bg-[var(--surface-header)] border-b border-[var(--border-subtle)] flex flex-wrap gap-2 animate-in slide-in-from-top duration-200",children:[a.jsx("button",{onClick:()=>{clearFilters()},className:"px-2 py-1 rounded-md border border-red-500/30 text-red-500 text-[8px] font-bold uppercase hover:bg-red-500/10",children:"PURGAR"}),(l==="drive"||l==="VAULT")&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>fr("mimeType",P=>{var $;return($=P.mimeType)==null?void 0:$.includes("spreadsheet")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Qt.mimeType?"bg-green-500/20 border-green-500 text-green-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"MATRICES (SHEETS)"}),a.jsx("button",{onClick:()=>fr("mimeType",P=>{var $;return($=P.mimeType)==null?void 0:$.includes("document")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Qt.mimeType?"bg-blue-500/20 border-blue-500 text-blue-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"MANIFIESTOS (DOCS)"})]}),l==="local"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>fr("name",P=>{var $;return($=P.name)==null?void 0:$.toLowerCase().endsWith(".skp")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Qt.name?"bg-cyan-500/20 border-cyan-500 text-cyan-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"MOLDES (SKP)"}),a.jsx("button",{onClick:()=>fr("name",P=>{var $;return($=P.name)==null?void 0:$.toLowerCase().endsWith(".dwg")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Qt.name?"bg-indigo-500/20 border-indigo-500 text-indigo-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"PLANOS (DWG)"})]}),a.jsx("button",{onClick:()=>fr("type","DIRECTORY"),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Qt.type==="DIRECTORY"?"bg-amber-500/20 border-amber-500 text-amber-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"CONTENEDORES"}),a.jsx("button",{onClick:()=>fr("type",P=>P.type!=="DIRECTORY"),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Qt.type&&Qt.type!=="DIRECTORY"?"bg-purple-500/20 border-purple-500 text-purple-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"ENTIDADES"})]})]}),a.jsx("div",{className:"px-6 py-2 border-b border-[var(--border-subtle)] flex items-center gap-2 overflow-x-auto scrollbar-hide shrink-0 bg-[var(--surface-header)]",children:A.map((P,$)=>a.jsxs(xe.Fragment,{children:[a.jsx("button",{onClick:()=>Md($),className:`text-[8px] font-black uppercase tracking-widest hover:text-[var(--accent)] transition-all ${$===A.length-1?"text-[var(--text-primary)]":"text-[var(--text-dim)]"}`,children:P.name}),$<A.length-1&&a.jsx("span",{className:"text-[var(--text-dim)] opacity-30 text-[8px]",children:"/"})]},P.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",onClick:kd,children:a.jsx("div",{className:`grid gap-4 ${d?"grid-cols-1":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"}`,children:Pi.length>0?Pi.map(P=>{var Bi,zi,Gi,Vi;const $=h.has(P.id),Z=P.type==="DATABASE"||((Bi=P.mimeType)==null?void 0:Bi.includes("sheet")),Xe=P.type==="DIRECTORY",Vd=$?"opacity-100 scale-100 ring-1 ring-[var(--accent)]/50":"opacity-60 grayscale hover:grayscale-0 hover:opacity-100 hover:scale-[1.02]",$d=Xe?"hover:border-amber-500/30":Z?"hover:border-violet-500/50 shadow-[0_0_20px_rgba(139,92,246,0.05)]":"hover:border-blue-500/30";return a.jsxs("div",{draggable:!0,onDragStart:mt=>Ui(mt,P),onDragEnd:Ud,onClick:mt=>jd(mt,P),onDoubleClick:mt=>Dd(mt,P),onContextMenu:mt=>Fd(mt,P),className:`
                                                group relative p-4 rounded-2xl border transition-all duration-300 cursor-pointer flex flex-col items-center text-center
                                                ${Vd} ${$d}
                                                ${(C==null?void 0:C.id)===P.id?"bg-[var(--accent)]/10 border-[var(--accent)]/30 shadow-2xl !opacity-100 !grayscale-0 !scale-105":"bg-[var(--surface-card)] border-[var(--border-subtle)] hover:bg-[var(--surface-header)]"}
                                                ${d?"flex-row text-left !items-start !text-left p-3":"flex-col"}
                                            `,children:[$&&a.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 bg-[var(--accent)] rounded-full shadow-[0_0_5px_var(--accent)] z-10"}),a.jsx("div",{className:`${d?"w-8 h-8 mr-3":"w-12 h-12 mb-3"} rounded-xl bg-[var(--surface-header)] flex items-center justify-center text-xl group-hover:scale-110 transition-all duration-500 shadow-inner shrink-0`,children:P.type==="DIRECTORY"?a.jsx("span",{className:"text-amber-500",children:""}):P.type==="DATABASE"||(zi=P.mimeType)!=null&&zi.includes("sheet")?a.jsx(j.Database,{size:24,color:"var(--accent)"}):a.jsx("span",{className:"text-blue-500",children:""})}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsx("span",{className:"text-[10px] font-bold text-[var(--text-primary)] truncate w-full break-words group-hover:text-[var(--accent)]",children:P.name}),a.jsx("span",{className:`text-[7px] font-mono uppercase mt-0.5 tracking-tighter opacity-60 ${P.type==="DATABASE"||(Gi=P.mimeType)!=null&&Gi.includes("sheet")?"text-[var(--accent)] font-black":"text-[var(--text-dim)]"}`,children:(Vi=P.mimeType)!=null&&Vi.includes("sheet")?"SPREADSHEET":P.type||"FILE"})]}),a.jsx("button",{onClick:mt=>{mt.stopPropagation(),Bd(P)},className:"absolute top-2 left-2 w-6 h-6 rounded-full bg-[var(--accent)] text-black flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all hover:scale-110 shadow-lg z-20",title:"Manifestar en Cosmos",children:a.jsx(j.Plus,{size:12})})]},P.id)}):a.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-[var(--text-dim)] space-y-4",children:[a.jsx(j.Inbox,{size:48,className:"opacity-10"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] opacity-40",children:"Empty_Vector"}),a.jsx("button",{onClick:()=>s("FETCH_VAULT_CONTENT",{nodeId:m,folderId:"ROOT",refresh:!0}),className:"mt-4 px-4 py-2 bg-[var(--bg-secondary)] border border-[var(--border-subtle)] rounded-full text-[9px] font-mono hover:bg-[var(--accent)] hover:text-black transition-colors",children:"FORZAR_SINCRONIZACIN"})]})})}),B&&a.jsxs("div",{className:"absolute inset-0 z-[110] bg-black/90 backdrop-blur-xl flex flex-col p-8 sm:p-12 animate-in slide-in-from-bottom duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--accent)]/10 border border-[var(--accent)]/30 flex items-center justify-center text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-[var(--text-vibrant)]",children:"Define Smart Artifact"}),a.jsxs("p",{className:"text-xs text-[var(--text-dim)] font-mono",children:["Transforming: ",(Fi=D.node)==null?void 0:Fi.name]})]})]}),a.jsx("button",{onClick:()=>W(!1),className:"p-3 rounded-full hover:bg-[var(--bg-secondary)] transition-colors text-[var(--text-dim)]",children:a.jsx(j.Close,{size:24})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-2xl p-4 sm:p-8 max-w-2xl mx-auto w-full shadow-2xl",children:a.jsx(_d,{schemaId:re,onCommit:zd,onCancel:()=>W(!1)})})]})]})}):t==="WIDGET"?a.jsxs("div",{className:"w-full bg-[var(--bg-glass)] border border-[var(--border-vibrant)] rounded-2xl p-4 backdrop-blur-xl shadow-xl animate-in slide-in-from-right duration-500 overflow-hidden relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-[var(--accent)]/20"}),a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-[var(--border-subtle)]",children:[a.jsx("span",{className:"text-[10px] font-black text-[var(--accent)] tracking-[0.2em] uppercase",children:Od}),a.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--success)] animate-pulse shadow-[0_0_8px_var(--success)]"})]}),a.jsx("div",{className:"space-y-1.5",children:Ct.slice(0,3).map(P=>a.jsxs("div",{draggable:!0,onDragStart:$=>Ui($,P),className:"flex items-center gap-3 p-2.5 bg-[var(--bg-secondary)]/30 border border-transparent hover:border-[var(--accent)]/30 rounded-xl cursor-grab active:cursor-grabbing transition-all group hover:bg-[var(--bg-secondary)]/50",children:[a.jsx("span",{className:"text-xs opacity-50",children:P.type==="DIRECTORY"?"":""}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsx("span",{className:"text-[10px] font-mono text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)] truncate",children:P.name}),a.jsx("span",{className:`text-[8px] font-mono uppercase opacity-50 ${P.type==="DIRECTORY"?"text-[var(--accent)]":"text-[var(--text-dim)]"}`,children:P.type||"FILE"})]}),a.jsx("button",{className:"opacity-0 group-hover:opacity-100 text-[9px] font-bold text-[var(--accent)] transition-opacity uppercase tracking-widest bg-[var(--accent)]/10 px-2 py-1 rounded-lg border border-[var(--accent)]/20",children:"Inject"})]},P.id))}),a.jsxs("div",{className:"mt-4 pt-3 border-t border-[var(--border-subtle)] flex items-center gap-3",children:[a.jsx("div",{className:"flex-1 h-1 bg-[var(--bg-secondary)] rounded-full overflow-hidden",children:a.jsx("div",{className:"w-full h-full bg-gradient-to-r from-[var(--accent)]/5 via-[var(--accent)] to-[var(--accent)]/5 animate-loading-bar"})}),a.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tighter",children:"Ready_Link"})]})]}):null},xm=({data:e,execute:t})=>{var f;const{label:r,VITAL_SIGNS:n={},CAPABILITIES:s={},data:o={}}=e,i=o.from||"Sovereign Entity",c=o.subject||r,l=((f=n.URGENCY)==null?void 0:f.value)>.8||c.toLowerCase().includes("urgente"),u=h=>{t("EXECUTE_NODE_ACTION",{nodeId:e.id,capability:h,payload:{emailId:o.id}})};return a.jsxs("div",{className:"flex flex-col gap-2 p-1",children:[a.jsxs("div",{className:"flex flex-col border-l-2 border-[var(--accent)] pl-2 bg-white/5 p-2 rounded-r",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-[var(--accent)] truncate",children:i}),l&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 shadow-[0_0_5px_red] animate-pulse"})]}),a.jsxs("div",{className:"text-[9px] text-[var(--text-soft)] line-clamp-2 leading-tight italic",children:['"',c,'"']})]}),a.jsxs("div",{className:"flex gap-2 mt-1",children:[Object.keys(s).includes("SEND_REPLY")&&a.jsx("button",{onClick:()=>u("SEND_REPLY"),className:"px-2 py-1 bg-[var(--accent)]/20 hover:bg-[var(--accent)]/40 border border-[var(--accent)]/30 rounded text-[8px] font-black uppercase transition-all",children:"Reply"}),a.jsx("button",{onClick:()=>u("ARCHIVE"),className:"px-2 py-1 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-[8px] font-black uppercase transition-all text-[var(--text-dim)]",children:"Archive"})]})]})},ic=({data:e,execute:t})=>{const{LABEL:r,data:n={}}=e,s=n.extension||(r&&r.includes(".")?r.split(".").pop():"bin"),o=n.size?`${(n.size/1024).toFixed(1)} KB`:"---",i=c=>({pdf:"",doc:"",docx:"",xls:"",xlsx:"",jpg:"",png:"",zip:"",gs:""})[c.toLowerCase()]||"";return a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-black/20 rounded-lg border border-white/5 group-hover:border-[var(--accent)]/30 transition-all",children:[a.jsx("div",{className:"text-2xl filter drop-shadow-[0_0_8px_rgba(255,255,255,0.1)]",children:i(s)}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsx("span",{className:"text-[10px] font-black text-[var(--text-soft)] truncate tracking-tight",children:r}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] uppercase font-bold px-1 bg-[var(--accent)]/10 rounded",children:s}),a.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)]",children:o})]})]})]})},gm=({data:e,execute:t})=>{const{label:r,data:n={}}=e,s=!!n.thumbnailLink;return a.jsxs("div",{className:"flex flex-col gap-2 p-1",children:[a.jsxs("div",{className:"relative w-full h-24 bg-black/40 rounded border border-white/10 overflow-hidden flex items-center justify-center",children:[s?a.jsx("img",{src:n.thumbnailLink,alt:"Preview",className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"}):a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-3xl opacity-20",children:""}),a.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tighter",children:"No Preview Available"})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:a.jsx("button",{className:"w-full py-1 bg-[var(--accent)] text-black text-[8px] font-black uppercase rounded shadow-lg transform translate-y-2 group-hover:translate-y-0 transition-transform",onClick:o=>{o.stopPropagation(),window.open(n.webViewLink,"_blank")},children:"Focus Reader"})})]}),a.jsxs("div",{className:"flex justify-between items-center px-1",children:[a.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)] truncate max-w-[120px]",children:r}),a.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)]",children:"PDF"})]})]})},lc=({data:e,execute:t})=>{var h,m,g,E,N;const{state:r}=te(),n=e.id||((h=e.data)==null?void 0:h.id)||e.ID,s=(g=e.ORIGIN_SOURCE||((m=e.data)==null?void 0:m.ORIGIN_SOURCE))==null?void 0:g.toLowerCase(),o=e.ACCOUNT_ID||((E=e.data)==null?void 0:E.ACCOUNT_ID),i=w.useMemo(()=>{var d,p,v;let b=((d=e.data)==null?void 0:d.items)||e.items||e.results||e.rows||((p=e.data)==null?void 0:p.results)||[];if(b.length===0){const S=(v=r.phenotype.silos)==null?void 0:v[n];S&&(b=Array.isArray(S)?S:S.results||S.items||S.rows||[])}return b.map(S=>{if(!S)return null;if(typeof S=="object"){const y=S.fields||S.properties||S.Properties;if(y)return{id:S.id||S.ID,...y,_raw:S}}return S}).filter(Boolean).slice(0,5)},[e.data,e.items,(N=r.phenotype.silos)==null?void 0:N[n],n]),c=w.useMemo(()=>{var d,p,v,S;const b=((d=e.SCHEMA)==null?void 0:d.columns)||((v=(p=e.data)==null?void 0:p.SCHEMA)==null?void 0:v.columns)||((S=e.data)==null?void 0:S.columns)||e.columns;return b&&b.length>0?b:i.length===0?[]:Object.keys(i[0]).filter(y=>!y.startsWith("_")).map(y=>({id:y,label:y.toUpperCase()}))},[i,e]),l=()=>{t("FETCH_VAULT_CONTENT",{nodeId:s||"NOTION",folderId:n,accountId:o,refresh:!0})},u=()=>{t("SELECT_ARTIFACT",e)},f=b=>b==null?"":typeof b=="object"&&!Array.isArray(b)?b.title&&Array.isArray(b.title)?b.title.map(d=>d.plain_text).join(""):b.rich_text&&Array.isArray(b.rich_text)?b.rich_text.map(d=>d.plain_text).join(""):b.name||b.label?b.name||b.label:b.id?`ID:${b.id.slice(0,4)}...`:JSON.stringify(b).slice(0,20)+"...":Array.isArray(b)?b.map(d=>typeof d=="object"?d.name||d.label||d.plain_text||d.id||"?":d).join(", "):String(b);return a.jsxs("div",{className:"flex flex-col gap-3 group/db h-full",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("div",{className:"flex items-center gap-2 opacity-40 group-hover/db:opacity-100 transition-opacity",children:[a.jsx(j.Database,{size:10,className:"text-[var(--accent)]"}),a.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-[var(--text-secondary)]",children:s||"REALITY_STREAM"})]}),a.jsx("button",{onClick:u,className:"p-1 rounded bg-[var(--accent)]/10 hover:bg-[var(--accent)]/20 text-[var(--accent)] transition-all",title:"Expandir a Motor de Base de Datos",children:a.jsx(j.Maximize,{size:10})})]}),a.jsx("div",{className:"relative flex-1 bg-[var(--surface-card)] rounded-xl border border-white/5 overflow-hidden backdrop-blur-sm",children:a.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[a.jsx("thead",{className:"bg-[var(--surface-header)]",children:a.jsx("tr",{children:c.slice(0,3).map(b=>a.jsx("th",{className:"px-3 py-2 text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter truncate border-b border-white/5",children:b.label},b.id))})}),a.jsx("tbody",{className:"divide-y border-white/[0.02]",children:i.length>0?i.map((b,d)=>a.jsx("tr",{className:"hover:bg-[var(--accent)]/[0.05] transition-colors group/row",children:c.slice(0,3).map(p=>a.jsx("td",{className:"px-3 py-1.5 text-[8px] font-mono text-[var(--text-soft)] opacity-60 group-hover/row:opacity-100 truncate",children:f(b[p.id])},p.id))},b.id||d)):a.jsx("tr",{children:a.jsx("td",{colSpan:c.length||1,className:"py-8 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3 opacity-30 group-hover/db:opacity-100 transition-opacity",children:[a.jsx("div",{className:"w-10 h-10 rounded-full border border-dashed border-white/20 flex items-center justify-center animate-pulse",children:a.jsx(j.Inbox,{size:16})}),a.jsx("span",{className:"text-[8px] font-mono uppercase",children:"Empty_Refraction"}),a.jsx("button",{onClick:l,className:"px-3 py-1 rounded-full bg-[var(--accent)]/10 border border-[var(--accent)]/20 text-[7px] font-black text-[var(--accent)] hover:bg-[var(--accent)]/20 transition-all uppercase tracking-widest",children:"REIFY_DATA"})]})})})})]})})]})},vm=({data:e,execute:t})=>{var l,u;const{DOMAIN:r,schemaId:n,LABEL:s,ARCHETYPE:o}=e,i=s&&s.includes(".")?s.split(".").pop().toLowerCase():"";return o==="DATABASE"?a.jsx(lc,{data:e,execute:t}):o==="VAULT"||n==="FOLDER_NODE"?a.jsx(ic,{data:e,execute:t,isVault:!0}):r==="COMMUNICATION"?a.jsx(xm,{data:e,execute:t}):n==="PDF_NODE"||i==="pdf"?a.jsx(gm,{data:e,execute:t}):n==="DATABASE_NODE"||((l=e.data)==null?void 0:l.type)==="DATABASE"||e.CAPABILITIES&&e.CAPABILITIES.onRowSelect?a.jsx(lc,{data:e,execute:t}):n==="FILE_NODE"||((u=e.data)==null?void 0:u.type)==="FILE"?a.jsx(ic,{data:e,execute:t}):a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-20",children:a.jsx("div",{className:"w-12 h-12 rounded-full border border-dashed border-white/20 animate-spin-slow"})})},Id=({onComplete:e,size:t=24,iconSize:r=14,color:n="red"})=>{const[s,o]=w.useState(0),i=w.useRef(null),c=s>0,l=1e3,u=b=>{b.stopPropagation(),b.preventDefault();const d=20,p=100/(l/d);clearInterval(i.current),i.current=setInterval(()=>{o(v=>{const S=v+p;return S>=100?(clearInterval(i.current),setTimeout(()=>e(),0),100):S})},d)},f=b=>{b&&(b.stopPropagation(),b.preventDefault()),clearInterval(i.current),o(0)};w.useEffect(()=>()=>clearInterval(i.current),[]);const h=t/2-5,m=2*Math.PI*h,g=m-s/100*m,E=n==="red"?"text-red-500":"text-[var(--accent)]",N=n==="red"?"#ef4444":"var(--accent)";return a.jsxs("div",{className:"relative flex items-center justify-center rounded-full cursor-pointer group/delete select-none",style:{width:t,height:t},onMouseDown:u,onMouseUp:f,onMouseLeave:f,onTouchStart:u,onTouchEnd:f,title:"MANTENER PRESIONADO PARA PERMANENTE ELIMITACIN",children:[a.jsx("div",{className:`absolute inset-0 rounded-full bg-${n}-500/10 transition-all duration-300 ${c?"scale-125 opacity-100":"scale-0 opacity-0 group-hover/delete:scale-100 group-hover/delete:opacity-100"}`}),c&&a.jsx("svg",{className:"absolute inset-0 w-full h-full -rotate-90 pointer-events-none z-10",viewBox:`0 0 ${t} ${t}`,children:a.jsx("circle",{cx:t/2,cy:t/2,r:h,fill:"none",stroke:N,strokeWidth:"2",strokeDasharray:m,strokeDashoffset:g,strokeLinecap:"round",className:"transition-all duration-75 ease-linear"})}),a.jsx("div",{className:`transition-all duration-200 z-20 ${c?`${E} scale-90`:`text-[var(--text-dim)] group-hover/delete:${E} opacity-50 group-hover/delete:opacity-100 transform group-hover/delete:scale-110`}`,children:a.jsx(j.Trash,{size:r})}),c&&s<100&&a.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[8px] px-1.5 py-0.5 rounded whitespace-nowrap border border-red-500/30 pointer-events-none z-50",children:s>80?"SOLTAR PARA CANCELAR!":"BORRANDO..."})]})},ct=({data:e})=>{var v;const{state:t,execute:r}=te(),{id:n,LABEL:s,ARCHETYPE:o,DOMAIN:i,CAPABILITIES:c={},VITAL_SIGNS:l={},schemaId:u}=e,[f,h]=w.useState(!1);w.useEffect(()=>{const S=y=>{var A;((A=y.detail)==null?void 0:A.nodeId)===n&&(h(!0),setTimeout(()=>h(!1),800))};return window.addEventListener("ISK_SYNAPTIC_PULSE",S),()=>window.removeEventListener("ISK_SYNAPTIC_PULSE",S)},[n]);const g={SYSTEM_INFRA:"#3b82f6",SYSTEM_CORE:"#f97316",UI_PROJECTION:"#a855f7",SENSING:"#10b981",COMMUNICATION:"#ec4899",DATA_ENGINE:"#8b5cf6",DOCUMENT_ENGINE:"#06b6d4"}[i]||"#6366f1",E=o==="DATABASE"||u==="DATABASE_NODE"||((v=e.data)==null?void 0:v.type)==="DATABASE",N={...c};if(E){N.DATA_STREAM||(N.DATA_STREAM={io:"STREAM",type:"TABLE",human_label:"DATA_STREAM "});const S=Object.keys(N).find(y=>y.replace(/_/g," ").trim()==="QUERY FILTER");S?S!=="QUERY_FILTER"&&(N.QUERY_FILTER=N[S],delete N[S]):N.QUERY_FILTER={io:"TRIGGER",type:"FILTER",human_label:"QUERY_FILTER "}}const b=Object.entries(N).filter(([S,y])=>y.io==="WRITE"||y.io==="TRIGGER"||y.io==="GATE"||y.io==="INPUT"),d=Object.entries(N).filter(([S,y])=>y.io==="READ"||y.io==="STREAM"||y.io==="PROBE"||y.io==="REFRESH"||y.io==="OUTPUT"),p=S=>{var A;S.stopPropagation(),(u==="FOLDER_NODE"||u==="COSMOS_NODE"||E||((A=e.data)==null?void 0:A.type)==="DIRECTORY")&&(console.log(`[NodeEngine]  Deep Focus Triggered: ${s}`),r("SELECT_ARTIFACT",e))};return a.jsxs("div",{className:`
                ${E?"w-[420px]":"w-64"} 
                bg-[var(--indra-glass-bg)] border rounded-2xl shadow-2xl backdrop-blur-xl overflow-hidden group transition-all active:scale-[0.98] select-none
                ${f?"border-[var(--accent)] shadow-[0_0_30px_rgba(var(--accent-rgb),0.4)] scale-[1.02]":"border-[var(--indra-glass-border)] hover:border-[var(--accent)]/50"}
            `,onDoubleClick:p,children:[a.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-b border-[var(--border-subtle)] cursor-grab active:cursor-grabbing",style:{background:`linear-gradient(to right, ${g}22, transparent)`},children:[a.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:g,boxShadow:`0 0 8px ${g}`}}),a.jsx("span",{className:"text-[10px] font-black text-[var(--text-soft)] truncate tracking-tight uppercase group-hover:text-white transition-colors",children:s})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{var y;let S=e.ARCHETYPES||((y=e.data)==null?void 0:y.ARCHETYPES);return!S&&E&&(S=["DATABASE","VAULT","NODE"]),S&&S.length>1?a.jsx("div",{className:"flex items-center bg-black/40 rounded-lg p-0.5 border border-white/10 mr-1",children:S.map(A=>a.jsx("button",{onClick:_=>{_.stopPropagation(),r("UPDATE_NODE",{id:n,updates:{ARCHETYPE:A}})},className:`px-1.5 py-0.5 rounded text-[7px] font-black transition-all ${o===A?"bg-[var(--accent)] text-black":"text-white/40 hover:text-white"}`,title:`Mutar a modo ${A}`,children:A},A))}):null})(),a.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] font-bold uppercase tracking-tight px-1.5 bg-[var(--accent)]/5 rounded border border-[var(--accent)]/20",children:o||u}),a.jsx(Id,{onComplete:()=>r("REMOVE_ARTIFACT",{id:n}),size:24,iconSize:10})]})]}),a.jsxs("div",{className:"p-4 flex flex-col gap-2 relative min-h-[80px]",children:[a.jsx(vm,{data:e,execute:r}),a.jsxs("div",{className:"flex justify-between gap-4 mt-2",children:[a.jsx("div",{className:"flex flex-col gap-2 items-start",children:b.map(([S,y])=>a.jsxs("div",{className:"flex items-center gap-2 group/port cursor-pointer hover:bg-white/5 p-1 rounded transition-colors",onMouseDown:A=>{A.stopPropagation()},onMouseUp:A=>{A.stopPropagation();const _=t.phenotype.ui.pendingConnection;_&&_.sourceNodeId!==n&&r("ADD_RELATIONSHIP",{source:_.sourceNodeId,target:n,sourcePort:_.portId,targetPort:S})},children:[a.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-[var(--border-subtle)] bg-[var(--bg-deep)] group-hover/port:border-[var(--accent)] transition-colors"}),a.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase group-hover/port:text-[var(--text-vibrant)] truncate max-w-[80px]",children:y.human_label||y.LABEL||S})]},S))}),a.jsx("div",{className:"flex flex-col gap-2 items-end",children:d.map(([S,y],A)=>a.jsxs("div",{className:"flex items-center gap-2 group/port cursor-pointer hover:bg-white/5 p-1 rounded transition-colors",onMouseDown:_=>{_.stopPropagation();const L=96+A*18;r("SET_PENDING_CONNECTION",{sourceNodeId:n,portId:S,startX:e.x,startY:e.y,portOffsetX:E?420:256,portOffsetY:L,currentX:_.clientX,currentY:_.clientY})},children:[a.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase group-hover/port:text-[var(--text-vibrant)] truncate max-w-[80px]",children:y.human_label||y.LABEL||S}),a.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-[var(--border-subtle)] bg-[var(--bg-deep)] group-hover/port:scale-125 transition-all",style:{borderColor:`${g}44`}})]},S))})]})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-[var(--bg-secondary)] flex items-center justify-between border-t border-[var(--border-subtle)]",children:[a.jsxs("div",{className:"flex gap-1.5",children:[Object.entries(l).map(([S,y])=>a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${y.criticality==="FATAL"?"bg-[var(--error)]":"bg-[var(--success)]"}`,title:`${S}: ${y.criticality}`},S)),Object.keys(l).length===0&&a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 opacity-50"})]}),a.jsx("span",{className:"text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter",children:"Sovereign_Coherence: 1.0"})]}),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes spin-slow {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                .animate-spin-slow {
                    animation: spin-slow 10s linear infinite;
                }
            `}})]})},en=({data:e})=>{const{LABEL:t,ARCHETYPE:r,CAPABILITIES:n={},VITAL_SIGNS:s={}}=e,{execute:o}=te(),i=r==="MAIL"?"INBOX":r==="MESSAGING"?"CHAT":"SPLIT",[c,l]=w.useState(i),[u,f]=w.useState([]),[h,m]=w.useState(null),[g,E]=w.useState("");w.useEffect(()=>{if(e._isMock||e._isGhost){const d=nm("MAIL","COMMUNICATION");d&&d.threads&&(f(d.threads),m(d.threads[0]))}},[e._isMock,e._isGhost]);const N=()=>a.jsxs("div",{className:"w-1/3 min-w-[250px] border-r border-[var(--border-subtle)] bg-[var(--bg-secondary)]/30 flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] flex justify-between items-center",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-dim)]",children:r==="MAIL"?"INBOX":"CONVERSATIONS"}),a.jsxs("span",{className:"text-[9px] font-mono text-[var(--accent)] bg-[var(--accent)]/10 px-1.5 py-0.5 rounded",children:[u.filter(d=>d.unread).length," NEW"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:u.map(d=>a.jsxs("button",{onClick:()=>m(d),className:`w-full text-left p-3 border-b border-[var(--border-subtle)]/50 hover:bg-[var(--bg-secondary)] transition-colors flex gap-3 ${(h==null?void 0:h.id)===d.id?"bg-[var(--accent)]/10 border-l-2 border-l-[var(--accent)]":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${d.type==="MAIL"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:d.sender[0]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[a.jsx("span",{className:`text-[11px] font-bold truncate ${d.unread?"text-[var(--text-vibrant)]":"text-[var(--text-soft)]"}`,children:d.sender}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] shrink-0",children:d.time})]}),a.jsx("div",{className:"text-[10px] text-[var(--text-dim)] truncate",children:d.subject})]})]},d.id))})]}),b=()=>{if(!h)return a.jsx("div",{className:"flex-1 flex items-center justify-center text-[var(--text-dim)] italic text-xs",children:"Select a conversation to begin transmission."});const d=h.type==="CHAT"||c==="CHAT";return a.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-deep)]",children:[a.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] flex items-center gap-3",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-500":"bg-blue-500"}`}),a.jsx("span",{className:"font-bold text-sm text-[var(--text-vibrant)]",children:h.sender}),a.jsx("span",{className:"ml-auto text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-wider border border-[var(--border-subtle)] px-2 py-0.5 rounded",children:d?"INSTANT_MESSAGING":"EMAIL_PROTOCOL"})]}),a.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:`self-start max-w-[80%] p-3 rounded-xl rounded-tl-none ${d?"bg-[var(--bg-secondary)]":"bg-[var(--bg-secondary)]/50 border border-[var(--border-subtle)]"}`,children:[a.jsx("p",{className:"text-xs text-[var(--text-soft)] leading-relaxed",children:d?h.preview:`Subject: ${h.subject}

${h.preview}

[Full content loaded from server...]`}),a.jsx("span",{className:"text-[8px] text-[var(--text-dim)] mt-1 block opacity-60",children:h.time})]}),a.jsxs("div",{className:"self-end max-w-[80%] p-3 rounded-xl rounded-tr-none bg-[var(--accent)]/10 border border-[var(--accent)]/20",children:[a.jsx("p",{className:"text-xs text-[var(--text-soft)] leading-relaxed",children:"System Acknowledged."}),a.jsx("span",{className:"text-[8px] text-[var(--text-dim)] mt-1 block opacity-60 text-right",children:"10:05 AM"})]})]})}),a.jsx("div",{className:"p-4 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)]/20",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 bg-[var(--bg-deep)] border border-[var(--border-subtle)] rounded-lg px-3 py-2 text-xs text-[var(--text-soft)] focus:outline-none focus:border-[var(--accent)] transition-colors placeholder:text-[var(--text-dim)] placeholder:italic",placeholder:d?"Type a message...":"Reply via email...",value:g,onChange:p=>E(p.target.value),onKeyDown:p=>{p.key==="Enter"&&g.trim()&&(console.log(`[CommunicationEngine] Sending: ${g}`),E(""),o("LOG_ACTION",{type:"MESSAGE_SENT",payload:g}))}}),a.jsx("button",{className:"px-4 py-2 bg-[var(--accent)] text-black text-[10px] font-black uppercase tracking-wider rounded-lg hover:brightness-110 active:scale-95 transition-all",children:"Send"})]})})]})};return a.jsxs("div",{className:"flex h-full w-full bg-[var(--indra-glass-bg)] backdrop-blur-md rounded-2xl overflow-hidden shadow-2xl border border-[var(--indra-glass-border)] animate-in fade-in zoom-in-95 duration-300",children:[a.jsx(N,{}),a.jsx(b,{})]})},cc=({data:e})=>{const t=w.useRef(null),r=w.useRef(null),{state:n}=te(),s=H(o=>o.session.isLoading);return w.useEffect(()=>{if(!t.current)return;const o=new Td;o.setCanvas(t.current),r.current=o;const i=[{identity:{uuid:"node_1",label:"NEURON_ALPHA"},dna:{archetype:"circle",geometry:{expressions:{}}}},{identity:{uuid:"node_2",label:"NEURON_BETA"},dna:{archetype:"circle",geometry:{expressions:{}}}},{identity:{uuid:"node_3",label:"NEURON_GAMMA"},dna:{archetype:"arc",geometry:{expressions:{}}}}];o.loadLaws(i);let c;const l=()=>{o.tick(),c=requestAnimationFrame(l)};return l(),console.log(" [RealityEngine] ISK Pilot Started."),()=>{cancelAnimationFrame(c)}},[]),w.useEffect(()=>{r.current&&s&&(console.log(" [RealityBridge] React Signal: IS_LOADING detected. Injecting Pulse to ISK."),r.current.bridge)},[n.phenotype.isLoading]),a.jsxs("div",{className:"w-full h-full relative bg-black/40 rounded-3xl overflow-hidden border border-white/5 shadow-2xl",children:[a.jsx("canvas",{ref:t,className:"w-full h-full block",style:{imageRendering:"pixelated"}}),a.jsxs("div",{className:"absolute top-4 left-4 p-4 bg-black/60 backdrop-blur-md rounded-xl border border-white/10 font-mono pointer-events-none",children:[a.jsx("div",{className:"text-[10px] text-accent-primary font-black mb-2 uppercase tracking-widest",children:"Reality_Bridge_Monitor"}),a.jsxs("div",{className:"flex flex-col gap-1 text-[8px] text-white/50",children:[a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{children:"Core_Signal:"}),a.jsx("span",{className:s?"text-accent-primary animate-pulse":"text-success",children:s?"RESONATING":"IDLE"})]}),a.jsxs("div",{className:"flex justify-between gap-4",children:[a.jsx("span",{children:"ISK_Integrity:"}),a.jsx("span",{className:"text-success",children:"NOMINAL"})]})]})]}),a.jsx("div",{className:"absolute bottom-4 right-4 text-[9px] font-mono text-white/20 italic",children:"ISK_PILOT_V1_STARK // WebGL Rendering Active"})]})},Ma=({data:e,perspective:t})=>{const{LABEL:r,DOMAIN:n,CAPABILITIES:s,VITAL_SIGNS:o,technical_id:i}=e,c=s&&Object.keys(s).length>0?s:e._isGhost?{can_think:!0,can_process:!0,can_hallucinate:!1,can_reify:!0}:{},l=(o==null?void 0:o.status)||"ACTIVE",u=(o==null?void 0:o.load)||"0%";return a.jsxs("div",{className:"h-full w-full flex flex-col bg-[var(--bg-primary)] p-6 overflow-y-auto font-mono",children:[a.jsxs("div",{className:"flex items-start justify-between mb-8 border-b border-[var(--border-subtle)] pb-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${l==="ACTIVE"?"bg-[var(--accent)]":"bg-[var(--error)]"}`}),a.jsx("h1",{className:"text-2xl font-black tracking-tighter text-[var(--text-primary)]",children:r==null?void 0:r.toUpperCase()})]}),a.jsxs("span",{className:"text-[10px] bg-[var(--accent)]/10 text-[var(--accent)] px-2 py-0.5 rounded border border-[var(--accent)]/20",children:[n," ENGINE"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-[9px] text-[var(--text-dim)] block mb-1",children:"COMPUTE_LOAD"}),a.jsx("span",{className:"text-xl font-bold text-[var(--accent)]",children:u})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-[var(--bg-secondary)]/30 border border-[var(--border-subtle)] rounded-xl p-5",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-[var(--text-dim)] mb-4 flex items-center gap-2",children:[a.jsx(j.Activity,{size:12}),"PROCESS_TRACE"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 opacity-50",children:[a.jsx("span",{className:"text-[9px] text-[var(--accent)]",children:"[08:24]"}),a.jsx("span",{className:"text-[10px] text-[var(--text-soft)]",children:"Kernel initialized..."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-[9px] text-[var(--accent)]",children:"[09:12]"}),a.jsx("span",{className:"text-[10px] text-[var(--text-vibrant)]",children:"Sensing context in active Cosmos..."})]}),a.jsxs("div",{className:"flex items-center gap-3 italic text-[var(--accent)]",children:[a.jsxs("span",{className:"text-[9px] opacity-50",children:[">>","  "]}),a.jsx("span",{className:"text-[10px]",children:"Awaiting cognitive trigger..."})]})]})]}),a.jsxs("div",{className:"bg-[var(--bg-secondary)]/30 border border-[var(--border-subtle)] rounded-xl p-5",children:[a.jsxs("h3",{className:"text-[10px] font-bold text-[var(--text-dim)] mb-4 flex items-center gap-2",children:[a.jsx(j.Settings,{size:12}),"ENGINE_PARAMETERS"]}),a.jsx("div",{className:"space-y-4",children:Object.entries(c||{}).map(([f,h])=>a.jsxs("div",{className:"flex items-center justify-between border-b border-[var(--border-subtle)]/30 pb-2",children:[a.jsx("span",{className:"text-[10px] text-[var(--text-soft)] uppercase",children:f.replace("can_","")}),a.jsx("span",{className:`text-[9px] font-bold ${h?"text-[var(--accent)]":"text-[var(--text-dim)]"}`,children:h?"ENABLED":"DISABLED"})]},f))})]})]}),a.jsxs("div",{className:"mt-auto pt-8 flex items-center justify-between text-[8px] text-[var(--text-dim)] border-t border-[var(--border-subtle)]/30",children:[a.jsx("span",{children:"V8.0 SERVICE_RUNTIME"}),a.jsxs("span",{children:["UUID: ",e.technical_id||"LOCAL-INSTANCE"]})]})]})},uc={VAULT:j.Vault,DATABASE:j.Database,SLOT:j.Transform,REALITY:j.Cosmos,ADAPTER:j.Settings,SERVICE:j.Activity,NODE:j.System,TERMINAL:j.Terminal,COMMUNICATION:j.Inbox,EMAIL:j.Inbox,CHAT:j.Inbox,LLM:j.Settings,INTELLIGENCE:j.Settings,TV_SCREEN:j.TV_SCREEN,PDF:j.PDF,DOCUMENT:j.List,BRIDGE:j.BRIDGE,SYNC:j.Sync,LOCK:j.Lock,CLOCK:j.Clock,PROCESSOR:j.Cpu,MEMORY:j.Database,UPTIME:j.Clock,QUERY:j.Search,PERSISTENCE:j.Lock,SCHEMA:j.List,GRAVITY:j.GRAVITY,ENTROPY:j.ENTROPY,DIMENSIONS:j.DIMENSIONS,DEFAULT:j.Help},ym=e=>{if(!e)return j.Help;if(typeof e=="string"&&e.match(/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/))return r=>xe.createElement("span",{style:{fontSize:r.size||"16px"}},e);const t=typeof e=="string"?e.toUpperCase():"";return uc[e]||uc[t]||j[t]||j.Help},Em=(e,t=[])=>{if(!e)return"UNKNOWN";const r=t.find(n=>n.id===e);return(r==null?void 0:r.LABEL)||(r==null?void 0:r.label)||e.toUpperCase()},Ua=({data:e,perspective:t})=>{var p,v,S;const{state:r,execute:n}=te(),{id:s,LABEL:o,ARCHETYPE:i}=e,[c,l]=w.useState(((v=(p=e.views)==null?void 0:p[0])==null?void 0:v.id)||"v1"),[u,f]=w.useState(null);if(t==="NODE")return a.jsx(ct,{data:{...e,LABEL:`[SLOT] ${o}`}});const h=e.views||(e._isGhost?[{id:"v1",label:"Dashboard",type:"DASHBOARD"}]:[]),m=h.find(y=>y.id===c)||h[0]||{type:"DASHBOARD"},g=e.CAPABILITIES||e.capabilities||{},E=Object.keys(g).length===0&&e._isGhost?{CORE_SYMBOLS:{label:"Smbolos Core",icon:"TV_SCREEN",status:"CONNECTED",value:"ACTIVE"},HYDRATION:{label:"Hidratacin",icon:"SYNC",status:"DEFAULT",value:"100%"},DETERMINISM:{label:"Determinismo",icon:"LOCK",status:"CONNECTED",value:"TRUE"},LATENCY:{label:"Latencia",icon:"CLOCK",status:"DEFAULT",value:"12ms"}}:g,b=Object.keys(E).length>0?Object.entries(E).map(([y,A])=>({id:y,label:A.label||y,icon:ym(A.icon),status:A.status||"DEFAULT",value:A.value||"None"})):i!=null&&i.includes("ADAPTER")?[{id:"api_token",label:"Token de Acceso",icon:a.jsx("span",{className:"text-lg",children:""}),status:"CONNECTED",value:""},{id:"db_id",label:"Database ID",icon:a.jsx("span",{className:"text-lg",children:""}),status:"BROKEN",value:"None"},{id:"sync_interval",label:"Refresco (s)",icon:a.jsx("span",{className:"text-lg",children:""}),status:"DEFAULT",value:"60"},{id:"data_status",label:"Estado Sync",icon:a.jsx("span",{className:"text-lg",children:""}),status:"CONNECTED",value:"VIVO"}]:[{id:"bg_color",label:"Color de Fondo",icon:a.jsx("span",{className:"text-lg",children:""}),status:"DEFAULT",value:"#0a0a0a"},{id:"main_font",label:"Tipografa",icon:a.jsx("span",{className:"text-lg",children:"Aa"}),status:"CONNECTED",value:"Inter"},{id:"data_source",label:"Origen de Datos",icon:a.jsx("span",{className:"text-lg",children:""}),status:"BROKEN",value:"None"},{id:"margin",label:"Mrgenes",icon:a.jsx("span",{className:"text-lg",children:""}),status:"DEFAULT",value:"20px"}],d=y=>{switch(y){case"CONNECTED":return"var(--accent)";case"BROKEN":return"var(--error)";default:return"var(--text-dim)"}};return a.jsxs("div",{className:"w-full h-full flex flex-col bg-[var(--bg-deep)] overflow-hidden relative",children:[a.jsxs("header",{className:"h-16 border-b border-white/5 bg-black/40 backdrop-blur-2xl flex items-center justify-between px-8 z-50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--accent)]/10 border border-[var(--accent)]/20 flex items-center justify-center text-[var(--accent)]",children:a.jsx(j.Transform,{size:20})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-white/90 leading-none",children:o}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--accent)] uppercase tracking-widest opacity-60",children:"Composite_Node_Active"})]})]}),a.jsx("nav",{className:"flex items-center gap-1 bg-white/5 p-1 rounded-xl",children:h.map(y=>a.jsx("button",{onClick:()=>l(y.id),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${c===y.id?"bg-[var(--accent)] text-black":"text-white/40 hover:text-white/60"}`,children:y.label},y.id))}),a.jsxs("button",{onClick:()=>n("EXIT_FOCUS"),className:"group flex items-center gap-3 px-4 py-2 rounded-xl bg-[var(--error)]/10 border border-[var(--error)]/20 text-[var(--error)] hover:bg-[var(--error)]/20 transition-all",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter",children:"Exit_Slot"}),a.jsx(j.Close,{size:16,className:"group-hover:rotate-90 transition-transform"})]})]}),a.jsxs("div",{className:"flex-1 flex relative",children:[a.jsxs("aside",{className:"w-72 border-r border-[var(--border-subtle)] bg-[var(--surface-header)] flex flex-col p-4 gap-2 z-40",children:[a.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase tracking-[0.3em] mb-4 pl-2",children:"Propiedades_Input"}),b.map(y=>a.jsxs("div",{onClick:()=>f(y.id),className:`flex items-center gap-4 p-3 rounded-2xl border transition-all cursor-pointer group ${u===y.id?"bg-[var(--accent)]/10 border-[var(--accent)]/40 shadow-lg shadow-[var(--accent)]/5":"bg-white/2 bg-transparent border-transparent hover:border-white/10"}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--surface-card)] flex items-center justify-center text-lg border border-[var(--border-subtle)] group-hover:border-[var(--accent)]/30 transition-all",children:typeof y.icon=="function"?xe.createElement(y.icon,{size:20}):y.icon}),a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-[var(--bg-deep)] shadow-sm animate-pulse",style:{backgroundColor:d(y.status)}})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tight transition-colors ${u===y.id?"text-[var(--accent)]":"text-[var(--text-secondary)]"}`,children:y.label}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] truncate italic",children:y.status==="CONNECTED"?"Linked_to_Graph":`Default: ${y.value}`})]})]},y.id)),a.jsxs("div",{className:"mt-auto p-4 rounded-2xl bg-[var(--surface-header)] border border-[var(--border-subtle)]",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] animate-pulse"}),a.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase",children:"Static_Analysis"})]}),a.jsx("p",{className:"text-[8px] text-[var(--text-dim)] leading-relaxed font-medium",children:"Este slot est recibiendo datos de [Notion_DB] y aplicando leyes de estilo corporativo L1."})]})]}),a.jsxs("main",{className:"flex-1 relative overflow-hidden flex bg-[#030303]",children:[a.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),a.jsx("div",{className:"flex-1 flex items-center justify-center p-12 overflow-auto scrollbar-hide",children:m.type==="DOCUMENT_PAGINATED"?a.jsxs("div",{className:"w-[794px] min-h-[1123px] bg-white text-black shadow-2xl rounded-sm p-16 animate-in zoom-in-95 duration-700 origin-top transform hover:scale-[1.02] transition-transform",children:[a.jsxs("div",{className:"flex justify-between items-end border-b-4 border-black pb-8 mb-12",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-black uppercase tracking-tighter mb-2",children:m.label}),a.jsxs("span",{className:"text-sm font-mono tracking-widest block opacity-60",children:["REF: ",s?s.slice(0,8):"ANON-00"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs font-bold uppercase mb-1",children:"Status Report"}),a.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"font-mono text-xs",children:"CERTIFIED"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-16",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-4 bg-black/5 rounded w-full animate-pulse"}),a.jsx("div",{className:"h-4 bg-black/5 rounded w-5/6"}),a.jsx("div",{className:"h-4 bg-black/5 rounded w-4/6"})]}),a.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsx("h3",{className:"text-xs font-bold uppercase mb-4",children:"Metric Analysis"}),a.jsx("div",{className:"space-y-2",children:b.slice(0,3).map(y=>a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsx("span",{className:"font-mono text-gray-500",children:y.label}),a.jsx("span",{className:"font-bold",children:y.value})]},y.id))})]})]}),a.jsxs("div",{className:"h-64 bg-black/5 rounded-none border border-black/10 flex flex-col items-center justify-center gap-4",children:[a.jsx(j.Database,{size:32,className:"opacity-20"}),a.jsx("span",{className:"font-mono text-xs text-black/40 uppercase tracking-widest",children:"Data_Fragment_Visualization_Area"})]})]}):a.jsxs("div",{className:"w-full max-w-6xl grid grid-cols-12 gap-6 h-fit p-4",children:[b.map((y,A)=>a.jsxs("div",{onClick:()=>f(y.id),className:`
                                            col-span-12 md:col-span-6 lg:col-span-4 p-6 rounded-[32px] 
                                            bg-white/5 border border-white/10 backdrop-blur-xl 
                                            hover:border-[var(--accent)]/40 hover:bg-white/10 transition-all cursor-pointer group/tile 
                                            animate-in fade-in slide-in-from-bottom duration-500
                                            relative overflow-hidden
                                        `,style:{animationDelay:`${A*100}ms`},children:[a.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-0 group-hover/tile:opacity-100 transition-opacity",children:a.jsx(j.ArrowRight,{size:16,className:"text-[var(--accent)] -rotate-45"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--surface-card)] flex items-center justify-center text-2xl border border-[var(--border-subtle)] group-hover/tile:scale-110 transition-transform shadow-lg shadow-black/20",children:typeof y.icon=="function"?xe.createElement(y.icon,{size:24}):y.icon}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-[var(--text-dim)] mb-1",children:"State_Signal"}),a.jsxs("div",{className:"flex items-center gap-2 bg-[var(--surface-header)] px-2 py-1 rounded-lg border border-[var(--border-subtle)]",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full animate-pulse",style:{backgroundColor:d(y.status)}}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-secondary)] uppercase",children:y.status})]})]})]}),a.jsx("h4",{className:"text-sm font-bold text-[var(--text-primary)] uppercase tracking-tight mb-1 group-hover/tile:text-[var(--accent)] transition-colors",children:y.label}),a.jsxs("p",{className:"text-[10px] text-[var(--text-dim)] font-mono mb-6 truncate",children:[y.id.toUpperCase(),"_module_v1.0"]}),a.jsxs("div",{className:"h-24 bg-[var(--surface-header)] rounded-2xl border border-[var(--border-subtle)] flex items-end p-1 gap-[2px] overflow-hidden relative",children:[a.jsx("div",{className:"absolute top-2 left-2 text-[8px] font-mono text-white/20",children:"Telemetry_Graph"}),[...Array(24)].map((_,L)=>a.jsx("div",{className:"flex-1 bg-[var(--accent)]/10 hover:bg-[var(--accent)]/40 rounded-t-[1px] transition-all duration-300",style:{height:`${20+Math.random()*60}%`}},L))]})]},y.id)),a.jsxs("div",{className:"col-span-12 md:col-span-6 lg:col-span-4 p-6 rounded-[32px] border-2 border-dashed border-[var(--border-subtle)] hover:border-[var(--border-subtle)] hover:bg-[var(--surface-header)] transition-all flex flex-col items-center justify-center gap-4 group cursor-pointer h-[280px]",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-[var(--surface-card)] flex items-center justify-center text-[var(--text-dim)] group-hover:bg-[var(--accent)] group-hover:text-black transition-all",children:a.jsx(j.Plus,{size:24})}),a.jsx("span",{className:"text-xs font-bold text-[var(--text-dim)] group-hover:text-[var(--text-secondary)] uppercase tracking-widest transition-colors",children:"Aadir Capacidad"})]})]})}),u&&a.jsxs("aside",{className:"w-80 border-l border-[var(--border-subtle)] bg-[var(--surface-header)] backdrop-blur-xl p-6 flex flex-col gap-6 animate-in slide-in-from-right duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-bold text-[var(--text-primary)] uppercase tracking-widest",children:"Ajustes_Locales"}),a.jsx("button",{onClick:()=>f(null),className:"text-[var(--text-dim)] hover:text-[var(--text-secondary)]",children:a.jsx(j.Close,{size:18})})]}),a.jsxs("div",{className:"p-5 rounded-2xl bg-[var(--surface-card)] border border-[var(--border-subtle)] flex flex-col gap-4",children:[a.jsxs("span",{className:"text-[10px] font-bold text-[var(--accent)] uppercase",children:["Configuracin de ",u]}),u==="db_id"&&o.toUpperCase().includes("NOTION")?a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-[9px] text-[var(--text-dim)] leading-relaxed uppercase font-black",children:"Paso 1: Pega tu Database ID de Notion"}),a.jsx("input",{type:"text",placeholder:"8f92-xxxx-xxxx-xxxx",className:"w-full h-10 rounded-lg bg-[var(--surface-header)] border border-[var(--accent)]/30 px-3 text-[10px] font-mono text-[var(--accent)] outline-none"}),a.jsx("button",{className:"w-full py-2 rounded-lg bg-[var(--accent)] text-black text-[10px] font-black uppercase tracking-widest hover:scale-105 transition-all",onClick:()=>n("LOG_ENTRY",{msg:" Sincronizando tabla de Notion...",type:"INFO"}),children:"Vincular Tabla"})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{id:`prop-value-${u}`,className:"flex-1 h-10 rounded-lg bg-[var(--surface-header)] border border-[var(--border-subtle)] flex items-center px-4 text-xs font-mono text-[var(--text-primary)] transition-all duration-500",children:(S=b.find(y=>y.id===u))==null?void 0:S.value}),a.jsx("button",{className:"p-3 rounded-lg bg-[var(--accent)] text-black hover:scale-105 transition-transform",children:a.jsx(j.Check,{size:16})})]})]}),a.jsxs("div",{onDragOver:y=>{y.preventDefault(),y.currentTarget.style.borderColor="var(--accent)",y.currentTarget.style.opacity="1"},onDragLeave:y=>{y.currentTarget.style.borderColor="var(--border-subtle)",y.currentTarget.style.opacity="0.3"},onDrop:y=>{y.preventDefault(),y.currentTarget.style.borderColor="var(--border-subtle)",y.currentTarget.style.opacity="0.3";const A=y.dataTransfer.getData("indra/artifact");if(A)try{const _=JSON.parse(A);n("LOG_ENTRY",{msg:` Vinculacin Axiomtica: [${u}] -> [${_.LABEL||_.name}]`,type:"SUCCESS"}),n("LINK_SLOT_PROPERTY",{slotId:s,propertyId:u,targetArtifact:_});const L=document.getElementById(`prop-value-${u}`);L&&(L.innerText=`Linked: ${_.LABEL||_.name}`,L.style.color="var(--accent)",L.style.fontWeight="bold")}catch(_){console.error("Arthas Drop Error",_)}},className:"flex-1 border-2 border-dashed border-white/5 rounded-3xl flex flex-col items-center justify-center p-8 gap-4 opacity-30 transition-all duration-300",children:[a.jsx(j.Connect,{size:24,className:"animate-pulse"}),a.jsxs("p",{className:"text-[9px] text-center font-medium leading-relaxed pointer-events-none",children:["Arrastra un nodo del Grafo hasta este panel para ",a.jsx("strong",{className:"text-[var(--accent)]",children:"Vincular"})," esta propiedad globalmente."]})]})]})]})]})]})},Fa=({data:e,perspective:t="STANDARD"})=>{var v,S,y;const{state:r,execute:n}=te(),o=(r.phenotype.focusStack||[]).length>1,i=e.id||((v=e.data)==null?void 0:v.id)||e.ID,c=e.ACCOUNT_ID||((S=e.data)==null?void 0:S.ACCOUNT_ID),l=w.useMemo(()=>{var _,L;if(e.ORIGIN_SOURCE)return e.ORIGIN_SOURCE.toLowerCase();if((_=e.data)!=null&&_.ORIGIN_SOURCE)return e.data.ORIGIN_SOURCE.toLowerCase();const A=(L=r.phenotype.siloMetadata)==null?void 0:L[i];return A!=null&&A.ORIGIN_SOURCE?A.ORIGIN_SOURCE.toLowerCase():null},[e,i,r.phenotype.siloMetadata]),u=w.useMemo(()=>{var _,L,z,C;let A=[];if(Array.isArray(e.items)?A=e.items:Array.isArray(e.results)?A=e.results:Array.isArray(e.rows)?A=e.rows:Array.isArray((_=e.data)==null?void 0:_.results)?A=e.data.results:Array.isArray((L=e.data)==null?void 0:L.items)&&(A=e.data.items),A.length===0&&i){const M=(z=r.phenotype.silos)==null?void 0:z[i];M&&(A=Array.isArray(M)?M:M.results||M.items||M.rows||[])}return A.length===0&&((C=r.sovereignty)==null?void 0:C.mode)!=="LIVE"&&(A=Gh[i]||[]),A.map(M=>M?typeof M=="object"&&M.fields?{id:M.id||M.ID,...M.fields,_raw:M}:M:null).filter(Boolean)},[e,i,r.phenotype.silos,r.sovereignty.mode]),f=w.useMemo(()=>{var _,L,z,C,M;if((_=e.SCHEMA)!=null&&_.columns)return e.SCHEMA.columns;if((z=(L=e.data)==null?void 0:L.SCHEMA)!=null&&z.columns)return e.data.SCHEMA.columns;const A=(C=r.phenotype.siloMetadata)==null?void 0:C[i];return(M=A==null?void 0:A.SCHEMA)!=null&&M.columns?A.SCHEMA.columns:u.length===0?[]:Object.keys(u[0]).filter(k=>!k.startsWith("_")).map(k=>({id:k,label:k.replace(/_/g," ").toUpperCase(),type:typeof u[0][k]=="number"?"NUMBER":"STRING"}))},[e,u,i,r.phenotype.siloMetadata]),{data:h,searchTerm:m,setSearchTerm:g,sortConfig:E,toggleSort:N}=Cd(u,{searchKeys:f.map(A=>A.id),initialSort:{key:((y=f[0])==null?void 0:y.id)||"id",direction:"asc"}}),b=()=>{l&&n("FETCH_DATABASE_CONTENT",{databaseId:i,nodeId:l,accountId:c,refresh:!0})},d=()=>n("EXIT_FOCUS"),p=()=>n("EXIT_FOCUS");return a.jsxs("div",{className:"w-full h-full flex flex-col bg-[var(--bg-deep)] overflow-hidden animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("header",{className:"px-8 py-5 border-b border-white/5 bg-black/40 backdrop-blur-3xl flex items-center justify-between shrink-0 z-30",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2 pr-4 border-r border-white/10",children:[o&&a.jsx("button",{onClick:d,className:"w-9 h-9 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[var(--text-dim)] hover:text-[var(--accent)] hover:bg-[var(--accent)]/10 transition-all group",title:"Volver al Nivel Anterior",children:a.jsx(j.SidebarLeft,{size:16,className:"group-hover:-translate-x-0.5 transition-transform"})}),a.jsx("button",{onClick:p,className:"w-9 h-9 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[var(--error)] hover:bg-red-500/10 transition-all",title:"Cerrar Realidad",children:a.jsx(j.Close,{size:16})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-11 h-11 rounded-2xl bg-[var(--accent)]/10 border border-[var(--accent)]/30 flex items-center justify-center text-[var(--accent)] shadow-[0_0_20px_rgba(var(--accent-rgb),0.1)]",children:a.jsx(j.Database,{size:24})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h2",{className:"text-xl font-black text-white tracking-tight leading-none mb-1",children:e.LABEL||"DATA_OBJECT"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded leading-none ${l?"bg-[var(--accent)]/20 text-[var(--accent)]":"bg-red-500/20 text-red-400"}`,children:l||"IDENTITY_VOID"}),a.jsx("span",{className:"text-[8px] font-mono text-white/30 uppercase tracking-widest",children:i})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative group min-w-[300px]",children:[a.jsx(j.Search,{size:14,className:"absolute left-5 top-1/2 -translate-y-1/2 text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"}),a.jsx("input",{type:"text",placeholder:"ESCUDRIAR ENTROPA...",value:m,onChange:A=>g(A.target.value),className:"w-full bg-[var(--surface-header)] border border-[var(--border-subtle)] rounded-full pl-12 pr-6 py-2.5 text-[11px] font-mono text-[var(--text-soft)] outline-none focus:border-[var(--accent)]/40 focus:ring-4 focus:ring-[var(--accent)]/5 transition-all placeholder:text-[var(--text-dim)]"})]}),a.jsxs("div",{className:"flex items-center gap-1.5 p-1 bg-[var(--surface-header)] border border-[var(--border-subtle)] rounded-full",children:[a.jsx("button",{onClick:b,className:"p-2.5 rounded-full hover:bg-[var(--surface-card)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all hover:rotate-180 duration-700",title:"Refrescar Manantial",children:a.jsx(j.Sync,{size:14})}),a.jsx("button",{className:"p-2.5 rounded-full hover:bg-[var(--surface-card)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",title:"Descargar Snapshot",children:a.jsx(j.Download,{size:14})})]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar relative",children:a.jsxs("table",{className:"w-full text-left border-collapse min-w-[1000px] select-none",children:[a.jsx("thead",{className:"sticky top-0 z-20 bg-[var(--bg-deep)]/95 backdrop-blur-xl",children:a.jsx("tr",{children:f.map(A=>a.jsx("th",{onClick:()=>N(A.id),className:"px-8 py-5 border-b border-[var(--border-subtle)] text-[9px] font-black text-[var(--text-dim)] uppercase tracking-[0.3em] cursor-pointer hover:text-[var(--text-primary)] hover:bg-[var(--glass-overlay)] transition-all group",children:a.jsxs("div",{className:"flex items-center gap-3",children:[A.label,a.jsxs("div",{className:`flex flex-col opacity-0 group-hover:opacity-100 transition-opacity ${E.key===A.id?"opacity-100":""}`,children:[a.jsx("span",{className:`text-[8px] leading-[0.5] ${E.key===A.id&&E.direction==="asc"?"text-[var(--accent)]":"text-[var(--text-dim)]/20"}`,children:""}),a.jsx("span",{className:`text-[8px] leading-[0.5] ${E.key===A.id&&E.direction==="desc"?"text-[var(--accent)]":"text-[var(--text-dim)]/20"}`,children:""})]})]})},A.id))})}),a.jsx("tbody",{className:"divide-y border-[var(--border-subtle)]",children:h.length>0?h.map((A,_)=>a.jsx("tr",{onClick:()=>{n("EXECUTE_NODE_ACTION",{nodeId:i,capability:"onRowSelect",payload:A}),console.log(`[Axiom:DB] Row Selected: ${A.id||_}`)},className:"group hover:bg-[var(--accent)]/[0.06] active:bg-[var(--accent)]/[0.1] transition-all cursor-pointer",children:f.map(L=>{const z=A[L.id];return a.jsx("td",{className:"px-8 py-4.5 text-[11px] font-mono whitespace-nowrap overflow-hidden text-ellipsis max-w-[300px]",children:a.jsx("div",{className:"flex flex-col",children:a.jsx("span",{className:`transition-all duration-300 ${z?"text-[var(--text-secondary)] group-hover:text-[var(--text-primary)]":"text-[var(--text-dim)]/30 italic"}`,children:Sm(z,L.type)})})},L.id)})},A.id||_)):a.jsx("tr",{children:a.jsx("td",{colSpan:f.length,className:"px-8 py-32 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-6 animate-pulse opacity-30",children:[a.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-dashed border-[var(--border-subtle)] flex items-center justify-center",children:a.jsx(j.Inbox,{size:32})}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-xs font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"No_Manifestation_Found"}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)]",children:"EL VECTOR SE ENCUENTRA EN ESTADO DE VACO"})]}),a.jsx("button",{onClick:b,className:"mt-4 px-6 py-2 rounded-full border border-[var(--border-subtle)] text-[10px] uppercase font-black tracking-widest hover:bg-[var(--accent)] hover:text-white transition-all",children:"FORZAR_REIFICACIN"})]})})})})]})}),a.jsxs("footer",{className:"h-12 px-8 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)] backdrop-blur-2xl flex items-center justify-between shrink-0 z-30",children:[a.jsxs("div",{className:"flex items-center gap-6 text-[8px] font-black uppercase tracking-[0.2em]",children:[a.jsxs("div",{className:"flex items-center gap-2 text-[var(--accent)]",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] shadow-[0_0_10px_var(--accent-glow)]"}),a.jsx("span",{children:"STATUS: NOMINAL"})]}),a.jsx("div",{className:"w-[1px] h-4 border-l border-[var(--border-subtle)]"}),a.jsxs("span",{className:"text-[var(--text-dim)]",children:["Visible_Rows: ",a.jsx("strong",{className:"text-[var(--text-primary)]",children:h.length})," / ",u.length]}),a.jsx("div",{className:"w-[1px] h-4 border-l border-[var(--border-subtle)]"}),a.jsxs("span",{className:"text-[var(--text-dim)]",children:["Identity: ",a.jsx("strong",{className:"text-[var(--text-primary)]",children:(l==null?void 0:l.toUpperCase())||"VOID"})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase",children:"Axiomatic Grid v3.2"})})]})]})},Sm=(e,t)=>e==null?"":typeof e=="object"&&!Array.isArray(e)?e.id&&e.name?e.name:e.start?e.start.split("T")[0]:JSON.stringify(e).slice(0,30)+"...":Array.isArray(e)?e.map(r=>typeof r=="object"?r.name||r.id||JSON.stringify(r):r).join(", "):t==="NUMBER"?e.toLocaleString():t==="BOOLEAN"?e?" TRUE":" FALSE":String(e),Ba={VAULT:Es,BRIDGE:Es,FILES:Es,DATABASE:Fa,GRID:Fa,DATAGRID:Fa,COMMUNICATION:en,MAIL:en,MESSAGING:en,CHAT:en,EMAIL:en,NODE:ct,AGENT:ct,SERVICE:Ma,LLM:Ma,INTELLIGENCE:Ma,REALITY:cc,COSMOS:cc,SLOT:Ua,SLOT_NODE:Ua,UTILITY:Ua,STYLING:ct,MATH:ct,WIDGET:ct,ADAPTER:ct,DEFAULT:ct},os=e=>{const t=(e||"DEFAULT").toUpperCase(),r=Ba[t]||Ba.DEFAULT;return Ba[t]||console.warn(`[ArchetypeRegistry] Unknown archetype: ${t}. Falling back to NODE.`),r},Fn=({componentId:e,data:t,perspective:r="VAULT",schemaId:n,slotId:s,onCommit:o,onCancel:i})=>{var y;const{state:c}=te();if(r==="SCHEMA_PROJECTION")return a.jsx(_d,{schemaId:n,onCommit:o,onCancel:i});let l=t||q.getCanon(e);if(l&&(!l.LABEL||!l.ARCHETYPE)){const A=q.getCanon(e||l.id||l.ID);A&&(l={...A,...l})}if(!l)return a.jsxs("div",{className:"p-10 text-[var(--error)] font-mono border border-[var(--error)]/20 rounded-xl bg-[var(--error)]/5",children:["[FATAL] CANON_NOT_FOUND: ",e]});const u=xe.useMemo(()=>{var L;const A=l.id||l.ID||e,_=(L=c.phenotype.silos)==null?void 0:L[A];return _&&typeof _=="object"&&!Array.isArray(_)?(console.log(`[ComponentProjector]  Hydrated canon with silo data for ${A}`,{hasOriginSource:!!_.ORIGIN_SOURCE,hasSchema:!!_.SCHEMA,hasPagination:!!_.PAGINATION}),{...l,..._}):l},[l,e,c.phenotype.silos]),f=u.LABEL||u.label||"UNIT_SKELETON",h=u.ARCHETYPE||u.archetype||(u.ARCHETYPES?u.ARCHETYPES[0]:"ADAPTER"),m=u.DOMAIN||u.domain||"SYSTEM";!u.LABEL&&!u.ARCHETYPE&&console.warn(`[Projector] Partial Contract for ${e}. Normalizing...`);const g=xe.useMemo(()=>({...u,id:u.id||u.ID||e,LABEL:f,ARCHETYPE:h.toUpperCase(),DOMAIN:m.toUpperCase(),CAPABILITIES:u.CAPABILITIES||u.capabilities||{}}),[u,e,f,h,m]),E=xe.useMemo(()=>g.ARCHETYPES||[g.ARCHETYPE],[g]),[N,b]=xe.useState(null);let d=N&&E.includes(N)?N:E.includes("DATABASE")?"DATABASE":E.includes("VAULT")?"VAULT":E[0];xe.useEffect(()=>{N!==d&&b(d)},[d]);const p=n==="DATABASE_NODE"||((y=g.data)==null?void 0:y.type)==="DATABASE"||g.ARCHETYPE==="DATABASE"||g.ARCHETYPES&&g.ARCHETYPES.includes("DATABASE"),v=g.ARCHETYPE==="VAULT"||g.ARCHETYPES&&g.ARCHETYPES.includes("VAULT");let S=os(d);if(r!=="NODE"&&r!=="SCHEMA_PROJECTION")if(p)S=os("DATABASE");else if(v)S=os("VAULT");else{const A=os(r||d);A&&A!==ct&&(S=A)}return r==="NODE"&&(S=ct),a.jsx("div",{className:"flex flex-col h-full relative",children:a.jsx("div",{className:"flex-1 overflow-hidden relative",children:a.jsx(S,{data:g,perspective:r,slotId:s},`${e}-${d}`)})})},wd=({onSelect:e,onClose:t})=>{const[r,n]=w.useState(""),s=w.useMemo(()=>{const i=q.ontology||{},c=Object.keys(i);return c.length===0?[]:c},[]),o=w.useMemo(()=>s.filter(i=>i.toLowerCase().includes(r.toLowerCase())),[s,r]);return a.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t,children:a.jsxs("div",{className:"w-[400px] max-h-[60vh] bg-[var(--bg-deep)] border border-[var(--border-vibrant)]/50 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)] flex flex-col overflow-hidden animate-in scale-95 duration-200",onClick:i=>i.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] bg-[var(--bg-secondary)]/30 flex items-center gap-3",children:[a.jsx(j.Search,{size:16,className:"text-[var(--accent)]"}),a.jsx("input",{type:"text",className:"flex-1 bg-transparent border-none text-[var(--text-vibrant)] placeholder:text-[var(--text-dim)] focus:outline-none font-medium text-sm",placeholder:"Select Adapter Protocol...",value:r,onChange:i=>n(i.target.value),autoFocus:!0}),a.jsx("button",{onClick:t,className:"text-[var(--text-dim)] hover:text-[var(--text-soft)]",children:a.jsx(j.Close,{size:16})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-dot-pattern scrollbar-thin scrollbar-thumb-[var(--border-subtle)]",children:o.length>0?o.map(i=>{const c=q.getLabel(i)||i;return a.jsxs("button",{onClick:()=>e(i),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-[var(--accent)]/10 hover:border-[var(--accent)]/30 border border-transparent transition-all group text-left mb-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded bg-[var(--bg-primary)] border border-[var(--border-subtle)] flex items-center justify-center text-[var(--text-dim)] group-hover:text-[var(--accent)] group-hover:border-[var(--accent)]/50 font-mono text-xs font-bold",children:i.substring(0,2)}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-xs font-bold text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)]",children:c.toUpperCase()}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-50",children:i})]})]}),a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(j.ChevronDown,{size:14,className:"-rotate-90 text-[var(--accent)]"})})]},i)}):a.jsx("div",{className:"p-8 text-center text-[var(--text-dim)] text-xs font-mono",children:"NO MATCHES"})}),a.jsx("div",{className:"p-2 border-t border-[var(--border-subtle)] bg-[var(--bg-primary)] text-center",children:a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] tracking-widest opacity-50",children:"SELECT TARGET TO INSPECT"})})]})})},Nm=e=>({igniteChaosTest:async n=>{try{console.error("[CHAOS_ENGINE]  IGNITING PERSISTENCE STRESS TEST..."),n(!0),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" REACTOR_IGNITION: Iniciando Tormenta de Entropa Negativa...",type:"WARN"}),console.error("[CHAOS_ENGINE]  Phase 1: Causal Storm");const s=[];for(let o=0;o<8;o++){const i=`temp_chaos_${o}_${Date.now()}`;s.push(i),e("ADD_ARTIFACT_REQUEST",{artifact:{id:i,LABEL:`Chaos_Node_${o}`,type:"FILE_NODE"},position:{x:Math.random()*500,y:Math.random()*500}}),o>0&&e("ADD_RELATIONSHIP",{source:s[o-1],target:i,type:"CAUSAL_LINK"})}await new Promise(o=>setTimeout(o,800)),console.error("[CHAOS_ENGINE]  Phase 2: Homeostasis Flood");for(let o=0;o<20;o++)e("UPDATE_ARTIFACT_POSITION",{nodeId:s[0],x:Math.random()*1e3,y:Math.random()*1e3});await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" PRESIN_SISTMICA: Verificando estabilidad del SyncOrchestrator...",type:"INFO"}),await new Promise(o=>setTimeout(o,2e3)),console.error("[CHAOS_ENGINE]  Phase 3: Kinetic Dissonance"),s.forEach(o=>{e("UPDATE_ARTIFACT_POSITION",{nodeId:o,x:400,y:400})}),await new Promise(o=>setTimeout(o,3e3)),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" CONSTANCIA_DETERMINSTICA: Test Finalizado. Verifique en consola.",type:"SUCCESS"}),n(!1),console.error("[CHAOS_ENGINE]  Chaos sequence stabilized.")}catch(s){console.error("[CHAOS_ENGINE]  CRITICAL_STRESS_FAILURE:",s),n(!1)}},v12SovereigntyAudit:async n=>{var s,o;try{console.error("[CHAOS_ENGINE]  STARTING V12 SOVEREIGNTY AUDIT..."),n(!0),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" INICIANDO AUDITORA V12: Soberana de Snapshot...",type:"WARN"}),console.error("[CHAOS_ENGINE]  Phase 1: Sovereign Construction");const i=[];for(let h=0;h<5;h++){const m=`sov_node_${h}_${Date.now()}`;i.push(m),e("ADD_ARTIFACT_REQUEST",{artifact:{id:m,LABEL:`Sovereign_Node_${h}`,type:"FILE_NODE"},position:{x:100+h*100,y:200}})}await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 1: Nodos creados localmente. Soberana validada.",type:"INFO"}),await new Promise(h=>setTimeout(h,1e3)),console.error("[CHAOS_ENGINE]  Phase 2: Piggybacking Trigger"),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 2: Disparando consulta al Core con Snapshot Polizn...",type:"INFO"}),console.error("[CHAOS_ENGINE]  Capturing snapshot for deep verification...");const c=(o=(s=window.useSyncOrchestrator)==null?void 0:s.getState)==null?void 0:o.call(s),l=c?JSON.stringify(c.prepareSnapshot()):null;await e("START_DISCOVERY"),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 2: Consulta finalizada. Verificando integridad de la realidad...",type:"SUCCESS"});const u=c?JSON.stringify(c.prepareSnapshot()):null,f=l===u;await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:f?" INTEGRIDAD_OK: La realidad local se mantuvo inalterada tras la sincrona.":" DRIFT_DETECTADO: La realidad local cambi durante/tras la sincrona (Esperado si hubo drift previo).",type:f?"SUCCESS":"WARN"}),console.error("[CHAOS_ENGINE]  Phase 3: Kinetic Drift");for(let h=0;h<10;h++)e("UPDATE_ARTIFACT_POSITION",{nodeId:i[0],x:Math.random()*800,y:Math.random()*600});await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 3: Deriva cintica completada sin bloqueo de red.",type:"INFO"}),await new Promise(h=>setTimeout(h,2e3)),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" AUDITORA COMPLETADA. Recargue la pgina para verificar Persistencia de Hitos.",type:"SUCCESS"}),n(!1),console.error("[CHAOS_ENGINE]  V12 Audit stabilized.")}catch(i){console.error("[CHAOS_ENGINE]  V12_AUDIT_FAILURE:",i),n(!1)}}}),Am=({state:e,execute:t})=>{var o;const r=e.phenotype.cosmosIdentity,n=e.sovereignty.revisionHash||((o=e.phenotype.cosmosIdentity)==null?void 0:o._revisionHash),s=()=>{!r&&!confirm("No hay un Cosmos activo. Disparar pulso de resonancia al vaco?")||(t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" Propagating Reality Touch (Resonance Pulse)...",type:"INFO"}),t("SET_LAYOUT_DIRTY",!0))};return a.jsxs("div",{className:"flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[a.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] space-y-4 shadow-inner",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-widest opacity-70",children:"Active_Cosmos_ID"}),a.jsx("span",{className:"text-[10px] font-mono text-[var(--text-soft)] truncate",children:(r==null?void 0:r.id)||"NO_COSMOS_MOUNTED"})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-widest opacity-70",children:"Sovereign_Hash"}),a.jsx("code",{className:"text-[9px] font-mono text-[var(--success)] bg-black/40 px-2 py-1 rounded border border-[var(--success)]/20 shadow-[0_0_10px_rgba(34,197,94,0.05)]",children:n||"AWAITING_GENESIS"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase tracking-widest block",children:"Core Protocols"}),a.jsxs("button",{onClick:s,className:"w-full py-2.5 rounded-lg border border-[var(--accent)]/30 bg-[var(--accent)]/5 text-[var(--accent)] font-bold text-[9px] tracking-[0.2em] uppercase hover:bg-[var(--accent)]/10 transition-all active:scale-95 mb-2 group overflow-hidden relative",children:[a.jsx("span",{className:"relative z-10",children:"Touch_Reality"}),a.jsx("div",{className:"absolute inset-0 bg-[var(--accent)]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})]}),a.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/20 bg-blue-500/5 backdrop-blur-sm",children:[a.jsx("span",{className:"text-[8px] font-black text-blue-400 uppercase tracking-widest block mb-1",children:"Axiomatic Verification V12"}),a.jsxs("ul",{className:"text-[9px] text-blue-200/60 space-y-1.5 list-none",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Snapshot Sovereignty Protocol."]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Piggybacking Persistence Layer."]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Revision Locking Protocol."]})]})]})]})},bm=({state:e,execute:t,selectedId:r,isDnaOpen:n})=>{var i,c;const[s,o]=w.useState("STRUCTURE");return a.jsx("div",{className:`absolute top-0 right-0 h-full w-[450px] glass border-l border-white/5 z-20 transition-transform duration-700 ease-out backdrop-blur-3xl shadow-[-20px_0_50px_rgba(0,0,0,0.5)] ${n?"translate-x-0":"translate-x-full"}`,children:a.jsxs("div",{className:"h-full overflow-hidden flex flex-col p-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-10 py-2 border-b border-white/5",children:[a.jsxs("h2",{className:"text-sm font-black tracking-[0.4em] text-[var(--accent)] flex items-center gap-3",children:[a.jsx(j.Lab,{size:18})," GENOTYPE INSPECTOR"]}),a.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"dna"}),className:"p-2 hover:bg-white/10 rounded-full transition-all active:rotate-90",children:a.jsx(j.Close,{size:18,className:"text-white/40"})})]}),a.jsx("div",{className:"flex gap-6 mb-6 border-b border-white/10",children:["STRUCTURE","VITAL_LOGS","REALITY"].map(l=>a.jsxs("button",{onClick:()=>o(l),className:`text-[10px] font-bold tracking-widest pb-3 transition-all relative ${s===l?"text-[var(--accent)]":"text-[var(--text-dim)] hover:text-white"}`,children:[l,s===l&&a.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[var(--accent)] shadow-[0_0_10px_var(--accent)]"})]},l))}),a.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[s==="STRUCTURE"&&a.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar bg-black/20 rounded-xl p-4 border border-white/5",children:a.jsx("pre",{className:"text-[10px] font-mono text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed",children:e.genotype?(()=>{const l=e.genotype.COMPONENT_REGISTRY||{},u=Object.keys(l).find(h=>h.toUpperCase()===(r==null?void 0:r.toUpperCase())),f=u?l[u]:{ERROR:"ATOM_NOT_IN_REGISTRY",TARGET:r,FULL_REGISTRY_KEYS:Object.keys(l)};return JSON.stringify(f,null,2)})():a.jsxs("div",{className:"flex flex-col items-center justify-center h-40 opacity-50",children:[a.jsx("div",{className:"animate-spin mb-3",children:""}),a.jsx("span",{className:"text-[8px] tracking-[0.2em]",children:"AWAITING_CORE_GENOTYPE..."})]})})}),s==="VITAL_LOGS"&&a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-black/20 rounded-xl border border-white/5",children:[a.jsxs("div",{className:"p-3 border-b border-white/5 flex justify-between items-center bg-black/20",children:[a.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-[0.2em]",children:"Operational Stream"}),a.jsxs("span",{className:"text-[8px] font-mono text-[var(--success)] opacity-50",children:[((i=e.phenotype.logs)==null?void 0:i.length)||0," ENTRIES"]})]}),a.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar font-mono text-[9px] flex flex-col-reverse p-2",children:(c=e.phenotype.logs)==null?void 0:c.map((l,u)=>a.jsxs("div",{className:`flex gap-3 py-1.5 px-2 border-b border-white/5 animate-in fade-in slide-in-from-left-2 duration-300 ${l.type==="ERROR"?"text-red-400 bg-red-400/5":l.type==="SUCCESS"?"text-[var(--success)] bg-green-400/5":l.type==="WARN"?"text-orange-400 bg-orange-400/5":"text-[var(--text-dim)] hover:bg-white/5"}`,children:[a.jsxs("span",{className:"opacity-30 shrink-0",children:["[",l.time,"]"]}),a.jsx("span",{className:"break-words",children:l.msg})]},u))})]}),s==="REALITY"&&a.jsx(Am,{state:e,execute:t})]})]})})},Tm=({componentId:e,data:t,perspective:r,isTesting:n})=>{var c;const{state:s}=te(),i=t||((c=s.phenotype.artifacts)==null?void 0:c.find(l=>l.id===e))||{id:e};return a.jsxs("div",{className:`absolute inset-0 z-0 transition-all duration-1000 ease-[cubic-bezier(0.16,1,0.3,1)] 
            ${n?"scale-[0.98] opacity-60 blur-[2px] grayscale-[0.3]":"scale-100 opacity-100"}`,children:[a.jsx("div",{className:"w-full h-full flex items-center justify-center p-6 md:p-12 lg:p-20 bg-[radial-gradient(circle_at_center,_var(--bg-secondary)_0%,_transparent_70%)] opacity-30 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-8 md:p-14 lg:p-24 overflow-hidden",children:a.jsxs("div",{className:"w-full h-full max-w-[1800px] max-h-[1000px] flex flex-col relative group/deck",children:[a.jsxs("div",{className:"absolute -top-6 -left-2 flex flex-col gap-1 z-20 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-[var(--accent)] animate-pulse shadow-[0_0_8px_var(--accent)]"}),a.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-[0.3em]",children:"Televisor_Ready"})]}),a.jsx("div",{className:"h-[1px] w-20 bg-gradient-to-r from-[var(--accent)] to-transparent opacity-30"})]}),a.jsxs("div",{className:"absolute -top-6 -right-2 flex flex-col items-end gap-1 z-20",children:[a.jsxs("span",{className:"text-[7px] font-mono text-white/30 uppercase",children:["Perspective: ",r]}),a.jsx("div",{className:"flex gap-1",children:[0,1,2].map(l=>a.jsx("div",{className:"w-3 h-0.5 bg-white/10"},l))})]}),a.jsxs("div",{className:`
                        flex-1 glass rounded-[3rem] border border-white/5 shadow-[0_50px_100px_rgba(0,0,0,0.8)] 
                        relative flex flex-col overflow-hidden transition-all duration-700
                        ${n?"border-orange-500/30 ring-1 ring-orange-500/10":"hover:border-white/10"}
                    `,children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02]",style:{backgroundImage:"linear-gradient(var(--accent) 1px, transparent 1px), linear-gradient(90deg, var(--accent) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),a.jsx("div",{className:"flex-1 relative overflow-hidden",children:a.jsx(Fn,{componentId:e,data:i,perspective:r})}),a.jsxs("div",{className:"h-8 bg-black/40 border-t border-white/5 backdrop-blur-md flex items-center justify-between px-10",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"text-[7px] font-mono text-white/20 uppercase tracking-widest",children:["Target_ID: ",e]}),a.jsx("div",{className:"w-1 h-3 bg-white/5 rounded-full"}),a.jsx("span",{className:"text-[7px] font-black text-[var(--accent)]/40 uppercase tracking-tighter",children:"Diagnostic_Affinities: NOMINAL"})]}),a.jsxs("div",{className:"flex gap-2 opacity-20 group-hover/deck:opacity-60 transition-opacity",children:[a.jsx("div",{className:"w-2 h-2 rounded-full border border-white/40"}),a.jsx("div",{className:"w-2 h-2 rounded-full border border-white/40"})]})]})]}),a.jsx("div",{className:"absolute -inset-10 bg-[var(--accent)]/5 blur-[100px] rounded-full opacity-20 pointer-events-none -z-10 animate-pulse"})]})})]})},_m=({activeTarget:e,activePerspective:t,activeArchetype:r,onSelectTarget:n,onSelectPerspective:s,isMockEnabled:o,onToggleMock:i,isTesting:c,onRunChaosTest:l,onRunAudits:u,onRunDiagnostic:f,onRunTrace:h,onRunForensics:m,onRunDeterminismProbe:g,execute:E})=>{const[N,b]=w.useState(!1),d=[{id:"VAULT",label:"Vault",icon:j.Vault,archetypes:["VAULT","ADAPTER","DRIVE"]},{id:"DATABASE",label:"Database",icon:j.Database,archetypes:["DATABASE","COLLECTION","GRID"]},{id:"NODE",label:"Node",icon:j.Terminal,archetypes:["NODE","TERMINAL"]},{id:"COMMUNICATION",label:"Mail",icon:j.Inbox,archetypes:["SIGNAL","EMAIL","CHAT"]},{id:"LLM",label:"LLM",icon:j.Settings,archetypes:["SERVICE","AGENT","INTELLIGENCE"]},{id:"REALITY",label:"Reality",icon:j.Cosmos,archetypes:["GRAPH","COSMOS"]},{id:"SLOT",label:"Slot",icon:j.Transform,archetypes:["SLOT","COMPOSITE"]}],[p,v]=w.useState(!1),[S,y]=w.useState(""),[A,_]=w.useState([]);w.useEffect(()=>{q.isCompiled||q.compile();const C=(q.getRenderManifest()||[]).filter(M=>(M.LABEL||M.id).toLowerCase().includes(S.toLowerCase()));_(C.slice(0,50))},[S]);const L=z=>{var C;return r?(C=z.archetypes)==null?void 0:C.some(M=>r.includes(M)):!1};return a.jsxs("div",{className:"fixed right-6 top-1/2 -translate-y-1/2 z-[400] flex flex-col items-center gap-4 animate-fade-in-right",children:[a.jsxs("div",{className:"flex flex-col gap-4 p-3 glass border border-white/10 rounded-[32px] shadow-[0_30px_60px_rgba(0,0,0,0.5)] backdrop-blur-3xl relative",children:[a.jsxs("div",{className:"relative group/search",children:[a.jsx("button",{onClick:()=>v(!p),className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${p?"bg-[var(--accent)] text-black":"text-white/40 hover:text-white hover:bg-white/5"}`,title:"Search Artifacts",children:a.jsx(j.Search,{size:20})}),p&&a.jsxs("div",{className:"absolute right-16 top-0 w-72 bg-[var(--bg-deep)] border border-white/10 rounded-2xl shadow-2xl p-4 animate-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3 bg-white/5 p-2 rounded-xl border border-white/5",children:[a.jsx(j.Search,{size:14,className:"text-white/40"}),a.jsx("input",{type:"text",placeholder:"Search...",className:"w-full bg-transparent text-xs focus:outline-none text-white placeholder:text-white/10",value:S,onChange:z=>y(z.target.value),autoFocus:!0})]}),a.jsx("div",{className:"flex flex-col gap-1 max-h-60 overflow-y-auto custom-scrollbar",children:A.map(z=>a.jsxs("button",{onClick:()=>{n(z.id),v(!1)},className:`text-left px-3 py-2 hover:bg-white/5 rounded-xl flex items-center justify-between group/item ${e===z.id?"bg-[var(--accent)]/10 border border-[var(--accent)]/20":""}`,children:[a.jsx("span",{className:"text-[10px] font-black uppercase text-white/60 truncate max-w-[150px]",children:z.LABEL||z.id}),a.jsx("span",{className:"text-[7px] font-mono text-white/20",children:z.ARCHETYPE})]},z.id))})]})]}),a.jsx("div",{className:"h-[1px] w-8 bg-white/10 mx-auto"}),a.jsx("div",{className:"flex flex-col gap-2",children:d.map(z=>{const C=t===z.id,M=L(z);return a.jsxs("button",{onClick:()=>{(!e||e==="DRIVE")&&(E("INJECT_PHANTOM_ARTIFACT",{engineId:z.id}),o||i()),s(z.id)},className:`w-12 h-12 rounded-2xl flex flex-col items-center justify-center transition-all duration-500 relative group/icon
                                    ${C?"bg-[var(--accent)] text-black shadow-[0_0_20px_rgba(var(--accent-rgb),0.4)] scale-110":M?"text-[var(--accent)] bg-[var(--accent)]/10":"text-white/20 hover:text-white hover:bg-white/5"}`,children:[a.jsx(z.icon,{size:18}),a.jsx("span",{className:`text-[6px] font-black mt-1 tracking-tighter ${C?"text-black":"text-[var(--text-dim)] group-hover/icon:text-white"}`,children:z.label}),M&&!C&&a.jsx("div",{className:"absolute inset-0 rounded-2xl border border-[var(--accent)] animate-ping opacity-20"})]},z.id)})}),a.jsx("div",{className:"h-[1px] w-8 bg-white/10 mx-auto"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{onClick:i,className:`w-12 h-12 rounded-2xl flex flex-col items-center justify-center transition-all ${o?"bg-orange-500/20 text-orange-400 border border-orange-500/30 shadow-[0_0_15px_rgba(249,115,22,0.2)]":"text-white/20 hover:text-white/40"}`,children:[a.jsx(j.Sync,{size:16,className:o?"animate-spin-slow":""}),a.jsx("span",{className:"text-[6px] font-black mt-1",children:"MOCK"})]}),a.jsxs("div",{className:"relative w-12 h-12",children:[a.jsx("div",{className:`absolute right-14 top-0 h-12 flex items-center bg-[var(--bg-deep)]/90 backdrop-blur-2xl rounded-2xl border border-white/10 shadow-2xl transition-all duration-500 overflow-hidden ${N?"w-[320px] px-3":"w-0 opacity-0"}`,children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:l,title:"Chaos",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:a.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),a.jsx("button",{onClick:u,title:"Audit",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:a.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),a.jsx("button",{onClick:f,title:"Diagnostic",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:a.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),a.jsx("button",{onClick:h,title:"Trace",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:a.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),a.jsx("button",{onClick:m,title:"Forensics",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:a.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),a.jsx("button",{onClick:g,title:"Identity",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:a.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})})]})}),a.jsxs("button",{onClick:()=>b(!N),className:`w-12 h-12 rounded-2xl flex flex-col items-center justify-center transition-all ${N?"bg-blue-600 text-white":"text-white/20 hover:text-blue-400 hover:bg-blue-500/10"}`,children:[a.jsx(j.Lab,{size:18}),a.jsx("span",{className:"text-[6px] font-black mt-1",children:"TEST"})]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1 px-4 opacity-40",children:[a.jsxs("span",{className:"text-[7px] font-black uppercase tracking-widest text-white/50",children:["Vector: ",e]}),a.jsxs("span",{className:"text-[7px] font-mono text-[var(--accent)] uppercase",children:[t," Mode"]})]})]})},Cm=(e,t)=>({igniteForensicChain:async n=>{console.clear(),console.log("%c  [FORENSIC_CHAIN] Igniting Ultra-Diagnostic Chain...","color: #f472b6; font-weight: bold; font-size: 14px;");const s=ut.call.bind(ut);ut.call=async(c,l,u)=>(console.group(`%c  [FORENSIC:Interdiction] ${c}.${l}`,"color: #38bdf8;"),console.log("Queue size:",ut.batchQueue.length),console.log("Timer active:",!!ut.batchTimer),console.log("Write allowed?",H.getState().isWriteAllowed()),console.log("Hash Init?",H.getState().session.hashInitialized),console.groupEnd(),s(c,l,u));const o=St.call.bind(St);St.call=async(c,l,u)=>{console.log(`%c  [FORENSIC:Connector] Outgoing -> ${c}.${l}`,"color: #10b981; font-weight: bold;");try{const f=await o(c,l,u);return console.log(`%c  [FORENSIC:Connector] Incoming <- ${l}`,"color: #10b981;",{size:JSON.stringify(f).length}),f}catch(f){throw console.error(" [FORENSIC:Connector] Physical Drop:",f.message),f}};const i=ys.transmute.bind(ys);ys.transmute=(c,l)=>{console.group(`%c  [FORENSIC:Transmuter] Analyzing ${l}`,"color: #a855f7;"),console.log("Raw Response:",c);const u=i(c,l);return console.log("Transmuted Result:",u),console.groupEnd(),u},e({type:"LOG_ENTRY",payload:{msg:" Cadena Forense Activa. Disparando Sonda FETCH...",type:"INFO"}}),setTimeout(async()=>{console.log("%c  [FORENSIC] Triggering Target Action...","color: #f472b6; font-weight: bold;");const l=H.getState().phenotype.devLab||{},u=(n==="DRIVE"||n==="VAULT")&&l.selectedArtifactId||n;console.log(`[FORENSIC] Target Resolved: ${u}`);try{t("FETCH_DATABASE_CONTENT",{databaseId:u,nodeId:"notion",refresh:!0}),setTimeout(()=>{console.log("%c  [FORENSIC:Timeout] 10 seconds without resolution. Checking queue status...","color: #ef4444;"),console.log("Stuck Queue:",ut.batchQueue)},1e4)}catch(f){console.error(" [FORENSIC:Chain] Broken at dispatch:",f)}},1e3)}}),Im=(e,t,r)=>({probeDeterminismIntegrity:async s=>{var o,i,c,l;try{console.group("%c  [DETERMINISM_PROBE] Iniciando Auditora de Integridad...","color: #fbbf24; font-weight: bold;"),s(!0),await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" PROBE_DETERMINISM: Verificando rechazo de heursticas...",type:"WARN"}),console.log("%c [PROBE] Stage 1: Attempting to select Headless Artifact","color: #94a3b8;");const u=`headless_${Date.now()}`;t("ADD_ARTIFACT_REQUEST",{artifact:{id:u,LABEL:"GHOST_ARTIFACT",type:"DATABASE_NODE"},position:{x:0,y:0}}),await new Promise(k=>setTimeout(k,500)),console.log("%c [PROBE] Selecting Headless Artifact via SELECT_ARTIFACT...","color: #94a3b8;"),t("SELECT_ARTIFACT",{artifactId:u}),await new Promise(k=>setTimeout(k,1e3));const h=r.phenotype.logs.some(k=>{var x,T;return((x=k.msg)==null?void 0:x.includes("IDENTITY_VOID"))||((T=k.msg)==null?void 0:T.includes("Missing identity"))});await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:h?" STAGE 1: Identidad Vaca detectada y bloqueada correctamente.":" STAGE 1: El sistema permiti la seleccin de un artefacto sin pasaporte.",type:h?"SUCCESS":"ERROR"}),console.log("%c [PROBE] Stage 2: Verifying Routing for 'sheets' origin","color: #94a3b8;");const m=`sheet_test_${Date.now()}`;t("ADD_ARTIFACT_REQUEST",{artifact:{id:m,LABEL:"DETERMINISTIC_SHEET",type:"DATABASE_NODE",ORIGIN_SOURCE:"sheets",ACCOUNT_ID:"system"},position:{x:100,y:100}}),await new Promise(k=>setTimeout(k,500)),t("SELECT_ARTIFACT",{artifactId:m}),await new Promise(k=>setTimeout(k,2e3));const g=r.phenotype.logs.some(k=>{var x,T;return((x=k.msg)==null?void 0:x.includes("[DB_ENGINE]  Reifying"))||((T=k.msg)==null?void 0:T.includes("reifyDatabase"))});await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:g?" STAGE 2: Enrutamiento determinista validado (sheets -> reifyDatabase).":" STAGE 2: Fallo en el enrutamiento del pasaporte.",type:g?"SUCCESS":"ERROR"}),console.log("%c [PROBE] Stage 3: Verifying Alias Resolution ('vault' -> 'drive')","color: #94a3b8;"),t("LOG_ENTRY",{msg:" Probando resolucin de alias: vault.listContents"});try{const k=await fe.executeAction("vault:listContents",{path:"/"}),x=k&&k.success;await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:x?" STAGE 3: Resolucin de alias validada (vault -> drive).":" STAGE 3: El backend no reconoci el alias semntico.",type:x?"SUCCESS":"ERROR"})}catch(k){await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:` STAGE 3: Error fsico en resolucin: ${k.message}`,type:"ERROR"})}console.log("%c [PROBE] Stage 4: Verifying Lexical Sovereignty (Relation Mapping)","color: #94a3b8;");const E=`notion_test_${Date.now()}`;t("ADD_ARTIFACT_REQUEST",{artifact:{id:E,LABEL:"LEXICAL_SOVEREIGNTY_TEST",type:"DATABASE_NODE",ORIGIN_SOURCE:"notion",ACCOUNT_ID:"system",SCHEMA:{columns:[{id:"Relationship",type:"relation"}]}},position:{x:200,y:200}}),await new Promise(k=>setTimeout(k,500)),t("SELECT_ARTIFACT",{artifactId:E}),await new Promise(k=>setTimeout(k,3e3));const b=r.phenotype.logs.some(k=>{var x,T,I,O;return((x=k.msg)==null?void 0:x.includes("[Notion:Hydrator]"))||((T=k.msg)==null?void 0:T.includes("Resolviendo nombres"))||((I=k.msg)==null?void 0:I.includes("Identity Hydration Success"))||((O=k.msg)==null?void 0:O.includes("Soberana Lexical"))}),d=(o=r.phenotype.silos)==null?void 0:o[E];let p=!1;if(d){const k=(l=(c=(i=d.results)==null?void 0:i[0])==null?void 0:c.Relationship)==null?void 0:l[0];k&&typeof k=="object"&&k.id&&k.name?(p=!0,console.log("%c [PROBE] Deep Inspection: Hydration Confirmed ","color: #4ade80",k)):console.warn("[PROBE] Deep Inspection: Hydration Failed . Value:",k)}const v=p||b;await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:v?" STAGE 4: Soberana Lexical validada. (Data Integrity: CONFIRMED)":" STAGE 4: Fallo de Hidratacin. Data corrupta o incompleta.",type:v?"SUCCESS":"ERROR"}),console.log("%c [PROBE] Stage 5: Auditing Law_Compiler Manifest for Virtual Artifacts","color: #94a3b8;");const S=await cr(()=>Promise.resolve().then(()=>_h),void 0),y=S.default||S;y.compile();const _=y.getRenderManifest().find(k=>k.id==="SLOT_NODE"||k.omd==="slot_node");let L=!!_,z=!1,C="NOT_FOUND";if(_){const k=(_.ARCHETYPE||"").toUpperCase(),x=(_.DOMAIN||"").toUpperCase(),I=["ADAPTER","VAULT","ORCHESTRATOR","AGENT","WIDGET","DATAGRID","SERVICE","TRANSFORM","GRID","COMPUTE","NODE","SLOT","SLOT_NODE","UTILITY","STYLING"].some(U=>k.includes(U)),V=["SYSTEM_CORE","SYSTEM_INFRA","DATA_ENGINE","LOGIC","TEMPORAL"].includes(x),R=k.includes("ADAPTER")||k.includes("VAULT")||k.includes("AGENT");z=(I||R)&&(!V||R),z||(C=V?`DOMINIO_BLOQUEADO (${x})`:`ARQUETIPO_NO_LISTADO (${k})`)}await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:L?` STAGE 5: SLOT_NODE encontrado en el Manifiesto. Visibilidad: ${z?"APROBADA":"BLOQUEADA -> "+C}`:" STAGE 5: SLOT_NODE NO ENCONTRADO en el Manifiesto Compilado.",type:L&&z?"SUCCESS":"ERROR"});const M=L&&z;await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:M?" VERDICTO FINAL: El sistema est listo para manifestar el SLOT_NODE.":" VERDICTO FINAL: Fallo en la cadena de manifestacin frontend.",type:M?"SUCCESS":"ERROR"}),console.groupEnd(),s(!1)}catch(u){console.error("[DETERMINISM_PROBE]  FATAL_ERROR:",u),s(!1),console.groupEnd()}}}),wm=()=>{const{state:e,dispatch:t,execute:r}=te(),[n,s]=w.useState(!1),[o,i]=w.useState(!1);H(d=>d.setLoading),H(d=>d.interdiction.active),H(d=>d.interdiction.reason);const c=e.phenotype.devLab||{},l=c.targetId||"DRIVE",u=c.perspective||"VAULT",f=w.useMemo(()=>{var L,z,C,M,k;const d=l.startsWith("garage_")?l.split("_")[1].toUpperCase():l.toUpperCase(),p=((L=on.GARAGE_PROTOTYPES)==null?void 0:L[d])||((z=on.GARAGE_PROTOTYPES)==null?void 0:z[l.toUpperCase()]);if(p)return{...p,id:l,_isGhost:!0,_isMock:!0,LABEL:p.LABEL||`${d} (PROTOTYPE)`};const v=(C=e.phenotype.artifacts)==null?void 0:C.find(x=>x.id===l);if(v)return v;const S=((k=(M=fe.L0)==null?void 0:M.COMPONENT_REGISTRY)==null?void 0:k[l])||q.getCanon(l);if(S)return S;const A={VAULT:"DRIVE",DATABASE:"DATABASE",NODE:"NODE",COMMUNICATION:"EMAIL",REALITY:"COSMOS",SLOT:"SLOT_MANAGER"}[l.toUpperCase()]||l,_=on.COMPONENT_REGISTRY[A]||on.COMPONENT_REGISTRY[A.toUpperCase()];return _?{..._,id:l,_isMock:!0,LABEL:`${_.LABEL} (FALLBACK)`}:{id:l,LABEL:l.toUpperCase(),ARCHETYPE:l==="VAULT"?"VAULT":"ADAPTER"}},[l,c.isMockEnabled,e.phenotype.artifacts]),h=f.id||f.ID,m=e.phenotype.ui.dnaPanelOpen,g=e.phenotype.ui.chaosPanelOpen,E=w.useMemo(()=>Nm(r),[r]),N=w.useMemo(()=>Cm(t,r),[t,r]),b=w.useMemo(()=>Im(t,r,e),[t,r,e]);return fe.isIgnited?a.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-[var(--bg-deep)] text-white font-sans",children:[a.jsx(Tm,{componentId:h,data:f,perspective:u,isTesting:o,execute:r}),a.jsx(bm,{state:e,execute:r,selectedId:h,isDnaOpen:m}),a.jsx(_m,{activeTarget:l,activePerspective:u,activeArchetype:f==null?void 0:f.ARCHETYPE,onSelectTarget:d=>r("SET_LAB_TARGET",d),onSelectPerspective:d=>r("SET_LAB_PERSPECTIVE",d),isMockEnabled:c.isMockEnabled,onToggleMock:()=>r("TOGGLE_LAB_MOCK"),onToggleChaos:()=>r("TOGGLE_UI_PANEL",{panel:"chaos"}),isChaosOpen:g,isTesting:o,onRunChaosTest:()=>E.igniteChaosTest(i),onRunAudits:()=>E.v12SovereigntyAudit(i),onRunDiagnostic:()=>r("RUN_DIAGNOSTIC"),onRunTrace:()=>{const d=/^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i.test(h),p=l==="DATABASE"||f.ARCHETYPE==="DATABASE";h&&(p||d)?(console.log(`[DevLab]  Launching Sovereign Trace for: ${h}`),r("TRACE_SOVEREIGN_DATABASE",{databaseId:h,nodeId:"notion"})):(console.warn(`[DevLab]  Trace Blocked: ID ${h} does not look like a Database.`,{targetId:l,archetype:f.ARCHETYPE}),r("LOG_ENTRY",{msg:" Selecciona una Database de Notion para trazar.",type:"WARNING"}))},onRunForensics:()=>{h?N.igniteForensicChain(h):r("LOG_ENTRY",{msg:" Selecciona un artefacto para la autopsia.",type:"WARNING"})},onRunDeterminismProbe:()=>b.probeDeterminismIntegrity(i),execute:r}),n&&a.jsxs("div",{className:"absolute inset-0 z-[1000] flex items-center justify-center animate-in fade-in duration-300",children:[a.jsx("div",{className:"absolute inset-0 bg-[var(--bg-deep)]/80 backdrop-blur-md",onClick:()=>s(!1)}),a.jsx("div",{className:"relative z-10 animate-in zoom-in-95 duration-300",children:a.jsx(wd,{onSelect:d=>{r("SET_LAB_TARGET",d),s(!1)},onClose:()=>s(!1)})})]})]}):a.jsxs("div",{className:"w-screen h-screen bg-[var(--bg-deep)] flex flex-col items-center justify-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 border-2 border-[var(--success)]/20 border-t-[var(--success)] rounded-full animate-spin"}),a.jsx("div",{className:"text-[var(--success)] font-mono text-xs tracking-[0.4em] animate-pulse uppercase",children:"Initialising Axiomatic Core..."})]})},Mo=({asOverlay:e=!1,onClose:t})=>{const{execute:r}=te(),[n,s]=w.useState(kt.SYSTEM_TOKEN||""),[o,i]=w.useState(kt.CORE_URL||""),[c,l]=w.useState(!1),[u,f]=w.useState(null);w.useEffect(()=>{const m=sessionStorage.getItem("INDRA_BOOT_ERROR");m&&(f(`FALLO_HANDSHAKE: ${m}`),sessionStorage.removeItem("INDRA_BOOT_ERROR"))},[]);const h=async()=>{if(!n||!o){f("FALTAN_CREDENCIALES: Se requiere URL y Clave de Enlace.");return}l(!0),f(null);try{console.log("[PortalDeAcceso] Reconfigurando enlace soberano..."),localStorage.setItem("INDRA_SESSION_TOKEN",n),localStorage.setItem("INDRA_OVERRIDE_URL",o);const{default:m}=await cr(async()=>{const{default:E}=await Promise.resolve().then(()=>Po);return{default:E}},void 0);m.init(o,n);const g=await fe.ignite();g.sovereignty==="ACTIVE"?(console.log("[PortalDeAcceso]  Enlace Establecido. Sincronizando realidades..."),e?(r("IGNITE_SYSTEM",{sovereignty:"ACTIVE",genotype:g.genotype}),t&&t()):Nh(o)):f(g.error?`ERROR_VETO: ${g.error}`:"ERROR_VETO: El Core rechaz las credenciales o el enlace est roto.")}catch(m){console.error("[PortalDeAcceso] Ignition fail:",m),f(`CORE_INALCANZABLE: ${m.message}`)}finally{l(!1)}};return a.jsx("div",{className:`w-full flex items-center justify-center bg-[var(--bg-primary)] p-6 ${e?"h-auto rounded-3xl":"h-screen"}`,children:a.jsxs("div",{className:`w-full flex flex-col ${e?"gap-6":"max-w-md gap-10"}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 relative",children:[e&&a.jsx("button",{onClick:t,className:"absolute top-0 right-0 p-2 text-[var(--text-dim)] hover:text-[var(--accent)] font-mono text-xs uppercase",children:"[Cerrar] ESC"}),a.jsxs("div",{className:"w-16 h-16 rounded-full border border-[var(--accent)] flex items-center justify-center shadow-[var(--shadow-glow)] relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-[var(--accent)] opacity-5 animate-pulse"}),a.jsx("div",{className:"text-2xl font-black text-[var(--accent)] tracking-tighter",children:"I"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-lg font-black text-[var(--text-primary)] tracking-[0.3em] uppercase",children:"Portal de Soberana"}),a.jsx("p",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-widest mt-1",children:"Capa de Defensa Axiomtica v2.0"})]})]}),u&&a.jsxs("div",{className:"p-4 bg-red-500/5 border border-red-500/20 rounded-xl text-red-500 text-[10px] font-mono leading-relaxed",children:[a.jsx("span",{className:"font-black",children:" FALLO:"})," ",u]}),a.jsxs("div",{className:"flex flex-col gap-6 p-6 bg-[var(--bg-secondary)] border border-[var(--border-subtle)] rounded-2xl glass relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-20"}),a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-wider ml-1",children:"URL de Conexin Core"}),a.jsx("input",{type:"text",value:o,onChange:m=>i(m.target.value),placeholder:"https://script.google.com/...",className:"w-full px-4 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-xl text-[var(--text-primary)] font-mono text-[10px] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-wider ml-1",children:"Clave Soberana (Token)"}),a.jsx("input",{type:"password",value:n,onChange:m=>s(m.target.value),placeholder:"Clave de desencriptado cuntico...",className:"w-full px-4 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-xl text-[var(--text-primary)] font-mono text-[10px] focus:outline-none focus:border-[var(--accent)] transition-all"})]})]}),a.jsx("button",{onClick:h,disabled:c,className:`
                            mt-2 py-4 rounded-xl font-black text-[10px] uppercase tracking-[0.4em] transition-all duration-500
                            ${c?"bg-[var(--border-color)] text-[var(--text-dim)] cursor-not-allowed":"bg-[var(--accent)] text-black shadow-[var(--shadow-glow)] hover:scale-[1.01] active:scale-95"}
                        `,children:c?"Sincronizando...":"Vincular Soberana"}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-color)] flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:"Avanzado: Sobrescribir Token en Core"}),a.jsx("div",{className:"h-[1px] flex-1 bg-[var(--border-color)] mx-3"})]}),a.jsx("p",{className:"text-[8px] font-mono text-[var(--text-dim)] opacity-60 leading-tight",children:"Usa esta opcin para registrar tu contrasea actual en el Core. Solo disponible durante la fase 'INDRA_SETUP_CORE'."}),a.jsx("button",{onClick:async()=>{if(!(!n||c)){l(!0);try{const{default:m}=await cr(async()=>{const{default:E}=await Promise.resolve().then(()=>Po);return{default:E}},void 0);m.init(o,n);const g=await fe.call("public","setSystemToken",{newToken:n});g&&g.success?(f(` XITO: Token del Core actualizado a ${n.substring(0,3)}... Reiniciando.`),setTimeout(()=>window.location.reload(),2e3)):f("FALLO: El Core rechaz la actualizacin del token.")}catch(m){f(`FALLO_OVERRIDE: ${m.message}`)}finally{l(!1)}}},className:"py-2 rounded-lg border border-[var(--accent)]/30 text-[var(--accent)] font-mono text-[9px] uppercase tracking-widest hover:bg-[var(--accent)]/10 transition-all",children:"Sincronizar Password con el Core"})]})]}),a.jsxs("div",{className:"flex justify-between items-center px-4",children:[a.jsx("div",{className:"text-[8px] font-mono text-[var(--accent)] opacity-50 uppercase tracking-tighter",children:e?"REL_MULTI_CORE_ACTIVO":"MEMBRANA_DE_ACCESO_ACTIVO"}),a.jsx("div",{className:"text-[8px] font-mono text-[var(--text-dim)] opacity-40 uppercase tracking-tighter",children:"Axioma: La conectividad es fluida."})]})]})})},Rm=()=>{var S;const[e,t]=w.useState([]),[r,n]=w.useState({}),[s,o]=w.useState(null),[i,c]=w.useState(!1),[l,u]=w.useState(null),[f,h]=w.useState({}),m=H(y=>y.session.hashInitialized),E=H(y=>y.session.isLoading)||i;w.useEffect(()=>{m&&N()},[m]);const N=async()=>{c(!0),u(null);try{const y=await fe.call("cosmos","listAvailableCosmos",{includeAll:!0});y&&y.artifacts&&(t(y.artifacts),b(y.artifacts))}catch(y){console.error("[ArtifactExplorer] Error loading artifacts:",y),u(y.message)}finally{c(!1)}},b=y=>{const A={COSMOS_V1:[],FLOW_V1:[],LAYOUT_V1:[],SYSTEM_V1:[],UNDEFINED:[]};y.forEach(L=>{var C,M,k,x,T,I;const z=L.indx_schema||"UNDEFINED";A[z]?A[z].push(L):(C=L.name)!=null&&C.includes(".flow.")||(M=L.name)!=null&&M.includes(".logic.")||(k=L.name)!=null&&k.includes(".rule.")?A.FLOW_V1.push(L):(x=L.name)!=null&&x.includes(".layout.")?A.LAYOUT_V1.push(L):(T=L.name)!=null&&T.includes(".sys.")||(I=L.name)!=null&&I.includes(".config.")?A.SYSTEM_V1.push(L):A.UNDEFINED.push(L)}),n(A);const _={};Object.keys(A).forEach(L=>{A[L].length>0&&(_[L]=!0)}),h(_)},d=y=>{h(A=>({...A,[y]:!A[y]}))},p=async y=>{o(y)},v=y=>({COSMOS_V1:"",FLOW_V1:"",LAYOUT_V1:"",SYSTEM_V1:"",UNDEFINED:""})[y]||"";return a.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontFamily:"monospace"},children:[a.jsxs("div",{style:{width:"350px",borderRight:"1px solid #333",overflowY:"auto",padding:"20px"},children:[a.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid var(--border-color)"},children:[a.jsx("h2",{style:{margin:0,fontSize:"18px",color:"#00ff88"},children:" Artifact Explorer"}),a.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["Total: ",e.length," artifacts"]})]}),E&&a.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#888"},children:"Loading artifacts..."}),l&&a.jsxs("div",{style:{padding:"10px",backgroundColor:"#ff000020",border:"1px solid #ff0000",borderRadius:"4px",marginBottom:"10px"},children:[" ",l]}),Object.entries(r).map(([y,A])=>A.length>0&&a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsxs("div",{onClick:()=>d(y),style:{padding:"8px",backgroundColor:"var(--bg-secondary)",cursor:"pointer",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[a.jsxs("span",{children:[v(y)," ",y]}),a.jsx("span",{style:{backgroundColor:"var(--bg-deep)",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},children:A.length})]}),f[y]&&a.jsx("div",{style:{paddingLeft:"15px"},children:A.map((_,L)=>{var z,C;return a.jsxs("div",{onClick:()=>p(_),style:{padding:"6px 8px",cursor:"pointer",backgroundColor:(s==null?void 0:s.id)===_.id?"#00ff8820":"transparent",borderLeft:(s==null?void 0:s.id)===_.id?"2px solid #00ff88":"2px solid transparent",marginBottom:"2px",fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[" ",((z=_.identity)==null?void 0:z.label)||_.name||"Unnamed",((C=_.discovery)==null?void 0:C.status)==="ARTIFACT_RAW"&&a.jsx("span",{style:{color:"#ff8800",fontSize:"10px",marginLeft:"5px"},children:"[RAW]"})]},L)})})]},y))]}),a.jsx("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid var(--border-color)"},children:[a.jsx("h3",{style:{margin:0,color:"#00ff88"},children:s.name||((S=s.identity)==null?void 0:S.label)||"Unnamed Artifact"}),a.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["ID: ",s.id]}),a.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["Schema: ",s.indx_schema||"UNDEFINED"]})]}),a.jsx("pre",{style:{backgroundColor:"var(--bg-secondary)",padding:"15px",borderRadius:"4px",fontSize:"12px",overflow:"auto",border:"1px solid var(--border-color)"},children:JSON.stringify(s,null,2)})]}):a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#555",fontSize:"14px"},children:"Select an artifact to view its content"})})]})},dc=()=>{const{state:e,execute:t}=te(),r=H(p=>p.session.isLoading),{availableCosmos:n,discoveryStatus:s}=e.phenotype,[o,i]=w.useState(!1),[c,l]=w.useState(!1),[u,f]=w.useState(null),[h,m]=w.useState(null),g=r||s==="SCANNING",E=()=>{t("START_DISCOVERY")},N=()=>{u&&t("MOUNT_COSMOS",{cosmosId:u})},b=p=>{t("DELETE_COSMOS",{cosmosId:p}),u===p&&f(null)},d=async p=>{var v;m(null),t("START_DISCOVERY");try{const S=p.identity||{label:p.label,description:p.description},y=`cosmos_${crypto.randomUUID().split("-")[0]}_${Date.now().toString(36)}`,A=await fe.call("cosmos","saveCosmos",{cosmosId:y,fileName:S.label?`${S.label}.cosmos.json`:"mi_universo.cosmos.json",cosmos:{id:y,identity:{label:S.label||"Sin Ttulo",description:S.description||"Realidad persistida por Indra App"},artifacts:[],relationships:[],activeLayout:{VIEW_MODE:"GRAPH"},last_modified:new Date().toISOString()}});if(A&&A.success&&(A.id||A.new_id||A.fileId)){const _=A.new_id||A.id||A.fileId;console.info(`%c  [Genesis] Identity granted by Core: ${_}`,"color: #10b981; font-weight: bold;"),i(!1),f(_),setTimeout(()=>{t("MOUNT_COSMOS",{cosmosId:_})},500)}else throw new Error((A==null?void 0:A.error)||((v=A==null?void 0:A.result)==null?void 0:v.error)||"El servidor no devolvi una identidad vlida.")}catch(S){m(`Fallo en el Gnesis: ${S.message}`),t("UPDATE_COSMOS_REGISTRY",n)}};return o?a.jsx("div",{className:"w-full h-full flex flex-col justify-start items-center p-8 pt-28 bg-[var(--bg-primary)] overflow-hidden",children:a.jsx("div",{className:"max-w-2xl w-full max-h-[80vh] flex flex-col p-8 bg-[var(--bg-secondary)]/90 border border-[var(--border-subtle)] rounded-3xl backdrop-blur-xl shadow-2xl animate-in zoom-in-95 duration-500 overflow-hidden",children:a.jsx(Fn,{perspective:"SCHEMA_PROJECTION",schemaId:"COSMOS_V1",onCommit:d,onCancel:()=>i(!1),error:h})})}):c?a.jsxs("div",{className:"w-full h-full relative",children:[a.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 z-50 bg-red-500 text-white px-4 py-2 rounded-lg text-xs font-bold uppercase hover:brightness-125 transition-all",children:" Cerrar Diagnstico"}),a.jsx(Rm,{})]}):a.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 bg-transparent",children:a.jsxs("div",{className:"max-w-2xl w-full flex flex-col gap-8",children:[a.jsxs("div",{className:"flex flex-col gap-2 border-b border-[var(--indra-glass-border)] pb-6 relative",children:[a.jsx("h1",{className:"text-3xl font-black text-[var(--text-primary)] tracking-tighter uppercase italic",children:"Seleccionar Cosmos"}),a.jsxs("p",{className:"text-sm text-[var(--text-secondary)] font-mono opacity-60",children:["Elige una ",a.jsx("span",{className:"text-[var(--accent)] font-bold",children:"Realidad Cuntica"})," para habitar."]}),a.jsxs("div",{className:"absolute right-0 top-0 flex gap-2",children:[a.jsx("button",{onClick:()=>l(!0),className:"bg-yellow-500/10 text-yellow-500 border border-yellow-500/30 px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-yellow-500 hover:text-black transition-all active:scale-95",children:" Diagnstico"}),a.jsx("button",{onClick:()=>i(!0),className:"bg-[var(--accent)] text-black px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:brightness-110 transition-all active:scale-95 shadow-lg shadow-[var(--accent)]/20",children:"+ Nuevo Cosmos"})]})]}),a.jsx("div",{className:"flex-1 min-h-[300px] overflow-y-auto custom-scrollbar pr-2 flex flex-col gap-3",children:g&&n.length===0?a.jsx("div",{className:"flex items-center justify-center h-48 border border-[var(--indra-glass-border)] rounded-xl opacity-40 italic font-mono text-xs",children:"Escaneando Registro de Flujos..."}):n.length===0?a.jsx("div",{className:"flex flex-col items-center justify-center h-48 border border-[var(--indra-glass-border)] rounded-xl text-[var(--text-dim)] gap-4 border-dashed",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"font-mono text-xs uppercase tracking-widest",children:"No se identificaron Cosmos en el directorio FLOWS"}),a.jsx("p",{className:"text-[10px] mt-2 opacity-50",children:"Carga un artefacto cosmos.json vlido para comenzar."})]})}):n.map(p=>{var v,S,y,A,_;return a.jsx("div",{role:"button",tabIndex:0,onClick:()=>f(p.id),className:`
                                    w-full p-5 rounded-xl border text-left transition-all group relative overflow-hidden
                                    ${u===p.id?"bg-[var(--accent)]/5 border-[var(--accent)] shadow-xl":"bg-[var(--bg-secondary)] border-[var(--indra-glass-border)] hover:border-[var(--text-dim)] shadow-sm"}
                                `,children:a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsx("div",{className:`
                                        w-12 h-12 rounded-lg flex items-center justify-center font-black text-xl border
                                        ${u===p.id?"bg-[var(--accent)] text-black border-transparent":"bg-[var(--bg-deep)] border-[var(--indra-glass-border)] text-[var(--accent)]"}
                                    `,children:((S=(v=p.identity)==null?void 0:v.label)==null?void 0:S.charAt(0))||"C"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] uppercase tracking-wide",children:((y=p.identity)==null?void 0:y.label)||p.name}),a.jsxs("div",{className:"text-[9px] font-mono opacity-30",children:["ID: ",((A=p.id)==null?void 0:A.substring(0,8))||"...","..."]})]}),a.jsx("div",{className:"text-[11px] text-[var(--text-secondary)] mt-1 line-clamp-1 opacity-70",children:((_=p.identity)==null?void 0:_.description)||"Definicin axiomtica de un espacio de trabajo."})]}),a.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute right-4 transition-all z-20 hover:scale-110",children:a.jsx(Id,{onComplete:()=>b(p.id),size:32,iconSize:16})}),u===p.id&&a.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-[var(--accent)]"})]})},p.id)})}),a.jsxs("div",{className:"flex gap-4 pt-4",children:[a.jsx("button",{onClick:E,disabled:g,className:"px-6 py-3 rounded-xl font-mono text-[10px] uppercase tracking-[0.2em] bg-[var(--bg-secondary)] border border-[var(--indra-glass-border)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all shadow-sm",children:g?"Escaneando...":"Re-Escanear Flujos"}),a.jsx("button",{onClick:N,disabled:!u||g,className:`
                            flex-1 py-3 px-6 rounded-xl font-mono text-[10px] uppercase tracking-[0.3em] font-bold
                            transition-all duration-500
                            ${u?"bg-[var(--accent)] text-black shadow-xl hover:scale-[1.02] active:scale-95":"bg-white/5 text-[var(--text-dim)] cursor-not-allowed grayscale"}
                        `,children:"Habitar Realidad Cuntica"})]})]})})},Om=({law:e,cosmosContext:t,phenotype:r,slotId:n,perspective:s="STANDARD"})=>{var m,g;const{execute:o}=te(),[i,c]=w.useState(null);if(!e)return a.jsx("div",{className:"text-[var(--text-dim)] p-4 font-mono text-xs",children:"Unmapped Slot"});const l=e.artefacts||[],u=i||(l.length===1?l[0]:null),f=u?q.getCanon(u):null;if(s==="TOPOLOGICAL"){const E=((f==null?void 0:f.LABEL)||e.functional_name||"System Unit").toUpperCase(),N=((f==null?void 0:f.ARCHETYPE)||((m=e.config)==null?void 0:m.archetype)||"").toUpperCase(),b=N==="VAULT";let d=j.Sovereign;b&&j.Vault?d=j.Vault:(g=f==null?void 0:f.config)!=null&&g.icon&&j[f.config.icon]&&(d=j[f.config.icon]);const p=l.length>0,v=()=>{if(p){const S=u||l[0];console.log(`[Orb]  Igniting Focus: ${E} (${S})`),o("SELECT_ARTIFACT",S),!i&&l.length>0&&c(l[0])}};return a.jsxs("div",{className:"flex flex-col items-center gap-2 transition-all duration-500 group/orb",children:[a.jsxs("button",{onClick:v,title:E,className:`
                        w-14 h-14 rounded-full flex items-center justify-center relative
                        bg-[var(--bg-glass)] backdrop-blur-xl border transition-all duration-500
                        shadow-[0_0_20px_rgba(0,0,0,0.5)] group-hover/orb:shadow-[0_0_30px_rgba(var(--accent-rgb),0.3)]
                        ${p?"cursor-pointer border-[var(--border-subtle)] hover:border-[var(--accent)]":"cursor-default border-dashed border-[var(--border-subtle)] opacity-20"}
                        active:scale-95
                    `,children:[p&&a.jsx("div",{className:"absolute -inset-1.5 rounded-full border border-[var(--accent)]/10 animate-pulse"}),a.jsx("div",{className:`transition-all duration-500 ${p?"text-[var(--text-soft)] group-hover/orb:text-[var(--accent)] group-hover/orb:scale-110":"text-[var(--text-dim)]"}`,children:d?a.jsx(d,{size:24}):""}),p&&a.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-[var(--accent)] rounded-full shadow-[0_0_10px_var(--accent)] border-2 border-[var(--bg-deep)]"})]}),a.jsxs("div",{className:"flex flex-col items-center opacity-40 group-hover/orb:opacity-100 transition-opacity duration-500",children:[a.jsx("span",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-[var(--accent)] text-center max-w-[70px] leading-tight truncate",children:E}),a.jsx("span",{className:"text-[6px] font-mono text-[var(--text-dim)] uppercase mt-0.5 tracking-tighter",children:N||"CORE_ANCHOR"})]})]})}if(u&&f)return a.jsxs("div",{className:"relative group/skeleton h-full flex flex-col",children:[l.length>1&&a.jsx("button",{onClick:()=>c(null),className:"absolute top-2 right-2 z-10 p-1.5 rounded-lg bg-[var(--bg-deep)]/80 border border-[var(--border-subtle)] text-[var(--text-dim)] hover:text-[var(--accent)] transition-all opacity-0 group-hover/skeleton:opacity-100",children:j.ChevronRight?a.jsx(j.ChevronRight,{className:"rotate-180",size:14}):""}),a.jsx(Fn,{componentId:u,cosmosContext:t,phenotype:r,slotId:n})]});if(l.length>1&&!u)return a.jsxs("div",{className:"w-full h-full flex flex-col p-6 rounded-3xl border border-[var(--border-subtle)] bg-[var(--bg-secondary)]/20 backdrop-blur-sm animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-[var(--border-subtle)]/30",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] shadow-[0_0_8px_var(--accent)] animate-pulse"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-vibrant)]",children:e.functional_name||"Artifact Collection"}),a.jsxs("span",{className:"ml-auto text-[9px] font-mono text-[var(--accent)]/60",children:[l.length," units detected"]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:l.map(E=>{const N=q.getCanon(E);return a.jsxs("button",{onClick:()=>c(E),className:"flex items-center gap-4 p-4 rounded-2xl bg-[var(--bg-primary)]/40 border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all text-left group/item",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--bg-deep)] flex items-center justify-center text-xl group-hover/item:scale-110 transition-all",children:(N==null?void 0:N.ARCHETYPE)==="VAULT"?"":""}),a.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[a.jsx("span",{className:"text-xs font-bold text-[var(--text-soft)] group-hover/item:text-[var(--accent)] truncate transition-colors",children:(N==null?void 0:N.LABEL)||E}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-tighter opacity-60",children:(N==null?void 0:N.ARCHETYPE)||"CORE_UNIT"})]}),j.ChevronRight&&a.jsx(j.ChevronRight,{size:14,className:"text-[var(--text-dim)] opacity-0 group-hover/item:opacity-100 transform translate-x-1 group-hover/item:translate-x-0 transition-all"})]},E)})})]});const h=e.isAnchor&&l.length===0;return a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 rounded-3xl border border-dashed border-[var(--border-subtle)]/30 bg-[var(--bg-secondary)]/10 group hover:border-[var(--accent)]/30 transition-all",style:{minHeight:"160px"},children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors text-center",children:e.functional_name||"System Slot"}),h&&a.jsx("div",{className:"mt-2 text-[9px] font-mono text-red-500/30 uppercase tracking-[0.2em]",children:"Identity Not Found"}),a.jsx("div",{className:"mt-6 opacity-5 group-hover:opacity-20 transition-opacity",children:j.Sovereign?a.jsx(j.Sovereign,{size:32}):""})]})},za=({slotId:e,visibleSlots:t,cosmosContext:r})=>{const{state:n}=te();if(!t.includes(e))return null;const i=q.getRenderManifest().filter(l=>l.slot===e).filter(l=>{const u=l.functional_name||l.LABEL&&l.LABEL!=="UNIT_SKELETON",f=l.artefacts&&l.artefacts.length>0;return u||f});if(i.length===0)return a.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-40 border border-[var(--border-subtle)] border-dashed m-1 rounded-lg",children:a.jsxs("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:["Empty::",e]})});const c=e.includes("SIDEBAR");return a.jsx("div",{className:"w-full h-full overflow-y-auto scrollbar-hide flex flex-col",style:{gap:"var(--stark-gutter-size)",padding:"var(--stark-edge-margin)"},children:i.map(l=>{var u;return a.jsx("div",{className:"w-full stark-slot shrink-0 animate-fade-in flex justify-center","data-omd":l.omd,"data-cosmos-id":(u=r==null?void 0:r.identity)==null?void 0:u.id,children:a.jsx(Om,{law:l,slotId:e,perspective:"STANDARD",cosmosContext:r,phenotype:n.phenotype})},l.omd)})})},Lm=Object.freeze({PHYSICS:{CABLE_TENSION:.5,CABLE_WIDTH:2,GRID_SNAP:20,SEMANTIC_GRAVITY:.5},GEOMETRY:{NODE_WIDTH:256,HEADER_HEIGHT:40,ROW_HEIGHT:30,PORT_RADIUS:6,PORT_MAPPING:{INPUT:{x_offset:0,anchor_type:"left-center"},OUTPUT:{x_offset:256,anchor_type:"right-center"}}}}),jm=({nodes:e=[],edges:t=[]})=>{var L,z;const{state:r,execute:n}=te(),[s,o]=w.useState({x:0,y:0,zoom:1}),[i,c]=w.useState(!1),[l,u]=w.useState({x:0,y:0}),f=w.useRef(null),h=w.useRef(new Set),[,m]=w.useState(0);w.useEffect(()=>{if(e.some(M=>!h.current.has(M.id))){const M=setTimeout(()=>m(k=>k+1),500);return()=>clearTimeout(M)}},[e]);const g=C=>{if(C.ctrlKey||C.metaKey){C.preventDefault();const k=Math.min(Math.max(s.zoom-C.deltaY*.001,.1),5);o(x=>({...x,zoom:k}))}else o(M=>({...M,x:M.x-C.deltaX,y:M.y-C.deltaY}))},E=C=>{C.target===f.current&&(c(!0),u({x:C.clientX,y:C.clientY}))},N=C=>{if(i){const M=C.clientX-l.x,k=C.clientY-l.y;o(x=>({...x,x:x.x+M,y:x.y+k})),u({x:C.clientX,y:C.clientY})}else if(r.phenotype.ui.pendingConnection){const M=f.current.getBoundingClientRect(),k=(C.clientX-M.left-s.x-M.width/2)/s.zoom,x=(C.clientY-M.top-s.y-M.height/2)/s.zoom;n("SET_PENDING_CONNECTION",{...r.phenotype.ui.pendingConnection,currentX:k,currentY:x})}},b=()=>{c(!1),r.phenotype.ui.pendingConnection&&setTimeout(()=>n("CLEAR_PENDING_CONNECTION"),100)},d=(C,M)=>{const k=(C.ARCHETYPE||C.archetype||"").toUpperCase();let x=0;(k.includes("VAULT")||k.includes("ADAPTER"))&&(x=-450),k.includes("SLOT")&&(x=450);const T=M.filter(U=>{const D=(U.ARCHETYPE||U.archetype||"").toUpperCase();return x===-450?D.includes("VAULT")||D.includes("ADAPTER"):x===450?D.includes("SLOT"):!D.includes("VAULT")&&!D.includes("ADAPTER")&&!D.includes("SLOT")}),I=T.findIndex(U=>U.id===C.id);let O=0;k.includes("VAULT")&&(O=-100),k.includes("ADAPTER")&&(O=100);const V=x+O+(I%2===0?0:40),R=(I-(T.length-1)/2)*380;return{x:V,y:R}},p=()=>{const C=r.phenotype.ui.pendingConnection;if(!C)return null;const M=e.find(x=>x.id===C.sourceNodeId);if(!M)return null;const k=q.getCompatibleNodes(M.ARCHETYPE);return k.length===0?null:a.jsxs("div",{className:"absolute z-[1000] flex flex-col gap-2 p-3 bg-[var(--bg-glass)] backdrop-blur-xl border border-[var(--accent)]/30 rounded-2xl shadow-2xl pointer-events-auto animate-in fade-in zoom-in-90 duration-300",style:{left:C.currentX+100/s.zoom,top:C.currentY-k.length*20/s.zoom,transform:`scale(${1/s.zoom})`,transformOrigin:"left center"},children:[a.jsxs("header",{className:"flex items-center gap-2 mb-1 px-1",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse"}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--accent)]",children:"Sugerencias Axiomticas"})]}),k.slice(0,4).map((x,T)=>a.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-xl bg-[var(--bg-primary)] hover:bg-[var(--accent)]/10 border border-[var(--border-subtle)] hover:border-[var(--accent)]/30 transition-all text-left group",onMouseDown:I=>{I.stopPropagation(),n("ADD_ARTIFACT_REQUEST",{artifact:x}),setTimeout(()=>{const O=r.phenotype.artifacts,V=O[O.length-1];V&&n("ADD_RELATIONSHIP",{source:C.sourceNodeId,target:V.id,sourcePort:C.portId,targetPort:Object.keys(V.CAPABILITIES||{})[0]||"input"})},100)},children:[a.jsx("span",{className:"text-xl",children:""}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[11px] font-bold text-[var(--text-soft)] group-hover:text-white uppercase truncate max-w-[120px]",children:x.LABEL||x.label}),a.jsxs("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase",children:["Manifestar ",x.ARCHETYPE]})]})]},T))]})},v=()=>{const C=r.phenotype.ui.pendingConnection;if(!C)return null;const M=e.find(D=>D.id===C.sourceNodeId);if(!M)return null;const{x:k,y:x}=d(M,e),T=k+(C.portOffsetX||0),I=x+(C.portOffsetY||0),O=C.currentX,V=C.currentY,R=Math.abs(T-O)*.5,U=`M ${T} ${I} C ${T+R} ${I}, ${O-R} ${V}, ${O} ${V}`;return a.jsx("path",{d:U,fill:"none",stroke:"var(--accent)",strokeWidth:"2",strokeDasharray:"5 5",strokeOpacity:"0.6",className:"animate-flow"})},S=()=>{const C=r.phenotype.activePulses||[];return t.filter(M=>!M._isDeleted).map((M,k)=>{const x=e.find(ve=>ve.id===M.source),T=e.find(ve=>ve.id===M.target);if(!x||!T)return null;const I=C.includes(M.id),{x:O,y:V}=d(x,e),{x:R,y:U}=d(T,e),{NODE_WIDTH:D}=Lm.GEOMETRY,G=O+D/2,B=V,W=R-D/2,re=U,ne=Math.abs(G-W)*.5,se=`M ${G} ${B} C ${G+ne} ${B}, ${W-ne} ${re}, ${W} ${re}`;return a.jsxs("g",{children:[a.jsx("path",{d:se,fill:"none",stroke:I?"var(--accent-glow)":"var(--accent)",strokeWidth:I?"3":"2",strokeOpacity:I?"0.8":"0.3",className:I?"glow-pulse":"animate-pulse"}),a.jsx("path",{d:se,fill:"none",stroke:"url(#cableGradient)",strokeWidth:I?"2.5":"1.5",strokeDasharray:"10 5",className:I?"animate-flow-fast":"animate-flow",style:{filter:I?"drop-shadow(0 0 5px var(--accent-glow))":"none"}})]},M.id||k)})},y=C=>{C.preventDefault(),C.dataTransfer.dropEffect="copy"},A=C=>{C.preventDefault();const M=C.dataTransfer.getData("indra/artifact");if(M)try{const k=JSON.parse(M),x=f.current.getBoundingClientRect(),T=(C.clientX-x.left-x.width/2)/s.zoom-s.x,I=(C.clientY-x.top-x.height/2)/s.zoom-s.y;n("ADD_ARTIFACT_REQUEST",{artifact:k,position:{x:T,y:I}})}catch(k){console.error("[GraphEngine] Drop Error:",k)}},_=((L=r.phenotype.activeLayout)==null?void 0:L.id)&&((z=r.phenotype.cosmosIdentity)==null?void 0:z.id)&&r.phenotype.activeLayout.id!==r.phenotype.cosmosIdentity.id;return a.jsxs("div",{ref:f,className:`w-full h-full relative overflow-hidden bg-dot-pattern transition-all duration-700 ${_?"blur-md scale-95 opacity-30 grayscale":"blur-0 scale-100"}`,onWheel:g,onMouseDown:E,onMouseMove:N,onMouseUp:b,onMouseLeave:b,onDragOver:y,onDrop:A,style:{backgroundColor:"var(--bg-deep)",backgroundImage:"radial-gradient(var(--border-subtle) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[a.jsxs("div",{className:"absolute transform-gpu transition-transform duration-75 ease-out origin-center",style:{transform:`translate(${s.x}px, ${s.y}px) scale(${s.zoom})`,left:"50%",top:"50%",width:0,height:0},children:[a.jsxs("svg",{className:"absolute overflow-visible",style:{left:0,top:0},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"cableGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--accent)",stopOpacity:"0"}),a.jsx("stop",{offset:"50%",stopColor:"var(--accent)",stopOpacity:"1"}),a.jsx("stop",{offset:"100%",stopColor:"var(--accent)",stopOpacity:"0"})]})}),S(),v()]}),p(),e.filter(C=>!C._isDeleted).map(C=>{const{x:M,y:k}=d(C,e),x=!h.current.has(C.id);return x&&h.current.add(C.id),a.jsx("div",{className:`absolute cursor-pointer group ${x?"animate-manifest z-[500]":""}`,onDoubleClick:T=>{T.stopPropagation(),n("SELECT_ARTIFACT",C)},style:{transform:x?"none":`translate(${M}px, ${k}px) translate(-50%, -50%)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",left:x?`${M}px`:"auto",top:x?`${k}px`:"auto"},children:a.jsx(Fn,{componentId:C.id,data:{...C,x:M,y:k},perspective:"NODE",schemaId:C.schemaId})},C.id)}),!_&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-[-500px] left-[-450px] transform -translate-x-1/2 -translate-y-full opacity-20 pointer-events-none",children:a.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"ORGENES"})}),a.jsx("div",{className:"absolute top-[-500px] left-[0px] transform -translate-x-1/2 -translate-y-full opacity-20 pointer-events-none",children:a.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"PROCESOS"})}),a.jsx("div",{className:"absolute top-[-500px] left-[450px] transform -translate-x-1/2 -translate-y-full opacity-20 pointer-events-none",children:a.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"RESULTADOS"})})]})]}),!_&&a.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col items-end gap-1 text-[9px] font-mono text-[var(--text-dim)] pointer-events-none",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse"}),a.jsx("span",{children:"DIAGRAMA_FRACTAL: ACTIVO"})]}),a.jsxs("span",{children:["ZOOM: ",Math.round(s.zoom*100),"% | MODO_MAPA: ON"]})]})]})},Dm=()=>{var m;const{state:e,execute:t}=te(),[r,n]=w.useState("CORE_ORCHESTRATOR"),[s,o]=w.useState(!1),{ui:i}=e.phenotype,c=e.phenotype.activeLayout,{view:l,slots:u,layoutSchema:f,cosmosContext:h}=w.useMemo(()=>{var v,S;if(!c)return{view:{visible_slots:[]},slots:{},layoutSchema:{VIEW_MODE:"GRAPH"},cosmosContext:{}};const g=c.LAYOUTS||{},E=g[r]||g[Object.keys(g)[0]]||{},N={visible_slots:["SIDEBAR_PRIMARY","SIDEBAR_SECONDARY","CANVAS_MAIN","TERMINAL_STATUS"]},b=((v=E.VIEWS)==null?void 0:v[E.DEFAULT_VIEW||"DEFAULT"])||N,d={},p=c.SLOTS||{};return Object.keys(p).forEach(y=>{d[y]=q.compileSlot(p[y],e.sovereignty)}),{view:b,slots:d,layoutSchema:c,cosmosContext:{cosmosId:(S=e.phenotype.cosmosIdentity)==null?void 0:S.id,activeLayoutId:c.id}}},[c,r,e.sovereignty]);return a.jsxs("div",{className:"h-full w-full overflow-hidden flex flex-col bg-[var(--bg-primary)] text-[var(--text-primary)] relative",children:[a.jsx("main",{className:"flex-1 flex overflow-hidden w-full h-full relative",children:a.jsxs("section",{className:"flex-1 h-full flex flex-col relative overflow-hidden bg-[var(--bg-deep)]",style:{zIndex:"var(--stark-z-index-canvas)"},children:[a.jsx("div",{className:"w-full h-full flex flex-col overflow-hidden relative",children:e.phenotype.cosmosIdentity&&e.phenotype.activeLayout&&e.phenotype.activeLayout.id!==e.phenotype.cosmosIdentity.id?a.jsx("div",{className:"w-full h-full flex flex-row animate-in fade-in duration-500 relative",children:a.jsx("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:a.jsx(Fn,{componentId:e.phenotype.activeLayout.id,data:e.phenotype.activeLayout,perspective:e.sovereignty.mode==="DEV_LAB"?((m=e.phenotype.devLab)==null?void 0:m.perspective)||"VAULT":"BRIDGE"})})}):f.VIEW_MODE==="GRAPH"||!f.VIEW_MODE?a.jsx(jm,{nodes:(e.phenotype.artifacts||[]).filter(g=>!g._isDeleted),edges:(e.phenotype.relationships||[]).filter(g=>!g._isDeleted)}):a.jsx(za,{slotId:"CANVAS_MAIN",visibleSlots:(l==null?void 0:l.visible_slots)||[],cosmosContext:h})}),a.jsx("div",{className:"absolute bottom-10 right-10 pointer-events-none flex flex-col justify-end items-end",style:{zIndex:"var(--stark-z-index-overlay)"},children:a.jsx(za,{slotId:"FLOAT_CORNER",visibleSlots:(l==null?void 0:l.visible_slots)||[],cosmosContext:h})})]})}),a.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:"var(--stark-z-index-system)"},children:a.jsx(za,{slotId:"AUTH_OVERLAY",visibleSlots:(l==null?void 0:l.visible_slots)||[],cosmosContext:h})})]})},tn=40,km=(e="top")=>{const[t,r]=w.useState({x:window.innerWidth/2,y:tn}),[n,s]=w.useState(e),[o,i]=w.useState(!1),c=w.useRef({startX:0,startY:0,initialX:0,initialY:0,velocity:{x:0,y:0},lastTime:0}),l=()=>{const h=window.innerWidth,m=window.innerHeight,g=h/2,E=m/2;return{top:{x:g,y:tn,label:"top"},bottom:{x:g,y:m-tn,label:"bottom"},left:{x:tn,y:E,label:"left"},right:{x:h-tn,y:E,label:"right"}}},u=(h,m)=>{const g=l();let E=1/0,N=g.top;Object.values(g).forEach(b=>{const d=h-b.x,p=m-b.y,v=Math.sqrt(d*d+p*p);v<E&&(E=v,N=b)}),r({x:N.x,y:N.y}),s(N.label)},f=h=>{i(!0),c.current={startX:h.clientX,startY:h.clientY,initialX:t.x,initialY:t.y,velocity:{x:0,y:0},lastTime:Date.now()},h.stopPropagation()};return w.useEffect(()=>{const h=g=>{if(!o)return;const E=g.clientX-c.current.startX,N=g.clientY-c.current.startY;r({x:c.current.initialX+E,y:c.current.initialY+N})},m=()=>{o&&(i(!1),u(t.x,t.y))};return o&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",m)),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",m)}},[o,t]),w.useEffect(()=>{const h=()=>u(t.x,t.y);return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[n]),{position:t,dockSide:n,isDragging:o,startDrag:f}},Pm=({onSelect:e,onClose:t})=>{var m;const{state:r}=te(),[n,s]=w.useState(""),[o,i]=w.useState([]),c=((m=r.phenotype.artifacts)==null?void 0:m.length)||0;w.useEffect(()=>{q.isCompiled||q.compile();const E=q.getRenderManifest().map(N=>{if(N.visibility==="HIDDEN"||N.VISIBILITY==="HIDDEN")return null;const b=(N.DOMAIN||N.domain||"SYSTEM").toUpperCase(),d=(N.ARCHETYPE||N.archetype||"NODE").toUpperCase(),p=d.includes("VAULT")||d.includes("ADAPTER")||d.includes("TRIGGER"),v=c===0&&!p;if(d.includes("DESIGN_TOOL")||d.includes("STYLING"))return null;const y=["ADAPTER","VAULT","ORCHESTRATOR","AGENT","WIDGET","DATAGRID","SERVICE","TRANSFORM","GRID","COMPUTE","NODE","SLOT","SLOT_NODE","UTILITY","STYLING"].some(z=>d.includes(z)),A=d.includes("ADAPTER")||d.includes("VAULT")||d.includes("AGENT");return["SYSTEM_CORE","SYSTEM_INFRA","DATA_ENGINE","LOGIC","TEMPORAL"].includes(b)&&!A||!y&&!A||!N.LABEL&&!N.label&&!N.functional_name?null:{...N,isLocked:v}}).filter(Boolean);E.sort((N,b)=>{const d=(N.LABEL||N.label||"").toUpperCase(),p=(b.LABEL||b.label||"").toUpperCase();return d.localeCompare(p)}),i(E)},[c]);const l=g=>{const E=(g.ARCHETYPE||g.archetype||"").toUpperCase(),N=(g.DOMAIN||g.domain||"").toUpperCase();return E.includes("VAULT")||N.includes("KNOWLEDGE")||N.includes("DATA")?"KNOWLEDGE_VAULTS":N.includes("INTELLIGENCE")||N.includes("COGNITIVE")||E.includes("AGENT")?"COGNITIVE_ENGINES":E.includes("ADAPTER")||N.includes("COMMUNICATION")||N.includes("SPATIAL")||N.includes("MEDIA")?"BRIDGES_AND_ADAPTERS":E.includes("SLOT")||E.includes("REALITY")||E.includes("UTILITY")||E.includes("VISUAL_UTILITY")?"VISUAL_UTILITIES":E.includes("WIDGET")||E.includes("STYLING")||E.includes("MATH")?"ATOMIC_WIDGETS":E.includes("ORCHESTRATOR")||E.includes("TRANSFORM")||E.includes("GRID")?"ORCHESTRATION_UNITS":"UTILITIES"},u=[{id:"COGNITIVE_ENGINES",label:"Cerebros y Motores Cognitivos",icon:"",desc:"Sistemas de razonamiento y procesamiento inteligente."},{id:"KNOWLEDGE_VAULTS",label:"Bvedas de Conocimiento",icon:"",desc:"Repositorios de archivos, bases de datos y memoria."},{id:"BRIDGES_AND_ADAPTERS",label:"Puentes y Herramientas",icon:"",desc:"Conectores con el mundo exterior y herramientas operativas."},{id:"VISOR_REALITY",label:"Proyectores de Realidad",icon:"",desc:"Motores para visualizar datos complejos (3D, Tiempo, Mapas)."},{id:"VISUAL_UTILITIES",label:"Herramientas de Frontend (Apps)",icon:"",desc:"Aplicaciones completas para manipular datos."},{id:"ATOMIC_WIDGETS",label:"Controles y tomos (Widgets)",icon:"",desc:"Componentes pequeos para incrustar en otras herramientas."},{id:"ORCHESTRATION_UNITS",label:"Unidades de Orquestacin",icon:"",desc:"Sistemas de control de flujos y estructuras complejas."},{id:"UTILITIES",label:"Utilidades Diversas",icon:"",desc:"Herramientas de soporte y servicios auxiliares."}],f=w.useMemo(()=>{const g=n.toLowerCase();return o.filter(E=>{const N=(E.LABEL||E.label||E.functional_name||"").toLowerCase(),b=(E.ARCHETYPE||E.archetype||"").toLowerCase(),d=(E.DOMAIN||E.domain||"").toLowerCase();return N.includes(g)||b.includes(g)||d.includes(g)})},[n,o]),h=w.useMemo(()=>{const g={};return f.forEach(E=>{const N=l(E);g[N]||(g[N]=[]),g[N].push(E)}),g},[f]);return a.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/70 backdrop-blur-md animate-in fade-in duration-300",onClick:t,children:a.jsxs("div",{className:"w-[800px] max-h-[85vh] bg-[var(--bg-deep)] border border-[var(--border-vibrant)]/30 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",onClick:g=>g.stopPropagation(),children:[a.jsxs("div",{className:"p-8 border-b border-[var(--border-subtle)] bg-gradient-to-b from-[var(--bg-secondary)]/50 to-transparent",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-[var(--accent)]/10 rounded-2xl border border-[var(--accent)]/20 shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)]",children:a.jsx(j.Search,{size:24,className:"text-[var(--accent)]"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("h2",{className:"text-2xl font-black text-[var(--text-vibrant)] tracking-tighter uppercase italic",children:["Manifest ",a.jsx("span",{className:"text-[var(--accent)]",children:"Protocol"})]}),a.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)] tracking-[0.3em] uppercase opacity-70",children:"Reality_Synchronization_Interface // L1_GATE"})]})]}),a.jsx("button",{onClick:t,className:"text-[var(--text-dim)] hover:text-[var(--accent)] transition-all p-3 hover:bg-[var(--accent)]/5 rounded-full border border-transparent hover:border-[var(--accent)]/20",children:a.jsx(j.Close,{size:24})})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"text",className:"w-full bg-[var(--bg-primary)]/80 border border-[var(--border-subtle)] rounded-2xl py-4 pl-12 pr-6 text-base text-[var(--text-vibrant)] placeholder:text-[var(--text-dim)] focus:border-[var(--accent)] focus:ring-4 focus:ring-[var(--accent)]/10 outline-none transition-all shadow-inner font-medium",placeholder:"Identify artifact by frequency name, archetype or domain...",value:n,onChange:g=>s(g.target.value),autoFocus:!0}),a.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:a.jsx(j.Search,{size:18,className:"text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-dot-pattern scrollbar-thin scrollbar-thumb-[var(--border-subtle)]",children:[u.map(g=>{const E=h[g.id];return!E||E.length===0?null:a.jsxs("div",{className:"mb-10 last:mb-0",children:[a.jsxs("header",{className:"flex flex-col gap-1 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-subtle)] flex items-center justify-center text-lg shadow-sm",children:g.icon}),a.jsx("h3",{className:"text-xs font-black text-[var(--text-vibrant)] uppercase tracking-[0.25em]",children:g.label}),a.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-[var(--border-subtle)] to-transparent ml-2 opacity-50"}),a.jsxs("span",{className:"text-[10px] font-mono text-[var(--accent)] px-2 py-0.5 rounded bg-[var(--accent)]/5 border border-[var(--accent)]/20",children:[E.length," UNITS"]})]}),a.jsx("p",{className:"text-[10px] text-[var(--text-dim)] font-medium pl-11 opacity-60 italic",children:g.desc})]}),a.jsx("div",{className:"grid grid-cols-2 gap-4 pl-11",children:E.map((N,b)=>a.jsxs("button",{onClick:()=>!N.isLocked&&e(N),className:`flex items-center gap-4 p-5 rounded-2xl border transition-all group text-left relative overflow-hidden ${N.isLocked?"bg-black/20 border-white/5 cursor-not-allowed opacity-50":"bg-[var(--bg-secondary)]/30 border-[var(--border-subtle)] hover:bg-[var(--bg-secondary)]/80 hover:border-[var(--accent)]/50 hover:shadow-[0_8px_30px_rgba(0,0,0,0.2)]"}`,children:[!N.isLocked&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--accent)]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:`w-12 h-12 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] flex items-center justify-center transition-all shadow-sm ${N.isLocked?"grayscale":"group-hover:border-[var(--accent)] group-hover:text-[var(--accent)] group-hover:scale-110"} relative z-10`,children:a.jsx("span",{className:`text-2xl filter drop-shadow-md ${!N.isLocked&&"group-hover:drop-shadow-[0_0_8px_rgba(var(--accent-rgb),0.5)]"}`,children:N.isLocked?"":g.icon})}),a.jsxs("div",{className:"relative z-10 flex-1 min-w-0",children:[a.jsx("h4",{className:`font-bold text-sm mb-1 transition-colors truncate ${N.isLocked?"text-white/20":"text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)]"}`,children:N.LABEL||N.label||N.functional_name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-[9px] font-black px-2 py-0.5 rounded bg-[var(--bg-deep)] border border-[var(--border-subtle)] tracking-tighter uppercase transition-colors ${N.isLocked?"text-white/10":"text-[var(--text-dim)] group-hover:text-[var(--accent)]"}`,children:N.isLocked?"SOCKED":(N.ARCHETYPE||N.archetype||"UNIT").split("_")[0]}),a.jsx("div",{className:"w-1 h-1 rounded-full bg-[var(--border-subtle)]"}),a.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-40 uppercase truncate",children:N.isLocked?"REQUIRES_DATA_SEED":N.DOMAIN||N.domain||"SYSTEM"})]})]})]},`${g.id}-${b}`))})]},g.id)}),f.length===0&&a.jsxs("div",{className:"py-24 text-center flex flex-col items-center justify-center gap-6 animate-in zoom-in-90 duration-300",children:[a.jsx("div",{className:"w-20 h-20 rounded-full bg-[var(--bg-secondary)] flex items-center justify-center text-5xl opacity-20 shadow-inner",children:""}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("div",{className:"font-black text-sm text-[var(--text-dim)] tracking-widest uppercase",children:"SIGNAL_LOSS // NO_RESULTS_FOUND"}),a.jsxs("div",{className:"font-mono text-[10px] text-[var(--text-dim)] opacity-50 italic",children:['Frequency "',n,'" does not match any known manifest circuit.']})]})]})]}),a.jsxs("div",{className:"px-8 py-5 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)]/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] animate-pulse"}),a.jsxs("span",{className:"text-[10px] font-mono text-[var(--text-dim)] uppercase tracking-wider",children:["L0_ONTOLOGY: ",o.length]})]}),a.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] opacity-50"}),a.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)] uppercase tracking-wider",children:"ACTIVE_SIEVE: SOVEREIGN_V3"})]}),a.jsxs("div",{className:"flex items-center gap-2 font-black text-[9px] tracking-[0.3em] text-[var(--accent)] opacity-80 uppercase",children:[a.jsx("span",{children:"Indra_OS"}),a.jsx("span",{className:"text-[var(--text-dim)] opacity-30",children:"//"}),a.jsx("span",{children:"Manifest_v8.1"})]})]})]})})},Mm=(e,t,r,n,s)=>{const o=pc(e,t,r,s),i=pc(e,t,r,n),c=s-n<=180?"0":"1";return["M",o.x,o.y,"A",r,r,0,c,0,i.x,i.y].join(" ")},pc=(e,t,r,n)=>{const s=(n-90)*Math.PI/180;return{x:e+r*Math.cos(s),y:t+r*Math.sin(s)}},Um=({syncStatus:e="SYNCED",isOpen:t})=>{const r={SYNCED:{color:"#60a5fa",glow:"rgba(96, 165, 250, 0.6)"},RETRY:{color:"#fbbf24",glow:"rgba(251, 191, 36, 0.6)"},OFFLINE:{color:"#ef4444",glow:"rgba(239, 68, 68, 0.8)"}},n=r[e]||r.SYNCED;return a.jsxs("div",{className:"sphere-core","data-state":e,style:{"--core-color":n.color,"--glow-color":n.glow},children:[a.jsx("div",{className:"sphere-corona sphere-corona-outer"}),a.jsx("div",{className:"sphere-corona sphere-corona-middle"}),a.jsx("div",{className:"sphere-corona sphere-corona-inner"}),a.jsx("div",{className:"sphere-nucleus"}),[...Array(6)].map((s,o)=>a.jsx("div",{className:"sphere-particle",style:{"--particle-size":`${Math.random()*2+1}px`,"--particle-color":n.color,"--particle-opacity":Math.random()*.5+.3,transform:`rotate(${o*60}deg)`},children:a.jsx("div",{className:"particle-dot",style:{animation:`orbit ${Math.random()*4+4}s linear infinite`,animationDelay:`${Math.random()*-8}s`}})},o))]})},Fm=({manualLayer:e,setManualLayer:t})=>{const{state:r,execute:n}=te(),s=H(x=>x.session),[o,i]=w.useState(!1),[c,l]=w.useState(!1),[u,f]=w.useState([]),[h,m]=w.useState(""),[g,E]=w.useState(""),{position:N,dockSide:b,isDragging:d,startDrag:p}=km("bottom"),v=!!r.phenotype.cosmosIdentity,S=e==="PORTAL"?"PORTAL":v?"COSMOS":"DEFAULT",y=[],_=(()=>{var x;if(e==="DEV_LAB"){const T=((x=r.phenotype.devLab)==null?void 0:x.perspective)||"BRIDGE";return[{id:"PERSPECTIVE_BRIDGE",label:"Vista Bridge",icon:j.Eye,isActive:T==="BRIDGE",action:()=>n("SET_LAB_PERSPECTIVE","BRIDGE")},{id:"PERSPECTIVE_WIDGET",label:"Vista Widget",icon:j.SidebarLeft,isActive:T==="WIDGET",action:()=>n("SET_LAB_PERSPECTIVE","WIDGET")},{id:"PERSPECTIVE_NODE",label:"Vista Nodo",icon:j.Terminal,isActive:T==="NODE",action:()=>n("SET_LAB_PERSPECTIVE","NODE")},{id:"SELECT_ADAPTER",label:"Seleccionar Adaptador",icon:j.Search,action:()=>l(!0)},{id:"TEST_SUITE",label:"Mdulo de Caos",icon:j.Activity,action:()=>n("TOGGLE_UI_PANEL",{panel:"chaos"})},{id:"NUCLEAR_PURGE",label:"Purgado Nuclear",icon:j.Sync,action:()=>{confirm(` PURGADO NUCLEAR

Esto borrar toda la memoria local (Genotipo L0) y forzar una descarga completa del Servidor.

Proceder?`)&&n("NUCLEAR_PURGE")}}]}return S==="COSMOS"?[{id:"ADD_ARTIFACT",label:"Manifestar Artefacto",icon:j.Plus,action:()=>l(!0)},{id:"TOGGLE_VISUALIZATION",label:"Modo de Realidad",icon:j.Eye,action:()=>n("TOGGLE_VISUALIZATION_MODE")},{id:"AUTO_LAYOUT",label:"Auto Agrupamiento",icon:j.List,action:()=>n("APPLY_AUTO_LAYOUT")}]:[]})(),L=x=>{var I;if(e==="DEV_LAB"){console.log("[SovereignSphere] DevLab Target Selected:",x),n("SET_LAB_TARGET",x),l(!1),i(!1);return}const T=(I=r.phenotype.cosmosIdentity)==null?void 0:I.id;console.log("[SovereignSphere] Manifesting:",x),n("ADD_ARTIFACT_REQUEST",{cosmosId:T,artifact:{...x,type:"MODULE",domain:x.DOMAIN},schemaId:x.technical_id}),l(!1),i(!1)},z=(x,T)=>{x.preventDefault(),x.stopPropagation();const I=x.deltaY>0?10:-10;M(O=>({...O,[T]:O[T]+I}))},[C,M]=w.useState({outer:0,inner:0}),k=(x="outer",T=0)=>{const I=x==="inner",O=I?32:40,V=I?60:110,D=Math.max(O/(2*Math.PI*V)*360,15)*Math.max(T-1,0);let G=180;D>180&&(G=D>270?360:270);const B={top:{center:90,span:G},bottom:{center:270,span:G},left:{center:0,span:G},right:{center:180,span:G}},W=B[b]||B.top,ne=Math.max(G-(I?15:0)*2,90),se=W.center-ne/2,ve=W.center+ne/2;return{start:se,end:ve,labelPos:b==="top"?"-bottom-8":b==="bottom"?"-top-8":b==="left"?"-right-24":"-left-24",arcSpan:ne,canScroll:D>ne,rotation:x==="outer"?C.outer:C.inner}};return a.jsxs(a.Fragment,{children:[c&&(e==="DEV_LAB"?a.jsx(wd,{onSelect:L,onClose:()=>l(!1)}):a.jsx(Pm,{onSelect:L,onClose:()=>l(!1)})),a.jsxs("div",{className:"fixed z-[300] flex flex-col items-center gap-4 pointer-events-none transition-none",style:{left:N.x,top:N.y,transform:"translate(-50%, -50%)"},children:[a.jsxs("button",{onMouseDown:p,onClick:x=>{d||i(!o)},className:`
                        w-16 h-16 rounded-full
                        flex items-center justify-center cursor-pointer pointer-events-auto
                        transition-all duration-700 ease-[cubic-bezier(0.16,1,0.3,1)]
                        glass-sphere-button group relative
                        ${o?"scale-110":"hover:scale-105 active:scale-95"}
                        ${d?"cursor-grabbing scale-105":"cursor-grab"}
                    `,style:{zIndex:60},children:[a.jsx(Um,{syncStatus:s==null?void 0:s.syncStatus,isOpen:o}),a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-full pb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:a.jsxs("div",{className:"glass px-2 py-1 rounded border border-[var(--accent)]/30 backdrop-blur-md",children:[a.jsx("p",{className:"text-[7px] font-black uppercase tracking-widest text-[var(--accent)] whitespace-nowrap",children:(s==null?void 0:s.syncStatus)==="SYNCED"?"Sincronizado":(s==null?void 0:s.syncStatus)==="RETRY"?`Reintentando (${s==null?void 0:s.failedSyncAttempts})`:"Arquitectura Offline"}),(s==null?void 0:s.lastSyncTimestamp)&&a.jsxs("p",{className:"text-[6px] text-white/40 mt-0.5 whitespace-nowrap",children:["Last: ",new Date(s.lastSyncTimestamp).toLocaleTimeString()]})]})})]}),a.jsxs("div",{className:`absolute top-1/2 left-1/2 w-0 h-0 flex items-center justify-center transition-all duration-500 ${o?"opacity-100":"opacity-0 pointer-events-none"}`,onWheel:x=>{const T=k("outer",y.length),I=k("inner",_.length);(T.canScroll||I.canScroll)&&z(x,T.canScroll?"outer":"inner")},children:[(()=>{const x=k("outer",y.length),T=k("inner",_.length);return(x.canScroll||T.canScroll)&&o?a.jsxs("div",{className:"absolute -bottom-24 left-1/2 -translate-x-1/2 flex items-center gap-2 glass px-3 py-1.5 rounded-full border border-[var(--accent)]/20 animate-pulse pointer-events-none",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)]"}),a.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] uppercase tracking-wider",children:"Scroll to rotate"})]}):null})(),(()=>{k("outer",y.length);const x=k("inner",_.length);return a.jsx(a.Fragment,{children:_.length>0&&a.jsx("svg",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none",width:"140",height:"140",style:{opacity:o?.2:0,transition:"opacity 500ms"},children:a.jsx("path",{d:Mm(70,70,60,x.start+x.rotation,x.end+x.rotation),fill:"none",stroke:"var(--accent)",strokeWidth:"1",strokeDasharray:"2 2"})})})})(),_.length>0&&_.map((x,T)=>{const I=k("inner",_.length),O=_.length,V=O>1?I.end-I.start:0,R=O>1?I.start:(I.start+I.end)/2,U=O>1?V/(O-1):0,G=(R+U*T+I.rotation)*Math.PI/180,B=Math.round(60*Math.cos(G)),W=Math.round(60*Math.sin(G)),re=x.isActive||!1;return a.jsxs("button",{onClick:ne=>{ne.stopPropagation(),console.log("[Sphere] Action:",x.id),x.action(),i(!1)},className:`absolute w-8 h-8 rounded-full flex items-center justify-center border transition-all duration-300 z-50 shadow-lg group/inner pointer-events-auto ${re?"bg-[var(--accent)] text-black border-[var(--accent)] shadow-[0_0_15px_var(--accent)]":"glass border-[var(--accent)]/30 hover:bg-[var(--accent)] hover:text-black"}`,style:{transform:o?`translate(${B}px, ${W}px)`:"translate(0px, 0px)",opacity:o?1:0,transitionDelay:`${T*30+100}ms`},children:[a.jsx(x.icon,{size:12}),a.jsx("div",{className:`absolute pointer-events-none opacity-0 group-hover/inner:opacity-100 transition-opacity whitespace-nowrap bg-black/90 px-2 py-1 rounded text-[var(--accent)] border border-[var(--accent)]/20 backdrop-blur-md z-[100] ${I.labelPos}`,children:a.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em]",children:x.label})})]},x.id)})]})]})]})},Bm=({onClose:e})=>{const{state:t,execute:r}=te(),[n,s]=w.useState(""),[o,i]=w.useState(kt.CORE_URL||""),[c,l]=w.useState(!1),[u,f]=w.useState(null),h=async()=>{if(!(!n||c)){l(!0),f({type:"info",msg:"Sincronizando con el Core..."});try{if(o!==kt.CORE_URL){localStorage.setItem("INDRA_OVERRIDE_URL",o);const{default:g}=await cr(async()=>{const{default:E}=await Promise.resolve().then(()=>Po);return{default:E}},void 0);g.init(o,localStorage.getItem("INDRA_SESSION_TOKEN"))}const m=await fe.call("public","setSystemToken",{newToken:n});m&&m.success?(localStorage.setItem("INDRA_SESSION_TOKEN",n),f({type:"success",msg:" Token Maestro actualizado exitosamente."}),r("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" Token del Sistema rotado con xito.",type:"SUCCESS"}),setTimeout(()=>{e(),window.location.reload()},1500)):f({type:"error",msg:" El Core rechaz la actualizacin."})}catch(m){f({type:"error",msg:` Error: ${m.message}`})}finally{l(!1)}}};return a.jsx("div",{className:"fixed inset-0 z-[500] flex items-center justify-center bg-black/60 dark:bg-black/80 backdrop-blur-md animate-fade-in p-6",children:a.jsxs("div",{className:"w-full max-w-md glass border border-[var(--border-subtle)] rounded-[2.5rem] p-8 shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-30"}),a.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2 text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-colors",children:a.jsx(j.Close,{size:18})}),a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--accent)]/10 flex items-center justify-center text-[var(--accent)] border border-[var(--accent)]/20 shadow-[0_0_20px_rgba(var(--accent-rgb),0.1)]",children:a.jsx(j.Lock,{size:20})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-sm font-black tracking-widest uppercase",children:"Bveda de Seguridad"}),a.jsx("p",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-tight",children:"Configuracin del Token Maestro"})]})]}),u&&a.jsx("div",{className:`p-4 rounded-xl text-[10px] font-mono leading-relaxed border ${u.type==="success"?"bg-[var(--success)]/10 border-[var(--success)]/20 text-[var(--success)]":u.type==="error"?"bg-[var(--error-surface)] border-[var(--error)]/20 text-[var(--error)]":"bg-[var(--accent)]/10 border-[var(--accent)]/20 text-[var(--accent)]"}`,children:u.msg}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-widest ml-1",children:"URL de Conexin Core"}),a.jsx("input",{type:"text",value:o,onChange:m=>i(m.target.value),placeholder:"https://script.google.com/...",className:"w-full h-10 bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-xl px-4 text-[10px] font-mono text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-widest ml-1",children:"Nuevo Token Maestro / Contrasea"}),a.jsx("input",{type:"password",value:n,onChange:m=>s(m.target.value),placeholder:"Escribe tu nueva frase de acceso...",className:"w-full h-12 bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-xl px-4 text-sm font-mono text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),a.jsx("p",{className:"text-[7px] font-mono text-[var(--text-dim)] opacity-50 px-1",children:"Advertencia: Actualizar esto rotar la clave maestra para todos los satlites interconectados."})]}),a.jsx("button",{onClick:h,disabled:!n||c,className:`
                            h-12 rounded-xl font-black text-[10px] uppercase tracking-[0.4em] transition-all duration-500 mt-2
                            ${!n||c?"bg-[var(--bg-secondary)] text-[var(--text-dim)] cursor-not-allowed border border-[var(--border-subtle)]":"bg-[var(--accent)] text-black shadow-lg hover:scale-[1.02] active:scale-95"}
                        `,children:c?"Sincronizando...":"Rotar Token Maestro"}),a.jsx("div",{className:"text-center mt-2",children:a.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] opacity-30 uppercase tracking-[0.2em]",children:"Protocolo Axiomtico: La Identidad es la Prueba."})})]})]})})},zm=()=>{var v,S;const{state:e,execute:t}=te(),r=H(y=>y.session),[n,s]=w.useState(!1),[o,i]=w.useState(!1),c=e.sovereignty.theme||"dark",l=e.sovereignty.mode==="DEV_LAB",u=(v=e.phenotype.devLab)==null?void 0:v.targetId,f=(S=e.phenotype.devLab)==null?void 0:S.perspective,{ui:h,focusStack:m,cosmosIdentity:g,artifacts:E}=e.phenotype;e.ui_layer_override;const N=!!(g!=null&&g.id);let b=[];if(l){if(b=[{id:"DEV_LAB",label:"Laboratory",archetype:"LAB",icon:j.Lab}],u){const y=Em(u,E);b.push({id:"TARGET",label:y,archetype:"TARGET",icon:j.Terminal})}f&&f!==u&&b.push({id:"PERSPECTIVE",label:f,archetype:"VIEW",icon:j.Eye})}else b=N?m&&m.length>0?m.filter(y=>!y._isGhost):[g]:[];const d=()=>{const y=c==="dark"?"light":"dark";t("SET_THEME",{theme:y}),localStorage.setItem("INDRA_THEME",y)},p=()=>{confirm(` NUCLEAR PURGE

Esto borrar toda la memoria local (Genotipo L0) y forzar una descarga completa del Servidor.

Proceder?`)&&t("NUCLEAR_PURGE")};return a.jsxs("div",{className:"fixed top-4 right-4 z-[350] flex items-center justify-end pointer-events-auto",children:[a.jsxs("div",{className:`
                flex items-center gap-2 p-1 rounded-full glass border transition-all duration-500 ease-out shadow-lg max-w-[90vw]
                ${l?"border-orange-500/50 shadow-[0_0_20px_rgba(249,115,22,0.1)]":"border-[var(--border-subtle)]"}
                ${n?"bg-[var(--bg-deep)] pr-2":""}
            `,children:[b.length>0&&a.jsx("div",{className:"hidden md:flex items-center gap-1 pl-3 pr-2 border-r border-[var(--border-subtle)] mr-2 h-6",children:b.map((y,A)=>{var _;return a.jsxs("div",{className:"flex items-center gap-1 text-[10px] uppercase font-bold tracking-wider text-[var(--text-secondary)] hover:text-[var(--accent)] cursor-pointer transition-colors",onClick:()=>{y.id==="DEV_LAB"?t("SET_MODE",{mode:"DEV_LAB"}):y.id===(g==null?void 0:g.id)?t("EXIT_FOCUS"):t("SELECT_ARTIFACT",y)},children:[a.jsx("span",{className:"opacity-50",children:"/"}),a.jsx("span",{children:y.LABEL||y.label||((_=y.identity)==null?void 0:_.label)||y.NAME||y.name||y.id})]},y.id||A)})}),(r==null?void 0:r.syncStatus)==="OFFLINE"&&a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 ml-1 bg-[var(--error-surface)] text-[var(--error)] rounded-full border border-[var(--error)]/20 animate-pulse",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--error)]"}),a.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter",children:"Trabajo sin conexin"})]}),a.jsxs("div",{className:`
                    flex items-center gap-2 overflow-hidden transition-all duration-500
                    ${n?"max-w-[400px] opacity-100 ml-1":"max-w-0 opacity-0 ml-0"}
                `,children:[a.jsx("button",{onClick:()=>t("SET_CURRENT_LAYER","SELECTOR"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${e.phenotype.ui.currentLayer==="SELECTOR"?"bg-[var(--accent)]/20 text-[var(--accent)]":"text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-secondary)]"}`,title:"Selector de Cosmos",children:a.jsx(j.Cosmos,{size:14})}),a.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] mx-1"}),a.jsxs("button",{onClick:()=>t("SET_MODE",{mode:e.sovereignty.mode==="LIVE"?"DEV_LAB":"LIVE"}),className:`h-8 px-3 rounded-full flex items-center gap-2 transition-all ${e.sovereignty.mode==="DEV_LAB"?"bg-[var(--accent)]/20 text-[var(--accent)]":"text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-secondary)]"}`,title:`Cambiar a Modo ${e.sovereignty.mode==="LIVE"?"Laboratorio":"Produccin"}`,children:[a.jsx(j.Sync,{size:12,className:e.sovereignty.mode==="DEV_LAB"?"animate-spin":""}),a.jsx("span",{className:"text-[8px] font-black tracking-[0.2em] uppercase",children:e.sovereignty.mode==="LIVE"?"Live":"Dev"})]}),a.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] mx-1"}),a.jsx("button",{onClick:d,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--bg-secondary)] transition-colors group",title:c==="dark"?"Light Mode":"Dark Mode",children:c==="dark"?a.jsx(j.Sun,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"}):a.jsx(j.Moon,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"})}),a.jsx("button",{onClick:()=>i(!0),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--accent)]/10 transition-colors group",title:"Security / Tokens",children:a.jsx(j.Lock,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"})}),a.jsx("button",{onClick:p,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--error)]/10 transition-colors group",title:"Nuclear Purge",children:a.jsx(j.Sync,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--error)]"})})]}),a.jsx("button",{onClick:()=>s(!n),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all border ${n?"border-[var(--accent)] bg-[var(--accent)] text-white shadow-[0_0_15px_rgba(var(--accent-rgb),0.3)]":"border-transparent hover:bg-[var(--bg-secondary)] text-[var(--text-dim)]"}`,children:a.jsx("div",{className:`transition-transform duration-500 ${n?"rotate-180":""}`,children:n?a.jsx(j.Close,{size:16}):a.jsx(j.List,{size:18})})})]}),o&&a.jsx(Bm,{onClose:()=>i(!1)})]})},Gm=()=>{const e=H(s=>s.session),t=e==null?void 0:e.isLoading;if((e==null?void 0:e.syncStatus)==="SYNCED"&&!t)return null;const r=(e==null?void 0:e.syncStatus)==="RETRY",n=(e==null?void 0:e.syncStatus)==="OFFLINE";return a.jsx("div",{className:"fixed bottom-10 left-10 flex flex-col gap-2 z-[100] animate-fade-in group pointer-events-none",children:a.jsxs("div",{className:`
                glass rounded-full px-4 py-2 flex items-center gap-3 border transition-all duration-500 bg-black/40
                ${n?"border-[var(--error)]/30":r?"border-[var(--warning)]/30":"border-white/5"}
            `,children:[a.jsx("div",{className:`${t||r?"animate-spin-slow":""}`,children:a.jsx(j.Sync,{className:`w-3 h-3 ${n?"text-[var(--error)]":r?"text-[var(--warning)]":"text-white/20"}`})}),a.jsx("div",{className:"flex flex-col",children:a.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.2em] text-white/40",children:t?"SYNCING_REALITY":n?"LOCAL_SOVEREIGNTY":r?"RETRYING_SYNC":"REALITY_SYNCED"})})]})})},Vm=({onComplete:e})=>{const{state:t}=te(),{progress:r,label:n,color:s,iskResonance:o}=Di("system"),[i,c]=w.useState(!0);return w.useEffect(()=>{if(r>=100&&t.sovereignty.status!=="STANDBY"){const l=setTimeout(()=>{c(!1),e&&e()},1e3);return()=>clearTimeout(l)}},[r,t.sovereignty.status]),i?a.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center transition-opacity duration-1000",children:[a.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--accent)_0%,_transparent_70%)]",style:{transform:`scale(${1+(o||0)*.1})`,opacity:.1+(o||0)*.2}})}),a.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-[var(--accent)]/30 flex items-center justify-center",children:a.jsx("div",{className:"w-16 h-16 rounded-full bg-[var(--accent)]/10 animate-pulse flex items-center justify-center",children:a.jsx("div",{className:"w-4 h-4 bg-[var(--accent)] rounded-full",style:{boxShadow:`0 0 20px ${s||"var(--accent)"}`}})})})}),a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("h1",{className:"text-xl font-black tracking-[0.5em] text-[var(--accent)] uppercase animate-pulse",children:"INDRA_OS"}),a.jsxs("span",{className:"text-[10px] font-mono text-[var(--text-dim)] tracking-widest uppercase",children:[n||"Initialising_Reality","..."]})]}),a.jsxs("div",{className:"w-64",children:[a.jsx("div",{className:"h-0.5 w-full bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[var(--accent)] transition-all duration-500",style:{width:`${r}%`,boxShadow:"0 0 10px var(--accent)"}})}),a.jsxs("div",{className:"flex justify-between mt-2 font-mono text-[9px] text-[var(--text-dim)] opacity-50",children:[a.jsxs("span",{children:[r,"%"]}),a.jsx("span",{children:"v5.5.0-STARK"})]})]})]})]}):null},$m=()=>{const{state:e,execute:t}=te(),{ui:r,cosmosIdentity:n}=e.phenotype;return e.sovereignty.mode==="LIVE"&&!!n?a.jsx("div",{className:"fixed left-4 top-1/2 -translate-y-1/2 z-[350] flex flex-col items-center gap-4 animate-fade-in-left",children:a.jsxs("div",{className:"flex flex-col gap-2 p-1.5 glass border border-[var(--border-subtle)] rounded-full shadow-2xl",children:[a.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"}),className:`
                        w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500
                        ${r.vaultPanelOpen?"bg-[var(--accent)] text-black shadow-[0_0_20px_rgba(var(--accent-rgb),0.4)] rotate-12":"text-[var(--text-dim)] hover:text-[var(--text-vibrant)] hover:bg-[var(--bg-secondary)]"}
                    `,title:"Almacn de Artefactos (Vault)",children:a.jsx(j.Vault,{size:20})}),a.jsx("div",{className:"w-6 h-[1px] bg-[var(--border-subtle)] mx-auto opacity-30"})]})}):null},Ym=()=>{const{state:e,execute:t}=te(),{ui:r}=e.phenotype;if(!r.vaultPanelOpen)return null;const n={id:"vault_global",LABEL:"Almacn de Artefactos",DOMAIN:"SYSTEM_VAULT"};return a.jsxs("div",{className:"fixed inset-0 z-[400] flex animate-fade-in pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm pointer-events-auto",onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"})}),a.jsxs("div",{className:`
                relative w-full max-w-2xl h-full bg-[#050505]/95 backdrop-blur-3xl border-r border-white/10 shadow-2xl
                flex flex-col animate-slide-in-left pointer-events-auto overflow-hidden
            `,children:[a.jsxs("div",{className:"h-16 px-8 border-b border-white/5 flex items-center justify-between bg-black/40",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--accent)]/10 border border-[var(--accent)]/20 flex items-center justify-center text-[var(--accent)]",children:a.jsx(j.Vault,{size:16})}),a.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-white/70",children:"Almacn de Artefactos"})]}),a.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"}),className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-[var(--text-dim)] hover:text-white hover:bg-white/10 transition-all group",title:"Cerrar Panel",children:a.jsx(j.Close,{size:16,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),a.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-20"}),a.jsx("div",{className:"h-full",children:a.jsx(Es,{data:n,perspective:"VAULT"})})]})]})]})};w.lazy(()=>cr(()=>import("./SemanticDataCube-BSLzXMtx.js"),__vite__mapDeps([0,1])));w.lazy(()=>cr(()=>import("./SpatialCanvas-DlHenAF1.js"),__vite__mapDeps([2,3])));const Hm={PORTAL:{id:"PORTAL",label:"Portal de Soberana",profile:"AMBIENT",component:"PortalDeAcceso"},SELECTOR:{id:"SELECTOR",label:"Selector de Cosmos",profile:"NAVIGATIONAL",component:"CosmosSelector"},DESKTOP:{id:"DESKTOP",label:"Escritorio de Indra",profile:"DEEP_FOCUS",component:"DynamicLayoutEngine"},DEV_LAB:{id:"DEV_LAB",label:"Laboratorio de Cnones",profile:"DEEP_FOCUS",component:"DevLab"}},Wm=({initialAssembly:e})=>{const{state:t,execute:r}=te(),n=H(o=>{var i;return(i=o.session)==null?void 0:i.isLoading});w.useEffect(()=>{e&&(e.status==="LOCKED"?r("SYSTEM_LOCKED"):(e.status==="ACTIVE"||e.status==="DEGRADED")&&r("IGNITE_SYSTEM",{sovereignty:e.status,genotype:e.genotype||t.genotype}))},[e]),w.useEffect(()=>{t.phenotype.cosmosIdentity&&t.phenotype.ui.currentLayer==="SELECTOR"&&(console.log("[Orchestrator]  Realidad Habitada. Colapsando Selector."),r("SET_CURRENT_LAYER",null))},[t.phenotype.cosmosIdentity]),w.useEffect(()=>{const o=t.sovereignty.theme;document.documentElement.setAttribute("data-theme",o),document.body.className="indra-os-shell bg-hex-grid transition-colors duration-1000"},[t.sovereignty.theme]);const s=()=>{var E;const o=t.phenotype.ui.currentLayer,i=N=>r("SET_CURRENT_LAYER",N),c=!!((E=t.phenotype.cosmosIdentity)!=null&&E.id),u=(N=>{if(!N)return null;const b=Object.values(Hm).find(d=>d.id===N);return b?b.profile:null})(o),f=t.sovereignty.status==="LOCKED",h=o==="PORTAL"||u==="AMBIENT",m=o==="SELECTOR"||u==="NAVIGATIONAL",g=f;return a.jsxs("div",{className:"w-full h-full relative overflow-hidden flex flex-col",children:[a.jsx("div",{className:"absolute inset-0 layer-transition",style:{zIndex:0,filter:m?"blur(15px) brightness(0.6) grayscale(0.5)":g?"brightness(0.2)":"none",transform:m?"scale(0.96) translateY(-20px)":"scale(1)",opacity:g?.3:1},children:t.sovereignty.mode==="DEV_LAB"||o==="DEV_LAB"?a.jsx(wm,{}):c?a.jsx(Dm,{}):a.jsx(dc,{asHome:!0})}),a.jsx("div",{className:"absolute inset-0 z-[10] pointer-events-none",children:h&&a.jsx("div",{className:"absolute top-24 right-8 w-96 glass p-6 rounded-[2rem] border border-[var(--indra-glass-border)] shadow-2xl animate-fade-in pointer-events-auto",children:a.jsx(Mo,{asOverlay:!0,onClose:()=>i(null)})})}),m&&a.jsx("div",{onClick:()=>i(null),className:"absolute inset-0 flex items-center justify-center p-12 z-[20] animate-fade-in backdrop-blur-sm cursor-pointer",children:a.jsxs("div",{onClick:N=>N.stopPropagation(),className:"w-full max-w-7xl h-full glass rounded-[3rem] shadow-2xl overflow-hidden border border-[var(--indra-glass-border)] flex flex-col pointer-events-auto cursor-default",children:[a.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-20"}),a.jsx("div",{className:"flex-1 overflow-auto",children:a.jsx(dc,{})})]})}),g&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-[100] animate-fade-in bg-black/60 backdrop-blur-md",children:a.jsx("div",{className:"w-full max-w-xl glass p-10 rounded-[2.5rem] border border-[var(--indra-glass-border)] shadow-2xl pointer-events-auto",children:a.jsx(Mo,{asOverlay:!1})})}),a.jsxs("div",{className:"absolute inset-0 z-[300] pointer-events-none overflow-hidden",children:[a.jsxs("div",{className:"pointer-events-auto",children:[a.jsx(Fm,{manualLayer:o,setManualLayer:i}),a.jsx(zm,{}),a.jsx($m,{}),a.jsx(Gm,{})]}),a.jsx(Ym,{}),n&&!t.phenotype.cosmosIdentity&&o!=="SELECTOR"&&a.jsxs("div",{className:"absolute inset-0 z-[1000] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md animate-in fade-in duration-500 pointer-events-auto",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-24 h-24 rounded-full border-t-2 border-b-2 border-[var(--accent)] animate-spin"}),a.jsx("div",{className:"absolute inset-0 w-24 h-24 rounded-full border-l-2 border-r-2 border-[var(--accent)]/30 animate-spin-reverse opacity-50"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-[var(--accent)] rounded-full shadow-[0_0_20px_var(--accent)] animate-pulse"})]}),a.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-[var(--accent)] animate-pulse",children:"Sintonizando Realidad"}),a.jsx("div",{className:"flex gap-1 h-1",children:[0,1,2].map(N=>a.jsx("div",{className:"w-8 h-full bg-[var(--accent)]/20 rounded-full overflow-hidden",children:a.jsx("div",{className:"w-full h-full bg-[var(--accent)] animate-[indra-loading-bar_1.5s_infinite]",style:{animationDelay:`${N*.2}s`}})},N))})]})]}),t.phenotype.isDeepHydrating&&!n&&a.jsxs("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 px-8 py-4 glass rounded-full border border-[var(--accent)]/30 shadow-[0_0_30px_rgba(0,210,255,0.2)] animate-pulse flex items-center gap-4 pointer-events-auto",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] shadow-[0_0_10px_var(--accent)]"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Materia Oscura Detectada"}),a.jsx("span",{className:"text-[8px] font-mono text-[var(--text-secondary)] uppercase tracking-widest opacity-60",children:"Hidratando Realidad en Profundidad (Deep Reading)..."})]}),a.jsxs("div",{className:"ml-4 flex gap-1",children:[a.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/20 rounded-full animate-[indra-breath_1s_infinite_ease-in-out]"}),a.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/40 rounded-full animate-[indra-breath_1.2s_infinite_ease-in-out]"}),a.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/60 rounded-full animate-[indra-breath_1.4s_infinite_ease-in-out]"})]})]})]})]})};return t.sovereignty.status==="STANDBY"?a.jsx(Vm,{}):a.jsx("div",{className:"w-screen h-screen overflow-hidden layer-transition bg-black",children:s()})},Km=()=>{const{dispatch:e}=te(),[t,r]=w.useState("BOOTING"),[n,s]=w.useState(null);return w.useEffect(()=>{(async()=>{console.log(" [Main] Iniciando Bootloader...");const i=await fm.assemble();i.success&&i.status==="ACTIVE"?(console.log(" [Main] Sistema Activo. Transfiriendo control a Orchestrator."),s(i),r("ACTIVE")):(console.warn(" [Main] Sistema Bloqueado o Requiere Autenticacin."),r("LOCKED"))})()},[e]),t==="BOOTING"?a.jsxs("div",{className:"w-screen h-screen bg-black flex flex-col items-center justify-center gap-6 text-[var(--accent)] font-mono",children:[a.jsx("div",{className:"w-16 h-16 border-2 border-[var(--accent)] border-t-transparent rounded-full animate-spin"}),a.jsx("div",{className:"text-xs tracking-[0.5em] animate-pulse uppercase",children:"INITIALIZING INDRA OS"})]}):t==="ACTIVE"?a.jsx(Wm,{initialAssembly:n}):a.jsx(Mo,{})};Ga.createRoot(document.getElementById("root")).render(a.jsx(xe.StrictMode,{children:a.jsx(dm,{children:a.jsx(Km,{})})}));export{a as j,w as r};
//# sourceMappingURL=index-Bm9IvC3F.js.map
