const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SemanticDataCube-gWe1me_h.js","assets/SemanticDataCube-eP7qemwd.css","assets/SpatialCanvas-DAK0NKmy.js","assets/SpatialCanvas-BziTkwjS.css"])))=>i.map(i=>d[i]);
var Xd=Object.defineProperty;var Jd=(e,t,r)=>t in e?Xd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var la=(e,t,r)=>Jd(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();function qd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vc={exports:{}},Ys={},yc={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ln=Symbol.for("react.element"),Zd=Symbol.for("react.portal"),ep=Symbol.for("react.fragment"),tp=Symbol.for("react.strict_mode"),rp=Symbol.for("react.profiler"),np=Symbol.for("react.provider"),sp=Symbol.for("react.context"),ap=Symbol.for("react.forward_ref"),op=Symbol.for("react.suspense"),ip=Symbol.for("react.memo"),lp=Symbol.for("react.lazy"),Gi=Symbol.iterator;function cp(e){return e===null||typeof e!="object"?null:(e=Gi&&e[Gi]||e["@@iterator"],typeof e=="function"?e:null)}var Ec={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sc=Object.assign,Nc={};function Br(e,t,r){this.props=e,this.context=t,this.refs=Nc,this.updater=r||Ec}Br.prototype.isReactComponent={};Br.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bc(){}bc.prototype=Br.prototype;function Po(e,t,r){this.props=e,this.context=t,this.refs=Nc,this.updater=r||Ec}var Mo=Po.prototype=new bc;Mo.constructor=Po;Sc(Mo,Br.prototype);Mo.isPureReactComponent=!0;var Yi=Array.isArray,Ac=Object.prototype.hasOwnProperty,Uo={current:null},Tc={key:!0,ref:!0,__self:!0,__source:!0};function Cc(e,t,r){var n,a={},o=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Ac.call(t,n)&&!Tc.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:Ln,type:e,key:o,ref:i,props:a,_owner:Uo.current}}function up(e,t){return{$$typeof:Ln,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ln}function dp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Hi=/\/+/g;function ca(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dp(""+e.key):t.toString(36)}function is(e,t,r,n,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ln:case Zd:i=!0}}if(i)return i=e,a=a(i),e=n===""?"."+ca(i,0):n,Yi(a)?(r="",e!=null&&(r=e.replace(Hi,"$&/")+"/"),is(a,t,r,"",function(u){return u})):a!=null&&(Fo(a)&&(a=up(a,r+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Hi,"$&/")+"/")+e)),t.push(a)),1;if(i=0,n=n===""?".":n+":",Yi(e))for(var c=0;c<e.length;c++){o=e[c];var l=n+ca(o,c);i+=is(o,t,r,l,a)}else if(l=cp(e),typeof l=="function")for(e=l.call(e),c=0;!(o=e.next()).done;)o=o.value,l=n+ca(o,c++),i+=is(o,t,r,l,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Fn(e,t,r){if(e==null)return e;var n=[],a=0;return is(e,n,"","",function(o){return t.call(r,o,a++)}),n}function pp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Re={current:null},ls={transition:null},fp={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:ls,ReactCurrentOwner:Uo};function _c(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Fn,forEach:function(e,t,r){Fn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fn(e,function(){t++}),t},toArray:function(e){return Fn(e,function(t){return t})||[]},only:function(e){if(!Fo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};K.Component=Br;K.Fragment=ep;K.Profiler=rp;K.PureComponent=Po;K.StrictMode=tp;K.Suspense=op;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fp;K.act=_c;K.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Sc({},e.props),a=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Uo.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)Ac.call(t,l)&&!Tc.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&c!==void 0?c[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:Ln,type:e.type,key:a,ref:o,props:n,_owner:i}};K.createContext=function(e){return e={$$typeof:sp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:np,_context:e},e.Consumer=e};K.createElement=Cc;K.createFactory=function(e){var t=Cc.bind(null,e);return t.type=e,t};K.createRef=function(){return{current:null}};K.forwardRef=function(e){return{$$typeof:ap,render:e}};K.isValidElement=Fo;K.lazy=function(e){return{$$typeof:lp,_payload:{_status:-1,_result:e},_init:pp}};K.memo=function(e,t){return{$$typeof:ip,type:e,compare:t===void 0?null:t}};K.startTransition=function(e){var t=ls.transition;ls.transition={};try{e()}finally{ls.transition=t}};K.unstable_act=_c;K.useCallback=function(e,t){return Re.current.useCallback(e,t)};K.useContext=function(e){return Re.current.useContext(e)};K.useDebugValue=function(){};K.useDeferredValue=function(e){return Re.current.useDeferredValue(e)};K.useEffect=function(e,t){return Re.current.useEffect(e,t)};K.useId=function(){return Re.current.useId()};K.useImperativeHandle=function(e,t,r){return Re.current.useImperativeHandle(e,t,r)};K.useInsertionEffect=function(e,t){return Re.current.useInsertionEffect(e,t)};K.useLayoutEffect=function(e,t){return Re.current.useLayoutEffect(e,t)};K.useMemo=function(e,t){return Re.current.useMemo(e,t)};K.useReducer=function(e,t,r){return Re.current.useReducer(e,t,r)};K.useRef=function(e){return Re.current.useRef(e)};K.useState=function(e){return Re.current.useState(e)};K.useSyncExternalStore=function(e,t,r){return Re.current.useSyncExternalStore(e,t,r)};K.useTransition=function(){return Re.current.useTransition()};K.version="18.3.1";yc.exports=K;var R=yc.exports;const ce=qd(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp=R,mp=Symbol.for("react.element"),xp=Symbol.for("react.fragment"),gp=Object.prototype.hasOwnProperty,vp=hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yp={key:!0,ref:!0,__self:!0,__source:!0};function Ic(e,t,r){var n,a={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)gp.call(t,n)&&!yp.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:mp,type:e,key:o,ref:i,props:a,_owner:vp.current}}Ys.Fragment=xp;Ys.jsx=Ic;Ys.jsxs=Ic;vc.exports=Ys;var s=vc.exports,za={},wc={exports:{}},Ge={},Rc={exports:{}},jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,L){var M=j.length;j.push(L);e:for(;0<M;){var $=M-1>>>1,G=j[$];if(0<a(G,L))j[$]=L,j[M]=G,M=$;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var L=j[0],M=j.pop();if(M!==L){j[0]=M;e:for(var $=0,G=j.length,X=G>>>1;$<X;){var Z=2*($+1)-1,ie=j[Z],Oe=Z+1,Fe=j[Oe];if(0>a(ie,M))Oe<G&&0>a(Fe,ie)?(j[$]=Fe,j[Oe]=M,$=Oe):(j[$]=ie,j[Z]=M,$=Z);else if(Oe<G&&0>a(Fe,M))j[$]=Fe,j[Oe]=M,$=Oe;else break e}}return L}function a(j,L){var M=j.sortIndex-L.sortIndex;return M!==0?M:j.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var l=[],u=[],p=1,h=null,x=3,v=!1,y=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(j){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=j)n(u),L.sortIndex=L.expirationTime,t(l,L);else break;L=r(u)}}function S(j){if(E=!1,m(j),!y)if(r(l)!==null)y=!0,_(g);else{var L=r(u);L!==null&&U(S,L.startTime-j)}}function g(j,L){y=!1,E&&(E=!1,f(T),T=-1),v=!0;var M=x;try{for(m(L),h=r(l);h!==null&&(!(h.expirationTime>L)||j&&!B());){var $=h.callback;if(typeof $=="function"){h.callback=null,x=h.priorityLevel;var G=$(h.expirationTime<=L);L=e.unstable_now(),typeof G=="function"?h.callback=G:h===r(l)&&n(l),m(L)}else n(l);h=r(l)}if(h!==null)var X=!0;else{var Z=r(u);Z!==null&&U(S,Z.startTime-L),X=!1}return X}finally{h=null,x=M,v=!1}}var C=!1,N=null,T=-1,O=5,w=-1;function B(){return!(e.unstable_now()-w<O)}function D(){if(N!==null){var j=e.unstable_now();w=j;var L=!0;try{L=N(!0,j)}finally{L?P():(C=!1,N=null)}}else C=!1}var P;if(typeof d=="function")P=function(){d(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,b=I.port2;I.port1.onmessage=D,P=function(){b.postMessage(null)}}else P=function(){A(D,0)};function _(j){N=j,C||(C=!0,P())}function U(j,L){T=A(function(){j(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,_(g))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(j){switch(x){case 1:case 2:case 3:var L=3;break;default:L=x}var M=x;x=L;try{return j()}finally{x=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,L){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var M=x;x=j;try{return L()}finally{x=M}},e.unstable_scheduleCallback=function(j,L,M){var $=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?$+M:$):M=$,j){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=M+G,j={id:p++,callback:L,priorityLevel:j,startTime:M,expirationTime:G,sortIndex:-1},M>$?(j.sortIndex=M,t(u,j),r(l)===null&&j===r(u)&&(E?(f(T),T=-1):E=!0,U(S,M-$))):(j.sortIndex=G,t(l,j),y||v||(y=!0,_(g))),j},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(j){var L=x;return function(){var M=x;x=L;try{return j.apply(this,arguments)}finally{x=M}}}})(jc);Rc.exports=jc;var Ep=Rc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp=R,$e=Ep;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oc=new Set,xn={};function ur(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(xn[e]=t,e=0;e<t.length;e++)Oc.add(t[e])}var bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Va=Object.prototype.hasOwnProperty,Np=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wi={},Ki={};function bp(e){return Va.call(Ki,e)?!0:Va.call(Wi,e)?!1:Np.test(e)?Ki[e]=!0:(Wi[e]=!0,!1)}function Ap(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Tp(e,t,r,n){if(t===null||typeof t>"u"||Ap(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function je(e,t,r,n,a,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){be[e]=new je(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];be[t]=new je(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){be[e]=new je(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){be[e]=new je(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){be[e]=new je(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){be[e]=new je(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){be[e]=new je(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){be[e]=new je(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){be[e]=new je(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bo=/[\-:]([a-z])/g;function zo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bo,zo);be[t]=new je(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bo,zo);be[t]=new je(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bo,zo);be[t]=new je(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){be[e]=new je(e,1,!1,e.toLowerCase(),null,!1,!1)});be.xlinkHref=new je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){be[e]=new je(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vo(e,t,r,n){var a=be.hasOwnProperty(t)?be[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Tp(t,r,a,n)&&(r=null),n||a===null?bp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var _t=Sp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bn=Symbol.for("react.element"),hr=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),$o=Symbol.for("react.strict_mode"),$a=Symbol.for("react.profiler"),Lc=Symbol.for("react.provider"),Dc=Symbol.for("react.context"),Go=Symbol.for("react.forward_ref"),Ga=Symbol.for("react.suspense"),Ya=Symbol.for("react.suspense_list"),Yo=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),kc=Symbol.for("react.offscreen"),Qi=Symbol.iterator;function Gr(e){return e===null||typeof e!="object"?null:(e=Qi&&e[Qi]||e["@@iterator"],typeof e=="function"?e:null)}var de=Object.assign,ua;function tn(e){if(ua===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ua=t&&t[1]||""}return`
`+ua+e}var da=!1;function pa(e,t){if(!e||da)return"";da=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),o=n.stack.split(`
`),i=a.length-1,c=o.length-1;1<=i&&0<=c&&a[i]!==o[c];)c--;for(;1<=i&&0<=c;i--,c--)if(a[i]!==o[c]){if(i!==1||c!==1)do if(i--,c--,0>c||a[i]!==o[c]){var l=`
`+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=i&&0<=c);break}}}finally{da=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?tn(e):""}function Cp(e){switch(e.tag){case 5:return tn(e.type);case 16:return tn("Lazy");case 13:return tn("Suspense");case 19:return tn("SuspenseList");case 0:case 2:case 15:return e=pa(e.type,!1),e;case 11:return e=pa(e.type.render,!1),e;case 1:return e=pa(e.type,!0),e;default:return""}}function Ha(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mr:return"Fragment";case hr:return"Portal";case $a:return"Profiler";case $o:return"StrictMode";case Ga:return"Suspense";case Ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dc:return(e.displayName||"Context")+".Consumer";case Lc:return(e._context.displayName||"Context")+".Provider";case Go:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yo:return t=e.displayName||null,t!==null?t:Ha(e.type)||"Memo";case Rt:t=e._payload,e=e._init;try{return Ha(e(t))}catch{}}return null}function _p(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ha(t);case 8:return t===$o?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ht(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ip(e){var t=Pc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){n=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zn(e){e._valueTracker||(e._valueTracker=Ip(e))}function Mc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Pc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wa(e,t){var r=t.checked;return de({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Xi(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ht(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uc(e,t){t=t.checked,t!=null&&Vo(e,"checked",t,!1)}function Ka(e,t){Uc(e,t);var r=Ht(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qa(e,t.type,r):t.hasOwnProperty("defaultValue")&&Qa(e,t.type,Ht(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ji(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Qa(e,t,r){(t!=="number"||Ss(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var rn=Array.isArray;function Cr(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ht(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Xa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return de({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qi(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(z(92));if(rn(r)){if(1<r.length)throw Error(z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ht(r)}}function Fc(e,t){var r=Ht(t.value),n=Ht(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Zi(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ja(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vn,zc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var on={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wp=["Webkit","ms","Moz","O"];Object.keys(on).forEach(function(e){wp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),on[t]=on[e]})});function Vc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||on.hasOwnProperty(e)&&on[e]?(""+t).trim():t+"px"}function $c(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Vc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Rp=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(e,t){if(t){if(Rp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function Za(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eo=null;function Ho(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var to=null,_r=null,Ir=null;function el(e){if(e=Pn(e)){if(typeof to!="function")throw Error(z(280));var t=e.stateNode;t&&(t=Xs(t),to(e.stateNode,e.type,t))}}function Gc(e){_r?Ir?Ir.push(e):Ir=[e]:_r=e}function Yc(){if(_r){var e=_r,t=Ir;if(Ir=_r=null,el(e),t)for(e=0;e<t.length;e++)el(t[e])}}function Hc(e,t){return e(t)}function Wc(){}var fa=!1;function Kc(e,t,r){if(fa)return e(t,r);fa=!0;try{return Hc(e,t,r)}finally{fa=!1,(_r!==null||Ir!==null)&&(Wc(),Yc())}}function vn(e,t){var r=e.stateNode;if(r===null)return null;var n=Xs(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(z(231,t,typeof r));return r}var ro=!1;if(bt)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){ro=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{ro=!1}function jp(e,t,r,n,a,o,i,c,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(p){this.onError(p)}}var ln=!1,Ns=null,bs=!1,no=null,Op={onError:function(e){ln=!0,Ns=e}};function Lp(e,t,r,n,a,o,i,c,l){ln=!1,Ns=null,jp.apply(Op,arguments)}function Dp(e,t,r,n,a,o,i,c,l){if(Lp.apply(this,arguments),ln){if(ln){var u=Ns;ln=!1,Ns=null}else throw Error(z(198));bs||(bs=!0,no=u)}}function dr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tl(e){if(dr(e)!==e)throw Error(z(188))}function kp(e){var t=e.alternate;if(!t){if(t=dr(e),t===null)throw Error(z(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return tl(a),e;if(o===n)return tl(a),t;o=o.sibling}throw Error(z(188))}if(r.return!==n.return)r=a,n=o;else{for(var i=!1,c=a.child;c;){if(c===r){i=!0,r=a,n=o;break}if(c===n){i=!0,n=a,r=o;break}c=c.sibling}if(!i){for(c=o.child;c;){if(c===r){i=!0,r=o,n=a;break}if(c===n){i=!0,n=o,r=a;break}c=c.sibling}if(!i)throw Error(z(189))}}if(r.alternate!==n)throw Error(z(190))}if(r.tag!==3)throw Error(z(188));return r.stateNode.current===r?e:t}function Xc(e){return e=kp(e),e!==null?Jc(e):null}function Jc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jc(e);if(t!==null)return t;e=e.sibling}return null}var qc=$e.unstable_scheduleCallback,rl=$e.unstable_cancelCallback,Pp=$e.unstable_shouldYield,Mp=$e.unstable_requestPaint,fe=$e.unstable_now,Up=$e.unstable_getCurrentPriorityLevel,Wo=$e.unstable_ImmediatePriority,Zc=$e.unstable_UserBlockingPriority,As=$e.unstable_NormalPriority,Fp=$e.unstable_LowPriority,eu=$e.unstable_IdlePriority,Hs=null,pt=null;function Bp(e){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Hs,e,void 0,(e.current.flags&128)===128)}catch{}}var nt=Math.clz32?Math.clz32:$p,zp=Math.log,Vp=Math.LN2;function $p(e){return e>>>=0,e===0?32:31-(zp(e)/Vp|0)|0}var $n=64,Gn=4194304;function nn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ts(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,i=r&268435455;if(i!==0){var c=i&~a;c!==0?n=nn(c):(o&=i,o!==0&&(n=nn(o)))}else i=r&~a,i!==0?n=nn(i):o!==0&&(n=nn(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-nt(t),a=1<<r,n|=e[r],t&=~a;return n}function Gp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-nt(o),c=1<<i,l=a[i];l===-1?(!(c&r)||c&n)&&(a[i]=Gp(c,t)):l<=t&&(e.expiredLanes|=c),o&=~c}}function so(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tu(){var e=$n;return $n<<=1,!($n&4194240)&&($n=64),e}function ha(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Dn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nt(t),e[t]=r}function Hp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-nt(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}function Ko(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-nt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var q=0;function ru(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nu,Qo,su,au,ou,ao=!1,Yn=[],Ut=null,Ft=null,Bt=null,yn=new Map,En=new Map,Lt=[],Wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nl(e,t){switch(e){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":yn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(t.pointerId)}}function Hr(e,t,r,n,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},t!==null&&(t=Pn(t),t!==null&&Qo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Kp(e,t,r,n,a){switch(t){case"focusin":return Ut=Hr(Ut,e,t,r,n,a),!0;case"dragenter":return Ft=Hr(Ft,e,t,r,n,a),!0;case"mouseover":return Bt=Hr(Bt,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return yn.set(o,Hr(yn.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,En.set(o,Hr(En.get(o)||null,e,t,r,n,a)),!0}return!1}function iu(e){var t=er(e.target);if(t!==null){var r=dr(t);if(r!==null){if(t=r.tag,t===13){if(t=Qc(r),t!==null){e.blockedOn=t,ou(e.priority,function(){su(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=oo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);eo=n,r.target.dispatchEvent(n),eo=null}else return t=Pn(r),t!==null&&Qo(t),e.blockedOn=r,!1;t.shift()}return!0}function sl(e,t,r){cs(e)&&r.delete(t)}function Qp(){ao=!1,Ut!==null&&cs(Ut)&&(Ut=null),Ft!==null&&cs(Ft)&&(Ft=null),Bt!==null&&cs(Bt)&&(Bt=null),yn.forEach(sl),En.forEach(sl)}function Wr(e,t){e.blockedOn===t&&(e.blockedOn=null,ao||(ao=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,Qp)))}function Sn(e){function t(a){return Wr(a,e)}if(0<Yn.length){Wr(Yn[0],e);for(var r=1;r<Yn.length;r++){var n=Yn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ut!==null&&Wr(Ut,e),Ft!==null&&Wr(Ft,e),Bt!==null&&Wr(Bt,e),yn.forEach(t),En.forEach(t),r=0;r<Lt.length;r++)n=Lt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Lt.length&&(r=Lt[0],r.blockedOn===null);)iu(r),r.blockedOn===null&&Lt.shift()}var wr=_t.ReactCurrentBatchConfig,Cs=!0;function Xp(e,t,r,n){var a=q,o=wr.transition;wr.transition=null;try{q=1,Xo(e,t,r,n)}finally{q=a,wr.transition=o}}function Jp(e,t,r,n){var a=q,o=wr.transition;wr.transition=null;try{q=4,Xo(e,t,r,n)}finally{q=a,wr.transition=o}}function Xo(e,t,r,n){if(Cs){var a=oo(e,t,r,n);if(a===null)Aa(e,t,n,_s,r),nl(e,n);else if(Kp(a,e,t,r,n))n.stopPropagation();else if(nl(e,n),t&4&&-1<Wp.indexOf(e)){for(;a!==null;){var o=Pn(a);if(o!==null&&nu(o),o=oo(e,t,r,n),o===null&&Aa(e,t,n,_s,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else Aa(e,t,n,null,r)}}var _s=null;function oo(e,t,r,n){if(_s=null,e=Ho(n),e=er(e),e!==null)if(t=dr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _s=e,null}function lu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Up()){case Wo:return 1;case Zc:return 4;case As:case Fp:return 16;case eu:return 536870912;default:return 16}default:return 16}}var kt=null,Jo=null,us=null;function cu(){if(us)return us;var e,t=Jo,r=t.length,n,a="value"in kt?kt.value:kt.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return us=a.slice(e,1<n?1-n:void 0)}function ds(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hn(){return!0}function al(){return!1}function Ye(e){function t(r,n,a,o,i){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Hn:al,this.isPropagationStopped=al,this}return de(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){},isPersistent:Hn}),t}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=Ye(zr),kn=de({},zr,{view:0,detail:0}),qp=Ye(kn),ma,xa,Kr,Ws=de({},kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kr&&(Kr&&e.type==="mousemove"?(ma=e.screenX-Kr.screenX,xa=e.screenY-Kr.screenY):xa=ma=0,Kr=e),ma)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),ol=Ye(Ws),Zp=de({},Ws,{dataTransfer:0}),ef=Ye(Zp),tf=de({},kn,{relatedTarget:0}),ga=Ye(tf),rf=de({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),nf=Ye(rf),sf=de({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),af=Ye(sf),of=de({},zr,{data:0}),il=Ye(of),lf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function df(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uf[e])?!!t[e]:!1}function Zo(){return df}var pf=de({},kn,{key:function(e){if(e.key){var t=lf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ff=Ye(pf),hf=de({},Ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Ye(hf),mf=de({},kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),xf=Ye(mf),gf=de({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),vf=Ye(gf),yf=de({},Ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ef=Ye(yf),Sf=[9,13,27,32],ei=bt&&"CompositionEvent"in window,cn=null;bt&&"documentMode"in document&&(cn=document.documentMode);var Nf=bt&&"TextEvent"in window&&!cn,uu=bt&&(!ei||cn&&8<cn&&11>=cn),cl=" ",ul=!1;function du(e,t){switch(e){case"keyup":return Sf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xr=!1;function bf(e,t){switch(e){case"compositionend":return pu(t);case"keypress":return t.which!==32?null:(ul=!0,cl);case"textInput":return e=t.data,e===cl&&ul?null:e;default:return null}}function Af(e,t){if(xr)return e==="compositionend"||!ei&&du(e,t)?(e=cu(),us=Jo=kt=null,xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uu&&t.locale!=="ko"?null:t.data;default:return null}}var Tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tf[e.type]:t==="textarea"}function fu(e,t,r,n){Gc(n),t=Is(t,"onChange"),0<t.length&&(r=new qo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var un=null,Nn=null;function Cf(e){Au(e,0)}function Ks(e){var t=yr(e);if(Mc(t))return e}function _f(e,t){if(e==="change")return t}var hu=!1;if(bt){var va;if(bt){var ya="oninput"in document;if(!ya){var pl=document.createElement("div");pl.setAttribute("oninput","return;"),ya=typeof pl.oninput=="function"}va=ya}else va=!1;hu=va&&(!document.documentMode||9<document.documentMode)}function fl(){un&&(un.detachEvent("onpropertychange",mu),Nn=un=null)}function mu(e){if(e.propertyName==="value"&&Ks(Nn)){var t=[];fu(t,Nn,e,Ho(e)),Kc(Cf,t)}}function If(e,t,r){e==="focusin"?(fl(),un=t,Nn=r,un.attachEvent("onpropertychange",mu)):e==="focusout"&&fl()}function wf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ks(Nn)}function Rf(e,t){if(e==="click")return Ks(t)}function jf(e,t){if(e==="input"||e==="change")return Ks(t)}function Of(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var at=typeof Object.is=="function"?Object.is:Of;function bn(e,t){if(at(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Va.call(t,a)||!at(e[a],t[a]))return!1}return!0}function hl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ml(e,t){var r=hl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hl(r)}}function xu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gu(){for(var e=window,t=Ss();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ss(e.document)}return t}function ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Lf(e){var t=gu(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&xu(r.ownerDocument.documentElement,r)){if(n!==null&&ti(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=ml(r,o);var i=ml(r,n);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Df=bt&&"documentMode"in document&&11>=document.documentMode,gr=null,io=null,dn=null,lo=!1;function xl(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;lo||gr==null||gr!==Ss(n)||(n=gr,"selectionStart"in n&&ti(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dn&&bn(dn,n)||(dn=n,n=Is(io,"onSelect"),0<n.length&&(t=new qo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gr)))}function Wn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vr={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionend:Wn("Transition","TransitionEnd")},Ea={},vu={};bt&&(vu=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Qs(e){if(Ea[e])return Ea[e];if(!vr[e])return e;var t=vr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in vu)return Ea[e]=t[r];return e}var yu=Qs("animationend"),Eu=Qs("animationiteration"),Su=Qs("animationstart"),Nu=Qs("transitionend"),bu=new Map,gl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kt(e,t){bu.set(e,t),ur(t,[e])}for(var Sa=0;Sa<gl.length;Sa++){var Na=gl[Sa],kf=Na.toLowerCase(),Pf=Na[0].toUpperCase()+Na.slice(1);Kt(kf,"on"+Pf)}Kt(yu,"onAnimationEnd");Kt(Eu,"onAnimationIteration");Kt(Su,"onAnimationStart");Kt("dblclick","onDoubleClick");Kt("focusin","onFocus");Kt("focusout","onBlur");Kt(Nu,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(sn));function vl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Dp(n,t,void 0,e),e.currentTarget=null}function Au(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var c=n[i],l=c.instance,u=c.currentTarget;if(c=c.listener,l!==o&&a.isPropagationStopped())break e;vl(a,c,u),o=l}else for(i=0;i<n.length;i++){if(c=n[i],l=c.instance,u=c.currentTarget,c=c.listener,l!==o&&a.isPropagationStopped())break e;vl(a,c,u),o=l}}}if(bs)throw e=no,bs=!1,no=null,e}function ne(e,t){var r=t[ho];r===void 0&&(r=t[ho]=new Set);var n=e+"__bubble";r.has(n)||(Tu(t,e,2,!1),r.add(n))}function ba(e,t,r){var n=0;t&&(n|=4),Tu(r,e,n,t)}var Kn="_reactListening"+Math.random().toString(36).slice(2);function An(e){if(!e[Kn]){e[Kn]=!0,Oc.forEach(function(r){r!=="selectionchange"&&(Mf.has(r)||ba(r,!1,e),ba(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kn]||(t[Kn]=!0,ba("selectionchange",!1,t))}}function Tu(e,t,r,n){switch(lu(t)){case 1:var a=Xp;break;case 4:a=Jp;break;default:a=Xo}r=a.bind(null,t,r,e),a=void 0,!ro||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Aa(e,t,r,n,a){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(i===4)for(i=n.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;i=i.return}for(;c!==null;){if(i=er(c),i===null)return;if(l=i.tag,l===5||l===6){n=o=i;continue e}c=c.parentNode}}n=n.return}Kc(function(){var u=o,p=Ho(r),h=[];e:{var x=bu.get(e);if(x!==void 0){var v=qo,y=e;switch(e){case"keypress":if(ds(r)===0)break e;case"keydown":case"keyup":v=ff;break;case"focusin":y="focus",v=ga;break;case"focusout":y="blur",v=ga;break;case"beforeblur":case"afterblur":v=ga;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=ef;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xf;break;case yu:case Eu:case Su:v=nf;break;case Nu:v=vf;break;case"scroll":v=qp;break;case"wheel":v=Ef;break;case"copy":case"cut":case"paste":v=af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ll}var E=(t&4)!==0,A=!E&&e==="scroll",f=E?x!==null?x+"Capture":null:x;E=[];for(var d=u,m;d!==null;){m=d;var S=m.stateNode;if(m.tag===5&&S!==null&&(m=S,f!==null&&(S=vn(d,f),S!=null&&E.push(Tn(d,S,m)))),A)break;d=d.return}0<E.length&&(x=new v(x,y,null,r,p),h.push({event:x,listeners:E}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",x&&r!==eo&&(y=r.relatedTarget||r.fromElement)&&(er(y)||y[At]))break e;if((v||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,v?(y=r.relatedTarget||r.toElement,v=u,y=y?er(y):null,y!==null&&(A=dr(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(E=ol,S="onMouseLeave",f="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(E=ll,S="onPointerLeave",f="onPointerEnter",d="pointer"),A=v==null?x:yr(v),m=y==null?x:yr(y),x=new E(S,d+"leave",v,r,p),x.target=A,x.relatedTarget=m,S=null,er(p)===u&&(E=new E(f,d+"enter",y,r,p),E.target=m,E.relatedTarget=A,S=E),A=S,v&&y)t:{for(E=v,f=y,d=0,m=E;m;m=fr(m))d++;for(m=0,S=f;S;S=fr(S))m++;for(;0<d-m;)E=fr(E),d--;for(;0<m-d;)f=fr(f),m--;for(;d--;){if(E===f||f!==null&&E===f.alternate)break t;E=fr(E),f=fr(f)}E=null}else E=null;v!==null&&yl(h,x,v,E,!1),y!==null&&A!==null&&yl(h,A,y,E,!0)}}e:{if(x=u?yr(u):window,v=x.nodeName&&x.nodeName.toLowerCase(),v==="select"||v==="input"&&x.type==="file")var g=_f;else if(dl(x))if(hu)g=jf;else{g=wf;var C=If}else(v=x.nodeName)&&v.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(g=Rf);if(g&&(g=g(e,u))){fu(h,g,r,p);break e}C&&C(e,x,u),e==="focusout"&&(C=x._wrapperState)&&C.controlled&&x.type==="number"&&Qa(x,"number",x.value)}switch(C=u?yr(u):window,e){case"focusin":(dl(C)||C.contentEditable==="true")&&(gr=C,io=u,dn=null);break;case"focusout":dn=io=gr=null;break;case"mousedown":lo=!0;break;case"contextmenu":case"mouseup":case"dragend":lo=!1,xl(h,r,p);break;case"selectionchange":if(Df)break;case"keydown":case"keyup":xl(h,r,p)}var N;if(ei)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else xr?du(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(uu&&r.locale!=="ko"&&(xr||T!=="onCompositionStart"?T==="onCompositionEnd"&&xr&&(N=cu()):(kt=p,Jo="value"in kt?kt.value:kt.textContent,xr=!0)),C=Is(u,T),0<C.length&&(T=new il(T,e,null,r,p),h.push({event:T,listeners:C}),N?T.data=N:(N=pu(r),N!==null&&(T.data=N)))),(N=Nf?bf(e,r):Af(e,r))&&(u=Is(u,"onBeforeInput"),0<u.length&&(p=new il("onBeforeInput","beforeinput",null,r,p),h.push({event:p,listeners:u}),p.data=N))}Au(h,t)})}function Tn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Is(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=vn(e,r),o!=null&&n.unshift(Tn(e,o,a)),o=vn(e,t),o!=null&&n.push(Tn(e,o,a))),e=e.return}return n}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yl(e,t,r,n,a){for(var o=t._reactName,i=[];r!==null&&r!==n;){var c=r,l=c.alternate,u=c.stateNode;if(l!==null&&l===n)break;c.tag===5&&u!==null&&(c=u,a?(l=vn(r,o),l!=null&&i.unshift(Tn(r,l,c))):a||(l=vn(r,o),l!=null&&i.push(Tn(r,l,c)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var Uf=/\r\n?/g,Ff=/\u0000|\uFFFD/g;function El(e){return(typeof e=="string"?e:""+e).replace(Uf,`
`).replace(Ff,"")}function Qn(e,t,r){if(t=El(t),El(e)!==t&&r)throw Error(z(425))}function ws(){}var co=null,uo=null;function po(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fo=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,Sl=typeof Promise=="function"?Promise:void 0,zf=typeof queueMicrotask=="function"?queueMicrotask:typeof Sl<"u"?function(e){return Sl.resolve(null).then(e).catch(Vf)}:fo;function Vf(e){setTimeout(function(){throw e})}function Ta(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Sn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Sn(t)}function zt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Vr=Math.random().toString(36).slice(2),dt="__reactFiber$"+Vr,Cn="__reactProps$"+Vr,At="__reactContainer$"+Vr,ho="__reactEvents$"+Vr,$f="__reactListeners$"+Vr,Gf="__reactHandles$"+Vr;function er(e){var t=e[dt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[At]||r[dt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Nl(e);e!==null;){if(r=e[dt])return r;e=Nl(e)}return t}e=r,r=e.parentNode}return null}function Pn(e){return e=e[dt]||e[At],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function Xs(e){return e[Cn]||null}var mo=[],Er=-1;function Qt(e){return{current:e}}function ae(e){0>Er||(e.current=mo[Er],mo[Er]=null,Er--)}function re(e,t){Er++,mo[Er]=e.current,e.current=t}var Wt={},_e=Qt(Wt),Pe=Qt(!1),ar=Wt;function Dr(e,t){var r=e.type.contextTypes;if(!r)return Wt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Me(e){return e=e.childContextTypes,e!=null}function Rs(){ae(Pe),ae(_e)}function bl(e,t,r){if(_e.current!==Wt)throw Error(z(168));re(_e,t),re(Pe,r)}function Cu(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(z(108,_p(e)||"Unknown",a));return de({},r,n)}function js(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wt,ar=_e.current,re(_e,e),re(Pe,Pe.current),!0}function Al(e,t,r){var n=e.stateNode;if(!n)throw Error(z(169));r?(e=Cu(e,t,ar),n.__reactInternalMemoizedMergedChildContext=e,ae(Pe),ae(_e),re(_e,e)):ae(Pe),re(Pe,r)}var vt=null,Js=!1,Ca=!1;function _u(e){vt===null?vt=[e]:vt.push(e)}function Yf(e){Js=!0,_u(e)}function Xt(){if(!Ca&&vt!==null){Ca=!0;var e=0,t=q;try{var r=vt;for(q=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}vt=null,Js=!1}catch(a){throw vt!==null&&(vt=vt.slice(e+1)),qc(Wo,Xt),a}finally{q=t,Ca=!1}}return null}var Sr=[],Nr=0,Os=null,Ls=0,We=[],Ke=0,or=null,yt=1,Et="";function qt(e,t){Sr[Nr++]=Ls,Sr[Nr++]=Os,Os=e,Ls=t}function Iu(e,t,r){We[Ke++]=yt,We[Ke++]=Et,We[Ke++]=or,or=e;var n=yt;e=Et;var a=32-nt(n)-1;n&=~(1<<a),r+=1;var o=32-nt(t)+a;if(30<o){var i=a-a%5;o=(n&(1<<i)-1).toString(32),n>>=i,a-=i,yt=1<<32-nt(t)+a|r<<a|n,Et=o+e}else yt=1<<o|r<<a|n,Et=e}function ri(e){e.return!==null&&(qt(e,1),Iu(e,1,0))}function ni(e){for(;e===Os;)Os=Sr[--Nr],Sr[Nr]=null,Ls=Sr[--Nr],Sr[Nr]=null;for(;e===or;)or=We[--Ke],We[Ke]=null,Et=We[--Ke],We[Ke]=null,yt=We[--Ke],We[Ke]=null}var Ve=null,ze=null,oe=!1,rt=null;function wu(e,t){var r=Qe(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Tl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ve=e,ze=zt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ve=e,ze=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=or!==null?{id:yt,overflow:Et}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qe(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ve=e,ze=null,!0):!1;default:return!1}}function xo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function go(e){if(oe){var t=ze;if(t){var r=t;if(!Tl(e,t)){if(xo(e))throw Error(z(418));t=zt(r.nextSibling);var n=Ve;t&&Tl(e,t)?wu(n,r):(e.flags=e.flags&-4097|2,oe=!1,Ve=e)}}else{if(xo(e))throw Error(z(418));e.flags=e.flags&-4097|2,oe=!1,Ve=e}}}function Cl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ve=e}function Xn(e){if(e!==Ve)return!1;if(!oe)return Cl(e),oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!po(e.type,e.memoizedProps)),t&&(t=ze)){if(xo(e))throw Ru(),Error(z(418));for(;t;)wu(e,t),t=zt(t.nextSibling)}if(Cl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ze=zt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ze=null}}else ze=Ve?zt(e.stateNode.nextSibling):null;return!0}function Ru(){for(var e=ze;e;)e=zt(e.nextSibling)}function kr(){ze=Ve=null,oe=!1}function si(e){rt===null?rt=[e]:rt.push(e)}var Hf=_t.ReactCurrentBatchConfig;function Qr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(z(309));var n=r.stateNode}if(!n)throw Error(z(147,e));var a=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var c=a.refs;i===null?delete c[o]:c[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!r._owner)throw Error(z(290,e))}return e}function Jn(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _l(e){var t=e._init;return t(e._payload)}function ju(e){function t(f,d){if(e){var m=f.deletions;m===null?(f.deletions=[d],f.flags|=16):m.push(d)}}function r(f,d){if(!e)return null;for(;d!==null;)t(f,d),d=d.sibling;return null}function n(f,d){for(f=new Map;d!==null;)d.key!==null?f.set(d.key,d):f.set(d.index,d),d=d.sibling;return f}function a(f,d){return f=Yt(f,d),f.index=0,f.sibling=null,f}function o(f,d,m){return f.index=m,e?(m=f.alternate,m!==null?(m=m.index,m<d?(f.flags|=2,d):m):(f.flags|=2,d)):(f.flags|=1048576,d)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function c(f,d,m,S){return d===null||d.tag!==6?(d=La(m,f.mode,S),d.return=f,d):(d=a(d,m),d.return=f,d)}function l(f,d,m,S){var g=m.type;return g===mr?p(f,d,m.props.children,S,m.key):d!==null&&(d.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Rt&&_l(g)===d.type)?(S=a(d,m.props),S.ref=Qr(f,d,m),S.return=f,S):(S=vs(m.type,m.key,m.props,null,f.mode,S),S.ref=Qr(f,d,m),S.return=f,S)}function u(f,d,m,S){return d===null||d.tag!==4||d.stateNode.containerInfo!==m.containerInfo||d.stateNode.implementation!==m.implementation?(d=Da(m,f.mode,S),d.return=f,d):(d=a(d,m.children||[]),d.return=f,d)}function p(f,d,m,S,g){return d===null||d.tag!==7?(d=sr(m,f.mode,S,g),d.return=f,d):(d=a(d,m),d.return=f,d)}function h(f,d,m){if(typeof d=="string"&&d!==""||typeof d=="number")return d=La(""+d,f.mode,m),d.return=f,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Bn:return m=vs(d.type,d.key,d.props,null,f.mode,m),m.ref=Qr(f,null,d),m.return=f,m;case hr:return d=Da(d,f.mode,m),d.return=f,d;case Rt:var S=d._init;return h(f,S(d._payload),m)}if(rn(d)||Gr(d))return d=sr(d,f.mode,m,null),d.return=f,d;Jn(f,d)}return null}function x(f,d,m,S){var g=d!==null?d.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return g!==null?null:c(f,d,""+m,S);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Bn:return m.key===g?l(f,d,m,S):null;case hr:return m.key===g?u(f,d,m,S):null;case Rt:return g=m._init,x(f,d,g(m._payload),S)}if(rn(m)||Gr(m))return g!==null?null:p(f,d,m,S,null);Jn(f,m)}return null}function v(f,d,m,S,g){if(typeof S=="string"&&S!==""||typeof S=="number")return f=f.get(m)||null,c(d,f,""+S,g);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bn:return f=f.get(S.key===null?m:S.key)||null,l(d,f,S,g);case hr:return f=f.get(S.key===null?m:S.key)||null,u(d,f,S,g);case Rt:var C=S._init;return v(f,d,m,C(S._payload),g)}if(rn(S)||Gr(S))return f=f.get(m)||null,p(d,f,S,g,null);Jn(d,S)}return null}function y(f,d,m,S){for(var g=null,C=null,N=d,T=d=0,O=null;N!==null&&T<m.length;T++){N.index>T?(O=N,N=null):O=N.sibling;var w=x(f,N,m[T],S);if(w===null){N===null&&(N=O);break}e&&N&&w.alternate===null&&t(f,N),d=o(w,d,T),C===null?g=w:C.sibling=w,C=w,N=O}if(T===m.length)return r(f,N),oe&&qt(f,T),g;if(N===null){for(;T<m.length;T++)N=h(f,m[T],S),N!==null&&(d=o(N,d,T),C===null?g=N:C.sibling=N,C=N);return oe&&qt(f,T),g}for(N=n(f,N);T<m.length;T++)O=v(N,f,T,m[T],S),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?T:O.key),d=o(O,d,T),C===null?g=O:C.sibling=O,C=O);return e&&N.forEach(function(B){return t(f,B)}),oe&&qt(f,T),g}function E(f,d,m,S){var g=Gr(m);if(typeof g!="function")throw Error(z(150));if(m=g.call(m),m==null)throw Error(z(151));for(var C=g=null,N=d,T=d=0,O=null,w=m.next();N!==null&&!w.done;T++,w=m.next()){N.index>T?(O=N,N=null):O=N.sibling;var B=x(f,N,w.value,S);if(B===null){N===null&&(N=O);break}e&&N&&B.alternate===null&&t(f,N),d=o(B,d,T),C===null?g=B:C.sibling=B,C=B,N=O}if(w.done)return r(f,N),oe&&qt(f,T),g;if(N===null){for(;!w.done;T++,w=m.next())w=h(f,w.value,S),w!==null&&(d=o(w,d,T),C===null?g=w:C.sibling=w,C=w);return oe&&qt(f,T),g}for(N=n(f,N);!w.done;T++,w=m.next())w=v(N,f,T,w.value,S),w!==null&&(e&&w.alternate!==null&&N.delete(w.key===null?T:w.key),d=o(w,d,T),C===null?g=w:C.sibling=w,C=w);return e&&N.forEach(function(D){return t(f,D)}),oe&&qt(f,T),g}function A(f,d,m,S){if(typeof m=="object"&&m!==null&&m.type===mr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Bn:e:{for(var g=m.key,C=d;C!==null;){if(C.key===g){if(g=m.type,g===mr){if(C.tag===7){r(f,C.sibling),d=a(C,m.props.children),d.return=f,f=d;break e}}else if(C.elementType===g||typeof g=="object"&&g!==null&&g.$$typeof===Rt&&_l(g)===C.type){r(f,C.sibling),d=a(C,m.props),d.ref=Qr(f,C,m),d.return=f,f=d;break e}r(f,C);break}else t(f,C);C=C.sibling}m.type===mr?(d=sr(m.props.children,f.mode,S,m.key),d.return=f,f=d):(S=vs(m.type,m.key,m.props,null,f.mode,S),S.ref=Qr(f,d,m),S.return=f,f=S)}return i(f);case hr:e:{for(C=m.key;d!==null;){if(d.key===C)if(d.tag===4&&d.stateNode.containerInfo===m.containerInfo&&d.stateNode.implementation===m.implementation){r(f,d.sibling),d=a(d,m.children||[]),d.return=f,f=d;break e}else{r(f,d);break}else t(f,d);d=d.sibling}d=Da(m,f.mode,S),d.return=f,f=d}return i(f);case Rt:return C=m._init,A(f,d,C(m._payload),S)}if(rn(m))return y(f,d,m,S);if(Gr(m))return E(f,d,m,S);Jn(f,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,d!==null&&d.tag===6?(r(f,d.sibling),d=a(d,m),d.return=f,f=d):(r(f,d),d=La(m,f.mode,S),d.return=f,f=d),i(f)):r(f,d)}return A}var Pr=ju(!0),Ou=ju(!1),Ds=Qt(null),ks=null,br=null,ai=null;function oi(){ai=br=ks=null}function ii(e){var t=Ds.current;ae(Ds),e._currentValue=t}function vo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Rr(e,t){ks=e,ai=br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ke=!0),e.firstContext=null)}function Je(e){var t=e._currentValue;if(ai!==e)if(e={context:e,memoizedValue:t,next:null},br===null){if(ks===null)throw Error(z(308));br=e,ks.dependencies={lanes:0,firstContext:e}}else br=br.next=e;return t}var tr=null;function li(e){tr===null?tr=[e]:tr.push(e)}function Lu(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,li(t)):(r.next=a.next,a.next=r),t.interleaved=r,Tt(e,n)}function Tt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var jt=!1;function ci(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Du(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function St(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Tt(e,r)}return a=n.interleaved,a===null?(t.next=t,li(n)):(t.next=a.next,a.next=t),n.interleaved=t,Tt(e,r)}function ps(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ko(e,r)}}function Il(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=i:o=o.next=i,r=r.next}while(r!==null);o===null?a=o=t:o=o.next=t}else a=o=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ps(e,t,r,n){var a=e.updateQueue;jt=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var l=c,u=l.next;l.next=null,i===null?o=u:i.next=u,i=l;var p=e.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==i&&(c===null?p.firstBaseUpdate=u:c.next=u,p.lastBaseUpdate=l))}if(o!==null){var h=a.baseState;i=0,p=u=l=null,c=o;do{var x=c.lane,v=c.eventTime;if((n&x)===x){p!==null&&(p=p.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var y=e,E=c;switch(x=t,v=r,E.tag){case 1:if(y=E.payload,typeof y=="function"){h=y.call(v,h,x);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,x=typeof y=="function"?y.call(v,h,x):y,x==null)break e;h=de({},h,x);break e;case 2:jt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[c]:x.push(c))}else v={eventTime:v,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(u=p=v,l=h):p=p.next=v,i|=x;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;x=c,c=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(p===null&&(l=h),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=p,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);lr|=i,e.lanes=i,e.memoizedState=h}}function wl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(z(191,a));a.call(n)}}}var Mn={},ft=Qt(Mn),_n=Qt(Mn),In=Qt(Mn);function rr(e){if(e===Mn)throw Error(z(174));return e}function ui(e,t){switch(re(In,t),re(_n,e),re(ft,Mn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ja(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ja(t,e)}ae(ft),re(ft,t)}function Mr(){ae(ft),ae(_n),ae(In)}function ku(e){rr(In.current);var t=rr(ft.current),r=Ja(t,e.type);t!==r&&(re(_n,e),re(ft,r))}function di(e){_n.current===e&&(ae(ft),ae(_n))}var le=Qt(0);function Ms(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _a=[];function pi(){for(var e=0;e<_a.length;e++)_a[e]._workInProgressVersionPrimary=null;_a.length=0}var fs=_t.ReactCurrentDispatcher,Ia=_t.ReactCurrentBatchConfig,ir=0,ue=null,xe=null,ve=null,Us=!1,pn=!1,wn=0,Wf=0;function Ae(){throw Error(z(321))}function fi(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!at(e[r],t[r]))return!1;return!0}function hi(e,t,r,n,a,o){if(ir=o,ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fs.current=e===null||e.memoizedState===null?Jf:qf,e=r(n,a),pn){o=0;do{if(pn=!1,wn=0,25<=o)throw Error(z(301));o+=1,ve=xe=null,t.updateQueue=null,fs.current=Zf,e=r(n,a)}while(pn)}if(fs.current=Fs,t=xe!==null&&xe.next!==null,ir=0,ve=xe=ue=null,Us=!1,t)throw Error(z(300));return e}function mi(){var e=wn!==0;return wn=0,e}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?ue.memoizedState=ve=e:ve=ve.next=e,ve}function qe(){if(xe===null){var e=ue.alternate;e=e!==null?e.memoizedState:null}else e=xe.next;var t=ve===null?ue.memoizedState:ve.next;if(t!==null)ve=t,xe=e;else{if(e===null)throw Error(z(310));xe=e,e={memoizedState:xe.memoizedState,baseState:xe.baseState,baseQueue:xe.baseQueue,queue:xe.queue,next:null},ve===null?ue.memoizedState=ve=e:ve=ve.next=e}return ve}function Rn(e,t){return typeof t=="function"?t(e):t}function wa(e){var t=qe(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=xe,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var i=a.next;a.next=o.next,o.next=i}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var c=i=null,l=null,u=o;do{var p=u.lane;if((ir&p)===p)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(c=l=h,i=n):l=l.next=h,ue.lanes|=p,lr|=p}u=u.next}while(u!==null&&u!==o);l===null?i=n:l.next=c,at(n,t.memoizedState)||(ke=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do o=a.lane,ue.lanes|=o,lr|=o,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ra(e){var t=qe(),r=t.queue;if(r===null)throw Error(z(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,o=t.memoizedState;if(a!==null){r.pending=null;var i=a=a.next;do o=e(o,i.action),i=i.next;while(i!==a);at(o,t.memoizedState)||(ke=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Pu(){}function Mu(e,t){var r=ue,n=qe(),a=t(),o=!at(n.memoizedState,a);if(o&&(n.memoizedState=a,ke=!0),n=n.queue,xi(Bu.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||ve!==null&&ve.memoizedState.tag&1){if(r.flags|=2048,jn(9,Fu.bind(null,r,n,a,t),void 0,null),ye===null)throw Error(z(349));ir&30||Uu(r,t,a)}return a}function Uu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Fu(e,t,r,n){t.value=r,t.getSnapshot=n,zu(t)&&Vu(e)}function Bu(e,t,r){return r(function(){zu(t)&&Vu(e)})}function zu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!at(e,r)}catch{return!0}}function Vu(e){var t=Tt(e,1);t!==null&&st(t,e,1,-1)}function Rl(e){var t=ct();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},t.queue=e,e=e.dispatch=Xf.bind(null,ue,e),[t.memoizedState,e]}function jn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ue.updateQueue,t===null?(t={lastEffect:null,stores:null},ue.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function $u(){return qe().memoizedState}function hs(e,t,r,n){var a=ct();ue.flags|=e,a.memoizedState=jn(1|t,r,void 0,n===void 0?null:n)}function qs(e,t,r,n){var a=qe();n=n===void 0?null:n;var o=void 0;if(xe!==null){var i=xe.memoizedState;if(o=i.destroy,n!==null&&fi(n,i.deps)){a.memoizedState=jn(t,r,o,n);return}}ue.flags|=e,a.memoizedState=jn(1|t,r,o,n)}function jl(e,t){return hs(8390656,8,e,t)}function xi(e,t){return qs(2048,8,e,t)}function Gu(e,t){return qs(4,2,e,t)}function Yu(e,t){return qs(4,4,e,t)}function Hu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wu(e,t,r){return r=r!=null?r.concat([e]):null,qs(4,4,Hu.bind(null,t,e),r)}function gi(){}function Ku(e,t){var r=qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qu(e,t){var r=qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xu(e,t,r){return ir&21?(at(r,t)||(r=tu(),ue.lanes|=r,lr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ke=!0),e.memoizedState=r)}function Kf(e,t){var r=q;q=r!==0&&4>r?r:4,e(!0);var n=Ia.transition;Ia.transition={};try{e(!1),t()}finally{q=r,Ia.transition=n}}function Ju(){return qe().memoizedState}function Qf(e,t,r){var n=Gt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qu(e))Zu(t,r);else if(r=Lu(e,t,r,n),r!==null){var a=we();st(r,e,n,a),ed(r,t,n)}}function Xf(e,t,r){var n=Gt(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qu(e))Zu(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,c=o(i,r);if(a.hasEagerState=!0,a.eagerState=c,at(c,i)){var l=t.interleaved;l===null?(a.next=a,li(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=Lu(e,t,a,n),r!==null&&(a=we(),st(r,e,n,a),ed(r,t,n))}}function qu(e){var t=e.alternate;return e===ue||t!==null&&t===ue}function Zu(e,t){pn=Us=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ed(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ko(e,r)}}var Fs={readContext:Je,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},Jf={readContext:Je,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:Je,useEffect:jl,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,hs(4194308,4,Hu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return hs(4,2,e,t)},useMemo:function(e,t){var r=ct();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ct();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Qf.bind(null,ue,e),[n.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:Rl,useDebugValue:gi,useDeferredValue:function(e){return ct().memoizedState=e},useTransition:function(){var e=Rl(!1),t=e[0];return e=Kf.bind(null,e[1]),ct().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ue,a=ct();if(oe){if(r===void 0)throw Error(z(407));r=r()}else{if(r=t(),ye===null)throw Error(z(349));ir&30||Uu(n,t,r)}a.memoizedState=r;var o={value:r,getSnapshot:t};return a.queue=o,jl(Bu.bind(null,n,o,e),[e]),n.flags|=2048,jn(9,Fu.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=ct(),t=ye.identifierPrefix;if(oe){var r=Et,n=yt;r=(n&~(1<<32-nt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=wn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Wf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qf={readContext:Je,useCallback:Ku,useContext:Je,useEffect:xi,useImperativeHandle:Wu,useInsertionEffect:Gu,useLayoutEffect:Yu,useMemo:Qu,useReducer:wa,useRef:$u,useState:function(){return wa(Rn)},useDebugValue:gi,useDeferredValue:function(e){var t=qe();return Xu(t,xe.memoizedState,e)},useTransition:function(){var e=wa(Rn)[0],t=qe().memoizedState;return[e,t]},useMutableSource:Pu,useSyncExternalStore:Mu,useId:Ju,unstable_isNewReconciler:!1},Zf={readContext:Je,useCallback:Ku,useContext:Je,useEffect:xi,useImperativeHandle:Wu,useInsertionEffect:Gu,useLayoutEffect:Yu,useMemo:Qu,useReducer:Ra,useRef:$u,useState:function(){return Ra(Rn)},useDebugValue:gi,useDeferredValue:function(e){var t=qe();return xe===null?t.memoizedState=e:Xu(t,xe.memoizedState,e)},useTransition:function(){var e=Ra(Rn)[0],t=qe().memoizedState;return[e,t]},useMutableSource:Pu,useSyncExternalStore:Mu,useId:Ju,unstable_isNewReconciler:!1};function et(e,t){if(e&&e.defaultProps){t=de({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function yo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:de({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zs={isMounted:function(e){return(e=e._reactInternals)?dr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=we(),a=Gt(e),o=St(n,a);o.payload=t,r!=null&&(o.callback=r),t=Vt(e,o,a),t!==null&&(st(t,e,a,n),ps(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=we(),a=Gt(e),o=St(n,a);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Vt(e,o,a),t!==null&&(st(t,e,a,n),ps(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=we(),n=Gt(e),a=St(r,n);a.tag=2,t!=null&&(a.callback=t),t=Vt(e,a,n),t!==null&&(st(t,e,n,r),ps(t,e,n))}};function Ol(e,t,r,n,a,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,i):t.prototype&&t.prototype.isPureReactComponent?!bn(r,n)||!bn(a,o):!0}function td(e,t,r){var n=!1,a=Wt,o=t.contextType;return typeof o=="object"&&o!==null?o=Je(o):(a=Me(t)?ar:_e.current,n=t.contextTypes,o=(n=n!=null)?Dr(e,a):Wt),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zs,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ll(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Zs.enqueueReplaceState(t,t.state,null)}function Eo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},ci(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=Je(o):(o=Me(t)?ar:_e.current,a.context=Dr(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(yo(e,t,o,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Zs.enqueueReplaceState(a,a.state,null),Ps(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ur(e,t){try{var r="",n=t;do r+=Cp(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function ja(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function So(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var eh=typeof WeakMap=="function"?WeakMap:Map;function rd(e,t,r){r=St(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){zs||(zs=!0,jo=n),So(e,t)},r}function nd(e,t,r){r=St(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){So(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){So(e,t),typeof n!="function"&&($t===null?$t=new Set([this]):$t.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Dl(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new eh;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=hh.bind(null,e,t,r),t.then(e,e))}function kl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pl(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=St(-1,1),t.tag=2,Vt(r,t,1))),r.lanes|=1),e)}var th=_t.ReactCurrentOwner,ke=!1;function Ie(e,t,r,n){t.child=e===null?Ou(t,null,r,n):Pr(t,e.child,r,n)}function Ml(e,t,r,n,a){r=r.render;var o=t.ref;return Rr(t,a),n=hi(e,t,r,n,o,a),r=mi(),e!==null&&!ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ct(e,t,a)):(oe&&r&&ri(t),t.flags|=1,Ie(e,t,n,a),t.child)}function Ul(e,t,r,n,a){if(e===null){var o=r.type;return typeof o=="function"&&!Ti(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,sd(e,t,o,n,a)):(e=vs(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var i=o.memoizedProps;if(r=r.compare,r=r!==null?r:bn,r(i,n)&&e.ref===t.ref)return Ct(e,t,a)}return t.flags|=1,e=Yt(o,n),e.ref=t.ref,e.return=t,t.child=e}function sd(e,t,r,n,a){if(e!==null){var o=e.memoizedProps;if(bn(o,n)&&e.ref===t.ref)if(ke=!1,t.pendingProps=n=o,(e.lanes&a)!==0)e.flags&131072&&(ke=!0);else return t.lanes=e.lanes,Ct(e,t,a)}return No(e,t,r,n,a)}function ad(e,t,r){var n=t.pendingProps,a=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Tr,Be),Be|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,re(Tr,Be),Be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,re(Tr,Be),Be|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,re(Tr,Be),Be|=n;return Ie(e,t,a,r),t.child}function od(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,r,n,a){var o=Me(r)?ar:_e.current;return o=Dr(t,o),Rr(t,a),r=hi(e,t,r,n,o,a),n=mi(),e!==null&&!ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ct(e,t,a)):(oe&&n&&ri(t),t.flags|=1,Ie(e,t,r,a),t.child)}function Fl(e,t,r,n,a){if(Me(r)){var o=!0;js(t)}else o=!1;if(Rr(t,a),t.stateNode===null)ms(e,t),td(t,r,n),Eo(t,r,n,a),n=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var l=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Je(u):(u=Me(r)?ar:_e.current,u=Dr(t,u));var p=r.getDerivedStateFromProps,h=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==n||l!==u)&&Ll(t,i,n,u),jt=!1;var x=t.memoizedState;i.state=x,Ps(t,n,i,a),l=t.memoizedState,c!==n||x!==l||Pe.current||jt?(typeof p=="function"&&(yo(t,r,p,n),l=t.memoizedState),(c=jt||Ol(t,r,c,n,x,l,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),i.props=n,i.state=l,i.context=u,n=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Du(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:et(t.type,c),i.props=u,h=t.pendingProps,x=i.context,l=r.contextType,typeof l=="object"&&l!==null?l=Je(l):(l=Me(r)?ar:_e.current,l=Dr(t,l));var v=r.getDerivedStateFromProps;(p=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==h||x!==l)&&Ll(t,i,n,l),jt=!1,x=t.memoizedState,i.state=x,Ps(t,n,i,a);var y=t.memoizedState;c!==h||x!==y||Pe.current||jt?(typeof v=="function"&&(yo(t,r,v,n),y=t.memoizedState),(u=jt||Ol(t,r,u,n,x,y,l)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,y,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,y,l)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),i.props=n,i.state=y,i.context=l,n=u):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),n=!1)}return bo(e,t,r,n,o,a)}function bo(e,t,r,n,a,o){od(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return a&&Al(t,r,!1),Ct(e,t,o);n=t.stateNode,th.current=t;var c=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Pr(t,e.child,null,o),t.child=Pr(t,null,c,o)):Ie(e,t,c,o),t.memoizedState=n.state,a&&Al(t,r,!0),t.child}function id(e){var t=e.stateNode;t.pendingContext?bl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bl(e,t.context,!1),ui(e,t.containerInfo)}function Bl(e,t,r,n,a){return kr(),si(a),t.flags|=256,Ie(e,t,r,n),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0};function To(e){return{baseLanes:e,cachePool:null,transitions:null}}function ld(e,t,r){var n=t.pendingProps,a=le.current,o=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),re(le,a&1),e===null)return go(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=ra(i,n,0,null),e=sr(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=To(r),t.memoizedState=Ao,e):vi(t,i));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return rh(e,t,i,n,c,a,r);if(o){o=n.fallback,i=t.mode,a=e.child,c=a.sibling;var l={mode:"hidden",children:n.children};return!(i&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Yt(a,l),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?o=Yt(c,o):(o=sr(o,i,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=e.child.memoizedState,i=i===null?To(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=Ao,n}return o=e.child,e=o.sibling,n=Yt(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function vi(e,t){return t=ra({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qn(e,t,r,n){return n!==null&&si(n),Pr(t,e.child,null,r),e=vi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rh(e,t,r,n,a,o,i){if(r)return t.flags&256?(t.flags&=-257,n=ja(Error(z(422))),qn(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,a=t.mode,n=ra({mode:"visible",children:n.children},a,0,null),o=sr(o,a,i,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Pr(t,e.child,null,i),t.child.memoizedState=To(i),t.memoizedState=Ao,o);if(!(t.mode&1))return qn(e,t,i,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,o=Error(z(419)),n=ja(o,n,void 0),qn(e,t,i,n)}if(c=(i&e.childLanes)!==0,ke||c){if(n=ye,n!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|i)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Tt(e,a),st(n,e,a,-1))}return Ai(),n=ja(Error(z(421))),qn(e,t,i,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=mh.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ze=zt(a.nextSibling),Ve=t,oe=!0,rt=null,e!==null&&(We[Ke++]=yt,We[Ke++]=Et,We[Ke++]=or,yt=e.id,Et=e.overflow,or=t),t=vi(t,n.children),t.flags|=4096,t)}function zl(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),vo(e.return,t,r)}function Oa(e,t,r,n,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function cd(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(Ie(e,t,n.children,r),n=le.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zl(e,r,t);else if(e.tag===19)zl(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(re(le,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ms(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Oa(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ms(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Oa(t,!0,r,null,o);break;case"together":Oa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ms(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ct(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),lr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,r=Yt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Yt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function nh(e,t,r){switch(t.tag){case 3:id(t),kr();break;case 5:ku(t);break;case 1:Me(t.type)&&js(t);break;case 4:ui(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;re(Ds,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(re(le,le.current&1),t.flags|=128,null):r&t.child.childLanes?ld(e,t,r):(re(le,le.current&1),e=Ct(e,t,r),e!==null?e.sibling:null);re(le,le.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return cd(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),re(le,le.current),n)break;return null;case 22:case 23:return t.lanes=0,ad(e,t,r)}return Ct(e,t,r)}var ud,Co,dd,pd;ud=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Co=function(){};dd=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,rr(ft.current);var o=null;switch(r){case"input":a=Wa(e,a),n=Wa(e,n),o=[];break;case"select":a=de({},a,{value:void 0}),n=de({},n,{value:void 0}),o=[];break;case"textarea":a=Xa(e,a),n=Xa(e,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ws)}qa(r,n);var i;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xn.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(c=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(l!=null||c!=null))if(u==="style")if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(o||(o=[]),o.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,c=c?c.__html:void 0,l!=null&&c!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xn.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ne("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};pd=function(e,t,r,n){r!==n&&(t.flags|=4)};function Xr(e,t){if(!oe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function sh(e,t,r){var n=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return Me(t.type)&&Rs(),Te(t),null;case 3:return n=t.stateNode,Mr(),ae(Pe),ae(_e),pi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,rt!==null&&(Do(rt),rt=null))),Co(e,t),Te(t),null;case 5:di(t);var a=rr(In.current);if(r=t.type,e!==null&&t.stateNode!=null)dd(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(z(166));return Te(t),null}if(e=rr(ft.current),Xn(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[dt]=t,n[Cn]=o,e=(t.mode&1)!==0,r){case"dialog":ne("cancel",n),ne("close",n);break;case"iframe":case"object":case"embed":ne("load",n);break;case"video":case"audio":for(a=0;a<sn.length;a++)ne(sn[a],n);break;case"source":ne("error",n);break;case"img":case"image":case"link":ne("error",n),ne("load",n);break;case"details":ne("toggle",n);break;case"input":Xi(n,o),ne("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},ne("invalid",n);break;case"textarea":qi(n,o),ne("invalid",n)}qa(r,o),a=null;for(var i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="children"?typeof c=="string"?n.textContent!==c&&(o.suppressHydrationWarning!==!0&&Qn(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Qn(n.textContent,c,e),a=["children",""+c]):xn.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&ne("scroll",n)}switch(r){case"input":zn(n),Ji(n,o,!0);break;case"textarea":zn(n),Zi(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=ws)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[dt]=t,e[Cn]=n,ud(e,t,!1,!1),t.stateNode=e;e:{switch(i=Za(r,n),r){case"dialog":ne("cancel",e),ne("close",e),a=n;break;case"iframe":case"object":case"embed":ne("load",e),a=n;break;case"video":case"audio":for(a=0;a<sn.length;a++)ne(sn[a],e);a=n;break;case"source":ne("error",e),a=n;break;case"img":case"image":case"link":ne("error",e),ne("load",e),a=n;break;case"details":ne("toggle",e),a=n;break;case"input":Xi(e,n),a=Wa(e,n),ne("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=de({},n,{value:void 0}),ne("invalid",e);break;case"textarea":qi(e,n),a=Xa(e,n),ne("invalid",e);break;default:a=n}qa(r,a),c=a;for(o in c)if(c.hasOwnProperty(o)){var l=c[o];o==="style"?$c(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&zc(e,l)):o==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&gn(e,l):typeof l=="number"&&gn(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xn.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ne("scroll",e):l!=null&&Vo(e,o,l,i))}switch(r){case"input":zn(e),Ji(e,n,!1);break;case"textarea":zn(e),Zi(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ht(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Cr(e,!!n.multiple,o,!1):n.defaultValue!=null&&Cr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ws)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Te(t),null;case 6:if(e&&t.stateNode!=null)pd(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(z(166));if(r=rr(In.current),rr(ft.current),Xn(t)){if(n=t.stateNode,r=t.memoizedProps,n[dt]=t,(o=n.nodeValue!==r)&&(e=Ve,e!==null))switch(e.tag){case 3:Qn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qn(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[dt]=t,t.stateNode=n}return Te(t),null;case 13:if(ae(le),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oe&&ze!==null&&t.mode&1&&!(t.flags&128))Ru(),kr(),t.flags|=98560,o=!1;else if(o=Xn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[dt]=t}else kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Te(t),o=!1}else rt!==null&&(Do(rt),rt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||le.current&1?ge===0&&(ge=3):Ai())),t.updateQueue!==null&&(t.flags|=4),Te(t),null);case 4:return Mr(),Co(e,t),e===null&&An(t.stateNode.containerInfo),Te(t),null;case 10:return ii(t.type._context),Te(t),null;case 17:return Me(t.type)&&Rs(),Te(t),null;case 19:if(ae(le),o=t.memoizedState,o===null)return Te(t),null;if(n=(t.flags&128)!==0,i=o.rendering,i===null)if(n)Xr(o,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ms(e),i!==null){for(t.flags|=128,Xr(o,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return re(le,le.current&1|2),t.child}e=e.sibling}o.tail!==null&&fe()>Fr&&(t.flags|=128,n=!0,Xr(o,!1),t.lanes=4194304)}else{if(!n)if(e=Ms(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Xr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!oe)return Te(t),null}else 2*fe()-o.renderingStartTime>Fr&&r!==1073741824&&(t.flags|=128,n=!0,Xr(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(r=o.last,r!==null?r.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=fe(),t.sibling=null,r=le.current,re(le,n?r&1|2:r&1),t):(Te(t),null);case 22:case 23:return bi(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Be&1073741824&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function ah(e,t){switch(ni(t),t.tag){case 1:return Me(t.type)&&Rs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mr(),ae(Pe),ae(_e),pi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return di(t),null;case 13:if(ae(le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(le),null;case 4:return Mr(),null;case 10:return ii(t.type._context),null;case 22:case 23:return bi(),null;case 24:return null;default:return null}}var Zn=!1,Ce=!1,oh=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ar(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){pe(e,t,n)}else r.current=null}function _o(e,t,r){try{r()}catch(n){pe(e,t,n)}}var Vl=!1;function ih(e,t){if(co=Cs,e=gu(),ti(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var i=0,c=-1,l=-1,u=0,p=0,h=e,x=null;t:for(;;){for(var v;h!==r||a!==0&&h.nodeType!==3||(c=i+a),h!==o||n!==0&&h.nodeType!==3||(l=i+n),h.nodeType===3&&(i+=h.nodeValue.length),(v=h.firstChild)!==null;)x=h,h=v;for(;;){if(h===e)break t;if(x===r&&++u===a&&(c=i),x===o&&++p===n&&(l=i),(v=h.nextSibling)!==null)break;h=x,x=h.parentNode}h=v}r=c===-1||l===-1?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(uo={focusedElem:e,selectionRange:r},Cs=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,A=y.memoizedState,f=t.stateNode,d=f.getSnapshotBeforeUpdate(t.elementType===t.type?E:et(t.type,E),A);f.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(S){pe(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return y=Vl,Vl=!1,y}function fn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&_o(t,r,o)}a=a.next}while(a!==n)}}function ea(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Io(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function fd(e){var t=e.alternate;t!==null&&(e.alternate=null,fd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dt],delete t[Cn],delete t[ho],delete t[$f],delete t[Gf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hd(e){return e.tag===5||e.tag===3||e.tag===4}function $l(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ws));else if(n!==4&&(e=e.child,e!==null))for(wo(e,t,r),e=e.sibling;e!==null;)wo(e,t,r),e=e.sibling}function Ro(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ro(e,t,r),e=e.sibling;e!==null;)Ro(e,t,r),e=e.sibling}var Se=null,tt=!1;function wt(e,t,r){for(r=r.child;r!==null;)md(e,t,r),r=r.sibling}function md(e,t,r){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Hs,r)}catch{}switch(r.tag){case 5:Ce||Ar(r,t);case 6:var n=Se,a=tt;Se=null,wt(e,t,r),Se=n,tt=a,Se!==null&&(tt?(e=Se,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Se.removeChild(r.stateNode));break;case 18:Se!==null&&(tt?(e=Se,r=r.stateNode,e.nodeType===8?Ta(e.parentNode,r):e.nodeType===1&&Ta(e,r),Sn(e)):Ta(Se,r.stateNode));break;case 4:n=Se,a=tt,Se=r.stateNode.containerInfo,tt=!0,wt(e,t,r),Se=n,tt=a;break;case 0:case 11:case 14:case 15:if(!Ce&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&_o(r,t,i),a=a.next}while(a!==n)}wt(e,t,r);break;case 1:if(!Ce&&(Ar(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){pe(r,t,c)}wt(e,t,r);break;case 21:wt(e,t,r);break;case 22:r.mode&1?(Ce=(n=Ce)||r.memoizedState!==null,wt(e,t,r),Ce=n):wt(e,t,r);break;default:wt(e,t,r)}}function Gl(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new oh),t.forEach(function(n){var a=xh.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ze(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:Se=c.stateNode,tt=!1;break e;case 3:Se=c.stateNode.containerInfo,tt=!0;break e;case 4:Se=c.stateNode.containerInfo,tt=!0;break e}c=c.return}if(Se===null)throw Error(z(160));md(o,i,a),Se=null,tt=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){pe(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xd(t,e),t=t.sibling}function xd(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ze(t,e),it(e),n&4){try{fn(3,e,e.return),ea(3,e)}catch(E){pe(e,e.return,E)}try{fn(5,e,e.return)}catch(E){pe(e,e.return,E)}}break;case 1:Ze(t,e),it(e),n&512&&r!==null&&Ar(r,r.return);break;case 5:if(Ze(t,e),it(e),n&512&&r!==null&&Ar(r,r.return),e.flags&32){var a=e.stateNode;try{gn(a,"")}catch(E){pe(e,e.return,E)}}if(n&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,i=r!==null?r.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&Uc(a,o),Za(c,i);var u=Za(c,o);for(i=0;i<l.length;i+=2){var p=l[i],h=l[i+1];p==="style"?$c(a,h):p==="dangerouslySetInnerHTML"?zc(a,h):p==="children"?gn(a,h):Vo(a,p,h,u)}switch(c){case"input":Ka(a,o);break;case"textarea":Fc(a,o);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Cr(a,!!o.multiple,v,!1):x!==!!o.multiple&&(o.defaultValue!=null?Cr(a,!!o.multiple,o.defaultValue,!0):Cr(a,!!o.multiple,o.multiple?[]:"",!1))}a[Cn]=o}catch(E){pe(e,e.return,E)}}break;case 6:if(Ze(t,e),it(e),n&4){if(e.stateNode===null)throw Error(z(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(E){pe(e,e.return,E)}}break;case 3:if(Ze(t,e),it(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Sn(t.containerInfo)}catch(E){pe(e,e.return,E)}break;case 4:Ze(t,e),it(e);break;case 13:Ze(t,e),it(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Si=fe())),n&4&&Gl(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Ce=(u=Ce)||p,Ze(t,e),Ce=u):Ze(t,e),it(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(Y=e,p=e.child;p!==null;){for(h=Y=p;Y!==null;){switch(x=Y,v=x.child,x.tag){case 0:case 11:case 14:case 15:fn(4,x,x.return);break;case 1:Ar(x,x.return);var y=x.stateNode;if(typeof y.componentWillUnmount=="function"){n=x,r=x.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(E){pe(n,r,E)}}break;case 5:Ar(x,x.return);break;case 22:if(x.memoizedState!==null){Hl(h);continue}}v!==null?(v.return=x,Y=v):Hl(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{a=h.stateNode,u?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=h.stateNode,l=h.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,c.style.display=Vc("display",i))}catch(E){pe(e,e.return,E)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(E){pe(e,e.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ze(t,e),it(e),n&4&&Gl(e);break;case 21:break;default:Ze(t,e),it(e)}}function it(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(hd(r)){var n=r;break e}r=r.return}throw Error(z(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(gn(a,""),n.flags&=-33);var o=$l(e);Ro(e,o,a);break;case 3:case 4:var i=n.stateNode.containerInfo,c=$l(e);wo(e,c,i);break;default:throw Error(z(161))}}catch(l){pe(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lh(e,t,r){Y=e,gd(e)}function gd(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var a=Y,o=a.child;if(a.tag===22&&n){var i=a.memoizedState!==null||Zn;if(!i){var c=a.alternate,l=c!==null&&c.memoizedState!==null||Ce;c=Zn;var u=Ce;if(Zn=i,(Ce=l)&&!u)for(Y=a;Y!==null;)i=Y,l=i.child,i.tag===22&&i.memoizedState!==null?Wl(a):l!==null?(l.return=i,Y=l):Wl(a);for(;o!==null;)Y=o,gd(o),o=o.sibling;Y=a,Zn=c,Ce=u}Yl(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Y=o):Yl(e)}}function Yl(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ce||ea(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ce)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:et(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&wl(t,o,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}wl(t,i,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Sn(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ce||t.flags&512&&Io(t)}catch(x){pe(t,t.return,x)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Hl(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Wl(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ea(4,t)}catch(l){pe(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){pe(t,a,l)}}var o=t.return;try{Io(t)}catch(l){pe(t,o,l)}break;case 5:var i=t.return;try{Io(t)}catch(l){pe(t,i,l)}}}catch(l){pe(t,t.return,l)}if(t===e){Y=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Y=c;break}Y=t.return}}var ch=Math.ceil,Bs=_t.ReactCurrentDispatcher,yi=_t.ReactCurrentOwner,Xe=_t.ReactCurrentBatchConfig,J=0,ye=null,he=null,Ne=0,Be=0,Tr=Qt(0),ge=0,On=null,lr=0,ta=0,Ei=0,hn=null,Le=null,Si=0,Fr=1/0,xt=null,zs=!1,jo=null,$t=null,es=!1,Pt=null,Vs=0,mn=0,Oo=null,xs=-1,gs=0;function we(){return J&6?fe():xs!==-1?xs:xs=fe()}function Gt(e){return e.mode&1?J&2&&Ne!==0?Ne&-Ne:Hf.transition!==null?(gs===0&&(gs=tu()),gs):(e=q,e!==0||(e=window.event,e=e===void 0?16:lu(e.type)),e):1}function st(e,t,r,n){if(50<mn)throw mn=0,Oo=null,Error(z(185));Dn(e,r,n),(!(J&2)||e!==ye)&&(e===ye&&(!(J&2)&&(ta|=r),ge===4&&Dt(e,Ne)),Ue(e,n),r===1&&J===0&&!(t.mode&1)&&(Fr=fe()+500,Js&&Xt()))}function Ue(e,t){var r=e.callbackNode;Yp(e,t);var n=Ts(e,e===ye?Ne:0);if(n===0)r!==null&&rl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&rl(r),t===1)e.tag===0?Yf(Kl.bind(null,e)):_u(Kl.bind(null,e)),zf(function(){!(J&6)&&Xt()}),r=null;else{switch(ru(n)){case 1:r=Wo;break;case 4:r=Zc;break;case 16:r=As;break;case 536870912:r=eu;break;default:r=As}r=Td(r,vd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function vd(e,t){if(xs=-1,gs=0,J&6)throw Error(z(327));var r=e.callbackNode;if(jr()&&e.callbackNode!==r)return null;var n=Ts(e,e===ye?Ne:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=$s(e,n);else{t=n;var a=J;J|=2;var o=Ed();(ye!==e||Ne!==t)&&(xt=null,Fr=fe()+500,nr(e,t));do try{ph();break}catch(c){yd(e,c)}while(!0);oi(),Bs.current=o,J=a,he!==null?t=0:(ye=null,Ne=0,t=ge)}if(t!==0){if(t===2&&(a=so(e),a!==0&&(n=a,t=Lo(e,a))),t===1)throw r=On,nr(e,0),Dt(e,n),Ue(e,fe()),r;if(t===6)Dt(e,n);else{if(a=e.current.alternate,!(n&30)&&!uh(a)&&(t=$s(e,n),t===2&&(o=so(e),o!==0&&(n=o,t=Lo(e,o))),t===1))throw r=On,nr(e,0),Dt(e,n),Ue(e,fe()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(z(345));case 2:Zt(e,Le,xt);break;case 3:if(Dt(e,n),(n&130023424)===n&&(t=Si+500-fe(),10<t)){if(Ts(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){we(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=fo(Zt.bind(null,e,Le,xt),t);break}Zt(e,Le,xt);break;case 4:if(Dt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var i=31-nt(n);o=1<<i,i=t[i],i>a&&(a=i),n&=~o}if(n=a,n=fe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ch(n/1960))-n,10<n){e.timeoutHandle=fo(Zt.bind(null,e,Le,xt),n);break}Zt(e,Le,xt);break;case 5:Zt(e,Le,xt);break;default:throw Error(z(329))}}}return Ue(e,fe()),e.callbackNode===r?vd.bind(null,e):null}function Lo(e,t){var r=hn;return e.current.memoizedState.isDehydrated&&(nr(e,t).flags|=256),e=$s(e,t),e!==2&&(t=Le,Le=r,t!==null&&Do(t)),e}function Do(e){Le===null?Le=e:Le.push.apply(Le,e)}function uh(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!at(o(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dt(e,t){for(t&=~Ei,t&=~ta,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nt(t),n=1<<r;e[r]=-1,t&=~n}}function Kl(e){if(J&6)throw Error(z(327));jr();var t=Ts(e,0);if(!(t&1))return Ue(e,fe()),null;var r=$s(e,t);if(e.tag!==0&&r===2){var n=so(e);n!==0&&(t=n,r=Lo(e,n))}if(r===1)throw r=On,nr(e,0),Dt(e,t),Ue(e,fe()),r;if(r===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zt(e,Le,xt),Ue(e,fe()),null}function Ni(e,t){var r=J;J|=1;try{return e(t)}finally{J=r,J===0&&(Fr=fe()+500,Js&&Xt())}}function cr(e){Pt!==null&&Pt.tag===0&&!(J&6)&&jr();var t=J;J|=1;var r=Xe.transition,n=q;try{if(Xe.transition=null,q=1,e)return e()}finally{q=n,Xe.transition=r,J=t,!(J&6)&&Xt()}}function bi(){Be=Tr.current,ae(Tr)}function nr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Bf(r)),he!==null)for(r=he.return;r!==null;){var n=r;switch(ni(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rs();break;case 3:Mr(),ae(Pe),ae(_e),pi();break;case 5:di(n);break;case 4:Mr();break;case 13:ae(le);break;case 19:ae(le);break;case 10:ii(n.type._context);break;case 22:case 23:bi()}r=r.return}if(ye=e,he=e=Yt(e.current,null),Ne=Be=t,ge=0,On=null,Ei=ta=lr=0,Le=hn=null,tr!==null){for(t=0;t<tr.length;t++)if(r=tr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var i=o.next;o.next=a,n.next=i}r.pending=n}tr=null}return e}function yd(e,t){do{var r=he;try{if(oi(),fs.current=Fs,Us){for(var n=ue.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Us=!1}if(ir=0,ve=xe=ue=null,pn=!1,wn=0,yi.current=null,r===null||r.return===null){ge=1,On=t,he=null;break}e:{var o=e,i=r.return,c=r,l=t;if(t=Ne,c.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,p=c,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=kl(i);if(v!==null){v.flags&=-257,Pl(v,i,c,o,t),v.mode&1&&Dl(o,u,t),t=v,l=u;var y=t.updateQueue;if(y===null){var E=new Set;E.add(l),t.updateQueue=E}else y.add(l);break e}else{if(!(t&1)){Dl(o,u,t),Ai();break e}l=Error(z(426))}}else if(oe&&c.mode&1){var A=kl(i);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Pl(A,i,c,o,t),si(Ur(l,c));break e}}o=l=Ur(l,c),ge!==4&&(ge=2),hn===null?hn=[o]:hn.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var f=rd(o,l,t);Il(o,f);break e;case 1:c=l;var d=o.type,m=o.stateNode;if(!(o.flags&128)&&(typeof d.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&($t===null||!$t.has(m)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=nd(o,c,t);Il(o,S);break e}}o=o.return}while(o!==null)}Nd(r)}catch(g){t=g,he===r&&r!==null&&(he=r=r.return);continue}break}while(!0)}function Ed(){var e=Bs.current;return Bs.current=Fs,e===null?Fs:e}function Ai(){(ge===0||ge===3||ge===2)&&(ge=4),ye===null||!(lr&268435455)&&!(ta&268435455)||Dt(ye,Ne)}function $s(e,t){var r=J;J|=2;var n=Ed();(ye!==e||Ne!==t)&&(xt=null,nr(e,t));do try{dh();break}catch(a){yd(e,a)}while(!0);if(oi(),J=r,Bs.current=n,he!==null)throw Error(z(261));return ye=null,Ne=0,ge}function dh(){for(;he!==null;)Sd(he)}function ph(){for(;he!==null&&!Pp();)Sd(he)}function Sd(e){var t=Ad(e.alternate,e,Be);e.memoizedProps=e.pendingProps,t===null?Nd(e):he=t,yi.current=null}function Nd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ah(r,t),r!==null){r.flags&=32767,he=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,he=null;return}}else if(r=sh(r,t,Be),r!==null){he=r;return}if(t=t.sibling,t!==null){he=t;return}he=t=e}while(t!==null);ge===0&&(ge=5)}function Zt(e,t,r){var n=q,a=Xe.transition;try{Xe.transition=null,q=1,fh(e,t,r,n)}finally{Xe.transition=a,q=n}return null}function fh(e,t,r,n){do jr();while(Pt!==null);if(J&6)throw Error(z(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(Hp(e,o),e===ye&&(he=ye=null,Ne=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||es||(es=!0,Td(As,function(){return jr(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Xe.transition,Xe.transition=null;var i=q;q=1;var c=J;J|=4,yi.current=null,ih(e,r),xd(r,e),Lf(uo),Cs=!!co,uo=co=null,e.current=r,lh(r),Mp(),J=c,q=i,Xe.transition=o}else e.current=r;if(es&&(es=!1,Pt=e,Vs=a),o=e.pendingLanes,o===0&&($t=null),Bp(r.stateNode),Ue(e,fe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(zs)throw zs=!1,e=jo,jo=null,e;return Vs&1&&e.tag!==0&&jr(),o=e.pendingLanes,o&1?e===Oo?mn++:(mn=0,Oo=e):mn=0,Xt(),null}function jr(){if(Pt!==null){var e=ru(Vs),t=Xe.transition,r=q;try{if(Xe.transition=null,q=16>e?16:e,Pt===null)var n=!1;else{if(e=Pt,Pt=null,Vs=0,J&6)throw Error(z(331));var a=J;for(J|=4,Y=e.current;Y!==null;){var o=Y,i=o.child;if(Y.flags&16){var c=o.deletions;if(c!==null){for(var l=0;l<c.length;l++){var u=c[l];for(Y=u;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:fn(8,p,o)}var h=p.child;if(h!==null)h.return=p,Y=h;else for(;Y!==null;){p=Y;var x=p.sibling,v=p.return;if(fd(p),p===u){Y=null;break}if(x!==null){x.return=v,Y=x;break}Y=v}}}var y=o.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var A=E.sibling;E.sibling=null,E=A}while(E!==null)}}Y=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Y=i;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:fn(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,Y=f;break e}Y=o.return}}var d=e.current;for(Y=d;Y!==null;){i=Y;var m=i.child;if(i.subtreeFlags&2064&&m!==null)m.return=i,Y=m;else e:for(i=d;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ea(9,c)}}catch(g){pe(c,c.return,g)}if(c===i){Y=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,Y=S;break e}Y=c.return}}if(J=a,Xt(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Hs,e)}catch{}n=!0}return n}finally{q=r,Xe.transition=t}}return!1}function Ql(e,t,r){t=Ur(r,t),t=rd(e,t,1),e=Vt(e,t,1),t=we(),e!==null&&(Dn(e,1,t),Ue(e,t))}function pe(e,t,r){if(e.tag===3)Ql(e,e,r);else for(;t!==null;){if(t.tag===3){Ql(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($t===null||!$t.has(n))){e=Ur(r,e),e=nd(t,e,1),t=Vt(t,e,1),e=we(),t!==null&&(Dn(t,1,e),Ue(t,e));break}}t=t.return}}function hh(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=we(),e.pingedLanes|=e.suspendedLanes&r,ye===e&&(Ne&r)===r&&(ge===4||ge===3&&(Ne&130023424)===Ne&&500>fe()-Si?nr(e,0):Ei|=r),Ue(e,t)}function bd(e,t){t===0&&(e.mode&1?(t=Gn,Gn<<=1,!(Gn&130023424)&&(Gn=4194304)):t=1);var r=we();e=Tt(e,t),e!==null&&(Dn(e,t,r),Ue(e,r))}function mh(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),bd(e,r)}function xh(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(t),bd(e,r)}var Ad;Ad=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pe.current)ke=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ke=!1,nh(e,t,r);ke=!!(e.flags&131072)}else ke=!1,oe&&t.flags&1048576&&Iu(t,Ls,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ms(e,t),e=t.pendingProps;var a=Dr(t,_e.current);Rr(t,r),a=hi(null,t,n,e,a,r);var o=mi();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Me(n)?(o=!0,js(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ci(t),a.updater=Zs,t.stateNode=a,a._reactInternals=t,Eo(t,n,e,r),t=bo(null,t,n,!0,o,r)):(t.tag=0,oe&&o&&ri(t),Ie(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ms(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=vh(n),e=et(n,e),a){case 0:t=No(null,t,n,e,r);break e;case 1:t=Fl(null,t,n,e,r);break e;case 11:t=Ml(null,t,n,e,r);break e;case 14:t=Ul(null,t,n,et(n.type,e),r);break e}throw Error(z(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:et(n,a),No(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:et(n,a),Fl(e,t,n,a,r);case 3:e:{if(id(t),e===null)throw Error(z(387));n=t.pendingProps,o=t.memoizedState,a=o.element,Du(e,t),Ps(t,n,null,r);var i=t.memoizedState;if(n=i.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Ur(Error(z(423)),t),t=Bl(e,t,n,r,a);break e}else if(n!==a){a=Ur(Error(z(424)),t),t=Bl(e,t,n,r,a);break e}else for(ze=zt(t.stateNode.containerInfo.firstChild),Ve=t,oe=!0,rt=null,r=Ou(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(kr(),n===a){t=Ct(e,t,r);break e}Ie(e,t,n,r)}t=t.child}return t;case 5:return ku(t),e===null&&go(t),n=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,i=a.children,po(n,a)?i=null:o!==null&&po(n,o)&&(t.flags|=32),od(e,t),Ie(e,t,i,r),t.child;case 6:return e===null&&go(t),null;case 13:return ld(e,t,r);case 4:return ui(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Pr(t,null,n,r):Ie(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:et(n,a),Ml(e,t,n,a,r);case 7:return Ie(e,t,t.pendingProps,r),t.child;case 8:return Ie(e,t,t.pendingProps.children,r),t.child;case 12:return Ie(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,o=t.memoizedProps,i=a.value,re(Ds,n._currentValue),n._currentValue=i,o!==null)if(at(o.value,i)){if(o.children===a.children&&!Pe.current){t=Ct(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var c=o.dependencies;if(c!==null){i=o.child;for(var l=c.firstContext;l!==null;){if(l.context===n){if(o.tag===1){l=St(-1,r&-r),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?l.next=l:(l.next=p.next,p.next=l),u.pending=l}}o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),vo(o.return,r,t),c.lanes|=r;break}l=l.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(z(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),vo(i,r,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ie(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Rr(t,r),a=Je(a),n=n(a),t.flags|=1,Ie(e,t,n,r),t.child;case 14:return n=t.type,a=et(n,t.pendingProps),a=et(n.type,a),Ul(e,t,n,a,r);case 15:return sd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:et(n,a),ms(e,t),t.tag=1,Me(n)?(e=!0,js(t)):e=!1,Rr(t,r),td(t,n,a),Eo(t,n,a,r),bo(null,t,n,!0,e,r);case 19:return cd(e,t,r);case 22:return ad(e,t,r)}throw Error(z(156,t.tag))};function Td(e,t){return qc(e,t)}function gh(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,t,r,n){return new gh(e,t,r,n)}function Ti(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vh(e){if(typeof e=="function")return Ti(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Go)return 11;if(e===Yo)return 14}return 2}function Yt(e,t){var r=e.alternate;return r===null?(r=Qe(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function vs(e,t,r,n,a,o){var i=2;if(n=e,typeof e=="function")Ti(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case mr:return sr(r.children,a,o,t);case $o:i=8,a|=8;break;case $a:return e=Qe(12,r,t,a|2),e.elementType=$a,e.lanes=o,e;case Ga:return e=Qe(13,r,t,a),e.elementType=Ga,e.lanes=o,e;case Ya:return e=Qe(19,r,t,a),e.elementType=Ya,e.lanes=o,e;case kc:return ra(r,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Lc:i=10;break e;case Dc:i=9;break e;case Go:i=11;break e;case Yo:i=14;break e;case Rt:i=16,n=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Qe(i,r,t,a),t.elementType=e,t.type=n,t.lanes=o,t}function sr(e,t,r,n){return e=Qe(7,e,n,t),e.lanes=r,e}function ra(e,t,r,n){return e=Qe(22,e,n,t),e.elementType=kc,e.lanes=r,e.stateNode={isHidden:!1},e}function La(e,t,r){return e=Qe(6,e,null,t),e.lanes=r,e}function Da(e,t,r){return t=Qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yh(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ci(e,t,r,n,a,o,i,c,l){return e=new yh(e,t,r,c,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Qe(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ci(o),e}function Eh(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Cd(e){if(!e)return Wt;e=e._reactInternals;e:{if(dr(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Me(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var r=e.type;if(Me(r))return Cu(e,r,t)}return t}function _d(e,t,r,n,a,o,i,c,l){return e=Ci(r,n,!0,e,a,o,i,c,l),e.context=Cd(null),r=e.current,n=we(),a=Gt(r),o=St(n,a),o.callback=t??null,Vt(r,o,a),e.current.lanes=a,Dn(e,a,n),Ue(e,n),e}function na(e,t,r,n){var a=t.current,o=we(),i=Gt(a);return r=Cd(r),t.context===null?t.context=r:t.pendingContext=r,t=St(o,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Vt(a,t,i),e!==null&&(st(e,a,i,o),ps(e,a,i)),i}function Gs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _i(e,t){Xl(e,t),(e=e.alternate)&&Xl(e,t)}function Sh(){return null}var Id=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ii(e){this._internalRoot=e}sa.prototype.render=Ii.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));na(e,t,null,null)};sa.prototype.unmount=Ii.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;cr(function(){na(null,e,null,null)}),t[At]=null}};function sa(e){this._internalRoot=e}sa.prototype.unstable_scheduleHydration=function(e){if(e){var t=au();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Lt.length&&t!==0&&t<Lt[r].priority;r++);Lt.splice(r,0,e),r===0&&iu(e)}};function wi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jl(){}function Nh(e,t,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var u=Gs(i);o.call(u)}}var i=_d(t,n,e,0,null,!1,!1,"",Jl);return e._reactRootContainer=i,e[At]=i.current,An(e.nodeType===8?e.parentNode:e),cr(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var u=Gs(l);c.call(u)}}var l=Ci(e,0,!1,null,null,!1,!1,"",Jl);return e._reactRootContainer=l,e[At]=l.current,An(e.nodeType===8?e.parentNode:e),cr(function(){na(t,l,r,n)}),l}function oa(e,t,r,n,a){var o=r._reactRootContainer;if(o){var i=o;if(typeof a=="function"){var c=a;a=function(){var l=Gs(i);c.call(l)}}na(t,i,e,a)}else i=Nh(r,t,e,a,n);return Gs(i)}nu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=nn(t.pendingLanes);r!==0&&(Ko(t,r|1),Ue(t,fe()),!(J&6)&&(Fr=fe()+500,Xt()))}break;case 13:cr(function(){var n=Tt(e,1);if(n!==null){var a=we();st(n,e,1,a)}}),_i(e,1)}};Qo=function(e){if(e.tag===13){var t=Tt(e,134217728);if(t!==null){var r=we();st(t,e,134217728,r)}_i(e,134217728)}};su=function(e){if(e.tag===13){var t=Gt(e),r=Tt(e,t);if(r!==null){var n=we();st(r,e,t,n)}_i(e,t)}};au=function(){return q};ou=function(e,t){var r=q;try{return q=e,t()}finally{q=r}};to=function(e,t,r){switch(t){case"input":if(Ka(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Xs(n);if(!a)throw Error(z(90));Mc(n),Ka(n,a)}}}break;case"textarea":Fc(e,r);break;case"select":t=r.value,t!=null&&Cr(e,!!r.multiple,t,!1)}};Hc=Ni;Wc=cr;var bh={usingClientEntryPoint:!1,Events:[Pn,yr,Xs,Gc,Yc,Ni]},Jr={findFiberByHostInstance:er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ah={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xc(e),e===null?null:e.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||Sh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ts=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ts.isDisabled&&ts.supportsFiber)try{Hs=ts.inject(Ah),pt=ts}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bh;Ge.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wi(t))throw Error(z(200));return Eh(e,t,null,r)};Ge.createRoot=function(e,t){if(!wi(e))throw Error(z(299));var r=!1,n="",a=Id;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ci(e,1,!1,null,null,r,!1,n,a),e[At]=t.current,An(e.nodeType===8?e.parentNode:e),new Ii(t)};Ge.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=Xc(t),e=e===null?null:e.stateNode,e};Ge.flushSync=function(e){return cr(e)};Ge.hydrate=function(e,t,r){if(!aa(t))throw Error(z(200));return oa(null,e,t,!0,r)};Ge.hydrateRoot=function(e,t,r){if(!wi(e))throw Error(z(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",i=Id;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=_d(t,null,e,1,r??null,a,!1,o,i),e[At]=t.current,An(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new sa(t)};Ge.render=function(e,t,r){if(!aa(t))throw Error(z(200));return oa(null,e,t,!1,r)};Ge.unmountComponentAtNode=function(e){if(!aa(e))throw Error(z(40));return e._reactRootContainer?(cr(function(){oa(null,null,e,!1,function(){e._reactRootContainer=null,e[At]=null})}),!0):!1};Ge.unstable_batchedUpdates=Ni;Ge.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!aa(r))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return oa(e,t,r,!1,n)};Ge.version="18.3.1-next-f1338f8080-20240426";function wd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wd)}catch(e){console.error(e)}}wd(),wc.exports=Ge;var Th=wc.exports,ql=Th;za.createRoot=ql.createRoot,za.hydrateRoot=ql.hydrateRoot;const Ch={BASE_URL:"/indra-os/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GAS_URL:"https://placeholder-backend.example.com"},rs=(e,t)=>Ch[e]||t,Zl=e=>{const t=localStorage.getItem(e);return!t||t==="undefined"||t==="null"?"":t},Mt={CORE_URL:Zl("INDRA_OVERRIDE_URL")||rs("VITE_CORE_URL","https://script.google.com/macros/s/AKfycbydiid-N9D6YW-Q5ldpRAhpi9pv6mDRwfMuFaQ97EXhR1qg8bbknwMiPI8xIL6an16o/exec"),SYSTEM_TOKEN:Zl("INDRA_SESSION_TOKEN")||rs("VITE_SYSTEM_TOKEN",""),CLIENT_NAME:rs("VITE_CLIENT_NAME","INDRA_V2_Axiom"),VERSION:rs("VITE_VERSION","2.0.0"),getKnownCores:()=>{const e=localStorage.getItem("INDRA_KNOWN_CORES");return e?JSON.parse(e):[]}};class _h{constructor(){this.config={url:Mt.CORE_URL,getApiKey:()=>localStorage.getItem("INDRA_SESSION_TOKEN")||Mt.SYSTEM_TOKEN||"",clientName:Mt.CLIENT_NAME,version:Mt.VERSION};const t=this.config.apiKey||"",r=t.length>0?`${t.length} chars (starts: ${t.substring(0,3)}... ends: ...${t.substring(t.length-2)})`:"EMPTY";console.warn(`[CORE] Initializing with URL: ${this.config.url} | Token: ${r}`)}init(t,r){this.config.url=t,this.config.apiKey=r,console.warn(`[CORE] Re-Initialized for: ${t}`)}async call(t,r,n={}){var c,l;if(!this.config.url)throw new Error("CORE_NOT_INITIALIZED: Debes llamar a init(url, key) antes de realizar peticiones.");const a=this.config.getApiKey(),o=a.length>0?`${a.length} chars (starts: ${a.substring(0,3)}... ends: ...${a.substring(a.length-2)})`:"EMPTY";console.warn(`[CORE] Call: ${t}:${r} | Token: ${o}`);const i={executor:t,method:r,payload:n,Axiom:a,systemToken:a,context:{timestamp:Date.now(),client:this.config.clientName,version:this.config.version}};try{console.warn(`[CORE]  Awaiting fetch to: ${this.config.url}...`);const u=await fetch(this.config.url,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(i)});if(console.warn(`[CORE]  Response Status: ${u.status} ${u.statusText}`),!u.ok)throw new Error(`HTTP_ERROR: ${u.status}`);const p=await u.text();console.warn(`[CORE]  Raw Response (${p.length} chars):`,p.substring(0,150)+"...");let h;try{const x=this._sanitizeResponse(p);h=JSON.parse(x),console.warn("[CORE]  Parsed JSON keys:",Object.keys(h))}catch(x){throw this._handleTransmissionError(p,x),new Error("CORE_PARSING_ERROR: La respuesta del Core no es un JSON vlido.")}if(h&&h._SIGNAL){const{_SIGNAL:x,payload:v}=h;return console.warn(`[CORE]  Signal Intercepted: ${x}`),h}if(this._validateSovereignResponse(h),h.success===!1){console.error("[CORE] Veto Error:",h.error);const x=new Error(((c=h.error)==null?void 0:c.message)||"Error desconocido en el Core");throw(l=h.error)!=null&&l.code&&(x.code=h.error.code),x}return h.result}catch(u){if(u.name==="TypeError"&&u.message==="Failed to fetch"){console.group(" [CORE] Fallo Crtico de Handshake (Network Break)"),console.error("Contexto:",`${t}:${r}`),console.warn("Posibles Causas:"),console.warn("1. La URL del Core ha caducado (necesitas nuevo despliegue GAS)."),console.warn("2. Bloqueo de CORS (GAS ha devuelto una pgina de error HTML)."),console.warn("3. Ests offline o el dominio script.google.com es inalcanzable."),console.warn("URL Intentada:",this.config.url),console.groupEnd();const p=new Error(`FALLO_DE_CONEXIN: El Core en ${this.config.url} no responde.`);throw p.code="NETWORK_DISRUPTION",p}throw console.error(`[CORE] Transmission Fail (${t}:${r}):`,u),u}}_sanitizeResponse(t){const r=t.indexOf("{"),n=t.lastIndexOf("}");return r!==-1&&n!==-1&&r<n?t.substring(r,n+1):t}_validateSovereignResponse(t){if(!t||typeof t!="object")throw new Error("VIOLACIN_DE_SOBERANA: La respuesta no es un objeto vlido.");if(t.success===void 0)throw new Error("VIOLACIN_DE_SOBERANA: Estructura de respuesta corrupta (missing success bit).")}_handleTransmissionError(t,r){console.group(" [CORE] Handshake Failure: Sovereign Membrane Breach"),console.error("Error Detail:",r.message),console.warn("Raw Payload (possible leak):",t),console.groupEnd()}async executeAction(t,r={}){const n={action:t,payload:r};return await this.call("system","executeAction",n)}}const Nt=new _h,Rd=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"})),qr={CORE_PORTAL:{technical_id:"view_auth_gate",functional_name:"Portal de Acceso",LABEL:"Portal de Acceso",layer:"NIVEL_3",config:{archetype:"GATE",icon:"ShieldCheck"}},WORKSPACE_CANVAS:{technical_id:"view_flow_orchestrator",functional_name:"Lienzo de Automatizacin",LABEL:"Lienzo de Automatizacin",layer:"NIVEL_1",config:{archetype:"ORCHESTRATOR",intent:"ORCHESTRATION"}},SLOT_NODE:{technical_id:"slot_node",label:"Cotizador Inteligente (Slot Node)",functional_name:"Calculadora de Realidad",description:"Nodo compuesto para proyecciones multifacticas y formularios inteligentes.",ARCHETYPE:"UTILITY",ARCHETYPES:["UTILITY","SLOT","NODE"],DOMAIN:"UI_PROJECTION",visibility:"PUBLIC",isVirtual:!0,config:{archetype:"SLOT",icon:"Layout"}},COSMOS:{technical_id:"cosmos",LABEL:"Motor de Realidad (Cosmos)",icon:"Cpu",color:"#3B82F6",config:{archetype:"ENGINE",intent:"SYSTEM"}}};class Ih{constructor(){this._ontology={},this._genotype={},this._renderManifest=[],this._modulesByLevel={},this._schemas={},this._enrichedRegistry={},this._isCompiled=!1}get ontology(){return this._ontology}get isCompiled(){return this._isCompiled}setArtifactSchemas(t){this._schemas=t||{},console.log(`[LawCompiler] Esquemas de artefactos inyectados: ${Object.keys(this._schemas).length} tipos.`)}getArtifactSchema(t){var r,n;return t?((r=this._schemas)==null?void 0:r[t])||((n=this._schemas)==null?void 0:n[t.toUpperCase()]):null}setOntology(t,r){this._ontology=t||{},this._genotype=r||{},console.log(`[LawCompiler] Ontologa inyectada: ${Object.keys(this._ontology).length} activos.`)}_deepMerge(t,r){if(!t||typeof t!="object")return r;if(!r||typeof r!="object")return t;const n={...t};for(const a in r){const o=r[a],i=n[a];Array.isArray(o)?n[a]=o:o&&typeof o=="object"&&!Array.isArray(o)?n[a]=this._deepMerge(i||{},o):n[a]=o}return n}compile(){console.log("[LawCompiler] Iniciando compilacin de leyes (Enriquecimiento Fenotpico)...");const t=Object.entries(qr).filter(([n,a])=>a.isVirtual).map(([n,a])=>({...a,id:n}));console.log(`[LawCompiler]  Virtual Items Found: ${t.length}`),t.forEach(n=>console.log(`  - ${n.id} (${n.ARCHETYPE})`));const r=[...Object.values(this._ontology),...t];return this._enrichedRegistry={},this._renderManifest=r.map((n,a)=>{const o=n.id||n.ID||`UNKNOWN_ID_${a}`;let i=qr[o];i||(i=Object.values(qr).find(x=>x.technical_id===o)||{});const c=this._deepMerge(i,n),l=i.config?{...i.config}:{};l.icon&&typeof l.icon!="string"&&(l.icon=null);let u=c.slot||c.SLOT||i.slot;const p=["UTILITY","SLOT","WIDGET","REALITY","GATE","ORCHESTRATOR"].includes(c.ARCHETYPE||i.ARCHETYPE);!u&&p&&(u="GLOBAL_REGISTRY");const h={...c,id:o,omd:c.omd||c.OMD||o||i.technical_id||"UNKNOWN_OMD",slot:u,LABEL:c.LABEL||c.label||i.LABEL||i.functional_name||"UNIT_SKELETON",ARCHETYPE:c.ARCHETYPE||i.ARCHETYPE||(l.archetype||"SERVICE").toUpperCase(),DOMAIN:c.DOMAIN||i.DOMAIN||(l.intent||"SYSTEM").toUpperCase(),layer:c.LEVEL||c.level||i.layer||"NIVEL_3",CAPABILITIES:this._normalizeCapabilities(c.CAPABILITIES||c.capabilities||c.methods||{}),ui_layout_hint:c.ui_layout_hint||i.ui_layout_hint||"LAYOUT_SMART_FORM"};return h.artefacts=Object.keys(h.CAPABILITIES),h.methods=h.artefacts,Object.keys(h).forEach(x=>{const v=h[x];(typeof v=="function"||typeof v=="symbol")&&delete h[x]}),this._enrichedRegistry[o.toLowerCase()]=h,h}),this._modulesByLevel={},this._renderManifest.forEach(n=>{const a=n.layer||0,o=typeof a=="string"?parseInt(a.split("_")[1])||0:a;this._modulesByLevel[o]||(this._modulesByLevel[o]=[]),this._modulesByLevel[o].push(n)}),console.log(`[LawCompiler] Compilacin finalizada. Manifiesto: ${this._renderManifest.length} items.`),this._isCompiled=!0,this._renderManifest}_normalizeCapabilities(t){const r={};let n=[];return Array.isArray(t)?n=t.map(a=>[a,{}]):typeof t=="object"&&t!==null&&(n=Object.entries(t)),n.forEach(([a,o])=>{const i=typeof o=="object"&&o!==null?o:{};let c=i.io;if(!c){const l=String(a).toLowerCase();l.match(/^(get|read|fetch|list|scan|query|search|check|retrieve)/)?c="READ":l.match(/^(set|write|update|create|delete|add|remove|send|post|exec|insert|append)/)?c="WRITE":l.match(/^(on|listen|sub|watch)/)?c="STREAM":c="TRIGGER"}r[a]={...i,io:c,type:i.type||"SIGNAL",human_label:i.human_label||i.desc||a},typeof r[a].icon!="string"&&delete r[a].icon}),r}getCanon(t){if(!t)return null;const r=String(t).toLowerCase();return this._enrichedRegistry[r]?this._enrichedRegistry[r]:this._ontology[t]?this._ontology[t]:Object.values(this._ontology).find(a=>(a.id||a.ID||"").toLowerCase()===r)}getRenderManifest(){return this._renderManifest}getCompatibleNodes(t){if(!this._isCompiled)return[];const r=(t||"").toUpperCase();return this._renderManifest.filter(n=>{const a=(n.ARCHETYPE||"").toUpperCase();return r==="VAULT"||r==="DATABASE"?["LLM","SERVICE","NODE","SLOT","EMAIL"].includes(a):r==="LLM"||r==="SERVICE"||r==="NODE"?["SLOT","EMAIL","CHAT","DATABASE"].includes(a):!1}).slice(0,5)}compileSlot(t,r={}){const n=t.id||t.technical_id||t.ID;let a=qr[n];a||(a=Object.values(qr).find(i=>i.technical_id===n)||{});const o=this._deepMerge(a,t);return(o.CAPABILITIES||o.methods)&&(o.CAPABILITIES=this._normalizeCapabilities(o.CAPABILITIES||o.methods)),{...o,id:n,LABEL:o.LABEL||o.label||a.LABEL||"VIRTUAL_SLOT",ARCHETYPE:(o.ARCHETYPE||a.ARCHETYPE||"SLOT").toUpperCase(),isVirtual:o.isVirtual||a.isVirtual||!1}}getModulesByLevel(t){return this._modulesByLevel[t]||[]}}const ee=new Ih,wh=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));let ec=null,tc=null,rc=null;const ns=[];let nc=!1,sc=null;const ht={setState:e=>{ec=e},getState:()=>ec,setOrchestrator:e=>{tc=e},getOrchestrator:()=>tc,setKernel:e=>{rc=e},getKernel:()=>rc,addLog:(e,t="info",r="SYSTEM")=>{const n={msg:e,level:t,time:new Date().toLocaleTimeString(),node:r,timestamp:Date.now()};ns.push(n),ns.length>500&&ns.shift()},getLogs:()=>[...ns],activateBinding:e=>{nc=!0,sc=e,console.log(`[StateBridge] Spatial Binding Activated for ${e}`)},isBindingActive:()=>nc,getCurrentTool:()=>sc};class Rh{constructor(){return this.isLabMode=window.location.href.includes("mode=lab"),this.isIgnited=!1,this.sovereigntyStatus="STANDBY",this.L0=null,new Proxy(this,{get:(t,r)=>r in t?t[r]:(n,a)=>t.call(r,n,a)})}async runSystemAudit(){return await this.call("public","runSystemAudit",{})}async call(t,r,n={}){return await Nt.call(t,r,n)}async executeAction(t,r={}){return await Nt.executeAction(t,r)}async ignite(){const t=(n,a="warn")=>{ht.addLog(n,a,"ADAPTER"),console[a==="error"?"error":"log"](` [SovereignAdapter] ${n}`)};t("[IGNITION] Iniciando descubrimiento core...");const r=localStorage.getItem("INDRA_GENOTYPE_L0");if(r&&!this.isLabMode)try{this.L0=JSON.parse(r),this.isIgnited=!0,this.sovereigntyStatus="ACTIVE",this.L0.COMPONENT_REGISTRY&&ee.setOntology(this.L0.COMPONENT_REGISTRY,this.L0),t(` [L0] Cache restaurado v${this.L0.VERSION}.`)}catch{localStorage.removeItem("INDRA_GENOTYPE_L0")}try{t("Sincronizando Genotipo con el Core...");const n=await Nt.call("system","getSovereignGenotype",{});n&&n.COMPONENT_REGISTRY&&(this.L0=n,this.isIgnited=!0,this.sovereigntyStatus="ACTIVE",localStorage.setItem("INDRA_GENOTYPE_L0",JSON.stringify(this.L0)),ee.setOntology(this.L0.COMPONENT_REGISTRY,this.L0),this.L0.ARTIFACT_SCHEMAS&&ee.setArtifactSchemas(this.L0.ARTIFACT_SCHEMAS),t(" Genotipo Sincronizado correctamente.","info"))}catch(n){t(` Fallo en sincronizacin core: ${n.message}`,"error"),this.L0||(this.sovereigntyStatus="LOCKED")}return{success:this.sovereigntyStatus==="ACTIVE",status:this.sovereigntyStatus,genotype:this.L0,error:this.sovereigntyStatus==="LOCKED"?"CORE_UNREACHABLE":null}}async getCanon(t){return this.L0?ee.getCanon(t):null}}const se=new Rh,ac=e=>{let t;const r=new Set,n=(u,p)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const x=t;t=p??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(v=>v(t,x))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>l,subscribe:u=>(r.add(u),()=>r.delete(u))},l=t=e(n,a,c);return c},jh=e=>e?ac(e):ac,Oh=e=>e;function Lh(e,t=Oh){const r=ce.useSyncExternalStore(e.subscribe,ce.useCallback(()=>t(e.getState()),[e,t]),ce.useCallback(()=>t(e.getInitialState()),[e,t]));return ce.useDebugValue(r),r}const oc=e=>{const t=jh(e),r=n=>Lh(t,n);return Object.assign(r,t),r},Ri=e=>e?oc(e):oc,Dh=e=>(t,r,n)=>{const a=n.subscribe;return n.subscribe=(i,c,l)=>{let u=i;if(c){const p=(l==null?void 0:l.equalityFn)||Object.is;let h=i(n.getState());u=x=>{const v=i(x);if(!p(h,v)){const y=h;c(h=v,y)}},l!=null&&l.fireImmediately&&c(h,h)}return a(u)},e(t,r,n)},kh=Dh,Ph="INDRA_COSMOS_DB",Mh=1,lt="realities";let Uh=class{constructor(){this.db=null,this.initPromise=this._init()}async _init(){return new Promise((t,r)=>{const n=indexedDB.open(Ph,Mh);n.onupgradeneeded=a=>{const o=a.target.result;o.objectStoreNames.contains(lt)||o.createObjectStore(lt,{keyPath:"id"})},n.onsuccess=a=>{this.db=a.target.result,console.log("[AxiomaticDB]  L2 Repository connected."),t(this.db)},n.onerror=a=>{console.error("[AxiomaticDB]  Failed to open IndexedDB:",a.target.error),r(a.target.error)}})}async ensureDB(){if(await this.initPromise,!this.db)throw new Error("Database not initialized")}async setItem(t,r){return await this.ensureDB(),new Promise((n,a)=>{const c=this.db.transaction([lt],"readwrite").objectStore(lt).put({id:t,data:r,updatedAt:Date.now()});c.onsuccess=()=>n(!0),c.onerror=()=>a(c.error)})}async getItem(t){return await this.ensureDB(),new Promise((r,n)=>{const i=this.db.transaction([lt],"readonly").objectStore(lt).get(t);i.onsuccess=()=>r(i.result?i.result.data:null),i.onerror=()=>n(i.error)})}async deleteCosmos(t){return await this.ensureDB(),new Promise((r,n)=>{const i=this.db.transaction([lt],"readwrite").objectStore(lt).delete(t);i.onsuccess=()=>r(!0),i.onerror=()=>n(i.error)})}async purge(){return await this.ensureDB(),new Promise((t,r)=>{const o=this.db.transaction([lt],"readwrite").objectStore(lt).clear();o.onsuccess=()=>t(!0),o.onerror=()=>r(o.error)})}};const De=new Uh,H=Ri(kh((e,t)=>({session:{id:null,status:"BOOTING",mode:"STANDARD",last_validated:null,currentRevisionHash:null,revisionCycle:0,hashInitialized:!1,isLoading:!1,syncStatus:"SYNCED",failedSyncAttempts:0,lastSyncTimestamp:null,lastSyncError:null},interdiction:{active:!1,reason:null},setSessionAuthorized:(r,n="STANDARD")=>{console.log(`[AxiomaticState]  Session Authorized: ${r} [${n}]`),e({session:{id:r,status:"READY",mode:n,last_validated:Date.now()},interdiction:{active:n==="ARCHEOLOGICAL",reason:n==="ARCHEOLOGICAL"?"READ_ONLY_RECOVERY":null}})},terminateSession:r=>{console.warn(`[AxiomaticState]  Session Terminated: ${r}`),e({session:{id:null,status:"TERMINATED",mode:"STANDARD",last_validated:null,hashInitialized:!0},interdiction:{active:!1,reason:null}})},engageWorldLock:r=>{console.log(`[AxiomaticState]  World Lock Engaged: ${r}`),e(n=>({interdiction:{active:!0,reason:r}}))},releaseWorldLock:()=>{console.log("[AxiomaticState]  World Lock Released"),e(r=>({interdiction:{active:!1,reason:null}}))},igniteHash:async()=>{try{console.log("[AxiomaticState]  Recalling temporal identity from Iron Memory...");let r=await De.getItem("INDRA_REVISION_HASH");r||(r=localStorage.getItem("INDRA_REVISION_HASH"),r&&console.info("[AxiomaticState]  Fallback to Legacy Memory successful.")),e(n=>({session:{...n.session,currentRevisionHash:r,hashInitialized:!0}}))}catch(r){console.error("[AxiomaticState]  Memory corrupted during ignition:",r),e(n=>({session:{...n.session,hashInitialized:!0}}))}},updateRevisionHash:r=>{r&&(localStorage.setItem("INDRA_REVISION_HASH",r),De.setItem("INDRA_REVISION_HASH",r).catch(n=>console.warn("[AxiomaticState] Failed to persist hash to Iron Memory:",n)),e(n=>({session:{...n.session,currentRevisionHash:r,revisionCycle:n.session.revisionCycle+1,hashInitialized:!0}})))},isWriteAllowed:()=>{const r=t();return r.interdiction.active?!1:r.session.id===null?!0:r.session.status==="READY"},setLoading:r=>{e(n=>{const a=n.interdiction.reason,o=a&&a!=="TRANSIT_RESONANCE",i=r?!0:a==="TRANSIT_RESONANCE"?!1:n.interdiction.active;return{session:{...n.session,isLoading:r},interdiction:{active:i,reason:r?o?a:"TRANSIT_RESONANCE":a==="TRANSIT_RESONANCE"?null:a}}})},updateSyncStatus:(r,n=null)=>{e(a=>{const o={session:{...a.session,syncStatus:r,lastSyncError:n}};if(r==="SYNCED"&&(o.session.lastSyncTimestamp=Date.now(),o.session.failedSyncAttempts=0,console.log("%c  [AxiomaticState] Sync SUCCESS - Reality backed up","color: #10b981")),r==="RETRY"||r==="OFFLINE"){o.session.failedSyncAttempts=a.session.failedSyncAttempts+1;const i=o.session.failedSyncAttempts;console.warn(`%c  [AxiomaticState] Sync FAIL (attempt ${i}) - ${(n==null?void 0:n.message)||"Unknown error"}`,"color: #f59e0b"),i>=4&&r==="RETRY"&&(o.session.syncStatus="OFFLINE",console.error("%c  [AxiomaticState] Entering OFFLINE MODE","color: #ef4444; font-weight: bold"))}return o})}}))),Fh=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"})),ys={transmute:(e,t)=>{const r=H.getState();let n=(e==null?void 0:e.result)!==void 0?e.result:e;if(Array.isArray(n)&&(n=n[0]),!n)return e;if(!n.id&&(n.cosmos_id||n.ID||n.cosmosId)&&(n.id=n.cosmos_id||n.ID||n.cosmosId),n._SIGNAL)return Bh(n._SIGNAL,n.payload||n);if(n.error)throw zh(n.error,t),new Error(`[Transmuter] Blocked Error: ${n.error}`);if(t==="SYNC"&&n.id&&r.session.id&&n.id!==r.session.id)throw console.error(`[Transmuter]  Ghost Data Detected! Incoming: ${n.id}, Session: ${r.session.id}`),new Error("[Transmuter] Identity Mismatch blocked.");return n}};function Bh(e,t){const r=H.getState();switch(e){case"PATIENCE_TOKEN":return console.log("[Transmuter]  Patience Token received. Identifying as Dark Matter..."),{...t,_SIGNAL:"PATIENCE_TOKEN"};case"FORCE_EJECT":throw console.warn("[Transmuter]  FORCE EJECT SIGNAL RECEIVED."),r.terminateSession("CORE_EJECT_COMMAND"),new Error("CORE_EJECT");case"RECOVERY_MODE":return console.warn("[Transmuter]  RECOVERY MODE SIGNAL RECEIVED."),t&&t.id&&r.setSessionAuthorized(t.id,"ARCHEOLOGICAL"),t;default:return console.warn(`[Transmuter] Unknown Signal: ${e}`),t}}function zh(e,t){const r=H.getState(),n=(e||"").toUpperCase();(n.includes("NOT FOUND")||n.includes("DELETED")||n.includes("NO EXISTE"))&&(t==="MOUNT"||t==="SYNC")&&(console.error(`[Transmuter]  Fatal Reality Error detected: ${n}`),r.terminateSession("REALITY_NOT_FOUND")),(n.includes("LOCKED")||n.includes("READ ONLY"))&&(console.warn("[Transmuter]  Locking Session due to server restriction."),r.engageWorldLock("SERVER_MANDATE"))}class Vh{constructor(){this.batchQueue=[],this.batchTimer=null,this.BATCH_WINDOW_MS=100}async call(t,r,n={}){const a=H.getState();if(this._detectWriteIntent(r)&&(a.session.hashInitialized||(console.log("[InterdictionUnit]  Waiting for temporal reification before write..."),await this._waitFor(()=>H.getState().session.hashInitialized)),!a.isWriteAllowed())){const i=a.interdiction.reason||a.session.status;throw console.warn(`[InterdictionUnit]  DEFERRED: ${t}.${r} [Reason: ${i}]`),new Error(`[Interdiction] ${i}`)}return new Promise((i,c)=>{this.batchQueue.push({service:t,method:r,payload:n,resolve:i,reject:c}),this.batchTimer||(this.batchTimer=setTimeout(()=>this._flushBatch(),this.BATCH_WINDOW_MS))})}async _flushBatch(){var r,n,a,o;const t=[...this.batchQueue];if(this.batchQueue=[],this.batchTimer=null,t.length!==0){try{console.log(`[InterdictionUnit]  Dispatching Batch of ${t.length} commands...`);const i=H.getState().session.currentRevisionHash,c=t.map(p=>({service:p.service,method:p.method,payload:{...p.payload,revisionHash:i,_revisionHash:i}})),l=(n=(r=ht.getOrchestrator())==null?void 0:r.getState)==null?void 0:n.call(r);if(l&&typeof l.prepareSnapshot=="function"){const p=l.prepareSnapshot();p&&(((a=p.artifacts)==null?void 0:a.length)>0||((o=p.relationships)==null?void 0:o.length)>0)&&(console.info(`%c  [Interdiction] Piggybacking reality snapshot (${p.artifacts.length} nodes)`,"color: #10b981; font-weight: bold;"),c.forEach(h=>{h.payload._carriedReality=!0,h.payload.snapshot=p}))}const u=await Nt.call("system","executeBatch",{commands:c});if(Array.isArray(u)){let p=null;u.forEach((h,x)=>{const v=t[x];if(v)try{const y=ys.transmute(h,v.method);console.log(`[InterdictionUnit]  Resolving: ${v.service}.${v.method}`,{response:y}),v.resolve(y),v._resolved=!0,h&&h._snapshot&&(p=h._snapshot),v.method==="stabilizeAxiomaticReality"&&(p=y)}catch(y){console.error(`[InterdictionUnit]  Rejecting: ${v.service}.${v.method}`,y.message),v.reject(y),v._resolved=!1}}),p&&(p.success?H.getState().updateSyncStatus("SYNCED"):H.getState().updateSyncStatus("RETRY",new Error(p.error||"Snapshot sync failed")))}else throw new Error(u.error||"Invalid Batch Response from Gateway.")}catch(i){console.error("[InterdictionUnit]  Batch Execution Failed:",i.message),t.forEach(u=>u.reject(i));const c=H.getState(),l=c.session.failedSyncAttempts;if(c.session.syncStatus!=="OFFLINE"){c.updateSyncStatus("RETRY",i);const u=[5e3,1e4,3e4],p=u[Math.min(l,u.length-1)];l<3&&(console.warn(`%c  [InterdictionUnit] Retry scheduled in ${p/1e3}s...`,"color: #fbbf24"),setTimeout(async()=>{var h,x,v,y;try{const E=(x=(h=ht.getOrchestrator())==null?void 0:h.getState)==null?void 0:x.call(h);if(E&&typeof E.prepareSnapshot=="function"){const A=E.prepareSnapshot();A&&(((v=A.artifacts)==null?void 0:v.length)>0||((y=A.relationships)==null?void 0:y.length)>0)&&((await Nt.call("sensing","stabilizeAxiomaticReality",{snapshot:A,_carriedReality:!0,_isRetry:!0})).success?H.getState().updateSyncStatus("SYNCED"):H.getState().updateSyncStatus("RETRY",new Error("Retry failed")))}}catch(E){console.error("[InterdictionUnit] Retry attempt failed:",E),H.getState().updateSyncStatus("RETRY",E)}},p))}}t.some(i=>i.method==="stabilizeAxiomaticReality")&&t.some(i=>i.method==="stabilizeAxiomaticReality"&&i._resolved===!0)}}async _waitFor(t){return new Promise(r=>{const n=()=>{t()?r():setTimeout(n,100)};n()})}_detectWriteIntent(t){const r=t.toUpperCase();return r.includes("SAVE")||r.includes("WRITE")||r.includes("DELETE")||r.includes("CREATE")||r.includes("UPDATE")||r.includes("PATCH")||r.includes("MOVE")||r.includes("RENAME")}}const ut=new Vh;class $h{constructor(){this.enabled=localStorage.getItem("BACKEND_LOGS_ENABLED")==="true"||!0}processResponse(t,r){return!this.enabled||!t._logs||(console.group(` [BACKEND] ${r}`),t._logs.forEach(n=>{const a={DEBUG:"",INFO:"",WARN:"",ERROR:"",FATAL:"",USER:""}[n.level]||"",o={DEBUG:"color: #888",INFO:"color: #0066cc",WARN:"color: #ff9900",ERROR:"color: #cc0000",FATAL:"color: #ff0000; font-weight: bold",USER:"color: #00cc00"}[n.level]||"";console.log(`%c${a} [${n.component}] ${n.message}`,o,n.data||"")}),console.groupEnd(),delete t._logs),t}toggle(t){this.enabled=t,localStorage.setItem("BACKEND_LOGS_ENABLED",t.toString()),console.log(`Backend logs ${t?"enabled":"disabled"}`)}isEnabled(){return this.enabled}}const ka=new $h;class Or{static setDispatcher(t){this.dispatcher=t}static log(t,r,n={}){this.dispatcher&&this.dispatcher({type:"LOG_ENTRY",payload:{source:"Validator_IO_node_Data",level:t,message:r,timestamp:new Date().toISOString(),...n}})}static scrub(t,r="UNKNOWN"){if(!t){const i=`[Validator_IO_node_Data] FATAL: Null response in ${r}`;throw this.log("FATAL",i),new Error(i)}const n=t.result!==void 0?t.result:t;if(t._SIGNAL&&t._SIGNAL!=="PATIENCE_TOKEN"&&t._SIGNAL!=="REALITY_CONFLICT")return t;const a=n.artifacts||n.ARTIFACTS,o=n.id||n.ID||n.uuid;if(r.includes("mountCosmos")){const i=[];if(o||i.push("ID/UUID"),a||i.push("ARTIFACTS"),i.length>0){const c=`VIOLACIN_DE_Soberana: El contrato de '${r}' carece de campos mandatorios: ${i.join(", ")}`;throw console.error(`[Validator_IO_node_Data] Contract Violation in ${r}:`,n),this.log("FATAL",c,{context:r,missing:i}),new Error(c)}this.log("SUCCESS",` Reality '${o}' Certified (Integrity: 100%)`,{context:r})}return t}static validateRelationship(t,r,n){var c,l;if(!t||!r)return!1;const a=(c=t.CAPABILITIES)==null?void 0:c[n.sourcePort],o=(l=r.CAPABILITIES)==null?void 0:l[n.targetPort];if(!a||!o)return this.log("WARNING",` Invalid Ports: ${n.sourcePort} -> ${n.targetPort}`),!1;if(!(a.type===o.type||a.type==="SIGNAL"||o.type==="SIGNAL")){const u=` POLARITY ERROR: Cannot connect ${a.type} to ${o.type}`;return this.log("FATAL",u,{source:t.LABEL,target:r.LABEL}),!1}return!0}static validateBatch(t){if(!Array.isArray(t)){const r="[Validator_IO_node_Data] Invalid Batch: Expected Array.";throw this.log("FATAL",r),new Error(r)}return t}}la(Or,"dispatcher",null);class Gh{constructor(){this.activeCosmosId=null,this.memoryCache=new Map,this.pendingRequests=new Map,this.PERSISTENCE_KEY="INDRA_CORTEX_CACHE_V1",this._loadPersistence(),this.syncQueue=Promise.resolve(),this.isSyncing=!1,this.lastRevisionHash=null;try{this.lockChannel=new BroadcastChannel("INDRA_SATTVA_LOCK");const t=Date.now();this.lockChannel.onmessage=r=>{r.data.type==="CHECK_ALIVE"?Date.now()-t>2e3&&this.lockChannel.postMessage({type:"I_AM_ALIVE",timestamp:t}):r.data.type==="I_AM_ALIVE"&&Date.now()-t<2e3&&(console.error(" [CRITICAL] Instance Conflict. Locking UI."),window.dispatchEvent(new CustomEvent("INDRA_LOCKDOWN",{detail:{reason:"MULTIPLE_TABS"}})))},this.lockChannel.postMessage({type:"CHECK_ALIVE"}),window.addEventListener("beforeunload",()=>{this.lockChannel.close()})}catch{console.warn("BroadcastChannel not supported. IndraLock disabled.")}this.compressionEngine={compress:async t=>{try{const n=new Blob([JSON.stringify(t)]).stream().pipeThrough(new CompressionStream("gzip")),o=await new Response(n).blob();return new Promise(i=>{const c=new FileReader;c.onloadend=()=>{const l=c.result;i(l.split(",")[1])},c.readAsDataURL(o)})}catch{return console.warn("Compression failed, fallback to raw JSON."),null}}}}_loadPersistence(){try{const t=localStorage.getItem(this.PERSISTENCE_KEY);if(t){const r=JSON.parse(t);Object.keys(r).forEach(n=>this.memoryCache.set(n,r[n]))}}catch{console.warn("[ContextClient] Memory corruption detected. Resetting Cortex.")}}_savePersistence(){try{const t=Object.fromEntries(this.memoryCache);localStorage.setItem(this.PERSISTENCE_KEY,JSON.stringify(t))}catch{}}async igniteReflexes(t){console.log(" [Cortex] Igniting Autonomic Reflexes...");const r=this.memoryCache.get("availableCosmos");r&&t({type:"UPDATE_COSMOS_REGISTRY",payload:r}),this.listAvailableCosmos(!1).then(n=>{t({type:"UPDATE_COSMOS_REGISTRY",payload:n.artifacts||[]})}).catch(n=>console.warn("[Cortex] Reflex fizzled:",n))}async listAvailableCosmos(t=!1){const r=`availableCosmos_${t}`;if(this.pendingRequests.has(r))return this.pendingRequests.get(r);const n=(async()=>{try{const a=await ut.call("cosmos","listAvailableCosmos",{includeAll:t}),o=Or.scrub(a,"listAvailableCosmos"),i=ka.processResponse(o,"listAvailableCosmos");if(i&&i.artifacts){const c=i.artifacts.filter(l=>(l.type==="COSMOS"||l.name&&l.name.toLowerCase().includes("cosmos")||l.identity&&l.identity.label)&&!(l.id&&String(l.id).startsWith("temp_")));this.memoryCache.set(r,c),t||this.memoryCache.set("availableCosmos",c),this._savePersistence(),i.artifacts=c}return i}catch(a){throw console.error(` [Cortex] Synapse Failed: ${a.message}`),a}finally{this.pendingRequests.delete(r)}})();return this.pendingRequests.set(r,n),n}async mountCosmos(t){if(!t)throw new Error("[ContextClient] cosmosId is required to mount.");try{const r=localStorage.getItem(`INDRA_COSMOS_${t}`);if(r){const c=JSON.parse(r);this.activeCosmosId=t,this.lastRevisionHash=c._local_hash||"unknown",console.log(" [ContextClient] L7 Cache Hit. Instant Mount.")}const n=await ut.call("cosmos","mountCosmos",{cosmosId:t});if(!n||!n.payload){if(n&&n.nodes)return console.warn("[ContextClient]  Legacy Response detected."),this.activeCosmosId=t,n;throw new Error("Invalid Reality Envelope received.")}const a=n.payload;this.lastRevisionHash=n.revision_hash;try{a._local_hash=n.revision_hash,localStorage.setItem(`INDRA_COSMOS_${t}`,JSON.stringify(a))}catch{console.warn("L7 Cache Full")}const o=Or.scrub(a,"mountCosmos"),i=ka.processResponse(o,"mountCosmos");if(i)return this.activeCosmosId=t,i;throw new Error("Empty payload in envelope.")}catch(r){throw console.error(` [ContextClient] Failed to mount: ${r.message}`),r}}async saveCosmos(t){if(!t)throw new Error("[ContextClient] Invalid cosmos object");try{localStorage.setItem(`INDRA_COSMOS_${this.activeCosmosId}`,JSON.stringify(t)),console.log(" [ContextClient] Local Save Secured.")}catch{console.warn(" [ContextClient] LocalStorage Full. Risk of data loss.")}return this._enqueueUpload(t)}async _enqueueUpload(t){return this.syncQueue=this.syncQueue.then(async()=>{this.isSyncing=!0;try{console.log(" [ContextClient] Compressing & Uploading...");const r=await this.compressionEngine.compress(t),n=await ut.call("cosmos","saveCosmos",{cosmosId:this.activeCosmosId,content_base64:r,revisionHash:this.lastRevisionHash||"force"});return n&&n.success&&n.new_revision_hash&&(this.lastRevisionHash=n.new_revision_hash,console.log(` [ContextClient] Cloud Sync Complete. Hash: ${n.new_revision_hash.substr(0,8)}`)),n}catch(r){return console.error(` [ContextClient] Background Sync Failed: ${r.message}`),{success:!1,local_saved:!0,error:r.message}}finally{this.isSyncing=!1}}),{success:!0,optimistic:!0}}async deleteCosmos(t){const n=(this.memoryCache.get("availableCosmos")||[]).filter(a=>a.id!==t);this.memoryCache.set("availableCosmos",n),this._savePersistence();try{if(console.log(` [ContextClient] Deep Cleaning: ${t}`),localStorage.removeItem(`INDRA_COSMOS_${t}`),await De.deleteCosmos(`COSMOS_STATE_${t}`),localStorage.getItem("LAST_ACTIVE_COSMOS_ID")===t){localStorage.removeItem("LAST_ACTIVE_COSMOS_ID");const a=ht.getState();a&&typeof a.dispatch=="function"&&a.dispatch({type:"CLEAR_COSMOS_SESSION"})}}catch(a){console.warn("[ContextClient] Deep Clean partial failure:",a)}try{const a=await ut.call("cosmos","deleteCosmos",{cosmosId:t}),o=Or.scrub(a,"deleteCosmos");return ka.processResponse(o,"deleteCosmos")}catch(a){throw console.error(` [ContextClient] Delete failed: ${a.message}`),a}}}const ss=new Gh,an={COMPONENT_REGISTRY:{DRIVE:{LABEL:"Google Drive",ARCHETYPE:"VAULT",DOMAIN:"SYSTEM_CORE",CAPABILITIES:{search:{io:"READ",type:"DATAFRAME",desc:"Global semantic search"},upload:{io:"WRITE",type:"BLOB",desc:"Blob storage ingestion"},sync:{io:"REFRESH",type:"SIGNAL",desc:"Force state consistency"},move:{io:"WRITE",type:"SIGNAL",desc:"Relocate atomic unit"}},VITAL_SIGNS:{LATENCY:{criticality:"NOMINAL",value:"45ms",trend:"stable"},STORAGE:{criticality:"WARNING",value:"85%",trend:"rising"},API_QUOTA:{criticality:"NOMINAL",value:"1200/min",trend:"stable"}},UI_LAYOUT:{SIDE_PANEL:"ENABLED",TERMINAL_STREAM:"ENABLED"}},NOTION:{LABEL:"Notion",ARCHETYPE:"VAULT",DOMAIN:"KNOWLEDGE_GRAPH",CAPABILITIES:{listContents:{io:"READ",type:"DATAFRAME",desc:"Explora estructura del grafo"},search:{io:"READ",type:"DATAFRAME",desc:"Bsqueda semntica global"},query_db:{io:"READ",type:"DATAFRAME",desc:"Consulta tablas y bases de datos"},read_content:{io:"READ",type:"DATAFRAME",desc:"Lectura de bloques como Markdown"}},VITAL_SIGNS:{API_RATE:{criticality:"NOMINAL",value:"3/sec",trend:"flat"},TOKEN_STATUS:{criticality:"NOMINAL",value:"VALID",trend:"stable"}}},EMAIL:{LABEL:"Terminal Mail",ARCHETYPE:"ADAPTER",DOMAIN:"COMMUNICATION",CAPABILITIES:{send:{io:"WRITE",type:"SIGNAL",desc:"Dispatch secure courier",inputs:{to:{type:"string"},subject:{type:"string"},body:{type:"DATAFRAME"},attachment:{type:"BLOB"},accountId:{type:"string"}}},scan:{io:"READ",type:"DATAFRAME",desc:"Inbox telemetry search"}},VITAL_SIGNS:{SCAN:{criticality:"NOMINAL",value:"ACTIVE",trend:"stable"},QUOTA_USED:{criticality:"NOMINAL",value:"12%",trend:"flat"}}},SLOT_MANAGER:{LABEL:"Reality Slot",ARCHETYPE:"SLOT",DOMAIN:"ORCHESTRATION",CAPABILITIES:{RENDER_VIEW:{label:"Proyectar Vista",icon:"",status:"CONNECTED",value:"ACTIVE",desc:"Proyectar vista hacia el dashboard"},EXPORT_PDF:{label:"Exportar PDF",icon:"",status:"DEFAULT",value:"READY",desc:"Materializar documento esttico"},STYLE_SYNC:{label:"Sincrona ADN",icon:"",status:"CONNECTED",value:"v1.2",desc:"Sincronizar ADN visual"},DATA_BRIDGE:{label:"Puente de Datos",icon:"",status:"BROKEN",value:"OFFLINE",desc:"Enlace fsico con el Core"}},views:[{id:"v1",label:"Tablero de Control",type:"DASHBOARD"},{id:"v2",label:"Factura Impresa",type:"DOCUMENT_PAGINATED"}]},COSMOS:{LABEL:"Cosmos Reality",ARCHETYPE:"REALITY",DOMAIN:"SPATIAL",CAPABILITIES:{GRAVITY:{label:"Gravedad",icon:"",status:"CONNECTED",value:"9.8m/s"},ENTROPY:{label:"Entropa",icon:"",status:"DEFAULT",value:"LOW"},DIMENSIONS:{label:"Dimensiones",icon:"",status:"CONNECTED",value:"3D + TIME"}}},LLM:{LABEL:"Cognitive Engine",ARCHETYPE:"SERVICE",DOMAIN:"INTELLIGENCE",CAPABILITIES:{generate:{io:"WRITE",type:"SIGNAL",desc:"Generar texto creativo",inputs:{prompt:{type:"string"}}},analyze:{io:"READ",type:"DATAFRAME",desc:"Analizar sentimiento/entidades"},chat:{io:"STREAM",type:"SIGNAL",desc:"Conversacin continua"}},VITAL_SIGNS:{TOKENS_PM:{criticality:"NOMINAL",value:"450",trend:"stable"},LATENCY:{criticality:"WARNING",value:"1.2s",trend:"rising"}}},NODE:{LABEL:"Generic Processor",ARCHETYPE:"NODE",DOMAIN:"LOGIC",CAPABILITIES:{PROCESS:{label:"Procesador",icon:"",status:"CONNECTED",value:"8 Cores"},MEMORY:{label:"Memoria RAM",icon:"",status:"CONNECTED",value:"16GB"},UPTIME:{label:"Tiempo Activo",icon:"",status:"DEFAULT",value:"12d 4h"}},VITAL_SIGNS:{CPU:{criticality:"NOMINAL",value:"12%",trend:"stable"}}},DATABASE:{LABEL:"Generic DB",ARCHETYPE:"DATABASE",DOMAIN:"DATA_L1",CAPABILITIES:{QUERY:{label:"Consultas",icon:"",status:"CONNECTED",value:"SQL_INIT"},PERSISTENCE:{label:"Persistencia",icon:"",status:"CONNECTED",value:"NOMINAL"},SCHEMA_VOL:{label:"Volumen",icon:"",status:"DEFAULT",value:"1.2 TB"}},VITAL_SIGNS:{CONNECTIONS:{criticality:"NOMINAL",value:"4/10",trend:"flat"}},data:{type:"DATABASE",columns:[{id:"id",label:"ID",type:"number"},{id:"nombre",label:"Nombre",type:"string"},{id:"contacto",label:"Contacto",type:"string"},{id:"estado",label:"Estado",type:"tag"},{id:"prioridad",label:"Prioridad",type:"number"}],rows:[{id:1,nombre:"Empresa Alpha",contacto:"Juan Perez",estado:"ACTIVO",prioridad:5},{id:2,nombre:"Beta Dynamics",contacto:"Maria Garcia",estado:"PENDIENTE",prioridad:3},{id:3,nombre:"Gamma Solutions",contacto:"Luis Rodriguez",estado:"INACTIVO",prioridad:1},{id:4,nombre:"Delta Systems",contacto:"Ana Martinez",estado:"ACTIVO",prioridad:4},{id:5,nombre:"Epsilon Tech",contacto:"Carlos Sanchez",estado:"ACTIVO",prioridad:2}]}}},GARAGE_PROTOTYPES:{VAULT:{id:"garage_vault",LABEL:"PROTOTYPE_VAULT",ARCHETYPE:"VAULT",DOMAIN:"SYSTEM",items:[{id:"g1",name:"Prototype Folder A",type:"DIRECTORY"},{id:"g2",name:"Prototype Folder B",type:"DIRECTORY"},{id:"g3",name:"Mock_Database.db",type:"DATABASE"},{id:"g4",name:"Design_System.pdf",type:"FILE",mimeType:"application/pdf"}]},DATABASE:{id:"garage_db",LABEL:"PROTOTYPE_DB",ARCHETYPE:"DATABASE",DOMAIN:"DATA_L1",data:{columns:[{id:"id",label:"ID",type:"string"},{id:"status",label:"Status",type:"tag"},{id:"value",label:"Value",type:"number"}],rows:[{id:"row_1",status:"ACTIVE",value:100},{id:"row_2",status:"PENDING",value:50},{id:"row_3",status:"CLOSED",value:75}]}},SLOT:{id:"garage_slot",LABEL:"PROTOTYPE_SLOT",ARCHETYPE:"SLOT",DOMAIN:"ORCHESTRATION",CAPABILITIES:{RENDER_VIEW:{label:"Proyectar Vista",icon:"TV_SCREEN",status:"CONNECTED",value:"ACTIVE",desc:"Proyectar vista hacia el dashboard"},EXPORT_PDF:{label:"Exportar PDF",icon:"PDF",status:"DEFAULT",value:"READY",desc:"Materializar documento esttico"},STYLE_SYNC:{label:"Sincrona ADN",icon:"SYNC",status:"CONNECTED",value:"v1.2",desc:"Sincronizar ADN visual"},DATA_BRIDGE:{label:"Puente de Datos",icon:"BRIDGE",status:"BROKEN",value:"OFFLINE",desc:"Enlace fsico con el Core"}},views:[{id:"v1",label:"Tablero de Control",type:"DASHBOARD"},{id:"v2",label:"Factura Impresa",type:"DOCUMENT_PAGINATED"}]},COMMUNICATION:{id:"garage_comm",LABEL:"PROTOTYPE_COMM",ARCHETYPE:"COMMUNICATION",DOMAIN:"COMMUNICATION",CAPABILITIES:{INBOX:{label:"Bandeja de Entrada",icon:"CHAT",status:"CONNECTED",value:"12 New"},SYNC_MAIL:{label:"Sincronizar",icon:"SYNC",status:"DEFAULT",value:"LIVE"}}},LLM:{id:"garage_llm",LABEL:"PROTOTYPE_LLM",ARCHETYPE:"SERVICE",DOMAIN:"INTELLIGENCE",CAPABILITIES:{GENERATE:{label:"Generar",icon:"SYNC",status:"CONNECTED",value:"NOMINAL"},ANALYZE:{label:"Analizar",icon:"SYNC",status:"DEFAULT",value:"IDLE"}}},REALITY:{id:"garage_cosmos",LABEL:"PROTOTYPE_REALITY",ARCHETYPE:"REALITY",DOMAIN:"SPATIAL",CAPABILITIES:{GRAVITY:{label:"Gravedad",icon:"GRAVITY",status:"CONNECTED",value:"9.8m/s"},ENTROPY:{label:"Entropa",icon:"ENTROPY",status:"DEFAULT",value:"LOW"},DIMENSIONS:{label:"Dimensiones",icon:"DIMENSIONS",status:"CONNECTED",value:"3D + TIME"}}}}},Yh={db_notion_1:[{id:1,nombre:"Empresa Alpha",contacto:"Juan Perez",estado:"ACTIVO",prioridad:5},{id:2,nombre:"Beta Dynamics",contacto:"Maria Garcia",estado:"PENDIENTE",prioridad:3},{id:3,nombre:"Gamma Solutions",contacto:"Luis Rodriguez",estado:"INACTIVO",prioridad:1},{id:4,nombre:"Delta Systems",contacto:"Ana Martinez",estado:"ACTIVO",prioridad:4},{id:5,nombre:"Epsilon Tech",contacto:"Carlos Sanchez",estado:"ACTIVO",prioridad:2}]};class Hh{constructor(){this.contracts=new Map,this.metadataCache=new Map,this.storageKey="INDRA_PERSISTENCE_METADATA",this._loadMetadata(),this._registerDefaultContracts()}_registerDefaultContracts(){const t={vault_tree_ROOT:{hydrate:!0,scope:"COSMOS",ttl:3600,compute:"EAGER"},metadata:{hydrate:!0,scope:"COSMOS",ttl:3600,compute:"EAGER"}};this.registerContract("drive",t),this.registerContract("notion",t)}registerContract(t,r){!r||typeof r!="object"||(this.contracts.set(t,r),console.log(`[PersistenceManager]  Registered contract for ${t}`))}async hydrate(t,r){var o,i;const n={},a=Date.now();for(const[c,l]of this.contracts.entries()){n[c]={};for(const[u,p]of Object.entries(l)){if(!p.hydrate)continue;const h=`${c}.${u}`,x=(i=(o=t==null?void 0:t.persistence)==null?void 0:o[c])==null?void 0:i[u];let v=x;if(!v){const y=await De.getItem(h);y&&(v=y)}if(v&&v.timestamp&&(a-new Date(v.timestamp).getTime())/1e3<p.ttl){n[c][u]=v.data,console.log(`[PersistenceManager]  Hydrated ${h} from ${x?"COSMOS":"L2_DB"}`);continue}try{console.log(`[PersistenceManager]  Fetching fresh data for ${h}...`);const y=await this._fetchData(c,u,r);n[c][u]=y,await this.saveLocal(h,y)}catch(y){console.error(`[PersistenceManager]  Failed to fetch ${h}:`,y)}}}return n}async saveLocal(t,r){const n={data:r,timestamp:new Date().toISOString()};await De.setItem(t,n),this.metadataCache.set(t,{timestamp:n.timestamp}),this._saveMetadata()}updateFlowState(t,r,n){const a=this.contracts.get(t);if(!a||!a[r]||a[r].scope!=="COSMOS")return null;const o=`${t}.${r}`,i={data:n,timestamp:new Date().toISOString()};return this.saveLocal(o,n),{adapterId:t,dataKey:r,entry:i}}isCacheValid(t,r){const n=this.contracts.get(t);if(!n||!n[r]){if(r.startsWith("vault_tree_")){const c=this.metadataCache.get(`${t}.${r}`);return c?(Date.now()-new Date(c.timestamp).getTime())/1e3<3600:!1}return!1}const a=`${t}.${r}`,o=this.metadataCache.get(a);return o?(Date.now()-new Date(o.timestamp).getTime())/1e3<n[r].ttl:!1}async getCached(t,r){const n=`${t}.${r}`,a=await De.getItem(n);return a?a.data:null}async clearCache(t=null){if(t)for(const r of this.metadataCache.keys())r.startsWith(`${t}.`)&&(this.metadataCache.delete(r),await De.deleteCosmos(r));else this.metadataCache.clear(),await De.purge();this._saveMetadata()}async fetchContent(t,r,n){const{folderId:a="ROOT",query:o}=r,i=o?null:`${t}.vault_tree_${a}`,c=r.forceRefresh||r.refresh;if(i&&this.isCacheValid(t,`vault_tree_${a}`)&&!c){const l=await this.getCached(t,`vault_tree_${a}`);if(l)return console.log(`[PersistenceManager]  DB Hit for ${i}`),{items:l,fromCache:!0}}try{const l=r.accountId||null,u={folderId:a,query:o,accountId:l,forceRefresh:c},p=await n.executeAction(`${t}:listContents`,u);if(p&&p.error)throw new Error(`[${p.error_code||"UNKNOWN"}] ${p.error}`);const h=Array.isArray(p)?p:(p==null?void 0:p.results)||(p==null?void 0:p.items)||(p==null?void 0:p.artifacts)||(p==null?void 0:p.result)||[],x=(p==null?void 0:p.metadata)||{hydrationLevel:100,total:h?h.length:0};return i&&h&&await this.saveLocal(i,h),typeof p=="object"&&!Array.isArray(p)?{...p,items:h||[],metadata:x}:{items:h||[],metadata:x}}catch(l){throw console.error(`[PersistenceManager]  Signal Lost for ${t}:`,l),l}}async _fetchData(t,r,n){let a={folderId:"ROOT"};return r.startsWith("vault_tree_")&&(a.folderId=r.replace("vault_tree_","")),(await this.fetchContent(t,a,n)).items}async triggerBackgroundHydration(t,r,n){console.log("[PersistenceManager]  Background Hydration sequence initiated...");const a=(t==null?void 0:t.adapters)||[],o=[];try{for(const[i,c]of this.contracts.entries()){const l=a.includes(i);for(const[u,p]of Object.entries(c))(p.compute==="EAGER"||l&&p.hydrate)&&(this.isCacheValid(i,u)||o.push(this._fetchData(i,u,r).then(h=>this.saveLocal(`${i}.${u}`,h))))}o.length>0&&await Promise.all(o)}catch(i){console.error("[PersistenceManager]  Hydration sweep interrupted:",i)}finally{n&&n()}}_loadMetadata(){try{const t=localStorage.getItem(this.storageKey);if(t){const r=JSON.parse(t);for(const[n,a]of Object.entries(r))this.metadataCache.set(n,a)}}catch(t){console.warn("[PersistenceManager] Meta-error:",t)}}_saveMetadata(){try{const t=Object.fromEntries(this.metadataCache);localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(t){console.warn("[PersistenceManager] Meta-save fail:",t)}}async reconcileCosmosState(t,r=null){var i;console.log(" [DEBUG] reconcileCosmosState CALLED",{hasLocal:!!t,hasBackend:!!r,localArtifactsCount:((i=t==null?void 0:t.artifacts)==null?void 0:i.length)||0}),console.group(" [ADR-012] Reconciliation Protocol");let n=t,a="LOCAL";if(r){const c=new Date((t==null?void 0:t.last_modified)||(t==null?void 0:t._timestamp)||0).getTime(),l=new Date((r==null?void 0:r.last_modified)||(r==null?void 0:r._timestamp)||0).getTime();console.log(` Local timestamp: ${new Date(c).toISOString()}`),console.log(` Backend timestamp: ${new Date(l).toISOString()}`),l>c?(n=r,a="BACKEND",console.log(" Backend is newer, using backend state")):console.log(" Local is newer or equal, using local state")}else console.log(" Backend unavailable, using local state");const o=this._sanitizeCosmosState(n);return a==="LOCAL"&&r===null?console.log(" Backend unavailable, state will sync on next connection"):a==="LOCAL"&&r&&console.log(" Local is newer, should upload to backend"),console.log(` Reconciliation complete. Truth source: ${a}`),console.groupEnd(),o}_sanitizeCosmosState(t){var n;if(!t)return t;console.group(" [Hygiene] State Sanitization");const r={...t};if(Array.isArray(r.artifacts)){const a=r.artifacts.length,o=r.artifacts.filter(l=>!l._isDeleted),i=new Map;o.forEach(l=>{i.set(l.id,l)}),r.artifacts=Array.from(i.values());const c=r.artifacts.length;a!==c?console.warn(` Removed ${a-c} duplicate/zombie artifacts`):console.log(" Artifacts array is clean (no duplicates)"),r.artifacts=r.artifacts.map(l=>{if(!l.CAPABILITIES)return l;const u={...l.CAPABILITIES},p=Object.keys(u).find(x=>x.replace(/_/g," ").trim().toUpperCase()==="QUERY FILTER");p&&p!=="QUERY_FILTER"&&(u.QUERY_FILTER=u[p],delete u[p],console.log(` Normalized '${p}'  'QUERY_FILTER' for artifact ${l.id}`));const h={...l,CAPABILITIES:u};return l.data&&typeof l.data=="object"&&(h.data={...l.data,CAPABILITIES:u}),h})}if(Array.isArray(r.relationships)){const a=new Set(((n=r.artifacts)==null?void 0:n.map(c=>c.id))||[]),o=r.relationships.length;r.relationships=r.relationships.filter(c=>!c._isDeleted&&a.has(c.source)&&a.has(c.target));const i=r.relationships.length;o!==i&&console.warn(` Removed ${o-i} orphaned/zombie relationships`)}return console.log(" State sanitization complete"),console.groupEnd(),r}}const Ot=new Hh;class Wh{constructor(){la(this,"lib",{map:(t,r,n,a,o)=>(t-r)*(o-a)/(n-r)+a,oscillate:(t,r)=>Math.sin(t*r*Math.PI*2)*.5+.5,lerp:(t,r,n)=>t+(r-t)*n});this.cache=new Map,this.allowedMathDocs=["sin","cos","tan","abs","min","max","pow","sqrt","exp","log","floor","ceil","round"],this.aliases=new Map}setAliases(t){for(const[r,n]of Object.entries(t))this.aliases.set(r,n)}compile(t){if(this.cache.has(t))return this.cache.get(t);const n=t.replace(/^{{|}}$/g,"").trim().split("|").map(u=>u.trim()),a=n[0],o=n.slice(1),i=this._buildJSExecutor(a,o),c=this._tryTranspileToGLSL(a,o),l={executor:i,glsl:c,dependencies:[a]};return this.cache.set(t,l),l}_buildJSExecutor(t,r){r.forEach(n=>{n.startsWith("map(")?n.match(/\(([^)]+)\)/)[1]:n.startsWith("oscillate(")&&n.match(/\(([^)]+)\)/)[1]});try{const a=(this.aliases.has(t)?this.aliases.get(t):t).replace(/[^a-zA-Z0-9_.]/g,"");return new Function("state","compiler",`
        "use strict";
        let val = state["${a}"];
        if (val === undefined) return 0;
        ${this._buildFilterLogic(r)}
        return val;
      `)}catch(n){return console.error("JIT Error compiling expression:",t,n),()=>0}}_buildFilterLogic(t){let r="";return t.forEach(n=>{const a=n.match(/^(\w+)\((.*)\)$/);if(a){const o=a[1],i=a[2];r+=`val = compiler.lib.${o}(val, ${i});
`}}),r}_tryTranspileToGLSL(t,r){let n=`state_${t.replace(/\./g,"_")}`;for(const a of r)if(a.startsWith("map(")){const o=a.match(/\((.*)\)/)[1].split(",").map(i=>i.trim());n=`mix(${o[2]}, ${o[3]}, clamp((${n} - ${o[0]}) / (${o[1]} - ${o[0]}), 0.0, 1.0))`}else return null;return n}}class Kh{constructor(){this.pools=new Map,this.activeNodes=new Map}get(t,r){this.pools.has(t)||this.pools.set(t,[]);const n=this.pools.get(t);let a;return n.length>0?(a=n.pop(),a.isActive=!0):a=this._createNodePrimitive(t),a.id=r,this.activeNodes.set(r,a),a}release(t){const r=this.activeNodes.get(t);if(!r)return;r.isActive=!1,this._resetNodeState(r),this.pools.get(r.type).push(r),this.activeNodes.delete(t)}releaseAll(){for(const t of this.activeNodes.keys())this.release(t)}_createNodePrimitive(t){return{type:t,id:null,isActive:!0,geometry:{},physiology:{bindings:[],uniforms:{}},_internal:{instanceId:-1,dirty:!0}}}_resetNodeState(t){t.geometry={},t.physiology.bindings=[],t.physiology.uniforms={},t._internal.dirty=!0}}class Qh{constructor(t){if(this.canvas=t,this.gl=t.getContext("webgl2",{antialias:!0,alpha:!0}),!this.gl)throw new Error("ISK: WebGL2 not supported by the environment.");this.programs=new Map,this.textures=new Map,this.vaos=new Map,this.textureSize=128,this._setupBaseEngine()}_setupBaseEngine(){const t=this.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0)}initArchetype(t,r,n){const a=this._createProgram(r,n);this.programs.set(t,a),this._setupInstancingBuffers(t)}render(t,r,n){const a=this.gl;a.clear(a.COLOR_BUFFER_BIT),this._updateDataTextures(t);for(const[o,i]of this.programs){a.useProgram(i),a.uniform2f(a.getUniformLocation(i,"u_resolution"),this.canvas.width,this.canvas.height),a.uniform1f(a.getUniformLocation(i,"u_interpolation"),n),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.textures.get("last")),a.uniform1i(a.getUniformLocation(i,"u_dataLast"),0),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,this.textures.get("current")),a.uniform1i(a.getUniformLocation(i,"u_dataCurrent"),1);const c=this.vaos.get(o);a.bindVertexArray(c),a.drawArraysInstanced(a.TRIANGLE_STRIP,0,4,r)}}_updateDataTextures(t){const r=this.gl;if(!this.textures.has("current")){this.textures.set("last",this._createDataTexture(t)),this.textures.set("current",this._createDataTexture(t)),this.lastBuffer=new Float32Array(t);return}r.bindTexture(r.TEXTURE_2D,this.textures.get("last")),r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.textureSize,this.textureSize,r.RGBA,r.FLOAT,this.lastBuffer),r.bindTexture(r.TEXTURE_2D,this.textures.get("current")),r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.textureSize,this.textureSize,r.RGBA,r.FLOAT,t),this.lastBuffer.set(t)}resizeDataTextures(t){this.textureSize=t,this.textures.has("current")&&(this.gl.deleteTexture(this.textures.get("last")),this.gl.deleteTexture(this.textures.get("current")),this.textures.delete("last"),this.textures.delete("current"))}_createDataTexture(t){const r=this.gl,n=r.createTexture();return r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,this.textureSize,this.textureSize,0,r.RGBA,r.FLOAT,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}_createProgram(t,r){const n=this.gl,a=this._compileShader(n.VERTEX_SHADER,t),o=this._compileShader(n.FRAGMENT_SHADER,r),i=n.createProgram();return n.attachShader(i,a),n.attachShader(i,o),n.linkProgram(i),i}_compileShader(t,r){const n=this.gl,a=n.createShader(t);return n.shaderSource(a,r),n.compileShader(a),n.getShaderParameter(a,n.COMPILE_STATUS)||console.error(n.getShaderInfoLog(a)),a}_setupInstancingBuffers(t){const r=this.gl,n=r.createVertexArray();r.bindVertexArray(n);const a=new Float32Array([-1,-1,1,-1,-1,1,1,1]),o=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,a,r.STATIC_DRAW);const i=0;r.enableVertexAttribArray(i),r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),this.vaos.set(t,n)}}const as={getBaseVertexShader:()=>`#version 300 es
        layout(location = 0) in vec2 a_position; // Geometra base (quad/unit circle)
        
        uniform sampler2D u_dataLast;
        uniform sampler2D u_dataCurrent;
        uniform float u_interpolation; // t entre frames
        uniform vec2 u_resolution;
        uniform float u_textureSize;

        out vec4 v_color;
        out float v_visibility;

        vec4 fetchData(int id, sampler2D tex) {
            int x = id % int(u_textureSize);
            int y = id / int(u_textureSize);
            return texelFetch(tex, ivec2(x, y), 0);
        }

        void main() {
            int id = gl_InstanceID;
            
            // Fetch de estados
            vec4 dataLast = fetchData(id, u_dataLast);
            vec4 dataCurrent = fetchData(id, u_dataCurrent);
            
            // Interpolacin L2 (Anti-Stuttering)
            vec2 pos = mix(dataLast.xy, dataCurrent.xy, u_interpolation);
            float radius = mix(dataLast.z, dataCurrent.z, u_interpolation);
            v_visibility = mix(dataLast.w, dataCurrent.w, u_interpolation);

            // Descarte temprano si no es visible
            if (v_visibility < 0.01) {
                gl_Position = vec4(2.0, 2.0, 2.0, 1.0); // Fuera del clip space
                return;
            }

            // Transformacin al Clip Space
            vec2 screenPos = (pos / u_resolution) * 2.0 - 1.0;
            vec2 scaledOffset = (a_position * radius * 2.0) / u_resolution;
            
            gl_Position = vec4(screenPos + scaledOffset, 0.0, 1.0);
            v_color = vec4(1.0); // Se sobreescribe en fragment shader si se desea
        }
    `,getCircleFragmentShader:()=>`#version 300 es
        precision highp float;
        in vec4 v_color;
        in float v_visibility;
        out vec4 fragColor;

        void main() {
            // Calculamos distancia al centro del quad para dibujar el crculo
            vec2 uv = gl_PointCoord * 2.0 - 1.0; 
            // Nota: En instancing manual usamos a_position como UV interna
            
            // Implementacin simplificada para el arquetipo Circle
            fragColor = vec4(0.0, 0.8, 1.0, v_visibility);
        }
    `,getArcFragmentShader:()=>`#version 300 es
        precision highp float;
        out vec4 fragColor;
        // ... Lgica de arco v3.2
        void main() {
            fragColor = vec4(1.0, 0.5, 0.0, 1.0);
        }
    `};class Xh{constructor(){this.schemaSnapshots=new Map}validateStructure(t,r){const n=new Set;for(const[a,o]of Object.entries(r))for(const[i,c]of Object.entries(o))c.dependencies.forEach(l=>{this._getValueByPath(t,l)===void 0&&n.add(l)});return n.size>0?{step:"HANDSHAKE",status:"CRITICAL",message:"Incoherencia Estructural Detectada",missing:Array.from(n)}:{status:"VALID"}}auditExploitation(t,r){const n=this._getAllPaths(t),a=new Set;for(const i of Object.values(r))for(const c of Object.values(i))c.dependencies.forEach(l=>a.add(l));const o=n.filter(i=>!a.has(i));return o.length>0?{status:"WARNING",message:"Sub-explotacin de Datos Detectada",unusedRatio:`${o.length}/${n.length}`,unusedFields:o}:{status:"OPTIMAL"}}createRefactorSnapshot(t,r){const n=JSON.stringify(this._getAllPaths(r).sort());this.schemaSnapshots.set(t,n)}checkRefactorDebt(t,r){if(!this.schemaSnapshots.has(t))return{status:"NEW"};const n=JSON.stringify(this._getAllPaths(r).sort()),a=this.schemaSnapshots.get(t);return n!==a?{status:"REFACTOR_ALARM",message:"Cambio de esquema detectado en el Core. El ISK puede estar desactualizado."}:{status:"SAFE"}}_getValueByPath(t,r){return r.split(".").reduce((n,a)=>n&&n[a],t)}_getAllPaths(t,r=""){return Object.keys(t).reduce((n,a)=>{const o=r?`${r}.${a}`:a;return typeof t[a]=="object"&&t[a]!==null&&!Array.isArray(t[a])?n.concat(this._getAllPaths(t[a],o)):n.concat([o])},[])}}const Jh={RECT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[100,100],min:[1,1]},u_fill:{type:"v4",default:[1,1,1,1]},u_stroke:{type:"v4",default:[0,0,0,1]},u_strokeWidth:{type:"f32",default:0,min:0,max:50},u_opacity:{type:"f32",default:1,min:0,max:1},u_cornerRadius:{type:"f32",default:0,min:0},u_visibility:{type:"f32",default:1,min:0,max:1}}},ELLIPSE:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_radius:{type:"f32",default:50,min:1},u_fill:{type:"v4",default:[1,1,1,1]},u_stroke:{type:"v4",default:[0,0,0,1]},u_opacity:{type:"f32",default:1,min:0,max:1},u_visibility:{type:"f32",default:1,min:0,max:1}}},TEXT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_fontSize:{type:"f32",default:14,min:1,max:200},u_color:{type:"v4",default:[1,1,1,1]},u_opacity:{type:"f32",default:1,min:0,max:1},u_weight:{type:"f32",default:400,min:100,max:900},u_visibility:{type:"f32",default:1,min:0,max:1}}},IMAGE:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[100,100]},u_opacity:{type:"f32",default:1,min:0,max:1},u_saturation:{type:"f32",default:1,min:0,max:2},u_visibility:{type:"f32",default:1,min:0,max:1}}},GROUP:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_scale:{type:"f32",default:1},u_rotation:{type:"f32",default:0},u_visibility:{type:"f32",default:1,min:0,max:1}}},FRAME:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[200,200]},u_padding:{type:"v4",default:[0,0,0,0]},u_gap:{type:"f32",default:0},u_fill:{type:"v4",default:[0,0,0,0]},u_visibility:{type:"f32",default:1,min:0,max:1}}},DATA_SLOT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_intensity:{type:"f32",default:.5,min:0,max:1},u_color:{type:"v4",default:[.5,1,.5,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}},REPEATER:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_count:{type:"f32",default:1,min:1,max:1e3},u_offset:{type:"v2",default:[0,50]},u_visibility:{type:"f32",default:1,min:0,max:1}}},ARC:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_innerRadius:{type:"f32",default:40},u_outerRadius:{type:"f32",default:50},u_startAngle:{type:"f32",default:0},u_endAngle:{type:"f32",default:180},u_fill:{type:"v4",default:[0,.5,1,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}},LINE:{properties:{u_start:{type:"v3",default:[0,0,0]},u_end:{type:"v3",default:[100,100,0]},u_thickness:{type:"f32",default:2,min:.1},u_color:{type:"v4",default:[1,1,1,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}}},qh={roles:Jh};class Zh{constructor(t){this.kernel=t,this.registry=qh.roles,this.persistenceBuffer=null}processMessage(t){const{payload:r,integrity:n}=t,{target_id:a,property:o,value:i,action:c}=r,l=this.kernel.pool.activeNodes.get(a);if(!l)return this._logError("ERR_ENTITY_NOT_FOUND",`Target ${a} does not exist in pool.`),!1;const u=this.registry[l.type];if(!u)return this._logError("ERR_INVALID_ROLE",`Role ${l.type} is not defined in ContractRegistry.`),!1;const p=u.properties[o];return p?this._validateValue(i,p)?(this.kernel.worker&&this.kernel.worker.postMessage({action:"HFS_UPDATE",payload:{target_id:a,property:o,value:i}}),n.persistence>0&&this.persistenceBuffer&&this.persistenceBuffer.queueChange(t),!0):(this._logError("ERR_TYPE_VIOLATION",`Value for ${o} does not match expected type ${p.type} or is out of range.`),!1):(this._logError("ERR_INVALID_PROPERTY",`Property ${o} is not valid for role ${l.type}.`),!1)}_validateValue(t,r){const{type:n,min:a,max:o}=r;switch(n){case"f32":if(typeof t!="number"||a!==void 0&&t<a||o!==void 0&&t>o)return!1;break;case"v2":if(!Array.isArray(t)||t.length!==2||a&&(t[0]<a[0]||t[1]<a[1]))return!1;break;case"v3":if(!Array.isArray(t)||t.length!==3)return!1;break;case"v4":if(!Array.isArray(t)||t.length!==4)return!1;break;case"str":if(typeof t!="string")return!1;break;case"bool":if(typeof t!="boolean")return!1;break}return!0}_logError(t,r){console.warn(`[ISK-USSP] ${t}: ${r}`)}setPersistenceBuffer(t){this.persistenceBuffer=t}}const em="modulepreload",tm=function(e){return"/indra-os/"+e},ic={},$r=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=tm(l),l in ic)return;ic[l]=!0;const u=l.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":em,u||(h.as="script"),h.crossOrigin="",h.href=l,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((x,v)=>{h.addEventListener("load",x),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return a.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};class rm{constructor(t=300){this.debounceTime=t,this.queue=new Map,this.timer=null,this.isProcessing=!1}queueChange(t){const{target_id:r,property:n}=t.payload,a=`${r}.${n}`;this.queue.set(a,t),this._resetTimer()}_resetTimer(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>this._flush(),this.debounceTime)}async _flush(){if(this.queue.size===0||this.isProcessing)return;this.isProcessing=!0;const t=Array.from(this.queue.values());this.queue.clear();try{console.log(`[ISK-USSP] Persisting ${t.length} changes to Core...`);const r=await se.call("indra","commitSpatialChanges",{changes:t.map(n=>n.payload)});r.status==="success"?console.log(`[ISK-USSP] Persistence successful: ${r.summary}`):this._handleFailure(t)}catch(r){console.error("[ISK-USSP] Persistence error:",r),this._handleFailure(t)}finally{this.isProcessing=!1}}async _handleFailure(t){console.warn(`[ISK-USSP] Persistence failed for ${t.length} items. Moving to Iron Memory (AxiomaticDB).`);try{const n=[...await AxiomaticDB.getItem("USSP_RETRY_QUEUE")||[],...t];n.length>500&&(console.error("[ISK-USSP]  PRESSURE RELIEF: Backup queue exceeding safety limits. Engaging World Lock."),(await $r(async()=>{const{default:o}=await Promise.resolve().then(()=>Fh);return{default:o}},void 0)).default.getState().engageWorldLock("USSP_BUFFER_FULL")),await AxiomaticDB.setItem("USSP_RETRY_QUEUE",n)}catch(r){console.error("[ISK-USSP] Critical: Failed to save to Iron Memory.",r)}}}const nm=Ri((e,t)=>({snapshot:{nodes:{},edges:[],metadata:{}},history:[],historyPointer:-1,hydrate:r=>{e({snapshot:r,history:[JSON.stringify(r)],historyPointer:0})},applyChange:r=>{const{target_id:n,property:a,value:o}=r,i=t().snapshot,c={...i.nodes},l={...c[n]||{}};l[a.replace("u_","")]=o,c[n]=l;const u={...i,nodes:c};e({snapshot:u}),t()._recordHistory(u)},undo:()=>{const{history:r,historyPointer:n}=t();if(n>0){const a=n-1;e({snapshot:JSON.parse(r[a]),historyPointer:a})}},redo:()=>{const{history:r,historyPointer:n}=t();if(n<r.length-1){const a=n+1;e({snapshot:JSON.parse(r[a]),historyPointer:a})}},_recordHistory:r=>{const{history:n,historyPointer:a}=t(),o=JSON.stringify(r);if(o===n[a])return;const i=n.slice(0,a+1);i.push(o),i.length>50&&i.shift(),e({history:i,historyPointer:i.length-1})}}));class jd{constructor(){this.compiler=new Wh,this.pool=new Kh,this.integrity=new Xh,this.bridge=new Zh(this),this.persistence=new rm,this.bridge.setPersistenceBuffer(this.persistence),this.worker=null,this.laws=new Map,this.compiledLaws={},this.state={nodes:[],lastReification:{},lastUpdateTime:Date.now(),targetFrameRate:60,integrity:{status:"INITIALIZING"},sequenceId:0,lastProcessedSequenceId:-1},this.textureSize=128,this.dataBuffer=new Float32Array(this.textureSize*this.textureSize*4),this.renderer=null,this._initWorker()}setCanvas(t){this.renderer=new Qh(t),this._setupArchetypes()}loadLaws(t){this.pool.releaseAll(),this.laws.clear(),this.compiledLaws={};const r=t.length;this._ensureTextureCapacity(r);let n=0;t.forEach(o=>{this.laws.set(o.identity.uuid,o);const i=this._compilePhysiology(o);this.compiledLaws[o.identity.uuid]={executors:i,index:n++},this.pool.get(o.dna.archetype,o.identity.uuid)}),this._syncWorker();const a={"core.power":0,"time.now":0};this.integrity.createRefactorSnapshot("INITIAL_LOAD",a),nm.getState().hydrate({nodes:{},edges:[],metadata:{}})}update(t){const r=this.integrity.validateStructure(t,this.compiledLaws);if(this.state.integrity=r,r.status==="CRITICAL"){console.error("ISK INTEGRITY CRITICAL:",r.message,r.missing);return}const n=this.integrity.checkRefactorDebt("INITIAL_LOAD",t);n.status==="REFACTOR_ALARM"&&(this.state.integrity={status:"WARNING",message:n.message});const a=this.integrity.auditExploitation(t,this.compiledLaws);if(this.state.exploitation=a,this.worker){const o=++this.state.sequenceId;this.worker.postMessage({action:"UPDATE_STATE",payload:{state:t,sequenceId:o}})}}_compilePhysiology(t){var r;return((r=t.dna.geometry)==null?void 0:r.expressions)||{}}_initWorker(){try{this.worker=new Worker(new URL("/indra-os/assets/SpatialWorker-B4jZiYSs.js",import.meta.url)),this.worker.onmessage=t=>this._handleWorkerMessage(t)}catch(t){console.warn("ISK: Worker initialization failed. Falling back to Main Thread.",t)}}_syncWorker(){this.worker&&this.worker.postMessage({action:"INIT",payload:{laws:this.compiledLaws,textureSize:this.textureSize}})}_handleWorkerMessage(t){var i;const{action:r,results:n,sequenceId:a,isPartial:o}=t.data;if(r==="REIFICATION_RESULT"){if(!o&&a<=this.state.lastProcessedSequenceId)return;o||(this.state.lastProcessedSequenceId=a),this.dataBuffer.set(n);const c=ht.getState(),l=((i=c==null?void 0:c.phenotype)==null?void 0:i.artifacts)||[],u=new Set(l.filter(x=>x._isDirty).map(x=>x.id)),p=Date.now();this._hysteresisMap||(this._hysteresisMap=new Map);let h=0;for(const[x,v]of this.laws){const y=h*4;if(u.has(x))this._hysteresisMap.set(x,p),this.dataBuffer[y+3]=.75;else{const A=this._hysteresisMap.get(x)||0;p-A<300?this.dataBuffer[y+3]=.75:this.dataBuffer[y+3]=1}h++}this.state.lastUpdateTime=Date.now()}}tick(){if(!this.renderer)return;const t=Date.now();if(this._fpsLastTime||(this._fpsLastTime=t,this._fpsFrames=0,this.panicMode=!1),this._fpsFrames++,t-this._fpsLastTime>1e3){const o=this._fpsFrames*1e3/(t-this._fpsLastTime);this._fpsLastTime=t,this._fpsFrames=0,o<30&&!this.panicMode?(console.warn(`[ProjectionKernel]  PANIC MODE: FPS dropped to ${Math.round(o)}. Throttling physics.`),this.panicMode=!0,this._syncPanicState()):o>45&&this.panicMode&&(console.log(`[ProjectionKernel]  STABILIZED: FPS recovered to ${Math.round(o)}. Restoring physics.`),this.panicMode=!1,this._syncPanicState())}const r=t-this.state.lastUpdateTime,n=1e3/this.state.targetFrameRate,a=Math.min(r/n,1);this.renderer.render(this.dataBuffer,this.laws.size,a)}_syncPanicState(){this.worker&&this.worker.postMessage({action:"SET_PANIC_MODE",payload:{enabled:this.panicMode}})}_setupArchetypes(){this.renderer&&(this.renderer.initArchetype("arc",as.getBaseVertexShader(),as.getArcFragmentShader()),this.renderer.initArchetype("circle",as.getBaseVertexShader(),as.getCircleFragmentShader()))}_applyReificationToNodes(){let t=0;for(const[r,n]of this.pool.activeNodes){const a=this.state.lastReification[r];if(a){const o=t*4;this.dataBuffer[o]=a.x||0,this.dataBuffer[o+1]=a.y||0,this.dataBuffer[o+2]=a.radius||0,this.dataBuffer[o+3]=n.isActive?1:0,n._internal.dirty=!0}t++}}_ensureTextureCapacity(t){let r=128;for(;r*r<t;)r*=2;r!==this.textureSize&&(console.log(`ISK: Re-scaling Data Texture to ${r}x${r} for ${t} nodes.`),this.textureSize=r,this.dataBuffer=new Float32Array(this.textureSize*this.textureSize*4),this.renderer&&this.renderer.resizeDataTextures(this.textureSize))}}class sm{constructor(){this.activePulses=new Set,this.dispatchFunction=null,this._maxTTL=10,this.pulseRegistry=new Map}setDispatcher(t){this.dispatchFunction=t}async propagate(t,r,n,a=10,o=new Set,i=null){var p,h,x,v,y,E;const{state:c,execute:l}=t;if(a<=0){console.warn(`[SynapticDispatcher]  TTL EXPIRED for ${r}. Signal auto-terminated.`);return}if(o.has(r)){console.warn(`[SynapticDispatcher]  LOOP DETECTED at ${r}. Breaking circuit.`);return}o.add(r);const u=((p=c.phenotype.relationships)==null?void 0:p.filter(A=>{var f;return A.source===r&&!A._isDeleted&&(!i||A.sourcePort===i||i==="onRowSelect"&&((f=A.sourcePort)==null?void 0:f.startsWith("col:")))}))||[];if(u.length!==0)for(const A of u){const f=c.phenotype.artifacts.find(S=>S.id===A.target&&!S._isDeleted);if(!f)continue;this._triggerPulse(A.id);const d=A.targetPort,m=(h=Object.entries(f.CAPABILITIES||{}).find(([S,g])=>S===d||g.io==="INPUT"||g.io==="WRITE"||g.io==="TRIGGER"))==null?void 0:h[0];if(m){console.log(`[SynapticDispatcher]  Flowing: ${r} [${A.sourcePort}] >> ${f.id} [${d}]`);let S=n;const g=c.phenotype.artifacts.find(T=>T.id===r),C=(x=g==null?void 0:g.CAPABILITIES)==null?void 0:x[A.sourcePort],N=((v=f.CAPABILITIES)==null?void 0:v[d])||((y=f.CAPABILITIES)==null?void 0:y[m]);if((E=A.sourcePort)!=null&&E.startsWith("col:")&&typeof n=="object"&&n!==null){const T=A.sourcePort.replace("col:","");S=n[T]!==void 0?n[T]:n,console.log(`[SynapticDispatcher]  Extracted [${T}] from row payload.`)}(C==null?void 0:C.type)==="BLOB"&&(N==null?void 0:N.type)==="DATAFRAME"?S=(n==null?void 0:n.name)||(n==null?void 0:n.id)||String(n):(N==null?void 0:N.type)==="SIGNAL"&&(S=null),this.dispatchFunction&&this.dispatchFunction({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Sinapsis: ${r} >> ${f.LABEL} (${(N==null?void 0:N.type)||"SIGNAL"})`,type:"SUCCESS"}}),setTimeout(()=>{l("EXECUTE_NODE_ACTION",{nodeId:f.id,capability:m,payload:S,_ttl:a-1,_visited:new Set(o)})},100)}setTimeout(()=>this._clearPulse(A.id),1e3)}}_triggerPulse(t){this.pulseRegistry.set(t,!0),this.dispatchFunction&&this.dispatchFunction({type:"PULSE_START",payload:t})}_clearPulse(t){this.pulseRegistry.delete(t),this.dispatchFunction&&this.dispatchFunction({type:"PULSE_END",payload:t})}isPulseActive(t){return this.pulseRegistry.has(t)}}const lc=new sm,ji=R.createContext(null);ji.displayName="AxiomaticContext";const Pa={sovereignty:{status:"UNKNOWN",mode:localStorage.getItem("INDRA_MODE")||"LIVE",theme:"dark",portalOpen:!1},ui:{dnaPanelOpen:!1,chaosPanelOpen:!1,currentLayer:localStorage.getItem("INDRA_ANCHOR_LAYER")||null,pendingConnection:null,vaultPanelOpen:!1},devLab:{perspective:"VAULT",targetId:"VAULT",isMockEnabled:!0}},am=(e,t)=>{var r;switch(t.type){case"SET_CURRENT_LAYER":return t.payload?localStorage.setItem("INDRA_ANCHOR_LAYER",t.payload):localStorage.removeItem("INDRA_ANCHOR_LAYER"),{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,currentLayer:t.payload}}};case"TOGGLE_UI_PANEL":{const n=t.payload.panel,a=e.phenotype.ui;let o={...a};return n==="dna"&&(o.dnaPanelOpen=!a.dnaPanelOpen),n==="chaos"&&(o.chaosPanelOpen=!a.chaosPanelOpen),n==="vault"&&(o.vaultPanelOpen=!a.vaultPanelOpen),{...e,phenotype:{...e.phenotype,ui:o}}}case"SET_THEME":return{...e,sovereignty:{...e.sovereignty,theme:t.payload.theme}};case"SET_MODE":return localStorage.setItem("INDRA_MODE",t.payload.mode),{...e,sovereignty:{...e.sovereignty,mode:t.payload.mode}};case"TOGGLE_PORTAL":return{...e,sovereignty:{...e.sovereignty,portalOpen:t.payload!==void 0?t.payload:!e.sovereignty.portalOpen}};case"TOGGLE_VISUALIZATION_MODE":{const a=(((r=e.phenotype.activeLayout)==null?void 0:r.VIEW_MODE)||"GRAPH")==="GRAPH"?"DASHBOARD":"GRAPH";return{...e,phenotype:{...e.phenotype,activeLayout:{...e.phenotype.activeLayout||{},VIEW_MODE:a}}}}case"SET_LAB_PERSPECTIVE":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,perspective:t.payload}}};case"SET_LAB_TARGET":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,targetId:t.payload}}};case"TOGGLE_LAB_MOCK":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,isMockEnabled:!e.phenotype.devLab.isMockEnabled}}};case"SYSTEM_LOCKED":return{...e,sovereignty:{...e.sovereignty,status:"LOCKED",portalOpen:!1}};case"SYSTEM_HALTED":return{...e,sovereignty:{...e.sovereignty,status:"HALTED"}};case"SET_LAYOUT_DIRTY":return{...e,_layoutDirty:t.payload};default:return e}},om={phenotype:{vault:[],artifacts:[],relationships:[],silos:{},siloMetadata:{},cosmosIdentity:null,activeLayout:null,activeFlow:null,focusStack:[],activePulses:[],availableCosmos:[],discoveryStatus:"IDLE"}},im=(e,t)=>{var r,n,a,o,i,c,l,u,p,h,x,v,y,E,A,f,d,m,S,g,C;switch(t.type){case"SELECT_ARTIFACT":{const N=t.payload;if(!N||e.phenotype.cosmosIdentity&&N.id===e.phenotype.cosmosIdentity.id)return{...e,phenotype:{...e.phenotype,activeLayout:e.phenotype.cosmosIdentity,focusStack:[e.phenotype.cosmosIdentity].filter(Boolean)}};const T=[...e.phenotype.focusStack||[]];return T.some(O=>O.id===N.id)||T.push(N),{...e,phenotype:{...e.phenotype,activeLayout:N,focusStack:T}}}case"EXIT_FOCUS":{const N=[...e.phenotype.focusStack||[]];N.pop();const T=N[N.length-1]||e.phenotype.cosmosIdentity;return{...e,phenotype:{...e.phenotype,activeLayout:T,focusStack:N}}}case"VAULT_LOAD_SUCCESS":{const N=t.payload.nodeId||"unknown_node",T=t.payload.data,O=Array.isArray(T)?T:T.results||T.items||[];T.metadata||O.length;let w=e.phenotype.activeLayout;(w==null?void 0:w.id)===N&&(w={...w,...T,items:O});const B=((r=T.SCHEMA)==null?void 0:r.columns)||T.columns||[];let D=Array.isArray(B)?B:[];if(D.length===0&&O.length>0){const I=O[0],b=I.fields||I.properties||I.Properties||I;D=Object.keys(b).filter(_=>!_.startsWith("_")&&_!=="id"&&_!=="ID").map(_=>({id:_,label:_.toUpperCase()}))}const P=(e.phenotype.artifacts||[]).map(I=>{var _,U;if(I.id===N||((_=I.data)==null?void 0:_.id)===N){const j=((U=T.SCHEMA)==null?void 0:U.columns)||T.columns||I.ARCHETYPE==="DATABASE"||I.schemaId==="DATABASE_NODE",L=j?{DATA_STREAM:{io:"STREAM",type:"TABLE",human_label:"DATA_SOURCE "}}:{},M={...I.CAPABILITIES,...L};return M["QUERY FILTER"]&&(M.QUERY_FILTER||(M.QUERY_FILTER=M["QUERY FILTER"]),delete M["QUERY FILTER"]),{...I,ARCHETYPE:j?I.ARCHETYPE||"DATABASE":I.ARCHETYPE,schemaId:j?"DATABASE_NODE":I.schemaId,data:{...I.data,...T,items:O,_reifiedAt:Date.now()},CAPABILITIES:M}}return I});return{...e,phenotype:{...e.phenotype,activeLayout:w,artifacts:P,vault:O,silos:{...e.phenotype.silos,[N]:T},siloMetadata:{...e.phenotype.siloMetadata,[N]:{ORIGIN_SOURCE:T.ORIGIN_SOURCE,SCHEMA:T.SCHEMA,PAGINATION:T.PAGINATION,BURST_METADATA:T.BURST_METADATA,_loadedAt:Date.now()}}}}}case"VAULT_WRITE":{const N=t.payload,T=[N,...e.phenotype.vault.filter(O=>O.id!==N.id)];return{...e,phenotype:{...e.phenotype,vault:T}}}case"UPDATE_ARTIFACT_POSITION":{const{nodeId:N,x:T,y:O}=t.payload;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.map(w=>w.id===N?{...w,x:T,y:O,_isDirty:!0}:w)}}}case"ADD_ARTIFACT_REQUEST":{const{artifact:N,position:T,schemaId:O}=t.payload,B=(((n=e.phenotype.artifacts)==null?void 0:n.length)||0)*30,D=T||{x:B,y:B},P=N.LABEL||N.label||N.functional_name||N.name||"Manifested Protocol",I=(N.DOMAIN||N.domain||"SYSTEM").toUpperCase();let b=N.ARCHETYPE||N.archetype||"NODE",_=N.CAPABILITIES||N.capabilities||N.schemas||{};b==="BRIDGE"&&(b="VAULT");const U=N.mimeType||((a=N.data)==null?void 0:a.mimeType)||"",j=U==="application/vnd.indra.notion-db"||U==="application/vnd.google-apps.spreadsheet"||U.includes("sheet")||N.type==="DATABASE"||((o=N.data)==null?void 0:o.type)==="DATABASE"||b==="DATABASE";if(j){b="DATABASE",_={..._,onRowSelect:{io:"OUTPUT",type:"JSON",human_label:"Data Rows "},query:{io:"INPUT",type:"QUERY",human_label:"Query Filter "}};const $=Object.keys(_).find(X=>X.replace(/_/g," ").trim().toUpperCase()==="QUERY FILTER");$&&$!=="QUERY_FILTER"?(_.QUERY_FILTER=_[$],delete _[$]):!$&&!_.QUERY_FILTER&&(_.QUERY_FILTER={io:"INPUT",type:"QUERY",human_label:"QUERY_FILTER "},_.query&&delete _.query);const G=((i=N.data)==null?void 0:i.columns)||N.columns||[];Array.isArray(G)&&G.forEach(X=>{var ie;const Z=X.id||X.ID;_[`col:${Z}`]={io:"OUTPUT",type:((ie=X.type)==null?void 0:ie.toUpperCase())||"STRING",human_label:`${X.label||Z} `}})}const L=N.ARCHETYPES||((c=N.data)==null?void 0:c.ARCHETYPES)||[b];j&&!L.includes("DATABASE")&&L.push("DATABASE"),j&&!L.includes("VAULT")&&L.push("VAULT"),L.includes("NODE")||L.push("NODE");const M={id:N.id||`node_${crypto.randomUUID().split("-")[0]}_${Date.now().toString(36)}`,schemaId:j?"DATABASE_NODE":O||((N==null?void 0:N.type)==="DIRECTORY"?"FOLDER_NODE":"FILE_NODE"),LABEL:P,DOMAIN:I,ARCHETYPE:b,ARCHETYPES:L,ORIGIN_SOURCE:(u=N.ORIGIN_SOURCE||N.origin||((l=N.data)==null?void 0:l.ORIGIN_SOURCE))==null?void 0:u.toLowerCase(),x:D.x,y:D.y,data:{...N,ARCHETYPES:L,CAPABILITIES:_},CAPABILITIES:_,_isDirty:!0};return{...e,phenotype:{...e.phenotype,artifacts:[...e.phenotype.artifacts||[],M]}}}case"COSMOS_MOUNTED":{(p=t.payload)!=null&&p.flow_state;const N=t.payload.id||t.payload.cosmos_id||t.payload.ID,T=t.payload.LABEL||t.payload.label||((h=t.payload.identity)==null?void 0:h.label)||t.payload.NAME||t.payload.name||N,O={...t.payload,id:N,LABEL:T},w=((x=t.payload)==null?void 0:x.silos)||{},B=((v=t.payload)==null?void 0:v.siloMetadata)||{};let D=[];Object.entries(w).forEach(([_,U])=>{(!D.length||_==="drive"||_==="root"||_==="vault")&&(D=U)});const P=((y=t.payload)==null?void 0:y.artifacts)||[];console.group(" [COSMOS_MOUNTED] Diagnostic Report"),console.log(" Raw Payload Artifacts:",(E=t.payload)==null?void 0:E.artifacts),console.log(" Processed Artifacts Count:",P.length);const I=P.reduce((_,U)=>(_[U.id]=(_[U.id]||0)+1,_),{}),b=Object.entries(I).filter(([_,U])=>U>1);return b.length>0?(console.error(" DUPLICATES DETECTED IN BACKEND JSON:",b),b.forEach(([_,U])=>{console.log(`   ID: ${_} appears ${U} times`)})):console.log(" No duplicates in artifacts array"),console.groupEnd(),{...e,sovereignty:{...e.sovereignty,status:"ACTIVE"},phenotype:{...e.phenotype,cosmosIdentity:O,activeLayout:O,focusStack:O?[O]:[],isDeepHydrating:((A=t.payload)==null?void 0:A._SIGNAL)==="PATIENCE_TOKEN",ui:{...e.phenotype.ui,currentLayer:null},silos:{...e.phenotype.silos,...w},vault:D,siloMetadata:{...e.phenotype.siloMetadata,...B},artifacts:P,relationships:((f=t.payload)==null?void 0:f.relationships)||[]}}}case"ADD_RELATIONSHIP":{const{source:N,target:T,sourcePort:O,targetPort:w}=t.payload;if((e.phenotype.relationships||[]).some(b=>b.source===N&&b.target===T&&b.sourcePort===O&&b.targetPort===w))return e;const D=e.phenotype.artifacts.find(b=>b.id===N),P=e.phenotype.artifacts.find(b=>b.id===T);if(!Or.validateRelationship(D,P,t.payload))return e;const I={id:`rel_${crypto.randomUUID().split("-")[0]}_${Date.now().toString(36)}`,source:N,target:T,sourcePort:O,targetPort:w,created_at:new Date().toISOString(),_isDirty:!0};return{...e,phenotype:{...e.phenotype,relationships:[...e.phenotype.relationships||[],I],ui:{...e.phenotype.ui,pendingConnection:null},_relationshipsDirty:!0}}}case"VAULT_LOADING":{const N=(m=(d=t.payload)==null?void 0:d.nodeId)==null?void 0:m.toLowerCase();return{...e,phenotype:{...e.phenotype,siloMetadata:{...e.phenotype.siloMetadata,[N]:{...e.phenotype.siloMetadata[N],hydrationLevel:5,status:"SCANNING"}}}}}case"HYDRATION_LOADING":return e;case"VAULT_ITEM_DELETED":{const N=(t.payload.nodeId||"drive").toLowerCase(),T=e.phenotype.silos[N]||[],O=t.payload.itemId,w=Date.now(),B=H.getState().session.revisionCycle,D=e.phenotype.artifacts.map(_=>{var U;return((U=_.data)==null?void 0:U.id)===O?{..._,_isDeleted:!0,_isDirty:!0,_tombstoneAt:w,_deathCycle:B}:_}),P=D.filter(_=>{var U;return _._isDeleted&&((U=_.data)==null?void 0:U.id)===O}).map(_=>_.id),I=e.phenotype.relationships.map(_=>P.includes(_.source)||P.includes(_.target)?{..._,_isDeleted:!0,_isDirty:!0,_tombstoneAt:w,_deathCycle:B}:_),b=I!==e.phenotype.relationships;return{...e,phenotype:{...e.phenotype,vault:e.phenotype.vault.filter(_=>_.id!==O),silos:{...e.phenotype.silos,[N]:Array.isArray(T)?T.filter(_=>_.id!==O):T},artifacts:D,relationships:I,_relationshipsDirty:e.phenotype._relationshipsDirty||b}}}case"VAULT_ITEM_RENAMED":{const N=(t.payload.nodeId||"drive").toLowerCase(),T=e.phenotype.silos[N]||[],O=t.payload.itemId,w=t.payload.newName;let B=e.phenotype.cosmosIdentity;return(B==null?void 0:B.id)===O&&(B={...B,LABEL:w,name:w,identity:{...B.identity,label:w}}),{...e,phenotype:{...e.phenotype,cosmosIdentity:B,vault:e.phenotype.vault.map(D=>D.id===O?{...D,name:w}:D),silos:{...e.phenotype.silos,[N]:Array.isArray(T)?T.map(D=>D.id===O?{...D,name:w}:D):T},artifacts:e.phenotype.artifacts.map(D=>{var P;return((P=D.data)==null?void 0:P.id)===O?{...D,LABEL:w,_isDirty:!0}:D}),activeLayout:((S=e.phenotype.activeLayout)==null?void 0:S.id)===O?{...e.phenotype.activeLayout,LABEL:w,label:w}:e.phenotype.activeLayout}}}case"VAULT_ITEM_MOVED":{const N=(t.payload.nodeId||"drive").toLowerCase(),T=e.phenotype.silos[N]||[];return{...e,phenotype:{...e.phenotype,vault:e.phenotype.vault.filter(O=>O.id!==t.payload.itemId),silos:{...e.phenotype.silos,[N]:Array.isArray(T)?T.filter(O=>O.id!==t.payload.itemId):T}}}}case"HYDRATE_FROM_PERSISTENCE":{if(((g=e.phenotype.cosmosIdentity)==null?void 0:g.id)!==t.payload.cosmosId)return e;const N=t.payload.hydratedData||{},T=N.silos||{};let O=e.phenotype.vault;return T.drive?O=Array.isArray(T.drive)?T.drive:T.drive.items||T.drive.vault_tree||[]:T.root&&(O=Array.isArray(T.root)?T.root:T.root.items||T.root.vault_tree||[]),{...e,phenotype:{...e.phenotype,...N,vault:O,silos:{...e.phenotype.silos,...T},siloMetadata:updatedSiloMetadata,artifacts:updatedArtifacts}}}case"CLEAR_COSMOS_SESSION":return{...e,phenotype:{...e.phenotype,cosmosIdentity:null,activeLayout:null,activeFlow:null,artifacts:[],relationships:[],focusStack:[],ui:{...e.phenotype.ui,currentLayer:e.phenotype.ui.currentLayer==="DEV_LAB"?"DEV_LAB":"SELECTOR"}}};case"SET_PENDING_CONNECTION":return{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,pendingConnection:t.payload}}};case"PURGE_LOGICAL_DELETION":{const N=(C=t.payload)==null?void 0:C.ids;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.filter(T=>N?!(N.includes(T.id)&&T._isDeleted):!T._isDeleted),relationships:e.phenotype.relationships.filter(T=>N?!(N.includes(T.id)&&T._isDeleted):!T._isDeleted)}}}case"CLEAR_PENDING_CONNECTION":return{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,pendingConnection:null}}};case"PULSE_START":return{...e,phenotype:{...e.phenotype,activePulses:[...e.phenotype.activePulses,t.payload]}};case"PULSE_END":return{...e,phenotype:{...e.phenotype,activePulses:e.phenotype.activePulses.filter(N=>N!==t.payload)}};case"PURGE_TOMBSTONES":{const N=H.getState().session.revisionCycle,T=O=>O._isDeleted?N-(O._deathCycle||0)<2:!0;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.filter(T),relationships:e.phenotype.relationships.filter(T)}}}case"UPDATE_COSMOS_REGISTRY":return{...e,phenotype:{...e.phenotype,availableCosmos:t.payload||[],discoveryStatus:"READY"}};case"SET_DISCOVERY_STATUS":return{...e,phenotype:{...e.phenotype,discoveryStatus:t.payload}};case"REMOVE_ARTIFACT":{const N=t.payload.id,T=Date.now(),O=H.getState().session.revisionCycle,w=e.phenotype.artifacts.map(D=>String(D.id).toLowerCase()===String(N).toLowerCase()?{...D,_isDeleted:!0,_isDirty:!0,_tombstoneAt:T,_deathCycle:O}:D),B=e.phenotype.relationships.map(D=>{const P=String(D.source).toLowerCase()===String(N).toLowerCase(),I=String(D.target).toLowerCase()===String(N).toLowerCase();return P||I?{...D,_isDeleted:!0,_isDirty:!0,_tombstoneAt:T,_deathCycle:O}:D});return{...e,phenotype:{...e.phenotype,artifacts:w,relationships:B,_relationshipsDirty:!0}}}case"UPDATE_NODE":{const{id:N,updates:T}=t.payload;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.map(O=>O.id===N?{...O,...T,_isDirty:!0}:O)}}}default:return e}},lm={NEVER_PERSISTED:["_isDirty","_simulated","_tombstoned","_liveData","_cache","_fetching","_error","_lastFetched","_adapterState","_uiState","_virtualData","_isGhost","_isMock"]};function cm(e){if(!e||typeof e!="object")return console.warn("[DataConventions] Invalid artifact for cleaning:",e),e;const t={...e};return lm.NEVER_PERSISTED.forEach(r=>{delete t[r]}),e.type,t}function um(e){return Array.isArray(e)?e.map(t=>{const r={...t};return delete r._isDirty,delete r._simulated,delete r._tombstoned,delete r._uiState,r}):[]}const cc=Ri((e,t)=>({lastSnapshotTime:null,snapshotCount:0,prepareSnapshot:()=>{var l;const r=ht.getState();if(!r||!((l=r.phenotype)!=null&&l.cosmosIdentity))return null;const n=r.phenotype.cosmosIdentity.id,a=H.getState(),o=(r.phenotype.artifacts||[]).filter(u=>!u._isGhost&&!u._isMock).map(u=>cm(u)),i=um(r.phenotype.relationships||[]),c={cosmosId:n,artifacts:o,relationships:i,activeLayout:r.phenotype.activeLayout,activeFlow:r.phenotype.activeFlow,devLab:r.phenotype.devLab,_timestamp:Date.now(),_revisionHash:a.session.currentRevisionHash};return e({lastSnapshotTime:Date.now(),snapshotCount:t().snapshotCount+1}),c},getStats:()=>({lastSnapshotTime:t().lastSnapshotTime,snapshotCount:t().snapshotCount,timeSinceLastSnapshot:t().lastSnapshotTime?Date.now()-t().lastSnapshotTime:null})})),dm={sovereignty:{...Pa.sovereignty,status:se.sovereigntyStatus||"UNKNOWN",mode:localStorage.getItem("INDRA_MODE")||(window.location.href.includes("mode=lab")?"LAB":"LIVE"),genesisTime:Date.now()},genotype:null,phenotype:{...om.phenotype,devLab:Pa.devLab,ui:Pa.ui,logs:[],availableCosmos:[],discoveryStatus:"IDLE",currentRevisionHash:null}},pm=(e,t)=>{if(t.type==="LOG_ENTRY")return{...e,phenotype:{...e.phenotype,logs:[t.payload,...e.phenotype.logs].slice(0,50)}};if(t.type==="NUCLEAR_PURGE")return localStorage.removeItem("INDRA_GENOTYPE_L0"),localStorage.removeItem("INDRA_PERSISTENCE_CACHE"),window.location.reload(),e;if(t.type==="IGNITE_SYSTEM")return{...e,sovereignty:{...e.sovereignty,status:t.payload.sovereignty,portalOpen:!0},genotype:t.payload.genotype||e.genotype,phenotype:{...e.phenotype,logs:[{time:new Date().toLocaleTimeString(),msg:` SYSTEM IGNITION: ${t.payload.sovereignty}`,type:"SUCCESS"},...e.phenotype.logs].slice(0,50)}};let r=e;return r=am(r,t),r=im(r,t),r},fm=({children:e})=>{const[t,r]=R.useReducer(pm,dm),n=ce.useRef(new jd),a=ce.useRef(t),o=ce.useRef(0);R.useEffect(()=>{a.current=t,ht.setState(t),ht.setKernel(n.current),ht.setOrchestrator(cc)},[t]),R.useEffect(()=>{H.getState().igniteHash(),Or.setDispatcher(r),lc.setDispatcher(r);const u=H.subscribe(h=>{h.session.status==="TERMINATED"&&r({type:"CLEAR_COSMOS_SESSION"})}),p=h=>{var v,y,E;const x=cc.getState();if(x&&typeof x.prepareSnapshot=="function"){const A=x.prepareSnapshot();if(A&&(((v=A.artifacts)==null?void 0:v.length)>0||((y=A.relationships)==null?void 0:y.length)>0)){const f=a.current;(((E=f==null?void 0:f.phenotype)==null?void 0:E.artifacts)||[]).some(S=>S._isDirty)&&(h.preventDefault(),h.returnValue="")}}};return window.addEventListener("beforeunload",p),()=>{u(),window.removeEventListener("beforeunload",p)}},[]),R.useEffect(()=>{},[t]);const i=async(u,p)=>{var h,x,v,y,E,A,f,d,m,S,g,C,N,T,O,w,B,D,P,I;if(console.error(`[EXECUTE]  ${u}`,{payload:p,thread:"AXIOM_MAIN"}),u==="IGNITE_SYSTEM"&&ss.igniteReflexes(r),u==="CLEAR_COSMOS_SESSION"&&(localStorage.removeItem("LAST_ACTIVE_COSMOS_ID"),Ot.clearCache()),u==="MOUNT_COSMOS"){const b=p.cosmosId;H.getState().setLoading(!0),r({type:"VAULT_LOADING"}),r({type:"SET_CURRENT_LAYER",payload:null});let _=!1;const U=j=>{_||(_=!0,r({type:"SET_CURRENT_LAYER",payload:null}),H.getState().setLoading(!1),Ot.triggerBackgroundHydration(j==null?void 0:j.activeLayout,se))};try{const j=await De.getItem(`COSMOS_STATE_${b}`);if(j){console.info("%c  [Axiom:Store] Warm-up: Preparing local projection while validating with cloud...","color: #94a3b8;");const L=await Ot.reconcileCosmosState(j,null);r({type:"COSMOS_MOUNTED",payload:L})}}catch(j){console.warn("[Axiom:Store] L2 Read failed:",j)}try{const j=await ss.mountCosmos(b),L=j.result||j,M=Array.isArray(L)?L[0]:L,$=(M==null?void 0:M.payload)||M;if(!$)throw new Error("Cosmos Data is empty or corrupted.");const G=$.id||$.cosmos_id||$.ID||b,X=await De.getItem(`COSMOS_STATE_${G}`),Z=await Ot.reconcileCosmosState(X,$);if(!X||$._revisionHash!==X._revisionHash){console.info("%c  [Axiom:Store] Cloud Consensus: Updating reality to latest server revision.","color: #38bdf8;"),r({type:"COSMOS_MOUNTED",payload:Z});const ie=j.revision_hash||($==null?void 0:$.revision_hash)||j._revisionHash;ie&&H.getState().updateRevisionHash(ie),await De.setItem(`COSMOS_STATE_${G}`,Z),_||U(Z)}else _||U(Z);H.getState().setSessionAuthorized(G),localStorage.setItem("LAST_ACTIVE_COSMOS_ID",G),r({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Cosmos '${(Z==null?void 0:Z.LABEL)||"unnamed"}' sincronizado`,type:"SUCCESS"}})}catch(j){console.error("%c  [Axiom:Store] Critical Mount Failure:","color: #ef4444;",j),H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`Error de Montaje: ${j.message}`,type:"ERROR"}}),_||(r({type:"CLEAR_COSMOS_SESSION"}),r({type:"SET_CURRENT_LAYER",payload:"SELECTOR"}),De.deleteCosmos(b))}return}if(u==="SELECT_ARTIFACT"){let b=p;if(typeof b=="string"){const _=ee.getCanon(b)||((h=t.phenotype.artifacts)==null?void 0:h.find(U=>U.id===b));if(!_){console.error(`[Axiom:Store] FATAL: Cannot resolve identity for: ${b}`);return}b=_}if(r({type:"SELECT_ARTIFACT",payload:b}),(b==null?void 0:b.ARCHETYPE)==="DATABASE"||(b==null?void 0:b.type)==="DATABASE"||(x=b==null?void 0:b.mimeType)!=null&&x.includes("sheet")){const _=b.id||((v=b.data)==null?void 0:v.id),U=(y=t.phenotype.silos)==null?void 0:y[_];if(!U||U.length===0){const j=b.ORIGIN_SOURCE||((E=b.data)==null?void 0:E.ORIGIN_SOURCE),L=b.ACCOUNT_ID||((A=b.data)==null?void 0:A.ACCOUNT_ID);j&&(console.info(`%c[Reify:Middleware]  Pre-loading database: ${_} from ${j}`,"color: #38bdf8; font-weight: bold;"),i("FETCH_DATABASE_CONTENT",{databaseId:_,nodeId:j,accountId:L}))}}if((b==null?void 0:b.schemaId)==="FOLDER_NODE"||((f=b==null?void 0:b.data)==null?void 0:f.type)==="DIRECTORY"){const _=((d=b.data)==null?void 0:d.id)||b.id,U=(((m=b.data)==null?void 0:m.ORIGIN_SOURCE)||b.ORIGIN_SOURCE||"drive").toLowerCase();i("FETCH_VAULT_CONTENT",{folderId:_,nodeId:U})}return}if(u==="EXIT_FOCUS"){r({type:"SELECT_ARTIFACT",payload:null});return}if(u==="EXECUTE_NODE_ACTION"){const{nodeId:b,capability:_,payload:U,_ttl:j,_visited:L}=p,M=(S=t.phenotype.artifacts)==null?void 0:S.find($=>$.id===b);if(!M)return;window.dispatchEvent(new CustomEvent("ISK_SYNAPTIC_PULSE",{detail:{nodeId:b}})),r({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Triggering ${M.LABEL} -> ${_}`,type:"INFO"}});try{const $=await se.executeAction(`${((g=M.data)==null?void 0:g.id)||M.id}:${_}`,U);lc.propagate({state:t,execute:i},b,$,j!==void 0?j:10,L||new Set,_)}catch($){r({type:"LOG_ENTRY",payload:{msg:` Flow Error: ${$.message}`,type:"ERROR"}})}return}if(u==="FETCH_VAULT_CONTENT"){const{folderId:b,query:_,accountId:U,nodeId:j,refresh:L}=p;let M=(j||"drive").toLowerCase();M==="vault_global"&&(M="drive");const $=b||"ROOT";H.getState().setLoading(!0),r({type:"VAULT_LOADING",payload:{nodeId:M,folderId:$}});try{const G=await Ot.fetchContent(M,{folderId:$,query:_,accountId:U,forceRefresh:L},se);H.getState().setLoading(!1),r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:M,data:G}})}catch(G){H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`[IO:${M.toUpperCase()}] Error: ${G.message}`,type:"ERROR"}})}return}if(u==="FETCH_COMMUNICATION_CONTENT"){const{nodeId:b,accountId:_,query:U,refresh:j}=p,L=(b||"email").toLowerCase();H.getState().setLoading(!0);try{const M=await Ot.fetchContent(L,{query:U,accountId:_,forceRefresh:j},se);r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:L,data:M}}),H.getState().setLoading(!1)}catch(M){H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`[Comm:${L}] Error: ${M.message}`,type:"ERROR"}})}return}if(u==="START_DISCOVERY"){r({type:"SET_DISCOVERY_STATUS",payload:"SCANNING"});try{const b=await ss.listAvailableCosmos(!0);r({type:"UPDATE_COSMOS_REGISTRY",payload:b.artifacts||[]})}catch(b){r({type:"LOG_ENTRY",payload:{msg:`Discovery Failed: ${b.message}`,type:"ERROR"}}),r({type:"UPDATE_COSMOS_REGISTRY",payload:[]})}return}if(u==="FETCH_DATABASE_CONTENT"){let{databaseId:b,nodeId:_,refresh:U,accountId:j}=p;const L=(C=t.phenotype.artifacts)==null?void 0:C.find(G=>{var X;return G.id===b||((X=G.data)==null?void 0:X.id)===b}),M=(L==null?void 0:L.ORIGIN_SOURCE)||((N=L==null?void 0:L.data)==null?void 0:N.ORIGIN_SOURCE);if(M&&M!==_&&(console.info(`%c[DB:COSMOS_RESOLVER]  Using deterministic origin from Cosmos: ${M}`,"color: #10b981; font-weight: bold;"),_=M),console.log(`%c[DB:IGNITION]  Origin: ${_||"AUTO"} | ID: ${b}`,"color: #fbbf24; font-weight: bold;"),!_){console.error(`[AxiomaticStore]  FETCH_DATABASE_CONTENT called without nodeId for database: ${b}`),r({type:"LOG_ENTRY",payload:{msg:`Cannot fetch database ${b}: origin source (nodeId) is missing`,type:"ERROR"}});return}const $=_.toLowerCase();H.getState().setLoading(!0);try{let G;$==="notion"?G=await se.notion("queryDatabase",{databaseId:b,accountId:j}):$==="drive"||$==="sheet"?G=await se.sheet("read",{sheetId:b,accountId:j}):G=await se.executeAction(`${$}:listContents`,{databaseId:b,accountId:j});const X=Array.isArray(G)?G:(G==null?void 0:G.results)||(G==null?void 0:G.items)||(G==null?void 0:G.results)||[],Z=(G==null?void 0:G.SCHEMA)||null;r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:b,data:typeof G=="object"&&!Array.isArray(G)?{...G,items:X,SCHEMA:Z}:{items:X,SCHEMA:Z}}}),r({type:"LOG_ENTRY",payload:{msg:` Data reified: ${X.length} records retrieved.`,type:"SUCCESS"}})}catch(G){H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`[DB:${$.toUpperCase()}] Failure: ${G.message}`,type:"ERROR"}})}return}if(u==="TRACE_SOVEREIGN_DATABASE"){const{databaseId:b,nodeId:_}=p,U=(j,L)=>{console.group(`%c[ SOVEREIGN_TRACE] ${j}`,"color: #10b981; font-weight: bold;"),console.log("Context:",{databaseId:b,nodeId:_,timestamp:new Date().toISOString()}),L&&console.log("Payload:",L),console.groupEnd(),r({type:"LOG_ENTRY",payload:{msg:` [TRACE:${j}] ${b}`,type:"INFO"}})};if(U("IGNITION",p),!_||!b){U("FAILURE: Missing Params",{nodeId:_,databaseId:b});return}H.getState().setLoading(!0);try{const j=_==null?void 0:_.toLowerCase();let L;j==="notion"?L=await se.notion("queryDatabase",{databaseId:b}):j==="drive"||j==="sheet"?L=await se.sheet("read",{sheetId:b}):L=await se.executeAction(`${j}:listContents`,{databaseId:b}),U("ADAPTER_CALL_SUCCESS",{resultType:typeof L,isObject:typeof L=="object",hasResults:!!(L!=null&&L.results||L!=null&&L.items)});const M=Array.isArray(L)?L:(L==null?void 0:L.results)||(L==null?void 0:L.items)||[];U("DATA_REIFICATION",{rowCount:M.length}),r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:b,data:typeof L=="object"&&!Array.isArray(L)?{...L,items:M}:{items:M}}}),H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:` Trace Complete: ${M.length} records reified.`,type:"SUCCESS"}})}catch(j){U("CRITICAL_FAILURE",{error:j.message,stack:j.stack}),H.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:` Trace Failed: ${j.message}`,type:"ERROR"}})}return}if(u==="INTEGRATE_SMART_NODE"){const{baseNode:b,config:_,schemaId:U}=p;console.log(`[Store]  Integrating Smart Node: ${b.name} using schema ${U}`);const j={id:`smart_${b.id}`,LABEL:((T=_.base_info)==null?void 0:T.label)||b.name,MATH_CAPABILITIES:{constructs:{EstimationLogic:{syntax:`PRICE = ${((O=_.pricing_logic)==null?void 0:O.base_rate)||0} * ${((w=_.pricing_logic)==null?void 0:w.complexity_factor)||1} ${(B=_.pricing_logic)!=null&&B.enable_urgency?"+ URGENCY_FEE":""}`}}}};r({type:"LOG_ENTRY",payload:{msg:`Indra Node Reified: ${j.LABEL}. Semantic bridge active.`,type:"SUCCESS"}});return}if(u==="BIND_TO_COSMOS"){const{artifact:b}=p,_=(D=t.phenotype.cosmosIdentity)==null?void 0:D.id;if(!_){r({type:"LOG_ENTRY",payload:{msg:"Debe haber un Cosmos activo para entrelazar artefactos.",type:"ERROR"}});return}r({type:"LOG_ENTRY",payload:{msg:`Entrelazando ${b.name}...`,type:"INFO"}});try{const U=await se.call("system","bindArtifactToCosmos",{cosmosId:_,artifactId:b.id,metadata:{name:b.name,type:b.type,origin:b.origin||"VAULT"}});U!=null&&U.success&&(r({type:"LOG_ENTRY",payload:{msg:`Vnculo atmico establecido para ${b.name}`,type:"SUCCESS"}}),i("ADD_ARTIFACT_REQUEST",{artifact:{...b,LABEL:b.name,DOMAIN:"VAULT_BOND"}}))}catch(U){r({type:"LOG_ENTRY",payload:{msg:`Fallo de Entrelazamiento: ${U.message}`,type:"ERROR"}}),console.warn("[Store:Bind] Backend failed, manifesting locally only."),i("ADD_ARTIFACT_REQUEST",{artifact:b}),i("TOGGLE_UI_PANEL",{panel:"vault"})}return}if(u==="LINK_SLOT_PROPERTY"){const{slotId:b,propertyId:_,targetArtifact:U}=p;console.log(`[Axiom:Link]  Binding ${_} to ${U.id}`),r({type:"LOG_ENTRY",payload:{msg:` Vinculacin Axiomtica: ${_} <-> ${U.LABEL}`,type:"SUCCESS"}});return}if(u==="INJECT_PHANTOM_ARTIFACT"){const{engineId:b}=p;console.log(`[Axiom:Phantom]  Injecting Garage Prototype for: ${b}`);const _=(P=an.GARAGE_PROTOTYPES)==null?void 0:P[b];if(_){const U=JSON.parse(JSON.stringify(_)),j={...U,_isMock:!0,_isGhost:!0,LABEL:`${U.LABEL||b} (GARAGE)`};r({type:"ADD_ARTIFACT_REQUEST",payload:{artifact:j}}),r({type:"SET_LAB_TARGET",payload:j.id}),r({type:"LOG_ENTRY",payload:{msg:` Garage Mode Active: ${b}`,type:"INFO"}})}else r({type:"LOG_ENTRY",payload:{msg:` No prototype found for ${b}`,type:"WARNING"}});return}if(u==="DELETE_COSMOS"){const{cosmosId:b}=p,U=(t.phenotype.availableCosmos||[]).filter(j=>j.id!==b);r({type:"UPDATE_COSMOS_REGISTRY",payload:U});try{De.removeItem(`COSMOS_STATE_${b}`),localStorage.getItem("LAST_ACTIVE_COSMOS_ID")===b&&localStorage.removeItem("LAST_ACTIVE_COSMOS_ID")}catch(j){console.error("[Store:Delete] Failed to purge local L2 cache:",j)}((I=t.phenotype.cosmosIdentity)==null?void 0:I.id)===b&&r({type:"CLEAR_COSMOS_SESSION"}),ss.deleteCosmos(b).then(async()=>{r({type:"LOG_ENTRY",payload:{msg:`Cosmos ${b} borrado del servidor con xito.`,type:"SUCCESS"}}),i("START_DISCOVERY")}).catch(j=>{console.error("Delete Failed:",j),r({type:"LOG_ENTRY",payload:{msg:`Fallo al borrar en servidor: ${j.message}`,type:"ERROR"}}),i("START_DISCOVERY")});return}r({type:u,payload:p}),setTimeout(()=>{n.current&&n.current.update({...t,_lastAction:{type:u,payload:p}})},0)},c=H(u=>u.session.hashInitialized),l=H(u=>u.session.isLoading);return R.useEffect(()=>{if(!c)return;const u=localStorage.getItem("LAST_ACTIVE_COSMOS_ID");u&&!u.startsWith("temp_")&&!t.phenotype.cosmosIdentity&&!l&&i("MOUNT_COSMOS",{cosmosId:u})},[c,l]),R.useEffect(()=>{var v,y,E,A,f,d,m;const u=(v=t.phenotype.cosmosIdentity)==null?void 0:v.id;if(localStorage.setItem("INDRA_ANCHOR_LAYER",t.phenotype.ui.currentLayer||""),((y=t.phenotype.focusStack)==null?void 0:y.length)>0?localStorage.setItem("INDRA_FOCUS_STACK",JSON.stringify(t.phenotype.focusStack.map(S=>S.id))):localStorage.removeItem("INDRA_FOCUS_STACK"),u&&!u.toString().startsWith("temp_")&&localStorage.setItem("LAST_ACTIVE_COSMOS_ID",u),!(((E=t.phenotype.cosmosIdentity)==null?void 0:E.id)||((A=t.phenotype.cosmosIdentity)==null?void 0:A.cosmos_id)))return;const h=(((f=t.phenotype.artifacts)==null?void 0:f.length)||0)+(((d=t.phenotype.relationships)==null?void 0:d.length)||0),x=o.current;if(((m=t.session)==null?void 0:m.status)!=="HALTED"){const S={...t.phenotype.cosmosIdentity,artifacts:t.phenotype.artifacts,relationships:t.phenotype.relationships,silos:t.phenotype.silos,siloMetadata:t.phenotype.siloMetadata,activeLayout:t.phenotype.activeLayout,activeFlow:t.phenotype.activeFlow,_revisionHash:H.getState().session.currentRevisionHash,_localTimestamp:Date.now()};De.setItem(`COSMOS_STATE_${u}`,S),h!==x&&(o.current=h,console.info("%c  [Axiom:L2] Reality reified in local storage.","color: #38bdf8;"))}},[t.phenotype.cosmosIdentity,t.phenotype.artifacts,t.phenotype.relationships,t.phenotype.activeLayout,t.phenotype.activeFlow,t.phenotype.devLab]),R.useEffect(()=>H.subscribe(p=>p.session.isLoading,(p,h)=>{h===!0&&p===!1&&console.log("%c[Axiom:Guardian] Reality stabilized.","color: #00ffcc; font-weight: bold;")}),[t]),s.jsx(ji.Provider,{value:{state:t,dispatch:r,execute:i},children:e})},te=()=>{const e=R.useContext(ji);if(!e)throw new Error("useAxiomaticStore must be used within an AxiomaticProvider.");return e};class hm{constructor(){this.status="GENESIS",this.coherenceIndex=0}async assemble(){console.log(" [Assembler] Iniciando secuencia de ignicin soberana..."),this.status="STANDBY";try{const t=await se.ignite();console.warn("[ATOMIC 5] Ignite returned to Assembler"),t.genotype&&t.genotype.COMPONENT_REGISTRY&&(console.warn("[ATOMIC 6] Injecting Ontology (Assembler side)..."),ee.setOntology(t.genotype.COMPONENT_REGISTRY,t.genotype)),t.sovereignty==="LOCKED"||t.status,t.success||console.warn(" [Assembler] Handshake impuro detectado."),console.warn("[ATOMIC 7] Start Compilation..."),ee.compile(),console.warn("[ATOMIC 8] Compilation Finished"),this._registerCoreModules(),console.warn("[ATOMIC 9] Core Modules Registered");const r=await this.verifyUniversalIntegrity();return console.warn("[ATOMIC 10] Integrity Checked"),console.log(" [Assembler] Phase 4: Activating Homeostasis Cycles..."),r.isCoherent?(this.status="ACTIVE",this.coherenceIndex=r.score):(this.status="DEGRADED",console.warn(" [Assembler] El sistema no es totalmente coherente:",r.errors)),console.log(` [Assembler] Sistema ensamblado. Estado: ${this.status} (Coherence: ${this.coherenceIndex}%)`),{success:!0,status:this.status,coherence:this.coherenceIndex,genotype:t.genotype,error:r.isCoherent?null:r.errors.join(", ")}}catch(t){return this.status="LOCKED",console.error(" [Assembler] Fallo crtico durante el ensamblaje. Forzando modo bloqueo:",t),{success:!0,status:"LOCKED",error:t.message||"Error desconocido"}}}async verifyUniversalIntegrity(){if(!se.isIgnited||!se.L0)return{isCoherent:!1,score:0,errors:["Genotipo L0 no hidratado"]};const t=[],r=ee.getRenderManifest();se.L0;const n={};console.log(" [Assembler] Iniciando Auditora de Coherencia..."),r.length===0&&t.push("ONTOLOGA VACA: No hay contratos para proyectar."),r.forEach(i=>{(!i.artefacts||i.artefacts.length===0)&&console.warn(`[Assembler] Host ${i.omd} inicializado sin artefactos activos.`),!i.slot||i.slot==="UNDEFINED"?console.info(`[Assembler]  ${i.omd} registrado como SERVICIO BACKEND (Sin UI Slot).`):(n[i.slot]&&t.push(`COLISIN DE REALIDAD: El slot fsico '${i.slot}' ya est ocupado por ${n[i.slot]}. (Intento de ${i.omd})`),n[i.slot]=i.omd),i.functional_name==="UNIT_SKELETON"&&i.omd!=="OMD-00"&&console.warn(`[Assembler] Identidad Genrica detectada en ${i.omd}. Falta label en Core?`)});const a=Math.max(0,100-t.length*5),o=t.length===0;return o||console.error(" [Assembler] Auditora Fallida:",t),{isCoherent:o,score:a,errors:t}}_registerCoreModules(){const t=ee.getModulesByLevel(3);console.log(` [Assembler] Backbone de Soberana registrado: ${t.length} mdulos.`)}getStatus(){return this.status}}const mm=new hm,W=({children:e,size:t=16,color:r="currentColor",className:n=""})=>s.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`inline-block transition-all duration-300 ${n}`,children:e}),k={System:e=>s.jsxs(W,{...e,children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("path",{d:"M12 8v8M8 12h8"})]}),Lock:e=>s.jsxs(W,{...e,children:[s.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),s.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cosmos:e=>s.jsxs(W,{...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"3"}),s.jsx("path",{d:"M12 2v2M12 20v2M2 12h2M20 12h2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12c0-5.52 4.48-10 10-10s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12z"})]}),Desktop:e=>s.jsxs(W,{...e,children:[s.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),s.jsx("path",{d:"M8 21h8M12 17v4"})]}),Lab:e=>s.jsx(W,{...e,children:s.jsx("path",{d:"M9 3h6M10 3v13a4 4 0 1 0 4 0V3M8.5 10h7"})}),Sync:e=>s.jsx(W,{...e,children:s.jsx("path",{d:"M1 4v6h6M23 20v-6h-6M20.49 9A9 9 0 0 0 5.64 5.64L1 10M3.51 15a9 9 0 0 0 14.85 3.36L23 14"})}),Sun:e=>s.jsxs(W,{...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"5"}),s.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),Moon:e=>s.jsx(W,{...e,children:s.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Terminal:e=>s.jsxs(W,{...e,children:[s.jsx("polyline",{points:"4 17 10 11 4 5"}),s.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),List:e=>s.jsxs(W,{...e,children:[s.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),s.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),s.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),s.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),s.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),s.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Clock:e=>s.jsxs(W,{...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),ChevronDown:e=>s.jsx(W,{...e,children:s.jsx("polyline",{points:"6 9 12 15 18 9"})}),Plus:e=>s.jsxs(W,{...e,children:[s.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Eye:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),SidebarLeft:e=>s.jsxs(W,{...e,children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),SidebarRight:e=>s.jsxs(W,{...e,children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),s.jsx("line",{x1:"15",y1:"3",x2:"15",y2:"21"})]}),Search:e=>s.jsxs(W,{...e,children:[s.jsx("circle",{cx:"11",cy:"11",r:"8"}),s.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:e=>s.jsx(W,{...e,children:s.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),Close:e=>s.jsxs(W,{...e,children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),ChevronRight:e=>s.jsx(W,{...e,children:s.jsx("polyline",{points:"9 18 15 12 9 6"})}),Activity:e=>s.jsx(W,{...e,children:s.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Trash:e=>s.jsxs(W,{...e,children:[s.jsx("polyline",{points:"3 6 5 6 21 6"}),s.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Sovereign:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M12 2L3 7v9c0 5 9 6 9 6s9-1 9-6V7l-9-5z"}),s.jsx("path",{d:"M12 22V12"}),s.jsx("path",{d:"M12 12l-5 3"}),s.jsx("path",{d:"M12 12l5 3"}),s.jsx("path",{d:"M12 7l-5 3"}),s.jsx("path",{d:"M12 7l5 3"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),Database:e=>s.jsxs(W,{...e,children:[s.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),s.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),s.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),Vault:e=>s.jsx(W,{...e,children:s.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Download:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),s.jsx("polyline",{points:"7 10 12 15 17 10"}),s.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Inbox:e=>s.jsxs(W,{...e,children:[s.jsx("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),s.jsx("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})]}),Transform:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v10a4 4 0 0 0 4 4h6"}),s.jsx("path",{d:"M2 11h20"}),s.jsx("path",{d:"M7 6l-5 5 5 5"}),s.jsx("path",{d:"M17 16l5-5-5-5"})]}),Settings:e=>s.jsxs(W,{...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"3"}),s.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Help:e=>s.jsxs(W,{...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),s.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),ArrowRight:e=>s.jsxs(W,{...e,children:[s.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),s.jsx("polyline",{points:"12 5 19 12 12 19"})]}),Maximize:e=>s.jsx(W,{...e,children:s.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})}),Cpu:e=>s.jsxs(W,{...e,children:[s.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}),s.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),s.jsx("line",{x1:"9",y1:"1",x2:"9",y2:"4"}),s.jsx("line",{x1:"15",y1:"1",x2:"15",y2:"4"}),s.jsx("line",{x1:"9",y1:"20",x2:"9",y2:"23"}),s.jsx("line",{x1:"15",y1:"20",x2:"15",y2:"23"}),s.jsx("line",{x1:"20",y1:"9",x2:"23",y2:"9"}),s.jsx("line",{x1:"20",y1:"15",x2:"23",y2:"15"}),s.jsx("line",{x1:"1",y1:"9",x2:"4",y2:"9"}),s.jsx("line",{x1:"1",y1:"15",x2:"4",y2:"15"})]}),Connect:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),s.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),TV_SCREEN:e=>s.jsxs(W,{...e,children:[s.jsx("rect",{x:"2",y:"3",width:"20",height:"15",rx:"2"}),s.jsx("path",{d:"M7 21h10"}),s.jsx("path",{d:"M12 18v3"})]}),PDF:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"}),s.jsx("path",{d:"M9 15h3a2 2 0 0 0 0-4H9v4Z"})]}),BRIDGE:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M3 11c8 0 10 0 18 0"}),s.jsx("path",{d:"M3 15c8 0 10 0 18 0"}),s.jsx("path",{d:"M6 11v4"}),s.jsx("path",{d:"M18 11v4"}),s.jsx("path",{d:"M12 11v4"})]}),GRAVITY:e=>s.jsx(W,{...e,children:s.jsx("path",{d:"m12 2 3 3h-2v12h2l-3 3-3-3h2V5H9l3-3Z"})}),ENTROPY:e=>s.jsxs(W,{...e,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("path",{d:"M8 12h8"}),s.jsx("path",{d:"M12 8v8"}),s.jsx("path",{d:"m15 9-6 6"}),s.jsx("path",{d:"m9 9 6 6"})]}),DIMENSIONS:e=>s.jsxs(W,{...e,children:[s.jsx("path",{d:"M21 3v18H3V3h18Zm-2 2H5v14h14V5Z"}),s.jsx("path",{d:"M12 8v8"}),s.jsx("path",{d:"M8 12h8"})]}),Check:e=>s.jsx(W,{...e,children:s.jsx("polyline",{points:"20 6 9 17 4 12"})})},xm=({title:e,domain:t,data:r,inspectorPanel:n,children:a,slotId:o})=>{var l;const[i,c]=R.useState(!1);return s.jsxs("div",{className:"w-full h-full flex flex-row overflow-hidden relative bg-[var(--bg-deep)]",children:[s.jsxs("main",{className:"flex-1 h-full relative overflow-hidden flex flex-col min-w-0",children:[s.jsxs("header",{className:"h-14 border-b border-[var(--border-color)] flex items-center justify-between px-6 bg-[var(--surface-header)] backdrop-blur-md z-10 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] shadow-[0_0_8px_var(--accent)] animate-pulse"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-[10px] font-black tracking-[0.2em] text-[var(--text-primary)] uppercase truncate max-w-[150px]",children:e}),s.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:t})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("button",{onClick:()=>c(!i),className:`p-1.5 rounded-lg transition-all ${i?"bg-[var(--accent)] text-black":"text-[var(--text-secondary)] hover:bg-[var(--surface-header)]"}`,title:"Toggle Inspector",children:s.jsx(k.SidebarRight,{size:14})})})]}),s.jsx("div",{className:"flex-1 overflow-hidden relative",children:a})]}),s.jsx("aside",{className:`
                    border-[var(--border-color)] bg-[var(--bg-secondary)] backdrop-blur-3xl transition-all duration-500 ease-out flex flex-col overflow-hidden
                    ${i?"w-[320px] h-full border-l":"w-0 h-full border-l-0"}
                `,style:{zIndex:30},children:s.jsxs("div",{className:"w-[320px] h-full flex flex-col",children:[s.jsxs("header",{className:"h-12 border-b border-[var(--border-subtle)] flex items-center px-6 shrink-0 justify-between bg-[var(--surface-header)]",children:[s.jsx("span",{className:"text-[8px] font-black tracking-[0.3em] text-[var(--accent)] uppercase opacity-60",children:"Intelligence_Unit"}),s.jsx("button",{onClick:()=>c(!1),className:"text-[var(--text-dim)] hover:text-[var(--text-primary)] p-1 rounded hover:bg-[var(--surface-header)] transition-colors",children:s.jsx(k.Close,{size:12})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-5",children:n}),s.jsx("footer",{className:"p-4 border-t border-[var(--border-subtle)] bg-[var(--surface-header)]",children:s.jsx("div",{className:"flex flex-col gap-2",children:s.jsxs("div",{className:"flex justify-between items-center text-[7px] font-mono text-[var(--text-dim)] uppercase",children:[s.jsx("span",{children:"Artifact_ID:"}),s.jsxs("span",{className:"text-[var(--accent)]",children:[(l=r==null?void 0:r.id)==null?void 0:l.slice(0,8),"..."]})]})})})]})}),s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/carbon-fibre.png")'}})]})},Oi=e=>{var i,c;const{state:t}=te(),r=H(l=>l.session.isLoading),n=((i=t.phenotype.siloMetadata)==null?void 0:i[e])||{hydrationLevel:0,status:"IDLE",total:0},a=((c=t.phenotype.silos)==null?void 0:c[e])||[];let o={label:"IDLE",color:"var(--text-dim)",progress:n.hydrationLevel,isHoneymoon:!1,pulse:!1};return r&&n.status==="SCANNING"?o={label:"RESONATING",color:"var(--accent)",progress:Math.max(n.hydrationLevel,10),pulse:!0}:a.length>0&&n.hydrationLevel>=100?o={label:"SYNCED",color:"var(--success)",progress:100,pulse:!1}:r&&(o={label:"HYDRATING",color:"var(--accent-bright)",progress:n.hydrationLevel,pulse:!0}),{...o,totalItems:a.length,metadata:n}},gm=({nodeId:e,className:t=""})=>{const{progress:r,signifierColor:n,pulse:a,iskResonance:o,opacity:i}=Oi(e);return s.jsx("div",{className:`h-1.5 w-full bg-[var(--bg-deep)] rounded-full overflow-hidden border border-[var(--border-subtle)]/30 ${t}`,children:s.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${r}%`,backgroundColor:n||"var(--accent)",opacity:i!==void 0?i:1,boxShadow:a||o?`0 0 ${10+(o||0)*15}px ${n}`:"none",filter:o?`brightness(${1+o*.5})`:"none"}})})},Od=({schemaId:e,onCommit:t,onCancel:r,isLoading:n=!1,error:a=null})=>{const o=ee.getArtifactSchema(e),[i,c]=R.useState({}),[l,u]=R.useState({});if(!o)return s.jsxs("div",{className:"p-6 text-[var(--error)] border border-[var(--error)]/20 rounded-xl bg-[var(--error)]/5 font-mono text-sm",children:["[PROJECTION_ERROR] Unknown Schema: ",e]});const p=(v,y)=>{c(E=>{const A={...E},f=v.split(".");let d=A;for(let m=0;m<f.length-1;m++)d[f[m]]||(d[f[m]]={}),d=d[f[m]];return d[f[f.length-1]]=y,A})},h=v=>{v.preventDefault(),t&&t(i)},x=(v,y,E)=>{var S,g;const A=E?`${E}.${v}`:v,f=E?((S=i[E])==null?void 0:S[v])||"":i[v]||"";if(y.type==="object"&&y.structure)return s.jsxs("div",{className:"mb-6 animate-in fade-in slide-in-from-top-2 duration-500",children:[s.jsxs("h4",{className:"text-[10px] uppercase tracking-[0.2em] text-[var(--accent)] font-black mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-[var(--accent)] rounded-full shadow-[0_0_8px_var(--accent)]"}),y.label||v]}),s.jsx("div",{className:"grid grid-cols-1 gap-4 pl-4 border-l border-[var(--border-subtle)]",children:Object.entries(y.structure).map(([C,N])=>x(C,N,A))})]},A);const d=Array.isArray(y.options)||Array.isArray(y.enum),m=y.options||(y.enum?y.enum.map(C=>({label:C,value:C})):[]);return s.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[s.jsxs("label",{className:"text-[10px] uppercase tracking-widest text-[var(--text-dim)] font-black flex justify-between",children:[s.jsx("span",{children:y.label||v}),((g=y.validation)==null?void 0:g.required)&&s.jsx("span",{className:"text-[var(--error)] font-mono text-[8px]",children:"* REQUIRED"})]}),d?s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full appearance-none bg-[var(--bg-deep)]/50 border border-[var(--border-subtle)] focus:border-[var(--accent)]/50 rounded-lg px-4 py-2.5 text-xs text-[var(--text-soft)] outline-none transition-all focus:shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)] cursor-pointer",value:f,onChange:C=>p(A,C.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:"Selecciona una opcin..."}),m.map(C=>s.jsx("option",{value:C.value,children:C.label},C.value))]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-[var(--text-dim)]",children:""})]}):s.jsx("input",{type:"text",className:"bg-[var(--bg-deep)]/50 border border-[var(--border-subtle)] focus:border-[var(--accent)]/50 rounded-lg px-4 py-2.5 text-xs text-[var(--text-soft)] placeholder:text-[var(--text-dim)]/30 outline-none transition-all focus:shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)]",placeholder:`Ingresa ${y.label||v}...`,value:f,onChange:C=>p(A,C.target.value)}),y.description&&s.jsx("span",{className:"text-[9px] text-[var(--text-dim)] leading-relaxed italic",children:y.description})]},A)};return s.jsxs("form",{onSubmit:h,className:"flex flex-col h-full overflow-hidden",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h2",{className:"text-xl font-bold text-[var(--text-vibrant)] tracking-tight mb-1",children:["Create New ",e.replace("_V1","")]}),s.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Indra Axiomatic Projection Protocol v8.0"})]}),a&&s.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl animate-in shake duration-500",children:[s.jsx("p",{className:"text-[10px] text-red-500 font-bold uppercase tracking-widest mb-1 font-mono",children:" Veto Alert (Validation Fail)"}),s.jsx("p",{className:"text-[11px] text-red-400 opacity-80 italic",children:a})]}),Object.entries(o).map(([v,y])=>x(v,y))]}),s.jsxs("div",{className:"mt-8 flex gap-4 pt-6 border-t border-[var(--border-subtle)]",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2.5 rounded-xl border border-[var(--border-subtle)] text-xs font-black uppercase tracking-widest text-[var(--text-dim)] hover:bg-[var(--bg-secondary)] hover:text-[var(--text-soft)] transition-all active:scale-[0.98]",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:n,className:`
                        flex-1 px-6 py-2.5 rounded-xl text-black text-xs font-black uppercase tracking-widest transition-all active:scale-[0.98] shadow-lg
                        ${n?"bg-[var(--accent)]/50 cursor-wait opacity-50":"bg-[var(--accent)] hover:brightness-125 shadow-[var(--accent)]/20"}
                    `,children:n?"Inyectando Realidad...":"Initialize Source"})]})]})},Ld=(e=[],t={})=>{const{initialSort:r={key:"name",direction:"asc"},searchKeys:n=["name","LABEL","type","mimeType"]}=t,[a,o]=R.useState(""),[i,c]=R.useState(r),[l,u]=R.useState({}),p=A=>A?String(A).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim():"",h=(A,f)=>{const d=p(A),m=p(f);if(d===m)return 1;if(d.startsWith(m))return .9;if(d.includes(m))return .7;if(m.length>3){let S=0,g=-1;for(let C of m){const N=d.indexOf(C,g+1);N>-1&&(S++,g=N)}if(S>=m.length-1)return .5}return 0},x=R.useMemo(()=>{if(!e)return[];let A=[...e];return Object.entries(l).forEach(([f,d])=>{d==null||d==="ALL"||(A=A.filter(m=>{const S=m[f];return typeof d=="function"?d(m):typeof d=="string"&&typeof S=="string"?p(S).includes(p(d)):S===d}))}),a&&!a.startsWith("/")&&(A=A.map(f=>{const d=n.map(S=>h(f[S],a)),m=Math.max(...d);return{...f,_prismScore:m}}).filter(f=>f._prismScore>0).sort((f,d)=>d._prismScore-f._prismScore)),i.key&&(!a||a.startsWith("/"))&&A.sort((f,d)=>{const m=f[i.key],S=d[i.key];return m<S?i.direction==="asc"?-1:1:m>S?i.direction==="asc"?1:-1:0}),A},[e,a,i,l,n]),v=R.useCallback((A,f)=>{u(d=>d[A]===f?d:{...d,[A]:f})},[]),y=R.useCallback(()=>u({}),[]),E=R.useCallback(A=>{c(f=>({key:A,direction:f.key===A&&f.direction==="asc"?"desc":"asc"}))},[]);return{data:x,searchTerm:a,setSearchTerm:o,activeFilters:l,setFilter:v,clearFilters:y,sortConfig:i,toggleSort:E,totalCount:e.length,filteredCount:x.length}},Es=({data:e={},perspective:t="VAULT",slotId:r})=>{var Ui,Fi;const{state:n,execute:a}=te(),o=H(F=>F.session.isLoading);n.sovereignty.mode;const i=ce.useMemo(()=>{var Ee;const F=((Ee=n.genotype)==null?void 0:Ee.COMPONENT_REGISTRY)||{},Q=[...Object.values(F).filter(me=>me.ARCHETYPE==="VAULT"||me.ARCHETYPE==="ADAPTER"||me.DOMAIN==="STORAGE").map(me=>({id:me.id,label:me.LABEL||me.id,icon:me.id==="drive"?"Vault":me.id==="notion"?"List":"ADAPTER",color:me.id==="drive"?"#4285F4":"#6366F1"}))];return Q.find(me=>me.id==="drive")||Q.unshift({id:"drive",label:"GDrive",icon:"Vault",color:"#4285F4"}),Q.find(me=>me.id==="cosmos")||Q.push({id:"cosmos",label:"Cosmos",icon:"Cosmos",color:"#9C27B0"}),Q},[(Ui=n.genotype)==null?void 0:Ui.COMPONENT_REGISTRY]),c=(e.id||"drive").toLowerCase(),[l,u]=R.useState(c),p=n.phenotype.artifacts||[],h=ce.useMemo(()=>new Set(Array.isArray(p)?p.map(F=>typeof F=="string"?F:F.id):[]),[p]),x=l.toLowerCase(),{label:v,progress:y,color:E,pulse:A}=Oi(x),[f,d]=R.useState(""),[m,S]=R.useState("GRID"),[g,C]=R.useState([{id:"ROOT",name:"ROOT"}]),[N,T]=R.useState(!1),[O,w]=R.useState(null),[B,D]=R.useState(!1),[P,I]=R.useState(!1),[b,_]=R.useState(""),[U,j]=R.useState(""),[L,M]=R.useState({visible:!1,x:0,y:0,node:null}),[$,G]=R.useState(!1),[X,Z]=R.useState("ISK_ADAPTER_v1.0"),[ie,Oe]=R.useState(!1),[Fe,ia]=R.useState([]),[He,Li]=R.useState(null);R.useEffect(()=>{e.id&&e.id.toLowerCase()!==l&&u(e.id.toLowerCase())},[e.id]),R.useEffect(()=>{(async()=>{try{const V=await se.executeAction("tokenManager:listTokenAccounts",{provider:x});if(Array.isArray(V)){ia(V);const Q=V.find(Ee=>Ee.isDefault);Q&&Li(Q.id)}}catch(V){console.warn(`[VaultEngine] Discovery failed for ${x}:`,V),ia([])}})(),C([{id:"ROOT",name:"ROOT"}]),w(null),d("")},[x]),R.useEffect(()=>{He&&l!=="cosmos"&&(console.log(`[VaultEngine] Identity Shift Detected (${He}). Refreshing Silo...`),a("FETCH_VAULT_CONTENT",{nodeId:x,folderId:g[g.length-1].id,accountId:He,refresh:!0}))},[He]);const Di=useMemo(()=>{var Q,Ee,me;const F=e.items||e.results||e.rows||((Q=e.data)==null?void 0:Q.items)||((Ee=e.data)==null?void 0:Ee.results);if(Array.isArray(F))return F;if(l==="cosmos")return n.phenotype.artifacts||[];const V=(me=n.phenotype.silos)==null?void 0:me[x];return V?Array.isArray(V)?V:V.results||V.items||V.rows||[]:[]},[e,l,n.phenotype.artifacts,n.phenotype.silos,x]),It=ce.useMemo(()=>{const F=Di.filter(Q=>!Q._isDeleted);return Array.from(new Map(F.map(Q=>[Q.id,Q])).values())},[Di]),{data:ki,setSearchTerm:Pd,setFilter:pr,activeFilters:Jt}=Ld(It,{searchKeys:["name","LABEL","mimeType","type"]});if(R.useEffect(()=>{f.startsWith("/")||Pd(f)},[f]),!x)return s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-10 bg-[var(--bg-deep)] border border-[var(--error)]/30 rounded-2xl animate-in zoom-in duration-300",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("h3",{className:"text-[var(--error)] font-bold text-lg mb-2 uppercase tracking-tighter",children:"Identity_Corrupted"}),s.jsx("p",{className:"text-[var(--text-dim)] text-xs text-center max-w-md font-mono mb-6",children:"Este motor de bveda no ha recibido un ID de nodo vlido desde el Core. El sistema no puede determinar qu silo de datos proyectar."}),s.jsxs("div",{className:"bg-[var(--surface-header)] p-4 rounded-xl border border-[var(--border-subtle)] w-full max-w-md",children:[s.jsx("span",{className:"text-[9px] font-black text-[var(--accent)] uppercase block mb-2",children:"Protocolo de Reparacin:"}),s.jsxs("ul",{className:"text-[10px] text-[var(--text-soft)] space-y-2 list-disc pl-4",children:[s.jsxs("li",{children:["Verifica que el adaptador en ",s.jsx("code",{className:"text-[var(--accent)]",children:"SystemAssembler.gs"})," est decorado correctamente."]}),s.jsxs("li",{children:["Asegrate de que el campo ",s.jsx("code",{className:"text-[var(--accent)]",children:"id"})," est presente en el objeto ",s.jsx("code",{className:"text-[var(--accent)]",children:"CANON"}),"."]}),s.jsxs("li",{children:["Ejecuta ",s.jsx("code",{className:"text-[var(--accent)]",children:"clasp push"})," para sincronizar los cambios de identidad."]})]})]})]});const Pi=ce.useRef(new Set);R.useEffect(()=>{(async()=>{if(l==="cosmos")return;const V="vault_tree_ROOT";if(Ot.isCacheValid(x,V)){const Q=await Ot.getCached(x,V);Q&&(!It||It.length===0)&&(ot(` [Vault] Optimistic recall from L2 Repository: ${x}`,"SUCCESS"),a("VAULT_LOAD_SUCCESS",{nodeId:x,data:{items:Q,metadata:{hydrationLevel:100,source:"CACHE"}}}))}})()},[x,l]),R.useEffect(()=>{l!=="cosmos"&&(!It||It.length===0)&&!o&&!Pi.current.has(x)&&(console.log(`[VaultEngine:${x}] Silo empty. Triggering Ignition Discovery...`),Pi.current.add(x),a("FETCH_VAULT_CONTENT",{nodeId:x,folderId:"ROOT",accountId:He}))},[x,It.length,o,l]);const{LABEL:Md,DOMAIN:Jm}=e,ot=(F,V="INFO")=>{a("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:F,type:V})},Ud=F=>{F.key==="Enter"&&(T(!0),ot(`Iniciando Escaneo Neural para: "${f}"...`),f&&!f.startsWith("/")&&a("FETCH_VAULT_CONTENT",{nodeId:x,query:f,accountId:He}),setTimeout(()=>T(!1),800))},Fd=(F,V)=>{F.stopPropagation(),w(V)},Bd=(F,V)=>{var Q;F.stopPropagation(),V.type==="DIRECTORY"?(T(!0),ot(`Deep Scan Initiated: ${V.name}...`,"INFO"),a("FETCH_VAULT_CONTENT",{nodeId:x,folderId:V.id,accountId:He}),C(Ee=>[...Ee,{id:V.id,name:V.name}]),setTimeout(()=>T(!1),500)):V.type==="DATABASE"||V.type==="GRID"||(Q=V.mimeType)!=null&&Q.includes("sheet")?(ot(`Manifesting ${V.name} into Reality Engine...`,"SUCCESS"),a("SELECT_ARTIFACT",{...V,LABEL:V.name,ARCHETYPES:["DATABASE","VAULT"],ARCHETYPE:"DATABASE",DOMAIN:"DATABASE_L1",ORIGIN_SOURCE:l,ACCOUNT_ID:He}),(l==="VAULT_GLOBAL"||n.phenotype.ui.vaultPanelOpen)&&a("TOGGLE_UI_PANEL",{panel:"vault"})):ot(`Opening file: ${V.name} (Preview not available in Kernel)`,"WARNING")},zd=()=>{w(null)},Vd=async()=>{O&&(ot(`Eliminando ${O.name}...`,"WARNING"),await a("DELETE_VAULT_ITEM",{nodeId:x,itemId:O.id,itemName:O.name}),w(null))},$d=F=>{const V=g.slice(0,F+1),Q=V[V.length-1];T(!0),ot(`Reverting to: ${Q.name}...`),a("FETCH_VAULT_CONTENT",{nodeId:x,folderId:Q.id==="ROOT"?"ROOT":Q.id,accountId:He}),C(V),T(!1)},Mi=(F,V)=>{const Q=V.type==="DATABASE"||V.type==="GRID"||V.type==="database",Ee={...V,ARCHETYPE:Q?"DATABASE":V.ARCHETYPE||V.type||"FILE",ORIGIN_SOURCE:l};F.dataTransfer.setData("indra/artifact",JSON.stringify(Ee)),ot(`Initiating data drag: ${V.name} [Archetype: ${Ee.ARCHETYPE}]`),F.currentTarget.style.opacity="0.5"},Gd=F=>{F.currentTarget.style.opacity="1"},Yd=(F,V)=>{F.preventDefault(),M({visible:!0,x:F.clientX,y:F.clientY,node:V}),w(V)},Hd=F=>{var Ee;const V=F.type==="DATABASE"||F.type==="GRID"||F.mimeType==="application/vnd.indra.notion-db"||((Ee=F.mimeType)==null?void 0:Ee.includes("sheet")),Q={...F,LABEL:F.name,ARCHETYPE:V?"DATABASE":F.archetype||"NODE",DOMAIN:V?"DATA_ENGINE":F.DOMAIN||"SYSTEM_VAULT",ORIGIN_SOURCE:l,ACCOUNT_ID:He,VITAL_SIGNS:V?{IO_CONSISTENCY:{value:"NOMINAL",criticality:"NOMINAL"},HYDRATION:{value:"PARTIAL",criticality:"WARNING"}}:{}};a("BIND_TO_COSMOS",{artifact:Q}),u("cosmos")},Wd=F=>{ot(`Artifact defined: ${L.node.name}. Integrating into Cosmos...`,"SUCCESS"),a("INTEGRATE_SMART_NODE",{baseNode:L.node,config:F,schemaId:X}),G(!1),M({visible:!1,x:0,y:0,node:null})},Kd=()=>{var F,V,Q;return O?s.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"p-6 border-b border-[var(--border-subtle)] bg-[var(--bg-secondary)]/10",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[var(--bg-primary)] border border-[var(--border-subtle)] flex items-center justify-center shadow-lg",children:s.jsx("span",{className:"text-4xl",children:O.type==="DATABASE"||(F=O.mimeType)!=null&&F.includes("sheet")?"":O.type==="DIRECTORY"?"":""})})}),s.jsx("h3",{className:"text-sm font-bold text-[var(--text-vibrant)] text-center break-words leading-tight mb-2",children:O.name}),s.jsx("div",{className:"flex justify-center",children:s.jsx("span",{className:`text-[9px] font-black px-2 py-1 rounded uppercase tracking-wider ${O.type==="DIRECTORY"?"bg-[var(--accent)]/10 text-[var(--accent)]":"bg-[var(--text-dim)]/10 text-[var(--text-dim)]"}`,children:O.type||"FILE"})})]}),s.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",children:[s.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mb-4",children:"Meta Data"}),s.jsxs("div",{className:"space-y-4 font-mono text-[10px]",children:[s.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[s.jsx("span",{className:"text-[var(--text-dim)]",children:"Size"}),s.jsx("span",{className:"text-[var(--text-soft)]",children:(V=O.raw)!=null&&V.size?(O.raw.size/1024).toFixed(1)+" KB":"--"})]}),s.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[s.jsx("span",{className:"text-[var(--text-dim)]",children:"MIME"}),s.jsx("span",{className:"text-[var(--text-soft)] truncate max-w-[120px]",title:O.mimeType,children:((Q=O.mimeType)==null?void 0:Q.split(".").pop())||"Unknown"})]}),s.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[s.jsx("span",{className:"text-[var(--text-dim)]",children:"Updated"}),s.jsx("span",{className:"text-[var(--text-soft)]",children:new Date(O.lastUpdated).toLocaleDateString()})]})]}),s.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mt-8 mb-4",children:"Protocols"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:()=>{_(O.name),D(!0)},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-primary)] border border-transparent hover:border-[var(--border-subtle)] transition-all text-left group",children:[s.jsx("svg",{className:"w-4 h-4 text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"text-[10px] font-bold text-[var(--text-soft)]",children:"RENAME"})]}),s.jsxs("button",{onClick:()=>I(!0),className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-primary)] border border-transparent hover:border-[var(--border-subtle)] transition-all text-left group",children:[s.jsx("svg",{className:"w-4 h-4 text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),s.jsx("span",{className:"text-[10px] font-bold text-[var(--text-soft)]",children:"MOVE TO..."})]}),s.jsxs("button",{onClick:Vd,className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-red-500/10 border border-transparent hover:border-red-500/30 transition-all text-left group mt-4",children:[s.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{className:"text-[10px] font-bold text-red-400",children:"DELETE"})]})]})]})]}):s.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"p-6 border-b border-[var(--border-subtle)]",children:[s.jsx("div",{className:"flex items-center gap-2 mb-4",children:s.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Current Sector"})}),s.jsx("h3",{className:"text-lg font-bold text-[var(--text-vibrant)] truncate",children:g[g.length-1].name}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-[10px] font-mono text-[var(--text-dim)]",children:[s.jsx("span",{children:"Status"}),s.jsx("span",{style:{color:E},className:A?"animate-pulse":"",children:v})]}),s.jsxs("div",{className:"flex justify-between text-[10px] font-mono text-[var(--text-dim)] mt-2",children:[s.jsx("span",{children:"Hydration"}),s.jsxs("span",{children:[y,"%"]})]}),s.jsx(gm,{nodeId:x}),s.jsxs("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-50 block text-right",children:[It.length," items projected"]})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>ot("Upload Protocol Initiated"),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all group",children:[s.jsx("svg",{className:"w-5 h-5 text-[var(--text-soft)] group-hover:text-[var(--accent)] group-hover:scale-110 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)]",children:"UPLOAD"})]}),s.jsxs("button",{onClick:()=>a("FETCH_VAULT_CONTENT",{nodeId:x,folderId:g[g.length-1].id,refresh:!0}),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all group",children:[s.jsx("svg",{className:"w-5 h-5 text-[var(--text-soft)] group-hover:text-[var(--accent)] group-hover:rotate-180 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)]",children:"SYNC"})]})]})]})]})};return t==="VAULT"||t==="BRIDGE"||t==="STANDARD"?s.jsx(xm,{title:"ALMACN DE ARTEFACTOS",domain:"SYSTEM_VAULT",data:e,slotId:r,inspectorPanel:Kd(),children:s.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden relative",children:[s.jsxs("nav",{className:"flex items-center gap-1 p-2 bg-[var(--surface-header)] border-b border-[var(--border-subtle)] shrink-0 overflow-x-auto scrollbar-hide",children:[i.map(F=>s.jsxs("button",{onClick:()=>u(F.id),className:`
                                    flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all text-[9px] font-black uppercase tracking-widest
                                    ${l===F.id?"bg-[var(--accent)]/10 border-[var(--accent)]/40 text-[var(--accent)]":"bg-transparent border-transparent text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}
                                `,children:[k[F.icon]&&ce.createElement(k[F.icon],{size:10}),s.jsx("span",{className:isSidebar?"hidden xs:inline":"inline",children:F.label})]},F.id)),Fe.length>0&&s.jsxs("div",{className:"ml-auto flex items-center gap-2 px-3 border-l border-[var(--border-subtle)]",children:[s.jsx("span",{className:"text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter",children:"Identity:"}),s.jsx("select",{className:"bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded px-2 py-0.5 text-[8px] font-mono text-[var(--accent)] outline-none cursor-pointer",value:He||"",onChange:F=>Li(F.target.value),children:Fe.map(F=>s.jsxs("option",{value:F.id,children:[F.label," ",F.isDefault?"()":""]},F.id))}),s.jsx("button",{onClick:()=>a("SELECT_ARTIFACT",{id:"IDENTITY_MANAGER",ARCHETYPE:"IDENTITY",LABEL:"Identity Manager",provider:l}),className:"p-1.5 rounded-lg hover:bg-white/5 text-[var(--text-dim)] hover:text-[var(--accent)] transition-all",title:"Gestionar Cuentas",children:s.jsx(k.Settings,{size:12})})]})]}),!e.hideSearch&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-[var(--surface-header)] shrink-0",children:[s.jsxs("div",{className:"flex-1 relative group",children:[s.jsx(k.Search,{size:12,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"}),s.jsx("input",{type:"text",placeholder:"Escanear Bveda...",className:"w-full bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-full pl-10 pr-4 py-2 text-[10px] font-mono text-[var(--text-primary)] outline-none focus:border-[var(--accent)]/30 transition-all shadow-inner",value:f,onChange:F=>d(F.target.value),onKeyDown:Ud})]}),s.jsx("button",{onClick:()=>Oe(!ie),className:`p-2 rounded-full border transition-all duration-300 ${ie?"bg-[var(--accent)] text-black border-[var(--accent)]":"bg-[var(--surface-header)] border-[var(--border-subtle)] text-[var(--text-dim)] hover:text-[var(--text-primary)]"}`,title:"Filtros de Proyeccin",children:s.jsx(k.Filter,{size:12})}),s.jsx("button",{onClick:()=>a("FETCH_VAULT_CONTENT",{nodeId:x,folderId:g[g.length-1].id,accountId:He,refresh:!0}),className:"p-2 rounded-full bg-[var(--surface-header)] border border-[var(--border-subtle)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all hover:rotate-180 duration-500",children:s.jsx(k.Sync,{size:12})})]}),ie&&s.jsxs("div",{className:"px-6 py-2 bg-[var(--surface-header)] border-b border-[var(--border-subtle)] flex flex-wrap gap-2 animate-in slide-in-from-top duration-200",children:[s.jsx("button",{onClick:()=>{clearFilters()},className:"px-2 py-1 rounded-md border border-red-500/30 text-red-500 text-[8px] font-bold uppercase hover:bg-red-500/10",children:"PURGAR"}),(l==="drive"||l==="VAULT")&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>pr("mimeType",F=>{var V;return(V=F.mimeType)==null?void 0:V.includes("spreadsheet")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Jt.mimeType?"bg-green-500/20 border-green-500 text-green-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"MATRICES (SHEETS)"}),s.jsx("button",{onClick:()=>pr("mimeType",F=>{var V;return(V=F.mimeType)==null?void 0:V.includes("document")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Jt.mimeType?"bg-blue-500/20 border-blue-500 text-blue-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"MANIFIESTOS (DOCS)"})]}),l==="local"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>pr("name",F=>{var V;return(V=F.name)==null?void 0:V.toLowerCase().endsWith(".skp")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Jt.name?"bg-cyan-500/20 border-cyan-500 text-cyan-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"MOLDES (SKP)"}),s.jsx("button",{onClick:()=>pr("name",F=>{var V;return(V=F.name)==null?void 0:V.toLowerCase().endsWith(".dwg")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Jt.name?"bg-indigo-500/20 border-indigo-500 text-indigo-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"PLANOS (DWG)"})]}),s.jsx("button",{onClick:()=>pr("type","DIRECTORY"),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Jt.type==="DIRECTORY"?"bg-amber-500/20 border-amber-500 text-amber-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"CONTENEDORES"}),s.jsx("button",{onClick:()=>pr("type",F=>F.type!=="DIRECTORY"),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${Jt.type&&Jt.type!=="DIRECTORY"?"bg-purple-500/20 border-purple-500 text-purple-600":"border-[var(--border-subtle)] text-[var(--text-dim)] hover:bg-[var(--surface-header)]"}`,children:"ENTIDADES"})]})]}),s.jsx("div",{className:"px-6 py-2 border-b border-[var(--border-subtle)] flex items-center gap-2 overflow-x-auto scrollbar-hide shrink-0 bg-[var(--surface-header)]",children:g.map((F,V)=>s.jsxs(ce.Fragment,{children:[s.jsx("button",{onClick:()=>$d(V),className:`text-[8px] font-black uppercase tracking-widest hover:text-[var(--accent)] transition-all ${V===g.length-1?"text-[var(--text-primary)]":"text-[var(--text-dim)]"}`,children:F.name}),V<g.length-1&&s.jsx("span",{className:"text-[var(--text-dim)] opacity-30 text-[8px]",children:"/"})]},F.id))}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",onClick:zd,children:s.jsx("div",{className:`grid gap-4 ${isSidebar?"grid-cols-1":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"}`,children:ki.length>0?ki.map(F=>{var Bi,zi,Vi,$i;const V=h.has(F.id),Q=F.type==="DATABASE"||((Bi=F.mimeType)==null?void 0:Bi.includes("sheet")),Ee=F.type==="DIRECTORY",me=V?"opacity-100 scale-100 ring-1 ring-[var(--accent)]/50":"opacity-60 grayscale hover:grayscale-0 hover:opacity-100 hover:scale-[1.02]",Qd=Ee?"hover:border-amber-500/30":Q?"hover:border-violet-500/50 shadow-[0_0_20px_rgba(139,92,246,0.05)]":"hover:border-blue-500/30";return s.jsxs("div",{draggable:!0,onDragStart:mt=>Mi(mt,F),onDragEnd:Gd,onClick:mt=>Fd(mt,F),onDoubleClick:mt=>Bd(mt,F),onContextMenu:mt=>Yd(mt,F),className:`
                                                group relative p-4 rounded-2xl border transition-all duration-300 cursor-pointer flex flex-col items-center text-center
                                                ${me} ${Qd}
                                                ${(O==null?void 0:O.id)===F.id?"bg-[var(--accent)]/10 border-[var(--accent)]/30 shadow-2xl !opacity-100 !grayscale-0 !scale-105":"bg-[var(--surface-card)] border-[var(--border-subtle)] hover:bg-[var(--surface-header)]"}
                                                ${isSidebar?"flex-row text-left !items-start !text-left p-3":"flex-col"}
                                            `,children:[V&&s.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 bg-[var(--accent)] rounded-full shadow-[0_0_5px_var(--accent)] z-10"}),s.jsx("div",{className:`${isSidebar?"w-8 h-8 mr-3":"w-12 h-12 mb-3"} rounded-xl bg-[var(--surface-header)] flex items-center justify-center text-xl group-hover:scale-110 transition-all duration-500 shadow-inner shrink-0`,children:F.type==="DIRECTORY"?s.jsx("span",{className:"text-amber-500",children:""}):F.type==="DATABASE"||(zi=F.mimeType)!=null&&zi.includes("sheet")?s.jsx(k.Database,{size:24,color:"var(--accent)"}):s.jsx("span",{className:"text-blue-500",children:""})}),s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s.jsx("span",{className:"text-[10px] font-bold text-[var(--text-primary)] truncate w-full break-words group-hover:text-[var(--accent)]",children:F.name}),s.jsx("span",{className:`text-[7px] font-mono uppercase mt-0.5 tracking-tighter opacity-60 ${F.type==="DATABASE"||(Vi=F.mimeType)!=null&&Vi.includes("sheet")?"text-[var(--accent)] font-black":"text-[var(--text-dim)]"}`,children:($i=F.mimeType)!=null&&$i.includes("sheet")?"SPREADSHEET":F.type||"FILE"})]}),s.jsx("button",{onClick:mt=>{mt.stopPropagation(),Hd(F)},className:"absolute top-2 left-2 w-6 h-6 rounded-full bg-[var(--accent)] text-black flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all hover:scale-110 shadow-lg z-20",title:"Manifestar en Cosmos",children:s.jsx(k.Plus,{size:12})})]},F.id)}):s.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-[var(--text-dim)] space-y-4",children:[s.jsx(k.Inbox,{size:48,className:"opacity-10"}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] opacity-40",children:"Empty_Vector"}),s.jsx("button",{onClick:()=>a("FETCH_VAULT_CONTENT",{nodeId:x,folderId:"ROOT",refresh:!0}),className:"mt-4 px-4 py-2 bg-[var(--bg-secondary)] border border-[var(--border-subtle)] rounded-full text-[9px] font-mono hover:bg-[var(--accent)] hover:text-black transition-colors",children:"FORZAR_SINCRONIZACIN"})]})})}),$&&s.jsxs("div",{className:"absolute inset-0 z-[110] bg-black/90 backdrop-blur-xl flex flex-col p-8 sm:p-12 animate-in slide-in-from-bottom duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--accent)]/10 border border-[var(--accent)]/30 flex items-center justify-center text-2xl",children:""}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-[var(--text-vibrant)]",children:"Define Smart Artifact"}),s.jsxs("p",{className:"text-xs text-[var(--text-dim)] font-mono",children:["Transforming: ",(Fi=L.node)==null?void 0:Fi.name]})]})]}),s.jsx("button",{onClick:()=>G(!1),className:"p-3 rounded-full hover:bg-[var(--bg-secondary)] transition-colors text-[var(--text-dim)]",children:s.jsx(k.Close,{size:24})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-2xl p-4 sm:p-8 max-w-2xl mx-auto w-full shadow-2xl",children:s.jsx(Od,{schemaId:X,onCommit:Wd,onCancel:()=>G(!1)})})]})]})}):t==="WIDGET"?s.jsxs("div",{className:"w-full bg-[var(--bg-glass)] border border-[var(--border-vibrant)] rounded-2xl p-4 backdrop-blur-xl shadow-xl animate-in slide-in-from-right duration-500 overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-[var(--accent)]/20"}),s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-[var(--border-subtle)]",children:[s.jsx("span",{className:"text-[10px] font-black text-[var(--accent)] tracking-[0.2em] uppercase",children:Md}),s.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--success)] animate-pulse shadow-[0_0_8px_var(--success)]"})]}),s.jsx("div",{className:"space-y-1.5",children:It.slice(0,3).map(F=>s.jsxs("div",{draggable:!0,onDragStart:V=>Mi(V,F),className:"flex items-center gap-3 p-2.5 bg-[var(--bg-secondary)]/30 border border-transparent hover:border-[var(--accent)]/30 rounded-xl cursor-grab active:cursor-grabbing transition-all group hover:bg-[var(--bg-secondary)]/50",children:[s.jsx("span",{className:"text-xs opacity-50",children:F.type==="DIRECTORY"?"":""}),s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s.jsx("span",{className:"text-[10px] font-mono text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)] truncate",children:F.name}),s.jsx("span",{className:`text-[8px] font-mono uppercase opacity-50 ${F.type==="DIRECTORY"?"text-[var(--accent)]":"text-[var(--text-dim)]"}`,children:F.type||"FILE"})]}),s.jsx("button",{className:"opacity-0 group-hover:opacity-100 text-[9px] font-bold text-[var(--accent)] transition-opacity uppercase tracking-widest bg-[var(--accent)]/10 px-2 py-1 rounded-lg border border-[var(--accent)]/20",children:"Inject"})]},F.id))}),s.jsxs("div",{className:"mt-4 pt-3 border-t border-[var(--border-subtle)] flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 h-1 bg-[var(--bg-secondary)] rounded-full overflow-hidden",children:s.jsx("div",{className:"w-full h-full bg-gradient-to-r from-[var(--accent)]/5 via-[var(--accent)] to-[var(--accent)]/5 animate-loading-bar"})}),s.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tighter",children:"Ready_Link"})]})]}):null},vm=({data:e,execute:t})=>{var p;const{label:r,VITAL_SIGNS:n={},CAPABILITIES:a={},data:o={}}=e,i=o.from||"Sovereign Entity",c=o.subject||r,l=((p=n.URGENCY)==null?void 0:p.value)>.8||c.toLowerCase().includes("urgente"),u=h=>{t("EXECUTE_NODE_ACTION",{nodeId:e.id,capability:h,payload:{emailId:o.id}})};return s.jsxs("div",{className:"flex flex-col gap-2 p-1",children:[s.jsxs("div",{className:"flex flex-col border-l-2 border-[var(--accent)] pl-2 bg-white/5 p-2 rounded-r",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-[10px] font-bold text-[var(--accent)] truncate",children:i}),l&&s.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 shadow-[0_0_5px_red] animate-pulse"})]}),s.jsxs("div",{className:"text-[9px] text-[var(--text-soft)] line-clamp-2 leading-tight italic",children:['"',c,'"']})]}),s.jsxs("div",{className:"flex gap-2 mt-1",children:[Object.keys(a).includes("SEND_REPLY")&&s.jsx("button",{onClick:()=>u("SEND_REPLY"),className:"px-2 py-1 bg-[var(--accent)]/20 hover:bg-[var(--accent)]/40 border border-[var(--accent)]/30 rounded text-[8px] font-black uppercase transition-all",children:"Reply"}),s.jsx("button",{onClick:()=>u("ARCHIVE"),className:"px-2 py-1 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-[8px] font-black uppercase transition-all text-[var(--text-dim)]",children:"Archive"})]})]})},uc=({data:e,execute:t})=>{const{LABEL:r,data:n={}}=e,a=n.extension||(r&&r.includes(".")?r.split(".").pop():"bin"),o=n.size?`${(n.size/1024).toFixed(1)} KB`:"---",i=c=>({pdf:"",doc:"",docx:"",xls:"",xlsx:"",jpg:"",png:"",zip:"",gs:""})[c.toLowerCase()]||"";return s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-black/20 rounded-lg border border-white/5 group-hover:border-[var(--accent)]/30 transition-all",children:[s.jsx("div",{className:"text-2xl filter drop-shadow-[0_0_8px_rgba(255,255,255,0.1)]",children:i(a)}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:"text-[10px] font-black text-[var(--text-soft)] truncate tracking-tight",children:r}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] uppercase font-bold px-1 bg-[var(--accent)]/10 rounded",children:a}),s.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)]",children:o})]})]})]})},ym=({data:e,execute:t})=>{const{label:r,data:n={}}=e,a=!!n.thumbnailLink;return s.jsxs("div",{className:"flex flex-col gap-2 p-1",children:[s.jsxs("div",{className:"relative w-full h-24 bg-black/40 rounded border border-white/10 overflow-hidden flex items-center justify-center",children:[a?s.jsx("img",{src:n.thumbnailLink,alt:"Preview",className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"}):s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("span",{className:"text-3xl opacity-20",children:""}),s.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tighter",children:"No Preview Available"})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:s.jsx("button",{className:"w-full py-1 bg-[var(--accent)] text-black text-[8px] font-black uppercase rounded shadow-lg transform translate-y-2 group-hover:translate-y-0 transition-transform",onClick:o=>{o.stopPropagation(),window.open(n.webViewLink,"_blank")},children:"Focus Reader"})})]}),s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)] truncate max-w-[120px]",children:r}),s.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)]",children:"PDF"})]})]})},dc=({data:e,execute:t})=>{var h,x,v,y,E;const{state:r}=te(),n=e.id||((h=e.data)==null?void 0:h.id)||e.ID,a=(v=e.ORIGIN_SOURCE||((x=e.data)==null?void 0:x.ORIGIN_SOURCE))==null?void 0:v.toLowerCase(),o=e.ACCOUNT_ID||((y=e.data)==null?void 0:y.ACCOUNT_ID),i=R.useMemo(()=>{var f,d,m;let A=((f=e.data)==null?void 0:f.items)||e.items||e.results||e.rows||((d=e.data)==null?void 0:d.results)||[];if(A.length===0){const S=(m=r.phenotype.silos)==null?void 0:m[n];S&&(A=Array.isArray(S)?S:S.results||S.items||S.rows||[])}return A.map(S=>{if(!S)return null;if(typeof S=="object"){const g=S.fields||S.properties||S.Properties;if(g)return{id:S.id||S.ID,...g,_raw:S}}return S}).filter(Boolean).slice(0,5)},[e.data,e.items,(E=r.phenotype.silos)==null?void 0:E[n],n]),c=R.useMemo(()=>{var f,d,m,S;const A=((f=e.SCHEMA)==null?void 0:f.columns)||((m=(d=e.data)==null?void 0:d.SCHEMA)==null?void 0:m.columns)||((S=e.data)==null?void 0:S.columns)||e.columns;return A&&A.length>0?A:i.length===0?[]:Object.keys(i[0]).filter(g=>!g.startsWith("_")).map(g=>({id:g,label:g.toUpperCase()}))},[i,e]),l=()=>{t("FETCH_VAULT_CONTENT",{nodeId:a||"NOTION",folderId:n,accountId:o,refresh:!0})},u=()=>{t("SELECT_ARTIFACT",e)},p=A=>A==null?"":typeof A=="object"&&!Array.isArray(A)?A.title&&Array.isArray(A.title)?A.title.map(f=>f.plain_text).join(""):A.rich_text&&Array.isArray(A.rich_text)?A.rich_text.map(f=>f.plain_text).join(""):A.name||A.label?A.name||A.label:A.id?`ID:${A.id.slice(0,4)}...`:JSON.stringify(A).slice(0,20)+"...":Array.isArray(A)?A.map(f=>typeof f=="object"?f.name||f.label||f.plain_text||f.id||"?":f).join(", "):String(A);return s.jsxs("div",{className:"flex flex-col gap-3 group/db h-full",children:[s.jsxs("div",{className:"flex items-center justify-between px-1",children:[s.jsxs("div",{className:"flex items-center gap-2 opacity-40 group-hover/db:opacity-100 transition-opacity",children:[s.jsx(k.Database,{size:10,className:"text-[var(--accent)]"}),s.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-[var(--text-secondary)]",children:a||"REALITY_STREAM"})]}),s.jsx("button",{onClick:u,className:"p-1 rounded bg-[var(--accent)]/10 hover:bg-[var(--accent)]/20 text-[var(--accent)] transition-all",title:"Expandir a Motor de Base de Datos",children:s.jsx(k.Maximize,{size:10})})]}),s.jsx("div",{className:"relative flex-1 bg-[var(--surface-card)] rounded-xl border border-white/5 overflow-hidden backdrop-blur-sm",children:s.jsxs("table",{className:"w-full text-left border-collapse table-fixed",children:[s.jsx("thead",{className:"bg-[var(--surface-header)]",children:s.jsx("tr",{children:c.slice(0,3).map(A=>s.jsx("th",{className:"px-3 py-2 text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter truncate border-b border-white/5",children:A.label},A.id))})}),s.jsx("tbody",{className:"divide-y border-white/[0.02]",children:i.length>0?i.map((A,f)=>s.jsx("tr",{className:"hover:bg-[var(--accent)]/[0.05] transition-colors group/row",children:c.slice(0,3).map(d=>s.jsx("td",{className:"px-3 py-1.5 text-[8px] font-mono text-[var(--text-soft)] opacity-60 group-hover/row:opacity-100 truncate",children:p(A[d.id])},d.id))},A.id||f)):s.jsx("tr",{children:s.jsx("td",{colSpan:c.length||1,className:"py-8 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-3 opacity-30 group-hover/db:opacity-100 transition-opacity",children:[s.jsx("div",{className:"w-10 h-10 rounded-full border border-dashed border-white/20 flex items-center justify-center animate-pulse",children:s.jsx(k.Inbox,{size:16})}),s.jsx("span",{className:"text-[8px] font-mono uppercase",children:"Empty_Refraction"}),s.jsx("button",{onClick:l,className:"px-3 py-1 rounded-full bg-[var(--accent)]/10 border border-[var(--accent)]/20 text-[7px] font-black text-[var(--accent)] hover:bg-[var(--accent)]/20 transition-all uppercase tracking-widest",children:"REIFY_DATA"})]})})})})]})})]})},Em=({data:e,execute:t})=>{var l,u;const{DOMAIN:r,schemaId:n,LABEL:a,ARCHETYPE:o}=e,i=a&&a.includes(".")?a.split(".").pop().toLowerCase():"";return o==="DATABASE"?s.jsx(dc,{data:e,execute:t}):o==="VAULT"||n==="FOLDER_NODE"?s.jsx(uc,{data:e,execute:t,isVault:!0}):r==="COMMUNICATION"?s.jsx(vm,{data:e,execute:t}):n==="PDF_NODE"||i==="pdf"?s.jsx(ym,{data:e,execute:t}):n==="DATABASE_NODE"||((l=e.data)==null?void 0:l.type)==="DATABASE"||e.CAPABILITIES&&e.CAPABILITIES.onRowSelect?s.jsx(dc,{data:e,execute:t}):n==="FILE_NODE"||((u=e.data)==null?void 0:u.type)==="FILE"?s.jsx(uc,{data:e,execute:t}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-20",children:s.jsx("div",{className:"w-12 h-12 rounded-full border border-dashed border-white/20 animate-spin-slow"})})},Dd=({onComplete:e,size:t=24,iconSize:r=14,color:n="red"})=>{const[a,o]=R.useState(0),i=R.useRef(null),c=a>0,l=1e3,u=A=>{A.stopPropagation(),A.preventDefault();const f=20,d=100/(l/f);clearInterval(i.current),i.current=setInterval(()=>{o(m=>{const S=m+d;return S>=100?(clearInterval(i.current),setTimeout(()=>e(),0),100):S})},f)},p=A=>{A&&(A.stopPropagation(),A.preventDefault()),clearInterval(i.current),o(0)};R.useEffect(()=>()=>clearInterval(i.current),[]);const h=t/2-5,x=2*Math.PI*h,v=x-a/100*x,y=n==="red"?"text-red-500":"text-[var(--accent)]",E=n==="red"?"#ef4444":"var(--accent)";return s.jsxs("div",{className:"relative flex items-center justify-center rounded-full cursor-pointer group/delete select-none",style:{width:t,height:t},onMouseDown:u,onMouseUp:p,onMouseLeave:p,onTouchStart:u,onTouchEnd:p,title:"MANTENER PRESIONADO PARA PERMANENTE ELIMITACIN",children:[s.jsx("div",{className:`absolute inset-0 rounded-full bg-${n}-500/10 transition-all duration-300 ${c?"scale-125 opacity-100":"scale-0 opacity-0 group-hover/delete:scale-100 group-hover/delete:opacity-100"}`}),c&&s.jsx("svg",{className:"absolute inset-0 w-full h-full -rotate-90 pointer-events-none z-10",viewBox:`0 0 ${t} ${t}`,children:s.jsx("circle",{cx:t/2,cy:t/2,r:h,fill:"none",stroke:E,strokeWidth:"2",strokeDasharray:x,strokeDashoffset:v,strokeLinecap:"round",className:"transition-all duration-75 ease-linear"})}),s.jsx("div",{className:`transition-all duration-200 z-20 ${c?`${y} scale-90`:`text-[var(--text-dim)] group-hover/delete:${y} opacity-50 group-hover/delete:opacity-100 transform group-hover/delete:scale-110`}`,children:s.jsx(k.Trash,{size:r})}),c&&a<100&&s.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[8px] px-1.5 py-0.5 rounded whitespace-nowrap border border-red-500/30 pointer-events-none z-50",children:a>80?"SOLTAR PARA CANCELAR!":"BORRANDO..."})]})},gt=({data:e})=>{var m;const{state:t,execute:r}=te(),{id:n,LABEL:a,ARCHETYPE:o,DOMAIN:i,CAPABILITIES:c={},VITAL_SIGNS:l={},schemaId:u}=e,[p,h]=R.useState(!1);R.useEffect(()=>{const S=g=>{var C;((C=g.detail)==null?void 0:C.nodeId)===n&&(h(!0),setTimeout(()=>h(!1),800))};return window.addEventListener("ISK_SYNAPTIC_PULSE",S),()=>window.removeEventListener("ISK_SYNAPTIC_PULSE",S)},[n]);const v={SYSTEM_INFRA:"#3b82f6",SYSTEM_CORE:"#f97316",UI_PROJECTION:"#a855f7",SENSING:"#10b981",COMMUNICATION:"#ec4899",DATA_ENGINE:"#8b5cf6",DOCUMENT_ENGINE:"#06b6d4"}[i]||"#6366f1",y=o==="DATABASE"||u==="DATABASE_NODE"||((m=e.data)==null?void 0:m.type)==="DATABASE",E={...c};if(y){E.DATA_STREAM||(E.DATA_STREAM={io:"STREAM",type:"TABLE",human_label:"DATA_STREAM "});const S=Object.keys(E).find(g=>g.replace(/_/g," ").trim()==="QUERY FILTER");S?S!=="QUERY_FILTER"&&(E.QUERY_FILTER=E[S],delete E[S]):E.QUERY_FILTER={io:"TRIGGER",type:"FILTER",human_label:"QUERY_FILTER "}}const A=Object.entries(E).filter(([S,g])=>g.io==="WRITE"||g.io==="TRIGGER"||g.io==="GATE"||g.io==="INPUT"),f=Object.entries(E).filter(([S,g])=>g.io==="READ"||g.io==="STREAM"||g.io==="PROBE"||g.io==="REFRESH"||g.io==="OUTPUT"),d=S=>{var C;S.stopPropagation(),(u==="FOLDER_NODE"||u==="COSMOS_NODE"||y||((C=e.data)==null?void 0:C.type)==="DIRECTORY")&&(console.log(`[NodeEngine]  Deep Focus Triggered: ${a}`),r("SELECT_ARTIFACT",e))};return s.jsxs("div",{className:`
                ${y?"w-[420px]":"w-64"} 
                bg-[var(--indra-glass-bg)] border rounded-2xl shadow-2xl backdrop-blur-xl overflow-hidden group transition-all active:scale-[0.98] select-none
                ${p?"border-[var(--accent)] shadow-[0_0_30px_rgba(var(--accent-rgb),0.4)] scale-[1.02]":"border-[var(--indra-glass-border)] hover:border-[var(--accent)]/50"}
            `,onDoubleClick:d,children:[s.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-b border-[var(--border-subtle)] cursor-grab active:cursor-grabbing",style:{background:`linear-gradient(to right, ${v}22, transparent)`},children:[s.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[s.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:v,boxShadow:`0 0 8px ${v}`}}),s.jsx("span",{className:"text-[10px] font-black text-[var(--text-soft)] truncate tracking-tight uppercase group-hover:text-white transition-colors",children:a})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{var g;let S=e.ARCHETYPES||((g=e.data)==null?void 0:g.ARCHETYPES);return!S&&y&&(S=["DATABASE","VAULT","NODE"]),S&&S.length>1?s.jsx("div",{className:"flex items-center bg-black/40 rounded-lg p-0.5 border border-white/10 mr-1",children:S.map(C=>s.jsx("button",{onClick:N=>{N.stopPropagation(),r("UPDATE_NODE",{id:n,updates:{ARCHETYPE:C}})},className:`px-1.5 py-0.5 rounded text-[7px] font-black transition-all ${o===C?"bg-[var(--accent)] text-black":"text-white/40 hover:text-white"}`,title:`Mutar a modo ${C}`,children:C},C))}):null})(),s.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] font-bold uppercase tracking-tight px-1.5 bg-[var(--accent)]/5 rounded border border-[var(--accent)]/20",children:o||u}),s.jsx(Dd,{onComplete:()=>r("REMOVE_ARTIFACT",{id:n}),size:24,iconSize:10})]})]}),s.jsxs("div",{className:"p-4 flex flex-col gap-2 relative min-h-[80px]",children:[s.jsx(Em,{data:e,execute:r}),s.jsxs("div",{className:"flex justify-between gap-4 mt-2",children:[s.jsx("div",{className:"flex flex-col gap-2 items-start",children:A.map(([S,g])=>s.jsxs("div",{className:"flex items-center gap-2 group/port cursor-pointer hover:bg-white/5 p-1 rounded transition-colors",onMouseDown:C=>{C.stopPropagation()},onMouseUp:C=>{C.stopPropagation();const N=t.phenotype.ui.pendingConnection;N&&N.sourceNodeId!==n&&r("ADD_RELATIONSHIP",{source:N.sourceNodeId,target:n,sourcePort:N.portId,targetPort:S})},children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-[var(--border-subtle)] bg-[var(--bg-deep)] group-hover/port:border-[var(--accent)] transition-colors"}),s.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase group-hover/port:text-[var(--text-vibrant)] truncate max-w-[80px]",children:g.human_label||g.LABEL||S})]},S))}),s.jsx("div",{className:"flex flex-col gap-2 items-end",children:f.map(([S,g],C)=>s.jsxs("div",{className:"flex items-center gap-2 group/port cursor-pointer hover:bg-white/5 p-1 rounded transition-colors",onMouseDown:N=>{N.stopPropagation();const T=96+C*18;r("SET_PENDING_CONNECTION",{sourceNodeId:n,portId:S,startX:e.x,startY:e.y,portOffsetX:y?420:256,portOffsetY:T,currentX:N.clientX,currentY:N.clientY})},children:[s.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase group-hover/port:text-[var(--text-vibrant)] truncate max-w-[80px]",children:g.human_label||g.LABEL||S}),s.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-[var(--border-subtle)] bg-[var(--bg-deep)] group-hover/port:scale-125 transition-all",style:{borderColor:`${v}44`}})]},S))})]})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-[var(--bg-secondary)] flex items-center justify-between border-t border-[var(--border-subtle)]",children:[s.jsxs("div",{className:"flex gap-1.5",children:[Object.entries(l).map(([S,g])=>s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${g.criticality==="FATAL"?"bg-[var(--error)]":"bg-[var(--success)]"}`,title:`${S}: ${g.criticality}`},S)),Object.keys(l).length===0&&s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 opacity-50"})]}),s.jsx("span",{className:"text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter",children:"Sovereign_Coherence: 1.0"})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes spin-slow {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                .animate-spin-slow {
                    animation: spin-slow 10s linear infinite;
                }
            `}})]})},Zr=({data:e})=>{var D,P;const{state:t,execute:r}=te(),{LABEL:n,ARCHETYPE:a,DOMAIN:o,id:i}=e,{adapter:c}=t.sovereignty,l=ce.useMemo(()=>{var b;const I=((b=t.genotype)==null?void 0:b.COMPONENT_REGISTRY)||{};return Object.values(I).filter(_=>_.ARCHETYPE==="COMMUNICATION"||_.ARCHETYPE==="MAIL"||_.ARCHETYPE==="MESSAGING"||_.DOMAIN==="COMMUNICATION").map(_=>({id:_.id,label:_.LABEL||_.id,icon:_.ARCHETYPE==="MAIL"?"Inbox":"MessageCircle",archetype:_.ARCHETYPE}))},[(D=t.genotype)==null?void 0:D.COMPONENT_REGISTRY]),[u,p]=R.useState(i||((P=l[0])==null?void 0:P.id)||"gmail"),[h,x]=R.useState([]),[v,y]=R.useState(null),[E,A]=R.useState(!1),f=ARCHETYPE==="MAIL"?"INBOX":ARCHETYPE==="MESSAGING"?"CHAT":"SPLIT",[d,m]=R.useState(f),[S,g]=R.useState([]),[C,N]=R.useState(null),[T,O]=R.useState("");R.useEffect(()=>{(async()=>{if(u)try{const b=await c.executeAction("tokenManager:listTokenAccounts",{provider:u});if(Array.isArray(b)){x(b);const _=b.find(U=>U.isDefault)||b[0];_&&y(_.id)}}catch(b){console.warn(`[CommunicationEngine] Discovery failed for ${u}:`,b),x([])}})()},[u]),R.useEffect(()=>{v&&u&&r("FETCH_COMMUNICATION_CONTENT",{nodeId:u,accountId:v})},[v,u]),R.useEffect(()=>{var b;const I=(b=t.phenotype.silos)==null?void 0:b[u];if(I){const _=Array.isArray(I)?I:I.items||I.results||[];g(_.map(U=>{var j,L,M;return{id:U.id,sender:((j=U.raw)==null?void 0:j.from)||"Unknown",subject:U.name||"No Subject",preview:((L=U.raw)==null?void 0:L.snippet)||"",time:U.lastUpdated?new Date(U.lastUpdated).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"---",unread:((M=U.raw)==null?void 0:M.isUnread)||!1,type:a==="MAIL"||U.mimeType==="message/rfc822"?"MAIL":"CHAT"}}))}},[t.phenotype.silos,u]);const w=()=>s.jsxs("div",{className:"w-1/3 min-w-[280px] border-r border-[var(--border-subtle)] bg-[var(--bg-secondary)]/30 flex flex-col",children:[s.jsx("div",{className:"flex bg-[var(--surface-header)] border-b border-[var(--border-subtle)] overflow-x-auto scrollbar-hide shrink-0",children:l.map(I=>s.jsx("button",{onClick:()=>p(I.id),className:`px-3 py-2 text-[8px] font-black uppercase tracking-tighter border-b-2 transition-all ${u===I.id?"border-[var(--accent)] text-[var(--accent)]":"border-transparent text-[var(--text-dim)]"}`,children:I.label},I.id))}),h.length>0&&s.jsxs("div",{className:"p-2 bg-[var(--bg-primary)]/40 border-b border-[var(--border-subtle)] flex items-center gap-2",children:[s.jsx("span",{className:"text-[7px] font-bold text-[var(--text-dim)] uppercase",children:"Account:"}),s.jsx("select",{className:"flex-1 bg-transparent border-none text-[9px] font-mono text-[var(--accent)] outline-none cursor-pointer",value:v||"",onChange:I=>y(I.target.value),children:h.map(I=>s.jsx("option",{value:I.id,className:"bg-[var(--bg-deep)]",children:I.label},I.id))})]}),s.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-dim)]",children:(u==null?void 0:u.toUpperCase())||"INBOX"}),s.jsxs("span",{className:"text-[9px] font-mono text-[var(--accent)] bg-[var(--accent)]/10 px-1.5 py-0.5 rounded",children:[S.filter(I=>I.unread).length," NEW"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:S.map(I=>s.jsxs("button",{onClick:()=>N(I),className:`w-full text-left p-3 border-b border-[var(--border-subtle)]/50 hover:bg-[var(--bg-secondary)] transition-colors flex gap-3 ${(C==null?void 0:C.id)===I.id?"bg-[var(--accent)]/10 border-l-2 border-l-[var(--accent)]":""}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${I.type==="MAIL"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:I.sender[0]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[s.jsx("span",{className:`text-[11px] font-bold truncate ${I.unread?"text-[var(--text-vibrant)]":"text-[var(--text-soft)]"}`,children:I.sender}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] shrink-0",children:I.time})]}),s.jsx("div",{className:"text-[10px] text-[var(--text-dim)] truncate",children:I.subject})]})]},I.id))})]}),B=()=>{if(!C)return s.jsx("div",{className:"flex-1 flex items-center justify-center text-[var(--text-dim)] italic text-xs",children:"Select a conversation to begin transmission."});const I=C.type==="CHAT"||d==="CHAT";return s.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-deep)]",children:[s.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${I?"bg-green-500":"bg-blue-500"}`}),s.jsx("span",{className:"font-bold text-sm text-[var(--text-vibrant)]",children:C.sender}),s.jsx("span",{className:"ml-auto text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-wider border border-[var(--border-subtle)] px-2 py-0.5 rounded",children:I?"INSTANT_MESSAGING":"EMAIL_PROTOCOL"})]}),s.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:`self-start max-w-[80%] p-3 rounded-xl rounded-tl-none ${I?"bg-[var(--bg-secondary)]":"bg-[var(--bg-secondary)]/50 border border-[var(--border-subtle)]"}`,children:[s.jsx("p",{className:"text-xs text-[var(--text-soft)] leading-relaxed",children:I?C.preview:`Subject: ${C.subject}

${C.preview}

[Full content loaded from server...]`}),s.jsx("span",{className:"text-[8px] text-[var(--text-dim)] mt-1 block opacity-60",children:C.time})]}),s.jsxs("div",{className:"self-end max-w-[80%] p-3 rounded-xl rounded-tr-none bg-[var(--accent)]/10 border border-[var(--accent)]/20",children:[s.jsx("p",{className:"text-xs text-[var(--text-soft)] leading-relaxed",children:"System Acknowledged."}),s.jsx("span",{className:"text-[8px] text-[var(--text-dim)] mt-1 block opacity-60 text-right",children:"10:05 AM"})]})]})}),s.jsx("div",{className:"p-4 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)]/20",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 bg-[var(--bg-deep)] border border-[var(--border-subtle)] rounded-lg px-3 py-2 text-xs text-[var(--text-soft)] focus:outline-none focus:border-[var(--accent)] transition-colors placeholder:text-[var(--text-dim)] placeholder:italic",placeholder:I?"Type a message...":"Reply via email...",value:T,onChange:b=>O(b.target.value),onKeyDown:b=>{b.key==="Enter"&&T.trim()&&(console.log(`[CommunicationEngine] Sending: ${T}`),O(""),r("LOG_ACTION",{type:"MESSAGE_SENT",payload:T}))}}),s.jsx("button",{className:"px-4 py-2 bg-[var(--accent)] text-black text-[10px] font-black uppercase tracking-wider rounded-lg hover:brightness-110 active:scale-95 transition-all",children:"Send"})]})})]})};return s.jsxs("div",{className:"flex h-full w-full bg-[var(--indra-glass-bg)] backdrop-blur-md rounded-2xl overflow-hidden shadow-2xl border border-[var(--indra-glass-border)] animate-in fade-in zoom-in-95 duration-300",children:[s.jsx(w,{}),s.jsx(B,{})]})},pc=({data:e})=>{const t=R.useRef(null),r=R.useRef(null),{state:n}=te(),a=H(o=>o.session.isLoading);return R.useEffect(()=>{if(!t.current)return;const o=new jd;o.setCanvas(t.current),r.current=o;const i=[{identity:{uuid:"node_1",label:"NEURON_ALPHA"},dna:{archetype:"circle",geometry:{expressions:{}}}},{identity:{uuid:"node_2",label:"NEURON_BETA"},dna:{archetype:"circle",geometry:{expressions:{}}}},{identity:{uuid:"node_3",label:"NEURON_GAMMA"},dna:{archetype:"arc",geometry:{expressions:{}}}}];o.loadLaws(i);let c;const l=()=>{o.tick(),c=requestAnimationFrame(l)};return l(),console.log(" [RealityEngine] ISK Pilot Started."),()=>{cancelAnimationFrame(c)}},[]),R.useEffect(()=>{r.current&&a&&(console.log(" [RealityBridge] React Signal: IS_LOADING detected. Injecting Pulse to ISK."),r.current.bridge)},[n.phenotype.isLoading]),s.jsxs("div",{className:"w-full h-full relative bg-black/40 rounded-3xl overflow-hidden border border-white/5 shadow-2xl",children:[s.jsx("canvas",{ref:t,className:"w-full h-full block",style:{imageRendering:"pixelated"}}),s.jsxs("div",{className:"absolute top-4 left-4 p-4 bg-black/60 backdrop-blur-md rounded-xl border border-white/10 font-mono pointer-events-none",children:[s.jsx("div",{className:"text-[10px] text-accent-primary font-black mb-2 uppercase tracking-widest",children:"Reality_Bridge_Monitor"}),s.jsxs("div",{className:"flex flex-col gap-1 text-[8px] text-white/50",children:[s.jsxs("div",{className:"flex justify-between gap-4",children:[s.jsx("span",{children:"Core_Signal:"}),s.jsx("span",{className:a?"text-accent-primary animate-pulse":"text-success",children:a?"RESONATING":"IDLE"})]}),s.jsxs("div",{className:"flex justify-between gap-4",children:[s.jsx("span",{children:"ISK_Integrity:"}),s.jsx("span",{className:"text-success",children:"NOMINAL"})]})]})]}),s.jsx("div",{className:"absolute bottom-4 right-4 text-[9px] font-mono text-white/20 italic",children:"ISK_PILOT_V1_Axiom // WebGL Rendering Active"})]})},Ma=({data:e,perspective:t})=>{const{LABEL:r,DOMAIN:n,CAPABILITIES:a,VITAL_SIGNS:o,technical_id:i}=e,c=a&&Object.keys(a).length>0?a:e._isGhost?{can_think:!0,can_process:!0,can_hallucinate:!1,can_reify:!0}:{},l=(o==null?void 0:o.status)||"ACTIVE",u=(o==null?void 0:o.load)||"0%";return s.jsxs("div",{className:"h-full w-full flex flex-col bg-[var(--bg-primary)] p-6 overflow-y-auto font-mono",children:[s.jsxs("div",{className:"flex items-start justify-between mb-8 border-b border-[var(--border-subtle)] pb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${l==="ACTIVE"?"bg-[var(--accent)]":"bg-[var(--error)]"}`}),s.jsx("h1",{className:"text-2xl font-black tracking-tighter text-[var(--text-primary)]",children:r==null?void 0:r.toUpperCase()})]}),s.jsxs("span",{className:"text-[10px] bg-[var(--accent)]/10 text-[var(--accent)] px-2 py-0.5 rounded border border-[var(--accent)]/20",children:[n," ENGINE"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-[9px] text-[var(--text-dim)] block mb-1",children:"COMPUTE_LOAD"}),s.jsx("span",{className:"text-xl font-bold text-[var(--accent)]",children:u})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-[var(--bg-secondary)]/30 border border-[var(--border-subtle)] rounded-xl p-5",children:[s.jsxs("h3",{className:"text-[10px] font-bold text-[var(--text-dim)] mb-4 flex items-center gap-2",children:[s.jsx(k.Activity,{size:12}),"PROCESS_TRACE"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 opacity-50",children:[s.jsx("span",{className:"text-[9px] text-[var(--accent)]",children:"[08:24]"}),s.jsx("span",{className:"text-[10px] text-[var(--text-soft)]",children:"Kernel initialized..."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-[9px] text-[var(--accent)]",children:"[09:12]"}),s.jsx("span",{className:"text-[10px] text-[var(--text-vibrant)]",children:"Sensing context in active Cosmos..."})]}),s.jsxs("div",{className:"flex items-center gap-3 italic text-[var(--accent)]",children:[s.jsxs("span",{className:"text-[9px] opacity-50",children:[">>","  "]}),s.jsx("span",{className:"text-[10px]",children:"Awaiting cognitive trigger..."})]})]})]}),s.jsxs("div",{className:"bg-[var(--bg-secondary)]/30 border border-[var(--border-subtle)] rounded-xl p-5",children:[s.jsxs("h3",{className:"text-[10px] font-bold text-[var(--text-dim)] mb-4 flex items-center gap-2",children:[s.jsx(k.Settings,{size:12}),"ENGINE_PARAMETERS"]}),s.jsx("div",{className:"space-y-4",children:Object.entries(c||{}).map(([p,h])=>s.jsxs("div",{className:"flex items-center justify-between border-b border-[var(--border-subtle)]/30 pb-2",children:[s.jsx("span",{className:"text-[10px] text-[var(--text-soft)] uppercase",children:p.replace("can_","")}),s.jsx("span",{className:`text-[9px] font-bold ${h?"text-[var(--accent)]":"text-[var(--text-dim)]"}`,children:h?"ENABLED":"DISABLED"})]},p))})]})]}),s.jsxs("div",{className:"mt-auto pt-8 flex items-center justify-between text-[8px] text-[var(--text-dim)] border-t border-[var(--border-subtle)]/30",children:[s.jsx("span",{children:"V8.0 SERVICE_RUNTIME"}),s.jsxs("span",{children:["UUID: ",e.technical_id||"LOCAL-INSTANCE"]})]})]})},fc={VAULT:k.Vault,DATABASE:k.Database,SLOT:k.Transform,REALITY:k.Cosmos,ADAPTER:k.Settings,SERVICE:k.Activity,NODE:k.System,TERMINAL:k.Terminal,COMMUNICATION:k.Inbox,EMAIL:k.Inbox,CHAT:k.Inbox,LLM:k.Settings,INTELLIGENCE:k.Settings,TV_SCREEN:k.TV_SCREEN,PDF:k.PDF,DOCUMENT:k.List,BRIDGE:k.BRIDGE,SYNC:k.Sync,LOCK:k.Lock,CLOCK:k.Clock,PROCESSOR:k.Cpu,MEMORY:k.Database,UPTIME:k.Clock,QUERY:k.Search,PERSISTENCE:k.Lock,SCHEMA:k.List,GRAVITY:k.GRAVITY,ENTROPY:k.ENTROPY,DIMENSIONS:k.DIMENSIONS,DEFAULT:k.Help},Sm=e=>{if(!e)return k.Help;if(typeof e=="string"&&e.match(/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/))return r=>ce.createElement("span",{style:{fontSize:r.size||"16px"}},e);const t=typeof e=="string"?e.toUpperCase():"";return fc[e]||fc[t]||k[t]||k.Help},Nm=(e,t=[])=>{if(!e)return"UNKNOWN";const r=t.find(n=>n.id===e);return(r==null?void 0:r.LABEL)||(r==null?void 0:r.label)||e.toUpperCase()},Ua=({data:e,perspective:t})=>{var d,m,S;const{state:r,execute:n}=te(),{id:a,LABEL:o,ARCHETYPE:i}=e,[c,l]=R.useState(((m=(d=e.views)==null?void 0:d[0])==null?void 0:m.id)||"v1"),[u,p]=R.useState(null);if(t==="NODE")return s.jsx(gt,{data:{...e,LABEL:`[SLOT] ${o}`}});const h=e.views||(e._isGhost?[{id:"v1",label:"Dashboard",type:"DASHBOARD"}]:[]),x=h.find(g=>g.id===c)||h[0]||{type:"DASHBOARD"},v=e.CAPABILITIES||e.capabilities||{},y=Object.keys(v).length===0&&e._isGhost?{CORE_SYMBOLS:{label:"Smbolos Core",icon:"TV_SCREEN",status:"CONNECTED",value:"ACTIVE"},HYDRATION:{label:"Hidratacin",icon:"SYNC",status:"DEFAULT",value:"100%"},DETERMINISM:{label:"Determinismo",icon:"LOCK",status:"CONNECTED",value:"TRUE"},LATENCY:{label:"Latencia",icon:"CLOCK",status:"DEFAULT",value:"12ms"}}:v,A=Object.keys(y).length>0?Object.entries(y).map(([g,C])=>({id:g,label:C.label||g,icon:Sm(C.icon),status:C.status||"DEFAULT",value:C.value||"None"})):i!=null&&i.includes("ADAPTER")?[{id:"api_token",label:"Token de Acceso",icon:s.jsx("span",{className:"text-lg",children:""}),status:"CONNECTED",value:""},{id:"db_id",label:"Database ID",icon:s.jsx("span",{className:"text-lg",children:""}),status:"BROKEN",value:"None"},{id:"sync_interval",label:"Refresco (s)",icon:s.jsx("span",{className:"text-lg",children:""}),status:"DEFAULT",value:"60"},{id:"data_status",label:"Estado Sync",icon:s.jsx("span",{className:"text-lg",children:""}),status:"CONNECTED",value:"VIVO"}]:[{id:"bg_color",label:"Color de Fondo",icon:s.jsx("span",{className:"text-lg",children:""}),status:"DEFAULT",value:"#0a0a0a"},{id:"main_font",label:"Tipografa",icon:s.jsx("span",{className:"text-lg",children:"Aa"}),status:"CONNECTED",value:"Inter"},{id:"data_source",label:"Origen de Datos",icon:s.jsx("span",{className:"text-lg",children:""}),status:"BROKEN",value:"None"},{id:"margin",label:"Mrgenes",icon:s.jsx("span",{className:"text-lg",children:""}),status:"DEFAULT",value:"20px"}],f=g=>{switch(g){case"CONNECTED":return"var(--accent)";case"BROKEN":return"var(--error)";default:return"var(--text-dim)"}};return s.jsxs("div",{className:"w-full h-full flex flex-col bg-[var(--bg-deep)] overflow-hidden relative",children:[s.jsxs("header",{className:"h-16 border-b border-white/5 bg-black/40 backdrop-blur-2xl flex items-center justify-between px-8 z-50",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--accent)]/10 border border-[var(--accent)]/20 flex items-center justify-center text-[var(--accent)]",children:s.jsx(k.Transform,{size:20})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-white/90 leading-none",children:o}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--accent)] uppercase tracking-widest opacity-60",children:"Composite_Node_Active"})]})]}),s.jsx("nav",{className:"flex items-center gap-1 bg-white/5 p-1 rounded-xl",children:h.map(g=>s.jsx("button",{onClick:()=>l(g.id),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${c===g.id?"bg-[var(--accent)] text-black":"text-white/40 hover:text-white/60"}`,children:g.label},g.id))}),s.jsxs("button",{onClick:()=>n("EXIT_FOCUS"),className:"group flex items-center gap-3 px-4 py-2 rounded-xl bg-[var(--error)]/10 border border-[var(--error)]/20 text-[var(--error)] hover:bg-[var(--error)]/20 transition-all",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter",children:"Exit_Slot"}),s.jsx(k.Close,{size:16,className:"group-hover:rotate-90 transition-transform"})]})]}),s.jsxs("div",{className:"flex-1 flex relative",children:[s.jsxs("aside",{className:"w-72 border-r border-[var(--border-subtle)] bg-[var(--surface-header)] flex flex-col p-4 gap-2 z-40",children:[s.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase tracking-[0.3em] mb-4 pl-2",children:"Propiedades_Input"}),A.map(g=>s.jsxs("div",{onClick:()=>p(g.id),className:`flex items-center gap-4 p-3 rounded-2xl border transition-all cursor-pointer group ${u===g.id?"bg-[var(--accent)]/10 border-[var(--accent)]/40 shadow-lg shadow-[var(--accent)]/5":"bg-white/2 bg-transparent border-transparent hover:border-white/10"}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--surface-card)] flex items-center justify-center text-lg border border-[var(--border-subtle)] group-hover:border-[var(--accent)]/30 transition-all",children:typeof g.icon=="function"?ce.createElement(g.icon,{size:20}):g.icon}),s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-[var(--bg-deep)] shadow-sm animate-pulse",style:{backgroundColor:f(g.status)}})]}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tight transition-colors ${u===g.id?"text-[var(--accent)]":"text-[var(--text-secondary)]"}`,children:g.label}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] truncate italic",children:g.status==="CONNECTED"?"Linked_to_Graph":`Default: ${g.value}`})]})]},g.id)),s.jsxs("div",{className:"mt-auto p-4 rounded-2xl bg-[var(--surface-header)] border border-[var(--border-subtle)]",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] animate-pulse"}),s.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase",children:"Static_Analysis"})]}),s.jsx("p",{className:"text-[8px] text-[var(--text-dim)] leading-relaxed font-medium",children:"Este slot est recibiendo datos de [Notion_DB] y aplicando leyes de estilo corporativo L1."})]})]}),s.jsxs("main",{className:"flex-1 relative overflow-hidden flex bg-[#030303]",children:[s.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),s.jsx("div",{className:"flex-1 flex items-center justify-center p-12 overflow-auto scrollbar-hide",children:x.type==="DOCUMENT_PAGINATED"?s.jsxs("div",{className:"w-[794px] min-h-[1123px] bg-white text-black shadow-2xl rounded-sm p-16 animate-in zoom-in-95 duration-700 origin-top transform hover:scale-[1.02] transition-transform",children:[s.jsxs("div",{className:"flex justify-between items-end border-b-4 border-black pb-8 mb-12",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-black uppercase tracking-tighter mb-2",children:x.label}),s.jsxs("span",{className:"text-sm font-mono tracking-widest block opacity-60",children:["REF: ",a?a.slice(0,8):"ANON-00"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs font-bold uppercase mb-1",children:"Status Report"}),s.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsx("span",{className:"font-mono text-xs",children:"CERTIFIED"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-16",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"h-4 bg-black/5 rounded w-full animate-pulse"}),s.jsx("div",{className:"h-4 bg-black/5 rounded w-5/6"}),s.jsx("div",{className:"h-4 bg-black/5 rounded w-4/6"})]}),s.jsxs("div",{className:"p-6 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsx("h3",{className:"text-xs font-bold uppercase mb-4",children:"Metric Analysis"}),s.jsx("div",{className:"space-y-2",children:A.slice(0,3).map(g=>s.jsxs("div",{className:"flex justify-between items-center text-xs",children:[s.jsx("span",{className:"font-mono text-gray-500",children:g.label}),s.jsx("span",{className:"font-bold",children:g.value})]},g.id))})]})]}),s.jsxs("div",{className:"h-64 bg-black/5 rounded-none border border-black/10 flex flex-col items-center justify-center gap-4",children:[s.jsx(k.Database,{size:32,className:"opacity-20"}),s.jsx("span",{className:"font-mono text-xs text-black/40 uppercase tracking-widest",children:"Data_Fragment_Visualization_Area"})]})]}):s.jsxs("div",{className:"w-full max-w-6xl grid grid-cols-12 gap-6 h-fit p-4",children:[A.map((g,C)=>s.jsxs("div",{onClick:()=>p(g.id),className:`
                                            col-span-12 md:col-span-6 lg:col-span-4 p-6 rounded-[32px] 
                                            bg-white/5 border border-white/10 backdrop-blur-xl 
                                            hover:border-[var(--accent)]/40 hover:bg-white/10 transition-all cursor-pointer group/tile 
                                            animate-in fade-in slide-in-from-bottom duration-500
                                            relative overflow-hidden
                                        `,style:{animationDelay:`${C*100}ms`},children:[s.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-0 group-hover/tile:opacity-100 transition-opacity",children:s.jsx(k.ArrowRight,{size:16,className:"text-[var(--accent)] -rotate-45"})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--surface-card)] flex items-center justify-center text-2xl border border-[var(--border-subtle)] group-hover/tile:scale-110 transition-transform shadow-lg shadow-black/20",children:typeof g.icon=="function"?ce.createElement(g.icon,{size:24}):g.icon}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-[var(--text-dim)] mb-1",children:"State_Signal"}),s.jsxs("div",{className:"flex items-center gap-2 bg-[var(--surface-header)] px-2 py-1 rounded-lg border border-[var(--border-subtle)]",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full animate-pulse",style:{backgroundColor:f(g.status)}}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-secondary)] uppercase",children:g.status})]})]})]}),s.jsx("h4",{className:"text-sm font-bold text-[var(--text-primary)] uppercase tracking-tight mb-1 group-hover/tile:text-[var(--accent)] transition-colors",children:g.label}),s.jsxs("p",{className:"text-[10px] text-[var(--text-dim)] font-mono mb-6 truncate",children:[g.id.toUpperCase(),"_module_v1.0"]}),s.jsxs("div",{className:"h-24 bg-[var(--surface-header)] rounded-2xl border border-[var(--border-subtle)] flex items-end p-1 gap-[2px] overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-2 left-2 text-[8px] font-mono text-white/20",children:"Telemetry_Graph"}),[...Array(24)].map((N,T)=>s.jsx("div",{className:"flex-1 bg-[var(--accent)]/10 hover:bg-[var(--accent)]/40 rounded-t-[1px] transition-all duration-300",style:{height:`${20+Math.random()*60}%`}},T))]})]},g.id)),s.jsxs("div",{className:"col-span-12 md:col-span-6 lg:col-span-4 p-6 rounded-[32px] border-2 border-dashed border-[var(--border-subtle)] hover:border-[var(--border-subtle)] hover:bg-[var(--surface-header)] transition-all flex flex-col items-center justify-center gap-4 group cursor-pointer h-[280px]",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-[var(--surface-card)] flex items-center justify-center text-[var(--text-dim)] group-hover:bg-[var(--accent)] group-hover:text-black transition-all",children:s.jsx(k.Plus,{size:24})}),s.jsx("span",{className:"text-xs font-bold text-[var(--text-dim)] group-hover:text-[var(--text-secondary)] uppercase tracking-widest transition-colors",children:"Aadir Capacidad"})]})]})}),u&&s.jsxs("aside",{className:"w-80 border-l border-[var(--border-subtle)] bg-[var(--surface-header)] backdrop-blur-xl p-6 flex flex-col gap-6 animate-in slide-in-from-right duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xs font-bold text-[var(--text-primary)] uppercase tracking-widest",children:"Ajustes_Locales"}),s.jsx("button",{onClick:()=>p(null),className:"text-[var(--text-dim)] hover:text-[var(--text-secondary)]",children:s.jsx(k.Close,{size:18})})]}),s.jsxs("div",{className:"p-5 rounded-2xl bg-[var(--surface-card)] border border-[var(--border-subtle)] flex flex-col gap-4",children:[s.jsxs("span",{className:"text-[10px] font-bold text-[var(--accent)] uppercase",children:["Configuracin de ",u]}),u==="db_id"&&o.toUpperCase().includes("NOTION")?s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-[9px] text-[var(--text-dim)] leading-relaxed uppercase font-black",children:"Paso 1: Pega tu Database ID de Notion"}),s.jsx("input",{type:"text",placeholder:"8f92-xxxx-xxxx-xxxx",className:"w-full h-10 rounded-lg bg-[var(--surface-header)] border border-[var(--accent)]/30 px-3 text-[10px] font-mono text-[var(--accent)] outline-none"}),s.jsx("button",{className:"w-full py-2 rounded-lg bg-[var(--accent)] text-black text-[10px] font-black uppercase tracking-widest hover:scale-105 transition-all",onClick:()=>n("LOG_ENTRY",{msg:" Sincronizando tabla de Notion...",type:"INFO"}),children:"Vincular Tabla"})]}):s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{id:`prop-value-${u}`,className:"flex-1 h-10 rounded-lg bg-[var(--surface-header)] border border-[var(--border-subtle)] flex items-center px-4 text-xs font-mono text-[var(--text-primary)] transition-all duration-500",children:(S=A.find(g=>g.id===u))==null?void 0:S.value}),s.jsx("button",{className:"p-3 rounded-lg bg-[var(--accent)] text-black hover:scale-105 transition-transform",children:s.jsx(k.Check,{size:16})})]})]}),s.jsxs("div",{onDragOver:g=>{g.preventDefault(),g.currentTarget.style.borderColor="var(--accent)",g.currentTarget.style.opacity="1"},onDragLeave:g=>{g.currentTarget.style.borderColor="var(--border-subtle)",g.currentTarget.style.opacity="0.3"},onDrop:g=>{g.preventDefault(),g.currentTarget.style.borderColor="var(--border-subtle)",g.currentTarget.style.opacity="0.3";const C=g.dataTransfer.getData("indra/artifact");if(C)try{const N=JSON.parse(C);n("LOG_ENTRY",{msg:` Vinculacin Axiomtica: [${u}] -> [${N.LABEL||N.name}]`,type:"SUCCESS"}),n("LINK_SLOT_PROPERTY",{slotId:a,propertyId:u,targetArtifact:N});const T=document.getElementById(`prop-value-${u}`);T&&(T.innerText=`Linked: ${N.LABEL||N.name}`,T.style.color="var(--accent)",T.style.fontWeight="bold")}catch(N){console.error("Arthas Drop Error",N)}},className:"flex-1 border-2 border-dashed border-white/5 rounded-3xl flex flex-col items-center justify-center p-8 gap-4 opacity-30 transition-all duration-300",children:[s.jsx(k.Connect,{size:24,className:"animate-pulse"}),s.jsxs("p",{className:"text-[9px] text-center font-medium leading-relaxed pointer-events-none",children:["Arrastra un nodo del Grafo hasta este panel para ",s.jsx("strong",{className:"text-[var(--accent)]",children:"Vincular"})," esta propiedad globalmente."]})]})]})]})]})]})},Fa=({data:e,perspective:t="STANDARD"})=>{var w,B,D,P;const{state:r,execute:n}=te(),o=(r.phenotype.focusStack||[]).length>1,{adapter:i}=r.sovereignty,[c,l]=R.useState([]),[u,p]=R.useState(e.ACCOUNT_ID||((w=e.data)==null?void 0:w.ACCOUNT_ID)),[h,x]=R.useState(!1),v=e.id||((B=e.data)==null?void 0:B.id)||e.ID,y=e.ACCOUNT_ID||((D=e.data)==null?void 0:D.ACCOUNT_ID),E=R.useMemo(()=>{var b,_;if(e.ORIGIN_SOURCE)return e.ORIGIN_SOURCE.toLowerCase();if((b=e.data)!=null&&b.ORIGIN_SOURCE)return e.data.ORIGIN_SOURCE.toLowerCase();const I=(_=r.phenotype.siloMetadata)==null?void 0:_[v];return I!=null&&I.ORIGIN_SOURCE?I.ORIGIN_SOURCE.toLowerCase():null},[e,v,r.phenotype.siloMetadata]);R.useEffect(()=>{(async()=>{if(E){x(!0);try{const b=await i.executeAction("tokenManager:listTokenAccounts",{provider:E});if(Array.isArray(b)&&(l(b),!u&&b.length>0)){const _=b.find(U=>U.isDefault)||b[0];p(_.id)}}catch(b){console.warn(`[DatabaseEngine] Discovery failed for ${E}:`,b)}finally{x(!1)}}})()},[E]),R.useEffect(()=>{u&&E&&v&&n("FETCH_DATABASE_CONTENT",{databaseId:v,nodeId:E,accountId:u})},[u]);const A=R.useMemo(()=>{var b,_,U,j;let I=[];if(Array.isArray(e.items)?I=e.items:Array.isArray(e.results)?I=e.results:Array.isArray(e.rows)?I=e.rows:Array.isArray((b=e.data)==null?void 0:b.results)?I=e.data.results:Array.isArray((_=e.data)==null?void 0:_.items)&&(I=e.data.items),I.length===0&&v){const L=(U=r.phenotype.silos)==null?void 0:U[v];L&&(I=Array.isArray(L)?L:L.results||L.items||L.rows||[])}return I.length===0&&((j=r.sovereignty)==null?void 0:j.mode)!=="LIVE"&&(I=Yh[v]||[]),I.map(L=>L?typeof L=="object"&&L.fields?{id:L.id||L.ID,...L.fields,_raw:L}:L:null).filter(Boolean)},[e,v,r.phenotype.silos,r.sovereignty.mode]),f=R.useMemo(()=>{var b,_,U,j,L;if((b=e.SCHEMA)!=null&&b.columns)return e.SCHEMA.columns;if((U=(_=e.data)==null?void 0:_.SCHEMA)!=null&&U.columns)return e.data.SCHEMA.columns;const I=(j=r.phenotype.siloMetadata)==null?void 0:j[v];return(L=I==null?void 0:I.SCHEMA)!=null&&L.columns?I.SCHEMA.columns:A.length===0?[]:Object.keys(A[0]).filter(M=>!M.startsWith("_")).map(M=>({id:M,label:M.replace(/_/g," ").toUpperCase(),type:typeof A[0][M]=="number"?"NUMBER":"STRING"}))},[e,A,v,r.phenotype.siloMetadata]),{data:d,searchTerm:m,setSearchTerm:S,sortConfig:g,toggleSort:C}=Ld(A,{searchKeys:f.map(I=>I.id),initialSort:{key:((P=f[0])==null?void 0:P.id)||"id",direction:"asc"}}),N=()=>{E&&n("FETCH_DATABASE_CONTENT",{databaseId:v,nodeId:E,accountId:y,refresh:!0})},T=()=>n("EXIT_FOCUS"),O=()=>n("EXIT_FOCUS");return s.jsxs("div",{className:"w-full h-full flex flex-col bg-[var(--bg-deep)] overflow-hidden animate-in fade-in zoom-in-95 duration-500",children:[s.jsxs("header",{className:"px-8 py-5 border-b border-white/5 bg-black/40 backdrop-blur-3xl flex items-center justify-between shrink-0 z-30",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2 pr-4 border-r border-white/10",children:[o&&s.jsx("button",{onClick:T,className:"w-9 h-9 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[var(--text-dim)] hover:text-[var(--accent)] hover:bg-[var(--accent)]/10 transition-all group",title:"Volver al Nivel Anterior",children:s.jsx(k.SidebarLeft,{size:16,className:"group-hover:-translate-x-0.5 transition-transform"})}),s.jsx("button",{onClick:O,className:"w-9 h-9 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-[var(--error)] hover:bg-red-500/10 transition-all",title:"Cerrar Realidad",children:s.jsx(k.Close,{size:16})})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-11 h-11 rounded-2xl bg-[var(--accent)]/10 border border-[var(--accent)]/30 flex items-center justify-center text-[var(--accent)] shadow-[0_0_20px_rgba(var(--accent-rgb),0.1)]",children:s.jsx(k.Database,{size:24})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-xl font-black text-white tracking-tight leading-none mb-1",children:e.LABEL||"DATA_OBJECT"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded leading-none ${E?"bg-[var(--accent)]/20 text-[var(--accent)]":"bg-red-500/20 text-red-400"}`,children:E||"IDENTITY_VOID"}),c.length>0&&s.jsxs("div",{className:"flex items-center gap-2 px-2 border-l border-white/10 ml-2",children:[s.jsx("span",{className:"text-[7px] font-bold text-white/30 uppercase",children:"Identity:"}),s.jsx("select",{className:"bg-black/40 border border-white/10 rounded px-1 py-0 text-[8px] font-mono text-[var(--accent)] outline-none cursor-pointer",value:u||"",onChange:I=>p(I.target.value),children:c.map(I=>s.jsxs("option",{value:I.id,children:[I.label," ",I.isDefault?"()":""]},I.id))}),s.jsx("button",{onClick:()=>n("SELECT_ARTIFACT",{id:"IDENTITY_MANAGER",ARCHETYPE:"IDENTITY",LABEL:"Identity Manager",provider:E}),className:"p-1 rounded-lg hover:bg-white/5 text-white/30 hover:text-[var(--accent)] transition-all",title:"Gestionar Cuentas",children:s.jsx(k.Settings,{size:10})})]}),s.jsx("span",{className:"text-[8px] font-mono text-white/30 uppercase tracking-widest",children:v})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative group min-w-[300px]",children:[s.jsx(k.Search,{size:14,className:"absolute left-5 top-1/2 -translate-y-1/2 text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"}),s.jsx("input",{type:"text",placeholder:"ESCUDRIAR ENTROPA...",value:m,onChange:I=>S(I.target.value),className:"w-full bg-[var(--surface-header)] border border-[var(--border-subtle)] rounded-full pl-12 pr-6 py-2.5 text-[11px] font-mono text-[var(--text-soft)] outline-none focus:border-[var(--accent)]/40 focus:ring-4 focus:ring-[var(--accent)]/5 transition-all placeholder:text-[var(--text-dim)]"})]}),s.jsxs("div",{className:"flex items-center gap-1.5 p-1 bg-[var(--surface-header)] border border-[var(--border-subtle)] rounded-full",children:[s.jsx("button",{onClick:N,className:"p-2.5 rounded-full hover:bg-[var(--surface-card)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all hover:rotate-180 duration-700",title:"Refrescar Manantial",children:s.jsx(k.Sync,{size:14})}),s.jsx("button",{className:"p-2.5 rounded-full hover:bg-[var(--surface-card)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all",title:"Descargar Snapshot",children:s.jsx(k.Download,{size:14})})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar relative",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-[1000px] select-none",children:[s.jsx("thead",{className:"sticky top-0 z-20 bg-[var(--bg-deep)]/95 backdrop-blur-xl",children:s.jsx("tr",{children:f.map(I=>s.jsx("th",{onClick:()=>C(I.id),className:"px-8 py-5 border-b border-[var(--border-subtle)] text-[9px] font-black text-[var(--text-dim)] uppercase tracking-[0.3em] cursor-pointer hover:text-[var(--text-primary)] hover:bg-[var(--glass-overlay)] transition-all group",children:s.jsxs("div",{className:"flex items-center gap-3",children:[I.label,s.jsxs("div",{className:`flex flex-col opacity-0 group-hover:opacity-100 transition-opacity ${g.key===I.id?"opacity-100":""}`,children:[s.jsx("span",{className:`text-[8px] leading-[0.5] ${g.key===I.id&&g.direction==="asc"?"text-[var(--accent)]":"text-[var(--text-dim)]/20"}`,children:""}),s.jsx("span",{className:`text-[8px] leading-[0.5] ${g.key===I.id&&g.direction==="desc"?"text-[var(--accent)]":"text-[var(--text-dim)]/20"}`,children:""})]})]})},I.id))})}),s.jsx("tbody",{className:"divide-y border-[var(--border-subtle)]",children:d.length>0?d.map((I,b)=>s.jsx("tr",{onClick:()=>{n("EXECUTE_NODE_ACTION",{nodeId:v,capability:"onRowSelect",payload:I}),console.log(`[Axiom:DB] Row Selected: ${I.id||b}`)},className:"group hover:bg-[var(--accent)]/[0.06] active:bg-[var(--accent)]/[0.1] transition-all cursor-pointer",children:f.map(_=>{const U=I[_.id];return s.jsx("td",{className:"px-8 py-4.5 text-[11px] font-mono whitespace-nowrap overflow-hidden text-ellipsis max-w-[300px]",children:s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:`transition-all duration-300 ${U?"text-[var(--text-secondary)] group-hover:text-[var(--text-primary)]":"text-[var(--text-dim)]/30 italic"}`,children:bm(U,_.type)})})},_.id)})},I.id||b)):s.jsx("tr",{children:s.jsx("td",{colSpan:f.length,className:"px-8 py-32 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-6 animate-pulse opacity-30",children:[s.jsx("div",{className:"w-16 h-16 rounded-full border-2 border-dashed border-[var(--border-subtle)] flex items-center justify-center",children:s.jsx(k.Inbox,{size:32})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-xs font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"No_Manifestation_Found"}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)]",children:"EL VECTOR SE ENCUENTRA EN ESTADO DE VACO"})]}),s.jsx("button",{onClick:N,className:"mt-4 px-6 py-2 rounded-full border border-[var(--border-subtle)] text-[10px] uppercase font-black tracking-widest hover:bg-[var(--accent)] hover:text-white transition-all",children:"FORZAR_REIFICACIN"})]})})})})]})}),s.jsxs("footer",{className:"h-12 px-8 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)] backdrop-blur-2xl flex items-center justify-between shrink-0 z-30",children:[s.jsxs("div",{className:"flex items-center gap-6 text-[8px] font-black uppercase tracking-[0.2em]",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[var(--accent)]",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] shadow-[0_0_10px_var(--accent-glow)]"}),s.jsx("span",{children:"STATUS: NOMINAL"})]}),s.jsx("div",{className:"w-[1px] h-4 border-l border-[var(--border-subtle)]"}),s.jsxs("span",{className:"text-[var(--text-dim)]",children:["Visible_Rows: ",s.jsx("strong",{className:"text-[var(--text-primary)]",children:d.length})," / ",A.length]}),s.jsx("div",{className:"w-[1px] h-4 border-l border-[var(--border-subtle)]"}),s.jsxs("span",{className:"text-[var(--text-dim)]",children:["Identity: ",s.jsx("strong",{className:"text-[var(--text-primary)]",children:(E==null?void 0:E.toUpperCase())||"VOID"})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase",children:"Axiomatic Grid v3.2"})})]})]})},bm=(e,t)=>e==null?"":typeof e=="object"&&!Array.isArray(e)?e.id&&e.name?e.name:e.start?e.start.split("T")[0]:JSON.stringify(e).slice(0,30)+"...":Array.isArray(e)?e.map(r=>typeof r=="object"?r.name||r.id||JSON.stringify(r):r).join(", "):t==="NUMBER"?e.toLocaleString():t==="BOOLEAN"?e?" TRUE":" FALSE":String(e),hc=({data:e})=>{const{state:t,execute:r}=te(),{adapter:n}=t.sovereignty,[a,o]=R.useState([]),[i,c]=R.useState((e==null?void 0:e.provider)||"drive"),[l,u]=R.useState([]),[p,h]=R.useState(!1),[x,v]=R.useState(!1);R.useEffect(()=>{(async()=>{try{const m=await n.executeAction("tokenManager:listTokenProviders",{});Array.isArray(m)&&o(m)}catch(m){console.error("Failed to fetch providers",m)}})()},[]);const y=async()=>{if(i){v(!0);try{const d=await n.executeAction("tokenManager:listTokenAccounts",{provider:i});Array.isArray(d)&&u(d)}catch(d){console.error("Failed to fetch accounts",d)}finally{v(!1)}}};R.useEffect(()=>{y()},[i]);const E=async d=>{if(window.confirm(`Ests seguro de eliminar la cuenta ${d}?`))try{await n.executeAction("tokenManager:deleteToken",{provider:i,accountId:d}),r("LOG_ENTRY",{msg:`Identidad ${d} eliminada de ${i}`,type:"SUCCESS"}),y()}catch(m){r("LOG_ENTRY",{msg:`Error al eliminar: ${m.message}`,type:"ERROR"})}},A=async d=>{v(!0);try{const m=await n.executeAction(`${i}:verifyConnection`,{accountId:d});m.success||m.status==="ACTIVE"?r("LOG_ENTRY",{msg:`Vnculo con ${i} [${d}] verificado con xito.`,type:"SUCCESS"}):r("LOG_ENTRY",{msg:`Fallo de Sintona: ${m.error||"Respuesta invlida"}`,type:"ERROR"})}catch(m){r("LOG_ENTRY",{msg:`Error de Conexin: ${m.message}`,type:"ERROR"})}finally{v(!1)}},f=async d=>{v(!0);try{const{accountId:m,apiKey:S,label:g,isDefault:C}=d;await n.executeAction("tokenManager:setToken",{provider:i,accountId:m,tokenData:{apiKey:S,label:g,isDefault:C}}),r("LOG_ENTRY",{msg:`Nueva identidad [${m}] vinculada a ${i}`,type:"SUCCESS"}),h(!1),y()}catch(m){r("LOG_ENTRY",{msg:`Error al vincular: ${m.message}`,type:"ERROR"})}finally{v(!1)}};return s.jsxs("div",{className:"w-full h-full bg-[var(--bg-deep)] text-white overflow-hidden flex flex-col font-mono",children:[s.jsxs("div",{className:"p-8 border-b border-white/10 bg-black/40 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-black uppercase tracking-tighter flex items-center gap-3",children:[s.jsx(k.Lock,{className:"text-[var(--accent)]"}),"Identity_Manager"]}),s.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-widest mt-1",children:"Sovereign_Credential_Vault_v1.0"})]}),s.jsx("button",{onClick:()=>r("EXIT_FOCUS"),className:"p-3 rounded-full hover:bg-white/5 transition-colors",children:s.jsx(k.Close,{size:20})})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("aside",{className:"w-64 border-r border-white/5 bg-black/20 p-4 space-y-2 overflow-y-auto",children:[s.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase tracking-widest block mb-4 px-2",children:"Providers"}),a.map(d=>s.jsx("button",{onClick:()=>{c(d),h(!1)},className:`w-full text-left px-4 py-3 rounded-xl text-xs font-bold uppercase tracking-tight transition-all ${i===d?"bg-[var(--accent)] text-black shadow-lg shadow-[var(--accent)]/20":"hover:bg-white/5 text-white/60"}`,children:d},d))]}),s.jsx("main",{className:"flex-1 p-12 overflow-y-auto relative",children:p?s.jsxs("div",{className:"max-w-xl animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.jsxs("button",{onClick:()=>h(!1),className:"text-[10px] text-[var(--accent)] uppercase font-black mb-8 flex items-center gap-2 hover:opacity-70",children:[s.jsx(k.ArrowLeft,{size:12})," Volver a la lista"]}),s.jsxs("h2",{className:"text-xl font-bold mb-8 uppercase",children:["Vincular Nueva Cuenta: ",i]}),s.jsxs("div",{className:"space-y-6 bg-white/5 border border-white/10 p-8 rounded-3xl",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] uppercase text-[var(--text-dim)] font-black block mb-2",children:"Account ID (Interno)"}),s.jsx("input",{id:"acc-id",type:"text",placeholder:"ej: personal_notion",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:border-[var(--accent)]/50 transition-all font-mono"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] uppercase text-[var(--text-dim)] font-black block mb-2",children:"API Key / Token"}),s.jsx("input",{id:"acc-token",type:"password",placeholder:"secret_xxxxxxxxxxxxxxxx",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:border-[var(--accent)]/50 transition-all font-mono"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] uppercase text-[var(--text-dim)] font-black block mb-2",children:"Label (Visible)"}),s.jsx("input",{id:"acc-label",type:"text",placeholder:"Notion Javi",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:border-[var(--accent)]/50 transition-all font-mono"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",id:"acc-default",className:"accent-[var(--accent)]"}),s.jsx("label",{htmlFor:"acc-default",className:"text-[10px] uppercase text-[var(--text-dim)] font-black",children:"Establecer como cuenta principal"})]}),s.jsx("button",{disabled:x,onClick:()=>f({accountId:document.getElementById("acc-id").value,apiKey:document.getElementById("acc-token").value,label:document.getElementById("acc-label").value,isDefault:document.getElementById("acc-default").checked}),className:"w-full bg-[var(--accent)] text-black py-4 rounded-xl font-black uppercase text-xs hover:brightness-110 active:scale-[0.98] transition-all disabled:opacity-50",children:x?"Encrypting...":"Initialize Identity"})]})]}):s.jsxs("div",{className:"max-w-4xl animate-in fade-in duration-500",children:[s.jsxs("div",{className:"flex justify-between items-end mb-12",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-3xl font-black uppercase tracking-tighter mb-2",children:[i," Accounts"]}),s.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Gestiona el acceso a este proveedor desde la bveda de Indra."})]}),s.jsxs("button",{onClick:()=>h(!0),className:"px-6 py-3 bg-white/5 border border-white/10 rounded-2xl flex items-center gap-3 text-[10px] font-black uppercase hover:bg-white/10 transition-all",children:[s.jsx(k.Plus,{size:16})," Add_Account"]})]}),x?s.jsxs("div",{className:"flex flex-col items-center gap-4 mt-20 opacity-30",children:[s.jsx(k.Sync,{size:32,className:"animate-spin"}),s.jsx("span",{className:"text-[10px] uppercase tracking-widest font-black",children:"Syncing_Vault..."})]}):l.length>0?s.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.map(d=>s.jsxs("div",{className:"flex items-center justify-between p-6 bg-white/2 border border-white/5 rounded-[24px] hover:border-white/10 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl bg-black/40 border transition-all ${d.isDefault?"border-[var(--accent)]/50 text-[var(--accent)] shadow-lg shadow-[var(--accent)]/5":"border-white/5 text-white/40"}`,children:s.jsx(k.System,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg leading-none mb-2",children:d.label}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-[9px] font-mono text-white/30 uppercase",children:["ID: ",d.id]}),d.isDefault&&s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-[var(--accent)]/10 border border-[var(--accent)]/20 text-[7px] text-[var(--accent)] font-black uppercase",children:"Primary"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>A(d.id),className:"p-3 rounded-xl bg-white/5 text-[var(--accent)] border border-white/10 hover:bg-[var(--accent)]/10 transition-all",title:"Probar Conexin",children:s.jsx(k.Sync,{size:16})}),s.jsx("button",{onClick:()=>E(d.id),className:"p-3 rounded-xl bg-red-500/10 text-red-500 border border-red-500/20 hover:bg-red-500/20 transition-all",title:"Eliminar Cuenta",children:s.jsx(k.Trash,{size:16})})]})]},d.id))}):s.jsxs("div",{className:"mt-20 flex flex-col items-center gap-6 opacity-20",children:[s.jsx(k.Warning,{size:48}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:"No hay identidades vinculadas"}),s.jsx("p",{className:"text-[10px] mt-2 italic",children:"Aade una cuenta para empezar a sincronizar datos."})]})]})]})})]}),s.jsxs("footer",{className:"p-4 bg-black/40 border-t border-white/5 flex justify-between items-center text-[8px] text-white/20 font-black tracking-widest uppercase",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})," Vault_Status: Encrypted"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)]"})," Encryption: AES-256"]})]}),s.jsx("span",{children:"Indra Identity Protocol L1-Axiom"})]})]})},Ba={VAULT:Es,BRIDGE:Es,FILES:Es,DATABASE:Fa,GRID:Fa,DATAGRID:Fa,COMMUNICATION:Zr,MAIL:Zr,MESSAGING:Zr,CHAT:Zr,EMAIL:Zr,NODE:gt,AGENT:gt,SERVICE:Ma,LLM:Ma,INTELLIGENCE:Ma,REALITY:pc,COSMOS:pc,SLOT:Ua,SLOT_NODE:Ua,UTILITY:Ua,STYLING:gt,MATH:gt,WIDGET:gt,ADAPTER:gt,IDENTITY:hc,CONFIG:hc,DEFAULT:gt},mc=e=>{const t=(e||"DEFAULT").toUpperCase(),r=Ba[t]||Ba.DEFAULT;return Ba[t]||console.warn(`[ArchetypeRegistry] Unknown archetype: ${t}. Falling back to NODE.`),r},Un=({componentId:e,data:t,perspective:r="VAULT",schemaId:n,slotId:a,onCommit:o,onCancel:i})=>{const{state:c}=te();if(r==="SCHEMA_PROJECTION")return s.jsx(Od,{schemaId:n,onCommit:o,onCancel:i});let l=t||ee.getCanon(e);if(l&&(!l.LABEL||!l.ARCHETYPE)){const A=ee.getCanon(e||l.id||l.ID);A&&(l={...A,...l})}if(!l)return s.jsxs("div",{className:"p-10 text-[var(--error)] font-mono border border-[var(--error)]/20 rounded-xl bg-[var(--error)]/5",children:["[FATAL] CANON_NOT_FOUND: ",e]});const u=ce.useMemo(()=>{var d;const A=l.id||l.ID||e,f=(d=c.phenotype.silos)==null?void 0:d[A];return f&&typeof f=="object"&&!Array.isArray(f)?(console.log(`[ProjectionMatrix]  Hydrated canon with silo data for ${A}`),{...l,...f}):l},[l,e,c.phenotype.silos]),p=ce.useMemo(()=>{const A=u.ARCHETYPE||u.archetype||(u.ARCHETYPES?u.ARCHETYPES[0]:"ADAPTER");return{...u,id:u.id||u.ID||e,LABEL:u.LABEL||u.label||"UNIT_SKELETON",ARCHETYPE:A.toUpperCase(),DOMAIN:(u.DOMAIN||u.domain||"SYSTEM").toUpperCase(),CAPABILITIES:u.CAPABILITIES||u.capabilities||{}}},[u,e]),h=p.ARCHETYPES||[p.ARCHETYPE],[x,v]=ce.useState(null),y=ce.useMemo(()=>x&&h.includes(x)?x:r==="NODE"?"NODE":h[0],[x,h,r]);ce.useEffect(()=>{x!==y&&v(y)},[y]);let E=mc(y);if(r!=="NODE"&&r!=="SCHEMA_PROJECTION"&&r!==y){const A=mc(r);A&&A!==gt&&(E=A)}return s.jsx("div",{className:"flex flex-col h-full relative",id:`projection-matrix-${p.id}`,children:s.jsx("div",{className:"flex-1 overflow-hidden relative",children:s.jsx(E,{data:p,perspective:r,slotId:a},`${p.id}-${y}`)})})},kd=({onSelect:e,onClose:t})=>{const[r,n]=R.useState(""),a=R.useMemo(()=>{const i=ee.ontology||{},c=Object.keys(i);return c.length===0?[]:c},[]),o=R.useMemo(()=>a.filter(i=>i.toLowerCase().includes(r.toLowerCase())),[a,r]);return s.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t,children:s.jsxs("div",{className:"w-[400px] max-h-[60vh] bg-[var(--bg-deep)] border border-[var(--border-vibrant)]/50 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)] flex flex-col overflow-hidden animate-in scale-95 duration-200",onClick:i=>i.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] bg-[var(--bg-secondary)]/30 flex items-center gap-3",children:[s.jsx(k.Search,{size:16,className:"text-[var(--accent)]"}),s.jsx("input",{type:"text",className:"flex-1 bg-transparent border-none text-[var(--text-vibrant)] placeholder:text-[var(--text-dim)] focus:outline-none font-medium text-sm",placeholder:"Select Adapter Protocol...",value:r,onChange:i=>n(i.target.value),autoFocus:!0}),s.jsx("button",{onClick:t,className:"text-[var(--text-dim)] hover:text-[var(--text-soft)]",children:s.jsx(k.Close,{size:16})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-dot-pattern scrollbar-thin scrollbar-thumb-[var(--border-subtle)]",children:o.length>0?o.map(i=>{const c=ee.getLabel(i)||i;return s.jsxs("button",{onClick:()=>e(i),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-[var(--accent)]/10 hover:border-[var(--accent)]/30 border border-transparent transition-all group text-left mb-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded bg-[var(--bg-primary)] border border-[var(--border-subtle)] flex items-center justify-center text-[var(--text-dim)] group-hover:text-[var(--accent)] group-hover:border-[var(--accent)]/50 font-mono text-xs font-bold",children:i.substring(0,2)}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs font-bold text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)]",children:c.toUpperCase()}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-50",children:i})]})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(k.ChevronDown,{size:14,className:"-rotate-90 text-[var(--accent)]"})})]},i)}):s.jsx("div",{className:"p-8 text-center text-[var(--text-dim)] text-xs font-mono",children:"NO MATCHES"})}),s.jsx("div",{className:"p-2 border-t border-[var(--border-subtle)] bg-[var(--bg-primary)] text-center",children:s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] tracking-widest opacity-50",children:"SELECT TARGET TO INSPECT"})})]})})},Am=e=>({igniteChaosTest:async n=>{try{console.error("[CHAOS_ENGINE]  IGNITING PERSISTENCE STRESS TEST..."),n(!0),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" REACTOR_IGNITION: Iniciando Tormenta de Entropa Negativa...",type:"WARN"}),console.error("[CHAOS_ENGINE]  Phase 1: Causal Storm");const a=[];for(let o=0;o<8;o++){const i=`temp_chaos_${o}_${Date.now()}`;a.push(i),e("ADD_ARTIFACT_REQUEST",{artifact:{id:i,LABEL:`Chaos_Node_${o}`,type:"FILE_NODE"},position:{x:Math.random()*500,y:Math.random()*500}}),o>0&&e("ADD_RELATIONSHIP",{source:a[o-1],target:i,type:"CAUSAL_LINK"})}await new Promise(o=>setTimeout(o,800)),console.error("[CHAOS_ENGINE]  Phase 2: Homeostasis Flood");for(let o=0;o<20;o++)e("UPDATE_ARTIFACT_POSITION",{nodeId:a[0],x:Math.random()*1e3,y:Math.random()*1e3});await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" PRESIN_SISTMICA: Verificando estabilidad del SyncOrchestrator...",type:"INFO"}),await new Promise(o=>setTimeout(o,2e3)),n(!1),console.error("[CHAOS_ENGINE]  Chaos sequence stabilized.")}catch(a){console.error("[CHAOS_ENGINE]  CRITICAL_STRESS_FAILURE:",a),n(!1)}},v12SovereigntyAudit:async n=>{var a,o;try{console.error("[CHAOS_ENGINE]  STARTING V12 SOVEREIGNTY AUDIT..."),n(!0),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" INICIANDO AUDITORA V12: Soberana de Snapshot...",type:"WARN"});const i=(o=(a=ht.getOrchestrator())==null?void 0:a.getState)==null?void 0:o.call(a),c=i?JSON.stringify(i.prepareSnapshot()):null;await e("START_DISCOVERY");const l=i?JSON.stringify(i.prepareSnapshot()):null,u=c===l;await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:u?" INTEGRIDAD_OK: La realidad local se mantuvo inalterada.":" DRIFT_DETECTADO: La realidad local cambi durante la sincrona.",type:u?"SUCCESS":"WARN"}),n(!1),console.error("[CHAOS_ENGINE]  V12 Audit stabilized.")}catch(i){console.error("[CHAOS_ENGINE]  V12_AUDIT_FAILURE:",i),n(!1)}}}),Tm=({state:e,execute:t})=>{var o;const r=e.phenotype.cosmosIdentity,n=e.sovereignty.revisionHash||((o=e.phenotype.cosmosIdentity)==null?void 0:o._revisionHash),a=()=>{!r&&!confirm("No hay un Cosmos activo. Disparar pulso de resonancia al vaco?")||(t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" Propagating Reality Touch (Resonance Pulse)...",type:"INFO"}),t("SET_LAYOUT_DIRTY",!0))};return s.jsxs("div",{className:"flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[s.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] space-y-4 shadow-inner",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-widest opacity-70",children:"Active_Cosmos_ID"}),s.jsx("span",{className:"text-[10px] font-mono text-[var(--text-soft)] truncate",children:(r==null?void 0:r.id)||"NO_COSMOS_MOUNTED"})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-widest opacity-70",children:"Sovereign_Hash"}),s.jsx("code",{className:"text-[9px] font-mono text-[var(--success)] bg-black/40 px-2 py-1 rounded border border-[var(--success)]/20 shadow-[0_0_10px_rgba(34,197,94,0.05)]",children:n||"AWAITING_GENESIS"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase tracking-widest block",children:"Core Protocols"}),s.jsxs("button",{onClick:a,className:"w-full py-2.5 rounded-lg border border-[var(--accent)]/30 bg-[var(--accent)]/5 text-[var(--accent)] font-bold text-[9px] tracking-[0.2em] uppercase hover:bg-[var(--accent)]/10 transition-all active:scale-95 mb-2 group overflow-hidden relative",children:[s.jsx("span",{className:"relative z-10",children:"Touch_Reality"}),s.jsx("div",{className:"absolute inset-0 bg-[var(--accent)]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})]}),s.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/20 bg-blue-500/5 backdrop-blur-sm",children:[s.jsx("span",{className:"text-[8px] font-black text-blue-400 uppercase tracking-widest block mb-1",children:"Axiomatic Verification V12"}),s.jsxs("ul",{className:"text-[9px] text-blue-200/60 space-y-1.5 list-none",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Snapshot Sovereignty Protocol."]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Piggybacking Persistence Layer."]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Revision Locking Protocol."]})]})]})]})},Cm=({state:e,execute:t,selectedId:r,isDnaOpen:n})=>{var i,c;const[a,o]=R.useState("STRUCTURE");return s.jsx("div",{className:`absolute top-0 right-0 h-full w-[450px] glass border-l border-white/5 z-20 transition-transform duration-700 ease-out backdrop-blur-3xl shadow-[-20px_0_50px_rgba(0,0,0,0.5)] ${n?"translate-x-0":"translate-x-full"}`,children:s.jsxs("div",{className:"h-full overflow-hidden flex flex-col p-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-10 py-2 border-b border-white/5",children:[s.jsxs("h2",{className:"text-sm font-black tracking-[0.4em] text-[var(--accent)] flex items-center gap-3",children:[s.jsx(k.Lab,{size:18})," GENOTYPE INSPECTOR"]}),s.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"dna"}),className:"p-2 hover:bg-white/10 rounded-full transition-all active:rotate-90",children:s.jsx(k.Close,{size:18,className:"text-white/40"})})]}),s.jsx("div",{className:"flex gap-6 mb-6 border-b border-white/10",children:["STRUCTURE","VITAL_LOGS","REALITY"].map(l=>s.jsxs("button",{onClick:()=>o(l),className:`text-[10px] font-bold tracking-widest pb-3 transition-all relative ${a===l?"text-[var(--accent)]":"text-[var(--text-dim)] hover:text-white"}`,children:[l,a===l&&s.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[var(--accent)] shadow-[0_0_10px_var(--accent)]"})]},l))}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[a==="STRUCTURE"&&s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar bg-black/20 rounded-xl p-4 border border-white/5",children:s.jsx("pre",{className:"text-[10px] font-mono text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed",children:e.genotype?(()=>{const l=e.genotype.COMPONENT_REGISTRY||{},u=Object.keys(l).find(h=>h.toUpperCase()===(r==null?void 0:r.toUpperCase())),p=u?l[u]:{ERROR:"ATOM_NOT_IN_REGISTRY",TARGET:r,FULL_REGISTRY_KEYS:Object.keys(l)};return JSON.stringify(p,null,2)})():s.jsxs("div",{className:"flex flex-col items-center justify-center h-40 opacity-50",children:[s.jsx("div",{className:"animate-spin mb-3",children:""}),s.jsx("span",{className:"text-[8px] tracking-[0.2em]",children:"AWAITING_CORE_GENOTYPE..."})]})})}),a==="VITAL_LOGS"&&s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-black/20 rounded-xl border border-white/5",children:[s.jsxs("div",{className:"p-3 border-b border-white/5 flex justify-between items-center bg-black/20",children:[s.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-[0.2em]",children:"Operational Stream"}),s.jsxs("span",{className:"text-[8px] font-mono text-[var(--success)] opacity-50",children:[((i=e.phenotype.logs)==null?void 0:i.length)||0," ENTRIES"]})]}),s.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar font-mono text-[9px] flex flex-col-reverse p-2",children:(c=e.phenotype.logs)==null?void 0:c.map((l,u)=>s.jsxs("div",{className:`flex gap-3 py-1.5 px-2 border-b border-white/5 animate-in fade-in slide-in-from-left-2 duration-300 ${l.type==="ERROR"?"text-red-400 bg-red-400/5":l.type==="SUCCESS"?"text-[var(--success)] bg-green-400/5":l.type==="WARN"?"text-orange-400 bg-orange-400/5":"text-[var(--text-dim)] hover:bg-white/5"}`,children:[s.jsxs("span",{className:"opacity-30 shrink-0",children:["[",l.time,"]"]}),s.jsx("span",{className:"break-words",children:l.msg})]},u))})]}),a==="REALITY"&&s.jsx(Tm,{state:e,execute:t})]})]})})},_m=({componentId:e,data:t,perspective:r,isTesting:n})=>{var c;const{state:a}=te(),i=t||((c=a.phenotype.artifacts)==null?void 0:c.find(l=>l.id===e))||{id:e};return s.jsxs("div",{className:`absolute inset-0 z-0 transition-all duration-1000 ease-[cubic-bezier(0.16,1,0.3,1)] 
            ${n?"scale-[0.98] opacity-60 blur-[2px] grayscale-[0.3]":"scale-100 opacity-100"}`,children:[s.jsx("div",{className:"w-full h-full flex items-center justify-center p-6 md:p-12 lg:p-20 bg-[radial-gradient(circle_at_center,_var(--bg-secondary)_0%,_transparent_70%)] opacity-30 pointer-events-none"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-8 md:p-14 lg:p-24 overflow-hidden",children:s.jsxs("div",{className:"w-full h-full max-w-[1800px] max-h-[1000px] flex flex-col relative group/deck",children:[s.jsxs("div",{className:"absolute -top-6 -left-2 flex flex-col gap-1 z-20 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-[var(--accent)] animate-pulse shadow-[0_0_8px_var(--accent)]"}),s.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-[0.3em]",children:"Televisor_Ready"})]}),s.jsx("div",{className:"h-[1px] w-20 bg-gradient-to-r from-[var(--accent)] to-transparent opacity-30"})]}),s.jsxs("div",{className:"absolute -top-6 -right-2 flex flex-col items-end gap-1 z-20",children:[s.jsxs("span",{className:"text-[7px] font-mono text-white/30 uppercase",children:["Perspective: ",r]}),s.jsx("div",{className:"flex gap-1",children:[0,1,2].map(l=>s.jsx("div",{className:"w-3 h-0.5 bg-white/10"},l))})]}),s.jsxs("div",{className:`
                        flex-1 glass rounded-[3rem] border border-white/5 shadow-[0_50px_100px_rgba(0,0,0,0.8)] 
                        relative flex flex-col overflow-hidden transition-all duration-700
                        ${n?"border-orange-500/30 ring-1 ring-orange-500/10":"hover:border-white/10"}
                    `,children:[s.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02]",style:{backgroundImage:"linear-gradient(var(--accent) 1px, transparent 1px), linear-gradient(90deg, var(--accent) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),s.jsx("div",{className:"flex-1 relative overflow-hidden",children:s.jsx(Un,{componentId:e,data:i,perspective:r})}),s.jsxs("div",{className:"h-8 bg-black/40 border-t border-white/5 backdrop-blur-md flex items-center justify-between px-10",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-[7px] font-mono text-white/20 uppercase tracking-widest",children:["Target_ID: ",e]}),s.jsx("div",{className:"w-1 h-3 bg-white/5 rounded-full"}),s.jsx("span",{className:"text-[7px] font-black text-[var(--accent)]/40 uppercase tracking-tighter",children:"Diagnostic_Affinities: NOMINAL"})]}),s.jsxs("div",{className:"flex gap-2 opacity-20 group-hover/deck:opacity-60 transition-opacity",children:[s.jsx("div",{className:"w-2 h-2 rounded-full border border-white/40"}),s.jsx("div",{className:"w-2 h-2 rounded-full border border-white/40"})]})]})]}),s.jsx("div",{className:"absolute -inset-10 bg-[var(--accent)]/5 blur-[100px] rounded-full opacity-20 pointer-events-none -z-10 animate-pulse"})]})})]})},Im=({activeTarget:e,activePerspective:t,activeArchetype:r,onSelectTarget:n,onSelectPerspective:a,isMockEnabled:o,onToggleMock:i,isTesting:c,onRunChaosTest:l,onRunAudits:u,onRunDiagnostic:p,onRunTrace:h,onRunForensics:x,onRunDeterminismProbe:v,execute:y})=>{const[E,A]=R.useState(!1),f=[{id:"VAULT",label:"Vault",icon:k.Vault,archetypes:["VAULT","ADAPTER","DRIVE"]},{id:"DATABASE",label:"Database",icon:k.Database,archetypes:["DATABASE","COLLECTION","GRID"]},{id:"NODE",label:"Node",icon:k.Terminal,archetypes:["NODE","TERMINAL"]},{id:"COMMUNICATION",label:"Mail",icon:k.Inbox,archetypes:["SIGNAL","EMAIL","CHAT"]},{id:"LLM",label:"LLM",icon:k.Settings,archetypes:["SERVICE","AGENT","INTELLIGENCE"]},{id:"REALITY",label:"Reality",icon:k.Cosmos,archetypes:["GRAPH","COSMOS"]},{id:"SLOT",label:"Slot",icon:k.Transform,archetypes:["SLOT","COMPOSITE"]}],[d,m]=R.useState(!1),[S,g]=R.useState(""),[C,N]=R.useState([]);R.useEffect(()=>{ee.isCompiled||ee.compile();const w=(ee.getRenderManifest()||[]).filter(B=>(B.LABEL||B.id).toLowerCase().includes(S.toLowerCase()));N(w.slice(0,50))},[S]);const T=O=>{var w;return r?(w=O.archetypes)==null?void 0:w.some(B=>r.includes(B)):!1};return s.jsxs("div",{className:"fixed right-6 top-1/2 -translate-y-1/2 z-[400] flex flex-col items-center gap-4 animate-fade-in-right",children:[s.jsxs("div",{className:"flex flex-col gap-4 p-3 glass border border-white/10 rounded-[32px] shadow-[0_30px_60px_rgba(0,0,0,0.5)] backdrop-blur-3xl relative",children:[s.jsxs("div",{className:"relative group/search",children:[s.jsx("button",{onClick:()=>m(!d),className:`w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-300 ${d?"bg-[var(--accent)] text-black":"text-white/40 hover:text-white hover:bg-white/5"}`,title:"Search Artifacts",children:s.jsx(k.Search,{size:20})}),d&&s.jsxs("div",{className:"absolute right-16 top-0 w-72 bg-[var(--bg-deep)] border border-white/10 rounded-2xl shadow-2xl p-4 animate-in slide-in-from-right-4 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 bg-white/5 p-2 rounded-xl border border-white/5",children:[s.jsx(k.Search,{size:14,className:"text-white/40"}),s.jsx("input",{type:"text",placeholder:"Search...",className:"w-full bg-transparent text-xs focus:outline-none text-white placeholder:text-white/10",value:S,onChange:O=>g(O.target.value),autoFocus:!0})]}),s.jsx("div",{className:"flex flex-col gap-1 max-h-60 overflow-y-auto custom-scrollbar",children:C.map(O=>s.jsxs("button",{onClick:()=>{n(O.id),m(!1)},className:`text-left px-3 py-2 hover:bg-white/5 rounded-xl flex items-center justify-between group/item ${e===O.id?"bg-[var(--accent)]/10 border border-[var(--accent)]/20":""}`,children:[s.jsx("span",{className:"text-[10px] font-black uppercase text-white/60 truncate max-w-[150px]",children:O.LABEL||O.id}),s.jsx("span",{className:"text-[7px] font-mono text-white/20",children:O.ARCHETYPE})]},O.id))})]})]}),s.jsx("div",{className:"h-[1px] w-8 bg-white/10 mx-auto"}),s.jsx("div",{className:"flex flex-col gap-2",children:f.map(O=>{const w=t===O.id,B=T(O);return s.jsxs("button",{onClick:()=>{(!e||e==="DRIVE")&&(y("INJECT_PHANTOM_ARTIFACT",{engineId:O.id}),o||i()),a(O.id)},className:`w-12 h-12 rounded-2xl flex flex-col items-center justify-center transition-all duration-500 relative group/icon
                                    ${w?"bg-[var(--accent)] text-black shadow-[0_0_20px_rgba(var(--accent-rgb),0.4)] scale-110":B?"text-[var(--accent)] bg-[var(--accent)]/10":"text-white/20 hover:text-white hover:bg-white/5"}`,children:[s.jsx(O.icon,{size:18}),s.jsx("span",{className:`text-[6px] font-black mt-1 tracking-tighter ${w?"text-black":"text-[var(--text-dim)] group-hover/icon:text-white"}`,children:O.label}),B&&!w&&s.jsx("div",{className:"absolute inset-0 rounded-2xl border border-[var(--accent)] animate-ping opacity-20"})]},O.id)})}),s.jsx("div",{className:"h-[1px] w-8 bg-white/10 mx-auto"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("button",{onClick:i,className:`w-12 h-12 rounded-2xl flex flex-col items-center justify-center transition-all ${o?"bg-orange-500/20 text-orange-400 border border-orange-500/30 shadow-[0_0_15px_rgba(249,115,22,0.2)]":"text-white/20 hover:text-white/40"}`,children:[s.jsx(k.Sync,{size:16,className:o?"animate-spin-slow":""}),s.jsx("span",{className:"text-[6px] font-black mt-1",children:"MOCK"})]}),s.jsxs("div",{className:"relative w-12 h-12",children:[s.jsx("div",{className:`absolute right-14 top-0 h-12 flex items-center bg-[var(--bg-deep)]/90 backdrop-blur-2xl rounded-2xl border border-white/10 shadow-2xl transition-all duration-500 overflow-hidden ${E?"w-[320px] px-3":"w-0 opacity-0"}`,children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:l,title:"Chaos",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:s.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),s.jsx("button",{onClick:u,title:"Audit",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:s.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),s.jsx("button",{onClick:p,title:"Diagnostic",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:s.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),s.jsx("button",{onClick:h,title:"Trace",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:s.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),s.jsx("button",{onClick:x,title:"Forensics",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:s.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})}),s.jsx("button",{onClick:v,title:"Identity",className:"p-2 hover:bg-white/10 rounded-xl transition-all",children:s.jsx("span",{className:"text-lg grayscale hover:grayscale-0",children:""})})]})}),s.jsxs("button",{onClick:()=>A(!E),className:`w-12 h-12 rounded-2xl flex flex-col items-center justify-center transition-all ${E?"bg-blue-600 text-white":"text-white/20 hover:text-blue-400 hover:bg-blue-500/10"}`,children:[s.jsx(k.Lab,{size:18}),s.jsx("span",{className:"text-[6px] font-black mt-1",children:"TEST"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-1 px-4 opacity-40",children:[s.jsxs("span",{className:"text-[7px] font-black uppercase tracking-widest text-white/50",children:["Vector: ",e]}),s.jsxs("span",{className:"text-[7px] font-mono text-[var(--accent)] uppercase",children:[t," Mode"]})]})]})},wm=(e,t)=>({igniteForensicChain:async n=>{console.clear(),console.log("%c  [FORENSIC_CHAIN] Igniting Ultra-Diagnostic Chain...","color: #f472b6; font-weight: bold; font-size: 14px;");const a=ut.call.bind(ut);ut.call=async(c,l,u)=>(console.group(`%c  [FORENSIC:Interdiction] ${c}.${l}`,"color: #38bdf8;"),console.log("Queue size:",ut.batchQueue.length),console.log("Timer active:",!!ut.batchTimer),console.log("Write allowed?",H.getState().isWriteAllowed()),console.log("Hash Init?",H.getState().session.hashInitialized),console.groupEnd(),a(c,l,u));const o=Nt.call.bind(Nt);Nt.call=async(c,l,u)=>{console.log(`%c  [FORENSIC:Connector] Outgoing -> ${c}.${l}`,"color: #10b981; font-weight: bold;");try{const p=await o(c,l,u);return console.log(`%c  [FORENSIC:Connector] Incoming <- ${l}`,"color: #10b981;",{size:JSON.stringify(p).length}),p}catch(p){throw console.error(" [FORENSIC:Connector] Physical Drop:",p.message),p}};const i=ys.transmute.bind(ys);ys.transmute=(c,l)=>{console.group(`%c  [FORENSIC:Transmuter] Analyzing ${l}`,"color: #a855f7;"),console.log("Raw Response:",c);const u=i(c,l);return console.log("Transmuted Result:",u),console.groupEnd(),u},e({type:"LOG_ENTRY",payload:{msg:" Cadena Forense Activa. Disparando Sonda FETCH...",type:"INFO"}}),setTimeout(async()=>{console.log("%c  [FORENSIC] Triggering Target Action...","color: #f472b6; font-weight: bold;");const l=H.getState().phenotype.devLab||{},u=(n==="DRIVE"||n==="VAULT")&&l.selectedArtifactId||n;console.log(`[FORENSIC] Target Resolved: ${u}`);try{t("FETCH_DATABASE_CONTENT",{databaseId:u,nodeId:"notion",refresh:!0}),setTimeout(()=>{console.log("%c  [FORENSIC:Timeout] 10 seconds without resolution. Checking queue status...","color: #ef4444;"),console.log("Stuck Queue:",ut.batchQueue)},1e4)}catch(p){console.error(" [FORENSIC:Chain] Broken at dispatch:",p)}},1e3)}}),Rm=(e,t,r)=>({probeDeterminismIntegrity:async a=>{var o,i,c,l;try{console.group("%c  [DETERMINISM_PROBE] Iniciando Auditora de Integridad...","color: #fbbf24; font-weight: bold;"),a(!0),await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" PROBE_DETERMINISM: Verificando rechazo de heursticas...",type:"WARN"}),console.log("%c [PROBE] Stage 1: Attempting to select Headless Artifact","color: #94a3b8;");const u=`headless_${Date.now()}`;t("ADD_ARTIFACT_REQUEST",{artifact:{id:u,LABEL:"GHOST_ARTIFACT",type:"DATABASE_NODE"},position:{x:0,y:0}}),await new Promise(D=>setTimeout(D,500)),console.log("%c [PROBE] Selecting Headless Artifact via SELECT_ARTIFACT...","color: #94a3b8;"),t("SELECT_ARTIFACT",{artifactId:u}),await new Promise(D=>setTimeout(D,1e3));const h=r.phenotype.logs.some(D=>{var P,I;return((P=D.msg)==null?void 0:P.includes("IDENTITY_VOID"))||((I=D.msg)==null?void 0:I.includes("Missing identity"))});await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:h?" STAGE 1: Identidad Vaca detectada y bloqueada correctamente.":" STAGE 1: El sistema permiti la seleccin de un artefacto sin pasaporte.",type:h?"SUCCESS":"ERROR"}),console.log("%c [PROBE] Stage 2: Verifying Routing for 'sheets' origin","color: #94a3b8;");const x=`sheet_test_${Date.now()}`;t("ADD_ARTIFACT_REQUEST",{artifact:{id:x,LABEL:"DETERMINISTIC_SHEET",type:"DATABASE_NODE",ORIGIN_SOURCE:"sheet",ACCOUNT_ID:"system"},position:{x:100,y:100}}),await new Promise(D=>setTimeout(D,500)),t("SELECT_ARTIFACT",{artifactId:x}),await new Promise(D=>setTimeout(D,2e3));const v=r.phenotype.logs.some(D=>{var P,I;return((P=D.msg)==null?void 0:P.includes("[DB_ENGINE]  Reifying"))||((I=D.msg)==null?void 0:I.includes("reifyDatabase"))});await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:v?" STAGE 2: Enrutamiento determinista validado (sheet -> adapter.sheet).":" STAGE 2: Fallo en el enrutamiento del pasaporte (sheet ID).",type:v?"SUCCESS":"ERROR"}),console.log("%c [PROBE] Stage 3: Verifying Alias Resolution ('vault' -> 'drive')","color: #94a3b8;"),t("LOG_ENTRY",{msg:" Probando resolucin de alias: vault.listContents"});try{const D=await se.executeAction("vault:listContents",{path:"/"}),P=D&&D.success;await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:P?" STAGE 3: Resolucin de alias validada (vault -> drive).":" STAGE 3: El backend no reconoci el alias semntico.",type:P?"SUCCESS":"ERROR"})}catch(D){await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:` STAGE 3: Error fsico en resolucin: ${D.message}`,type:"ERROR"})}console.log("%c [PROBE] Stage 4: Verifying Lexical Sovereignty (Relation Mapping)","color: #94a3b8;");const y=`notion_test_${Date.now()}`;t("ADD_ARTIFACT_REQUEST",{artifact:{id:y,LABEL:"LEXICAL_SOVEREIGNTY_TEST",type:"DATABASE_NODE",ORIGIN_SOURCE:"notion",ACCOUNT_ID:"system",SCHEMA:{columns:[{id:"Relationship",type:"relation"}]}},position:{x:200,y:200}}),await new Promise(D=>setTimeout(D,500)),t("SELECT_ARTIFACT",{artifactId:y}),await new Promise(D=>setTimeout(D,3e3));const A=r.phenotype.logs.some(D=>{var P,I,b,_;return((P=D.msg)==null?void 0:P.includes("[Notion:Hydrator]"))||((I=D.msg)==null?void 0:I.includes("Resolviendo nombres"))||((b=D.msg)==null?void 0:b.includes("Identity Hydration Success"))||((_=D.msg)==null?void 0:_.includes("Soberana Lexical"))}),f=(o=r.phenotype.silos)==null?void 0:o[y];let d=!1;if(f){const D=(l=(c=(i=f.results)==null?void 0:i[0])==null?void 0:c.Relationship)==null?void 0:l[0];D&&typeof D=="object"&&D.id&&D.name?(d=!0,console.log("%c [PROBE] Deep Inspection: Hydration Confirmed ","color: #4ade80",D)):console.warn("[PROBE] Deep Inspection: Hydration Failed . Value:",D)}const m=d||A;await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:m?" STAGE 4: Soberana Lexical validada. (Data Integrity: CONFIRMED)":" STAGE 4: Fallo de Hidratacin. Data corrupta o incompleta.",type:m?"SUCCESS":"ERROR"}),console.log("%c [PROBE] Stage 5: Auditing Law_Compiler Manifest for Virtual Artifacts","color: #94a3b8;");const S=await $r(()=>Promise.resolve().then(()=>wh),void 0),g=S.default||S;g.compile();const N=g.getRenderManifest().find(D=>D.id==="SLOT_NODE"||D.omd==="slot_node");let T=!!N,O=!1,w="NOT_FOUND";if(N){const D=(N.ARCHETYPE||"").toUpperCase(),P=(N.DOMAIN||"").toUpperCase(),b=["ADAPTER","VAULT","ORCHESTRATOR","AGENT","WIDGET","DATAGRID","SERVICE","TRANSFORM","GRID","COMPUTE","NODE","SLOT","SLOT_NODE","UTILITY","STYLING"].some(L=>D.includes(L)),U=["SYSTEM_CORE","SYSTEM_INFRA","DATA_ENGINE","LOGIC","TEMPORAL"].includes(P),j=D.includes("ADAPTER")||D.includes("VAULT")||D.includes("AGENT");O=(b||j)&&(!U||j),O||(w=U?`DOMINIO_BLOQUEADO (${P})`:`ARQUETIPO_NO_LISTADO (${D})`)}await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:T?` STAGE 5: SLOT_NODE encontrado en el Manifiesto. Visibilidad: ${O?"APROBADA":"BLOQUEADA -> "+w}`:" STAGE 5: SLOT_NODE NO ENCONTRADO en el Manifiesto Compilado.",type:T&&O?"SUCCESS":"ERROR"});const B=T&&O;await t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:B?" VERDICTO FINAL: El sistema est listo para manifestar el SLOT_NODE.":" VERDICTO FINAL: Fallo en la cadena de manifestacin frontend.",type:B?"SUCCESS":"ERROR"}),console.groupEnd(),a(!1)}catch(u){console.error("[DETERMINISM_PROBE]  FATAL_ERROR:",u),a(!1),console.groupEnd()}}}),jm=()=>{const{state:e,dispatch:t,execute:r}=te(),[n,a]=R.useState(!1),[o,i]=R.useState(!1);H(f=>f.setLoading),H(f=>f.interdiction.active),H(f=>f.interdiction.reason);const c=e.phenotype.devLab||{},l=c.targetId||"DRIVE",u=c.perspective||"VAULT",p=R.useMemo(()=>{var T,O,w,B,D;const f=l.startsWith("garage_")?l.split("_")[1].toUpperCase():l.toUpperCase(),d=((T=an.GARAGE_PROTOTYPES)==null?void 0:T[f])||((O=an.GARAGE_PROTOTYPES)==null?void 0:O[l.toUpperCase()]);if(d)return{...d,id:l,_isGhost:!0,_isMock:!0,LABEL:d.LABEL||`${f} (PROTOTYPE)`};const m=(w=e.phenotype.artifacts)==null?void 0:w.find(P=>P.id===l);if(m)return m;const S=((D=(B=se.L0)==null?void 0:B.COMPONENT_REGISTRY)==null?void 0:D[l])||ee.getCanon(l);if(S)return S;const C={VAULT:"DRIVE",DATABASE:"DATABASE",NODE:"NODE",COMMUNICATION:"EMAIL",REALITY:"COSMOS",SLOT:"SLOT_MANAGER"}[l.toUpperCase()]||l,N=an.COMPONENT_REGISTRY[C]||an.COMPONENT_REGISTRY[C.toUpperCase()];return N?{...N,id:l,_isMock:!0,LABEL:`${N.LABEL} (FALLBACK)`}:{id:l,LABEL:l.toUpperCase(),ARCHETYPE:l==="VAULT"?"VAULT":"ADAPTER"}},[l,c.isMockEnabled,e.phenotype.artifacts]),h=p.id||p.ID,x=e.phenotype.ui.dnaPanelOpen,v=e.phenotype.ui.chaosPanelOpen,y=R.useMemo(()=>Am(r),[r]),E=R.useMemo(()=>wm(t,r),[t,r]),A=R.useMemo(()=>Rm(t,r,e),[t,r,e]);return se.isIgnited?s.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-[var(--bg-deep)] text-white font-sans",children:[s.jsx(_m,{componentId:h,data:p,perspective:u,isTesting:o,execute:r}),s.jsx(Cm,{state:e,execute:r,selectedId:h,isDnaOpen:x}),s.jsx(Im,{activeTarget:l,activePerspective:u,activeArchetype:p==null?void 0:p.ARCHETYPE,onSelectTarget:f=>r("SET_LAB_TARGET",f),onSelectPerspective:f=>r("SET_LAB_PERSPECTIVE",f),isMockEnabled:c.isMockEnabled,onToggleMock:()=>r("TOGGLE_LAB_MOCK"),onToggleChaos:()=>r("TOGGLE_UI_PANEL",{panel:"chaos"}),isChaosOpen:v,isTesting:o,onRunChaosTest:()=>y.igniteChaosTest(i),onRunAudits:()=>y.v12SovereigntyAudit(i),onRunDiagnostic:()=>r("RUN_DIAGNOSTIC"),onRunTrace:()=>{const f=/^[0-9a-f]{8}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{4}-?[0-9a-f]{12}$/i.test(h),d=l==="DATABASE"||p.ARCHETYPE==="DATABASE";h&&(d||f)?(console.log(`[DevLab]  Launching Sovereign Trace for: ${h}`),r("TRACE_SOVEREIGN_DATABASE",{databaseId:h,nodeId:"notion"})):(console.warn(`[DevLab]  Trace Blocked: ID ${h} does not look like a Database.`,{targetId:l,archetype:p.ARCHETYPE}),r("LOG_ENTRY",{msg:" Selecciona una Database de Notion para trazar.",type:"WARNING"}))},onRunForensics:()=>{h?E.igniteForensicChain(h):r("LOG_ENTRY",{msg:" Selecciona un artefacto para la autopsia.",type:"WARNING"})},onRunDeterminismProbe:()=>A.probeDeterminismIntegrity(i),execute:r}),n&&s.jsxs("div",{className:"absolute inset-0 z-[1000] flex items-center justify-center animate-in fade-in duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-[var(--bg-deep)]/80 backdrop-blur-md",onClick:()=>a(!1)}),s.jsx("div",{className:"relative z-10 animate-in zoom-in-95 duration-300",children:s.jsx(kd,{onSelect:f=>{r("SET_LAB_TARGET",f),a(!1)},onClose:()=>a(!1)})})]})]}):s.jsxs("div",{className:"w-screen h-screen bg-[var(--bg-deep)] flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 border-2 border-[var(--success)]/20 border-t-[var(--success)] rounded-full animate-spin"}),s.jsx("div",{className:"text-[var(--success)] font-mono text-xs tracking-[0.4em] animate-pulse uppercase",children:"Initialising Axiomatic Core..."})]})},ko=({asOverlay:e=!1,onClose:t})=>{const{execute:r}=te(),[n,a]=R.useState(()=>{const m=localStorage.getItem("INDRA_KNOWN_CORES");return m?JSON.parse(m):[{id:"default",label:"Indra Office",url:Mt.CORE_URL,token:Mt.SYSTEM_TOKEN}]}),[o,i]=R.useState(localStorage.getItem("INDRA_ACTIVE_CORE_ID")||"default"),[c,l]=R.useState(!1),[u,p]=R.useState(!1),[h,x]=R.useState(null),[v,y]=R.useState({label:"",url:"",token:""}),E=m=>{a(m),localStorage.setItem("INDRA_KNOWN_CORES",JSON.stringify(m))},A=async m=>{p(!0),x(null);try{console.log(`[CoreSelector] Conectando a ${m.label}...`),localStorage.setItem("INDRA_SESSION_TOKEN",m.token),localStorage.setItem("INDRA_OVERRIDE_URL",m.url),localStorage.setItem("INDRA_ACTIVE_CORE_ID",m.id);const{default:S}=await $r(async()=>{const{default:C}=await Promise.resolve().then(()=>Rd);return{default:C}},void 0);S.init(m.url,m.token);const g=await se.ignite();g.sovereignty==="ACTIVE"?(console.log(`[CoreSelector]  Vnculo establecido con ${m.label}`),e?(r("IGNITE_SYSTEM",{sovereignty:"ACTIVE",genotype:g.genotype}),t&&t()):window.location.reload()):x(`ERROR_VETO: El Core '${m.label}' rechaz la conexin.`)}catch(S){x(`CORE_INALCANZABLE: ${S.message}`)}finally{p(!1)}},f=()=>{if(!v.url||!v.token)return;const m=`core_${Date.now()}`,S=[...n,{...v,id:m,label:v.label||"Nuevo Core"}];E(S),l(!1),y({label:"",url:"",token:""})},d=m=>{m!=="default"&&E(n.filter(S=>S.id!==m))};return s.jsxs("div",{className:`w-full h-full flex items-center justify-center bg-[var(--bg-deep)] p-8 ${e?"bg-black/80 backdrop-blur-3xl fixed inset-0 z-[100]":""}`,children:[s.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-12 gap-8 animate-in fade-in zoom-in-95 duration-500",children:[s.jsxs("div",{className:"col-span-12 md:col-span-4 flex flex-col gap-6",children:[s.jsx("div",{className:"w-20 h-20 rounded-3xl border-2 border-[var(--accent)] flex items-center justify-center shadow-[0_0_30px_rgba(var(--accent-rgb),0.2)]",children:s.jsx(k.Cosmos,{size:40,className:"text-[var(--accent)] animate-spin-slow"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-white tracking-tighter uppercase leading-none mb-2",children:"Core_Selector"}),s.jsx("p",{className:"text-[10px] text-[var(--text-dim)] uppercase tracking-widest font-mono",children:"Multi-Reality_Gateway_v3.0"})]}),s.jsx("div",{className:"mt-auto p-4 rounded-2xl bg-white/5 border border-white/10",children:s.jsx("p",{className:"text-[9px] text-[var(--text-dim)] leading-relaxed italic",children:'"Los Cosmos viven dentro de los Cores. Selecciona una realidad para proyectarla en tu interfaz local."'})}),e&&s.jsx("button",{onClick:t,className:"text-left text-[9px] font-black uppercase text-[var(--accent)] hover:opacity-50",children:"[ Esc ] Cancelar Navegacin"})]}),s.jsxs("div",{className:"col-span-12 md:col-span-8 flex flex-col gap-4",children:[h&&s.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl text-red-500 text-[10px] font-mono leading-relaxed mb-2",children:[" ERROR: ",h]}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest",children:"Realidades_Registradas"}),s.jsxs("button",{onClick:()=>l(!c),className:"text-[10px] font-black uppercase text-[var(--accent)] flex items-center gap-2 hover:brightness-125",children:[s.jsx(k.Plus,{size:14})," ",c?"Ver Lista":"Aadir Core"]})]}),c?s.jsxs("div",{className:"flex flex-col gap-6 p-8 bg-white/5 border border-white/10 rounded-3xl animate-in slide-in-from-right-4 duration-300",children:[s.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest text-[var(--accent)] mb-2",children:"Manual_Entry"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[8px] font-mono text-white/30 uppercase mb-2 block",children:"Nombre del Orbe"}),s.jsx("input",{type:"text",value:v.label,onChange:m=>y({...v,label:m.target.value}),placeholder:"ej: Core Produccin",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:border-[var(--accent)]/50 transition-all font-mono"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[8px] font-mono text-white/30 uppercase mb-2 block",children:"URL del Script (Core)"}),s.jsx("input",{type:"text",value:v.url,onChange:m=>y({...v,url:m.target.value}),placeholder:"https://script.google.com/...",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:border-[var(--accent)]/50 transition-all font-mono"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[8px] font-mono text-white/30 uppercase mb-2 block",children:"Sistema Token (Secret)"}),s.jsx("input",{type:"password",value:v.token,onChange:m=>y({...v,token:m.target.value}),placeholder:"",className:"w-full bg-black/40 border border-white/10 rounded-xl px-4 py-3 text-xs outline-none focus:border-[var(--accent)]/50 transition-all font-mono"})]}),s.jsx("button",{onClick:f,className:"w-full bg-[var(--accent)] text-black py-4 rounded-xl font-black uppercase text-xs hover:scale-[1.01] transition-all",children:"Vincular Realidad"})]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-3 overflow-y-auto max-h-[500px] pr-2 custom-scrollbar",children:n.map(m=>s.jsxs("div",{className:`group flex items-center justify-between p-6 rounded-3xl border transition-all cursor-pointer ${o===m.id?"bg-[var(--accent)]/10 border-[var(--accent)]/40 shadow-lg shadow-[var(--accent)]/5":"bg-white/2 border-white/5 hover:border-white/20"}`,children:[s.jsxs("div",{className:"flex items-center gap-6 flex-1",onClick:()=>A(m),children:[s.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-xl bg-black/40 border transition-all ${o===m.id?"border-[var(--accent)] text-[var(--accent)]":"border-white/5 text-white/20"}`,children:s.jsx(k.Transform,{size:30,className:o===m.id?"animate-pulse":""})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h3",{className:"font-bold text-lg leading-none",children:m.label}),o===m.id&&s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-[var(--accent)]/20 text-[7px] text-[var(--accent)] font-black uppercase border border-[var(--accent)]/30",children:"Active"})]}),s.jsx("span",{className:"text-[8px] font-mono text-white/20 truncate max-w-[300px]",children:m.url})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:u&&o===m.id?s.jsx(k.Sync,{size:18,className:"animate-spin text-[var(--accent)]"}):s.jsx("button",{onClick:S=>{S.stopPropagation(),d(m.id)},className:"p-3 rounded-xl hover:bg-red-500/10 text-white/10 hover:text-red-500 transition-all",children:s.jsx(k.Trash,{size:16})})})]},m.id))})]})]}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden opacity-5",children:[s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] border border-white/20 rounded-full animate-spin-slow"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] border border-white/20 rounded-full animate-reverse-slow"})]})]})},Om=()=>{var S;const[e,t]=R.useState([]),[r,n]=R.useState({}),[a,o]=R.useState(null),[i,c]=R.useState(!1),[l,u]=R.useState(null),[p,h]=R.useState({}),x=H(g=>g.session.hashInitialized),y=H(g=>g.session.isLoading)||i;R.useEffect(()=>{x&&E()},[x]);const E=async()=>{c(!0),u(null);try{const g=await se.call("cosmos","listAvailableCosmos",{includeAll:!0});g&&g.artifacts&&(t(g.artifacts),A(g.artifacts))}catch(g){console.error("[ArtifactExplorer] Error loading artifacts:",g),u(g.message)}finally{c(!1)}},A=g=>{const C={COSMOS_V1:[],FLOW_V1:[],LAYOUT_V1:[],SYSTEM_V1:[],UNDEFINED:[]};g.forEach(T=>{var w,B,D,P,I,b;const O=T.indx_schema||"UNDEFINED";C[O]?C[O].push(T):(w=T.name)!=null&&w.includes(".flow.")||(B=T.name)!=null&&B.includes(".logic.")||(D=T.name)!=null&&D.includes(".rule.")?C.FLOW_V1.push(T):(P=T.name)!=null&&P.includes(".layout.")?C.LAYOUT_V1.push(T):(I=T.name)!=null&&I.includes(".sys.")||(b=T.name)!=null&&b.includes(".config.")?C.SYSTEM_V1.push(T):C.UNDEFINED.push(T)}),n(C);const N={};Object.keys(C).forEach(T=>{C[T].length>0&&(N[T]=!0)}),h(N)},f=g=>{h(C=>({...C,[g]:!C[g]}))},d=async g=>{o(g)},m=g=>({COSMOS_V1:"",FLOW_V1:"",LAYOUT_V1:"",SYSTEM_V1:"",UNDEFINED:""})[g]||"";return s.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontFamily:"monospace"},children:[s.jsxs("div",{style:{width:"350px",borderRight:"1px solid #333",overflowY:"auto",padding:"20px"},children:[s.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid var(--border-color)"},children:[s.jsx("h2",{style:{margin:0,fontSize:"18px",color:"#00ff88"},children:" Artifact Explorer"}),s.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["Total: ",e.length," artifacts"]})]}),y&&s.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#888"},children:"Loading artifacts..."}),l&&s.jsxs("div",{style:{padding:"10px",backgroundColor:"#ff000020",border:"1px solid #ff0000",borderRadius:"4px",marginBottom:"10px"},children:[" ",l]}),Object.entries(r).map(([g,C])=>C.length>0&&s.jsxs("div",{style:{marginBottom:"15px"},children:[s.jsxs("div",{onClick:()=>f(g),style:{padding:"8px",backgroundColor:"var(--bg-secondary)",cursor:"pointer",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[s.jsxs("span",{children:[m(g)," ",g]}),s.jsx("span",{style:{backgroundColor:"var(--bg-deep)",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},children:C.length})]}),p[g]&&s.jsx("div",{style:{paddingLeft:"15px"},children:C.map((N,T)=>{var O,w;return s.jsxs("div",{onClick:()=>d(N),style:{padding:"6px 8px",cursor:"pointer",backgroundColor:(a==null?void 0:a.id)===N.id?"#00ff8820":"transparent",borderLeft:(a==null?void 0:a.id)===N.id?"2px solid #00ff88":"2px solid transparent",marginBottom:"2px",fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[" ",((O=N.identity)==null?void 0:O.label)||N.name||"Unnamed",((w=N.discovery)==null?void 0:w.status)==="ARTIFACT_RAW"&&s.jsx("span",{style:{color:"#ff8800",fontSize:"10px",marginLeft:"5px"},children:"[RAW]"})]},T)})})]},g))]}),s.jsx("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:a?s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid var(--border-color)"},children:[s.jsx("h3",{style:{margin:0,color:"#00ff88"},children:a.name||((S=a.identity)==null?void 0:S.label)||"Unnamed Artifact"}),s.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["ID: ",a.id]}),s.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["Schema: ",a.indx_schema||"UNDEFINED"]})]}),s.jsx("pre",{style:{backgroundColor:"var(--bg-secondary)",padding:"15px",borderRadius:"4px",fontSize:"12px",overflow:"auto",border:"1px solid var(--border-color)"},children:JSON.stringify(a,null,2)})]}):s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#555",fontSize:"14px"},children:"Select an artifact to view its content"})})]})},xc=()=>{const{state:e,execute:t}=te(),r=H(d=>d.session.isLoading),{availableCosmos:n,discoveryStatus:a}=e.phenotype,[o,i]=R.useState(!1),[c,l]=R.useState(!1),[u,p]=R.useState(null),[h,x]=R.useState(null),v=r||a==="SCANNING",y=()=>{t("START_DISCOVERY")},E=()=>{u&&t("MOUNT_COSMOS",{cosmosId:u})},A=d=>{t("DELETE_COSMOS",{cosmosId:d}),u===d&&p(null)},f=async d=>{var m;x(null),t("START_DISCOVERY");try{const S=d.identity||{label:d.label,description:d.description},g=`cosmos_${crypto.randomUUID().split("-")[0]}_${Date.now().toString(36)}`,C=await se.call("cosmos","saveCosmos",{cosmosId:g,fileName:S.label?`${S.label}.cosmos.json`:"mi_universo.cosmos.json",cosmos:{id:g,identity:{label:S.label||"Sin Ttulo",description:S.description||"Realidad persistida por Indra App"},artifacts:[],relationships:[],activeLayout:{VIEW_MODE:"GRAPH"},last_modified:new Date().toISOString()}});if(C&&C.success&&(C.id||C.new_id||C.fileId)){const N=C.new_id||C.id||C.fileId;console.info(`%c  [Genesis] Identity granted by Core: ${N}`,"color: #10b981; font-weight: bold;"),i(!1),p(N),setTimeout(()=>{t("MOUNT_COSMOS",{cosmosId:N})},500)}else throw new Error((C==null?void 0:C.error)||((m=C==null?void 0:C.result)==null?void 0:m.error)||"El servidor no devolvi una identidad vlida.")}catch(S){x(`Fallo en el Gnesis: ${S.message}`),t("UPDATE_COSMOS_REGISTRY",n)}};return o?s.jsx("div",{className:"w-full h-full flex flex-col justify-start items-center p-8 pt-28 bg-[var(--bg-primary)] overflow-hidden",children:s.jsx("div",{className:"max-w-2xl w-full max-h-[80vh] flex flex-col p-8 bg-[var(--bg-secondary)]/90 border border-[var(--border-subtle)] rounded-3xl backdrop-blur-xl shadow-2xl animate-in zoom-in-95 duration-500 overflow-hidden",children:s.jsx(Un,{perspective:"SCHEMA_PROJECTION",schemaId:"COSMOS_V1",onCommit:f,onCancel:()=>i(!1),error:h})})}):c?s.jsxs("div",{className:"w-full h-full relative",children:[s.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 z-50 bg-red-500 text-white px-4 py-2 rounded-lg text-xs font-bold uppercase hover:brightness-125 transition-all",children:" Cerrar Diagnstico"}),s.jsx(Om,{})]}):s.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 bg-transparent",children:s.jsxs("div",{className:"max-w-2xl w-full flex flex-col gap-8",children:[s.jsxs("div",{className:"flex flex-col gap-2 border-b border-[var(--indra-glass-border)] pb-6 relative",children:[s.jsx("h1",{className:"text-3xl font-black text-[var(--text-primary)] tracking-tighter uppercase italic",children:"Seleccionar Cosmos"}),s.jsxs("p",{className:"text-sm text-[var(--text-secondary)] font-mono opacity-60",children:["Elige una ",s.jsx("span",{className:"text-[var(--accent)] font-bold",children:"Realidad Cuntica"})," para habitar."]}),s.jsxs("div",{className:"absolute right-0 top-0 flex gap-2",children:[s.jsx("button",{onClick:()=>l(!0),className:"bg-yellow-500/10 text-yellow-500 border border-yellow-500/30 px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-yellow-500 hover:text-black transition-all active:scale-95",children:" Diagnstico"}),s.jsx("button",{onClick:()=>i(!0),className:"bg-[var(--accent)] text-black px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:brightness-110 transition-all active:scale-95 shadow-lg shadow-[var(--accent)]/20",children:"+ Nuevo Cosmos"})]})]}),s.jsx("div",{className:"flex-1 min-h-[300px] overflow-y-auto custom-scrollbar pr-2 flex flex-col gap-3",children:v&&n.length===0?s.jsx("div",{className:"flex items-center justify-center h-48 border border-[var(--indra-glass-border)] rounded-xl opacity-40 italic font-mono text-xs",children:"Escaneando Registro de Flujos..."}):n.length===0?s.jsx("div",{className:"flex flex-col items-center justify-center h-48 border border-[var(--indra-glass-border)] rounded-xl text-[var(--text-dim)] gap-4 border-dashed",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-mono text-xs uppercase tracking-widest",children:"No se identificaron Cosmos en el directorio FLOWS"}),s.jsx("p",{className:"text-[10px] mt-2 opacity-50",children:"Carga un artefacto cosmos.json vlido para comenzar."})]})}):n.map(d=>{var m,S,g,C,N;return s.jsx("div",{role:"button",tabIndex:0,onClick:()=>p(d.id),className:`
                                    w-full p-5 rounded-xl border text-left transition-all group relative overflow-hidden
                                    ${u===d.id?"bg-[var(--accent)]/5 border-[var(--accent)] shadow-xl":"bg-[var(--bg-secondary)] border-[var(--indra-glass-border)] hover:border-[var(--text-dim)] shadow-sm"}
                                `,children:s.jsxs("div",{className:"flex items-center gap-5",children:[s.jsx("div",{className:`
                                        w-12 h-12 rounded-lg flex items-center justify-center font-black text-xl border
                                        ${u===d.id?"bg-[var(--accent)] text-black border-transparent":"bg-[var(--bg-deep)] border-[var(--indra-glass-border)] text-[var(--accent)]"}
                                    `,children:((S=(m=d.identity)==null?void 0:m.label)==null?void 0:S.charAt(0))||"C"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] uppercase tracking-wide",children:((g=d.identity)==null?void 0:g.label)||d.name}),s.jsxs("div",{className:"text-[9px] font-mono opacity-30",children:["ID: ",((C=d.id)==null?void 0:C.substring(0,8))||"...","..."]})]}),s.jsx("div",{className:"text-[11px] text-[var(--text-secondary)] mt-1 line-clamp-1 opacity-70",children:((N=d.identity)==null?void 0:N.description)||"Definicin axiomtica de un espacio de trabajo."})]}),s.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute right-4 transition-all z-20 hover:scale-110",children:s.jsx(Dd,{onComplete:()=>A(d.id),size:32,iconSize:16})}),u===d.id&&s.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-[var(--accent)]"})]})},d.id)})}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{onClick:y,disabled:v,className:"px-6 py-3 rounded-xl font-mono text-[10px] uppercase tracking-[0.2em] bg-[var(--bg-secondary)] border border-[var(--indra-glass-border)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all shadow-sm",children:v?"Escaneando...":"Re-Escanear Flujos"}),s.jsx("button",{onClick:E,disabled:!u||v,className:`
                            flex-1 py-3 px-6 rounded-xl font-mono text-[10px] uppercase tracking-[0.3em] font-bold
                            transition-all duration-500
                            ${u?"bg-[var(--accent)] text-black shadow-xl hover:scale-[1.02] active:scale-95":"bg-white/5 text-[var(--text-dim)] cursor-not-allowed grayscale"}
                        `,children:"Habitar Realidad Cuntica"})]})]})})},Lm=({law:e,cosmosContext:t,phenotype:r,slotId:n,perspective:a="STANDARD"})=>{var x,v;const{execute:o}=te(),[i,c]=R.useState(null);if(!e)return s.jsx("div",{className:"text-[var(--text-dim)] p-4 font-mono text-xs",children:"Unmapped Slot"});const l=e.artefacts||[],u=i||(l.length===1?l[0]:null),p=u?ee.getCanon(u):null;if(a==="TOPOLOGICAL"){const y=((p==null?void 0:p.LABEL)||e.functional_name||"System Unit").toUpperCase(),E=((p==null?void 0:p.ARCHETYPE)||((x=e.config)==null?void 0:x.archetype)||"").toUpperCase(),A=E==="VAULT";let f=k.Sovereign;A&&k.Vault?f=k.Vault:(v=p==null?void 0:p.config)!=null&&v.icon&&k[p.config.icon]&&(f=k[p.config.icon]);const d=l.length>0,m=()=>{if(d){const S=u||l[0];console.log(`[Orb]  Igniting Focus: ${y} (${S})`),o("SELECT_ARTIFACT",S),!i&&l.length>0&&c(l[0])}};return s.jsxs("div",{className:"flex flex-col items-center gap-2 transition-all duration-500 group/orb",children:[s.jsxs("button",{onClick:m,title:y,className:`
                        w-14 h-14 rounded-full flex items-center justify-center relative
                        bg-[var(--bg-glass)] backdrop-blur-xl border transition-all duration-500
                        shadow-[0_0_20px_rgba(0,0,0,0.5)] group-hover/orb:shadow-[0_0_30px_rgba(var(--accent-rgb),0.3)]
                        ${d?"cursor-pointer border-[var(--border-subtle)] hover:border-[var(--accent)]":"cursor-default border-dashed border-[var(--border-subtle)] opacity-20"}
                        active:scale-95
                    `,children:[d&&s.jsx("div",{className:"absolute -inset-1.5 rounded-full border border-[var(--accent)]/10 animate-pulse"}),s.jsx("div",{className:`transition-all duration-500 ${d?"text-[var(--text-soft)] group-hover/orb:text-[var(--accent)] group-hover/orb:scale-110":"text-[var(--text-dim)]"}`,children:f?s.jsx(f,{size:24}):""}),d&&s.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-[var(--accent)] rounded-full shadow-[0_0_10px_var(--accent)] border-2 border-[var(--bg-deep)]"})]}),s.jsxs("div",{className:"flex flex-col items-center opacity-40 group-hover/orb:opacity-100 transition-opacity duration-500",children:[s.jsx("span",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-[var(--accent)] text-center max-w-[70px] leading-tight truncate",children:y}),s.jsx("span",{className:"text-[6px] font-mono text-[var(--text-dim)] uppercase mt-0.5 tracking-tighter",children:E||"CORE_ANCHOR"})]})]})}if(u&&p)return s.jsxs("div",{className:"relative group/skeleton h-full flex flex-col",children:[l.length>1&&s.jsx("button",{onClick:()=>c(null),className:"absolute top-2 right-2 z-10 p-1.5 rounded-lg bg-[var(--bg-deep)]/80 border border-[var(--border-subtle)] text-[var(--text-dim)] hover:text-[var(--accent)] transition-all opacity-0 group-hover/skeleton:opacity-100",children:k.ChevronRight?s.jsx(k.ChevronRight,{className:"rotate-180",size:14}):""}),s.jsx(Un,{componentId:u,cosmosContext:t,phenotype:r,slotId:n})]});if(l.length>1&&!u)return s.jsxs("div",{className:"w-full h-full flex flex-col p-6 rounded-3xl border border-[var(--border-subtle)] bg-[var(--bg-secondary)]/20 backdrop-blur-sm animate-in fade-in duration-500",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-[var(--border-subtle)]/30",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] shadow-[0_0_8px_var(--accent)] animate-pulse"}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-vibrant)]",children:e.functional_name||"Artifact Collection"}),s.jsxs("span",{className:"ml-auto text-[9px] font-mono text-[var(--accent)]/60",children:[l.length," units detected"]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:l.map(y=>{const E=ee.getCanon(y);return s.jsxs("button",{onClick:()=>c(y),className:"flex items-center gap-4 p-4 rounded-2xl bg-[var(--bg-primary)]/40 border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all text-left group/item",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--bg-deep)] flex items-center justify-center text-xl group-hover/item:scale-110 transition-all",children:(E==null?void 0:E.ARCHETYPE)==="VAULT"?"":""}),s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s.jsx("span",{className:"text-xs font-bold text-[var(--text-soft)] group-hover/item:text-[var(--accent)] truncate transition-colors",children:(E==null?void 0:E.LABEL)||y}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-tighter opacity-60",children:(E==null?void 0:E.ARCHETYPE)||"CORE_UNIT"})]}),k.ChevronRight&&s.jsx(k.ChevronRight,{size:14,className:"text-[var(--text-dim)] opacity-0 group-hover/item:opacity-100 transform translate-x-1 group-hover/item:translate-x-0 transition-all"})]},y)})})]});const h=e.isAnchor&&l.length===0;return s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 rounded-3xl border border-dashed border-[var(--border-subtle)]/30 bg-[var(--bg-secondary)]/10 group hover:border-[var(--accent)]/30 transition-all",style:{minHeight:"160px"},children:[s.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors text-center",children:e.functional_name||"System Slot"}),h&&s.jsx("div",{className:"mt-2 text-[9px] font-mono text-red-500/30 uppercase tracking-[0.2em]",children:"Identity Not Found"}),s.jsx("div",{className:"mt-6 opacity-5 group-hover:opacity-20 transition-opacity",children:k.Sovereign?s.jsx(k.Sovereign,{size:32}):""})]})},os=({slotId:e,visibleSlots:t,cosmosContext:r,slots:n={}})=>{const{state:a}=te();if(!t.includes(e))return null;const o=n[e];let i=[];o&&(o.widgets&&Array.isArray(o.widgets)?i=o.widgets.map(l=>typeof l=="string"?ee.getCanon(l):l):i=[o]),i.length===0&&(i=ee.getRenderManifest().filter(u=>u.slot===e));const c=i.filter(l=>{if(!l)return!1;const u=l.functional_name||l.LABEL&&l.LABEL!=="UNIT_SKELETON",p=l.artefacts&&l.artefacts.length>0||l.isVirtual;return u||p});return c.length===0?s.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-40 border border-[var(--border-subtle)] border-dashed m-1 rounded-lg",children:s.jsxs("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:["Empty::",e]})}):s.jsx("div",{className:"w-full h-full overflow-y-auto scrollbar-hide flex flex-col",style:{gap:"var(--axiom-gutter-size)",padding:"var(--axiom-edge-margin)"},children:c.map(l=>{var u;return s.jsx("div",{className:"w-full axiom-slot shrink-0 animate-fade-in flex justify-center","data-omd":l.omd,"data-cosmos-id":(u=r==null?void 0:r.identity)==null?void 0:u.id,children:s.jsx(Lm,{law:l,slotId:e,perspective:"STANDARD",cosmosContext:r,phenotype:a.phenotype})},l.omd)})})},Dm=Object.freeze({PHYSICS:{CABLE_TENSION:.5,CABLE_WIDTH:2,GRID_SNAP:20,SEMANTIC_GRAVITY:.5},GEOMETRY:{NODE_WIDTH:256,HEADER_HEIGHT:40,ROW_HEIGHT:30,PORT_RADIUS:6,PORT_MAPPING:{INPUT:{x_offset:0,anchor_type:"left-center"},OUTPUT:{x_offset:256,anchor_type:"right-center"}}}}),km=({nodes:e=[],edges:t=[]})=>{var T,O;const{state:r,execute:n}=te(),[a,o]=R.useState({x:0,y:0,zoom:1}),[i,c]=R.useState(!1),[l,u]=R.useState({x:0,y:0}),p=R.useRef(null),h=R.useRef(new Set),[,x]=R.useState(0);R.useEffect(()=>{if(e.some(B=>!h.current.has(B.id))){const B=setTimeout(()=>x(D=>D+1),500);return()=>clearTimeout(B)}},[e]);const v=w=>{if(w.ctrlKey||w.metaKey){w.preventDefault();const D=Math.min(Math.max(a.zoom-w.deltaY*.001,.1),5);o(P=>({...P,zoom:D}))}else o(B=>({...B,x:B.x-w.deltaX,y:B.y-w.deltaY}))},y=w=>{w.target===p.current&&(c(!0),u({x:w.clientX,y:w.clientY}))},E=w=>{if(i){const B=w.clientX-l.x,D=w.clientY-l.y;o(P=>({...P,x:P.x+B,y:P.y+D})),u({x:w.clientX,y:w.clientY})}else if(r.phenotype.ui.pendingConnection){const B=p.current.getBoundingClientRect(),D=(w.clientX-B.left-a.x-B.width/2)/a.zoom,P=(w.clientY-B.top-a.y-B.height/2)/a.zoom;n("SET_PENDING_CONNECTION",{...r.phenotype.ui.pendingConnection,currentX:D,currentY:P})}},A=()=>{c(!1),r.phenotype.ui.pendingConnection&&setTimeout(()=>n("CLEAR_PENDING_CONNECTION"),100)},f=(w,B)=>{const D=(w.ARCHETYPE||w.archetype||"").toUpperCase();let P=0;(D.includes("VAULT")||D.includes("ADAPTER"))&&(P=-450),D.includes("SLOT")&&(P=450);const I=B.filter(L=>{const M=(L.ARCHETYPE||L.archetype||"").toUpperCase();return P===-450?M.includes("VAULT")||M.includes("ADAPTER"):P===450?M.includes("SLOT"):!M.includes("VAULT")&&!M.includes("ADAPTER")&&!M.includes("SLOT")}),b=I.findIndex(L=>L.id===w.id);let _=0;D.includes("VAULT")&&(_=-100),D.includes("ADAPTER")&&(_=100);const U=P+_+(b%2===0?0:40),j=(b-(I.length-1)/2)*380;return{x:U,y:j}},d=()=>{const w=r.phenotype.ui.pendingConnection;if(!w)return null;const B=e.find(P=>P.id===w.sourceNodeId);if(!B)return null;const D=ee.getCompatibleNodes(B.ARCHETYPE);return D.length===0?null:s.jsxs("div",{className:"absolute z-[1000] flex flex-col gap-2 p-3 bg-[var(--bg-glass)] backdrop-blur-xl border border-[var(--accent)]/30 rounded-2xl shadow-2xl pointer-events-auto animate-in fade-in zoom-in-90 duration-300",style:{left:w.currentX+100/a.zoom,top:w.currentY-D.length*20/a.zoom,transform:`scale(${1/a.zoom})`,transformOrigin:"left center"},children:[s.jsxs("header",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse"}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--accent)]",children:"Sugerencias Axiomticas"})]}),D.slice(0,4).map((P,I)=>s.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-xl bg-[var(--bg-primary)] hover:bg-[var(--accent)]/10 border border-[var(--border-subtle)] hover:border-[var(--accent)]/30 transition-all text-left group",onMouseDown:b=>{b.stopPropagation(),n("ADD_ARTIFACT_REQUEST",{artifact:P}),setTimeout(()=>{const _=r.phenotype.artifacts,U=_[_.length-1];U&&n("ADD_RELATIONSHIP",{source:w.sourceNodeId,target:U.id,sourcePort:w.portId,targetPort:Object.keys(U.CAPABILITIES||{})[0]||"input"})},100)},children:[s.jsx("span",{className:"text-xl",children:""}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[11px] font-bold text-[var(--text-soft)] group-hover:text-white uppercase truncate max-w-[120px]",children:P.LABEL||P.label}),s.jsxs("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase",children:["Manifestar ",P.ARCHETYPE]})]})]},I))]})},m=()=>{const w=r.phenotype.ui.pendingConnection;if(!w)return null;const B=e.find(M=>M.id===w.sourceNodeId);if(!B)return null;const{x:D,y:P}=f(B,e),I=D+(w.portOffsetX||0),b=P+(w.portOffsetY||0),_=w.currentX,U=w.currentY,j=Math.abs(I-_)*.5,L=`M ${I} ${b} C ${I+j} ${b}, ${_-j} ${U}, ${_} ${U}`;return s.jsx("path",{d:L,fill:"none",stroke:"var(--accent)",strokeWidth:"2",strokeDasharray:"5 5",strokeOpacity:"0.6",className:"animate-flow"})},S=()=>{const w=r.phenotype.activePulses||[];return t.filter(B=>!B._isDeleted).map((B,D)=>{const P=e.find(Fe=>Fe.id===B.source),I=e.find(Fe=>Fe.id===B.target);if(!P||!I)return null;const b=w.includes(B.id),{x:_,y:U}=f(P,e),{x:j,y:L}=f(I,e),{NODE_WIDTH:M}=Dm.GEOMETRY,$=_+M/2,G=U,X=j-M/2,Z=L,ie=Math.abs($-X)*.5,Oe=`M ${$} ${G} C ${$+ie} ${G}, ${X-ie} ${Z}, ${X} ${Z}`;return s.jsxs("g",{children:[s.jsx("path",{d:Oe,fill:"none",stroke:b?"var(--accent-glow)":"var(--accent)",strokeWidth:b?"3":"2",strokeOpacity:b?"0.8":"0.3",className:b?"glow-pulse":"animate-pulse"}),s.jsx("path",{d:Oe,fill:"none",stroke:"url(#cableGradient)",strokeWidth:b?"2.5":"1.5",strokeDasharray:"10 5",className:b?"animate-flow-fast":"animate-flow",style:{filter:b?"drop-shadow(0 0 5px var(--accent-glow))":"none"}})]},B.id||D)})},g=w=>{w.preventDefault(),w.dataTransfer.dropEffect="copy"},C=w=>{w.preventDefault();const B=w.dataTransfer.getData("indra/artifact");if(B)try{const D=JSON.parse(B),P=p.current.getBoundingClientRect(),I=(w.clientX-P.left-P.width/2)/a.zoom-a.x,b=(w.clientY-P.top-P.height/2)/a.zoom-a.y;n("ADD_ARTIFACT_REQUEST",{artifact:D,position:{x:I,y:b}})}catch(D){console.error("[GraphEngine] Drop Error:",D)}},N=((T=r.phenotype.activeLayout)==null?void 0:T.id)&&((O=r.phenotype.cosmosIdentity)==null?void 0:O.id)&&r.phenotype.activeLayout.id!==r.phenotype.cosmosIdentity.id;return s.jsxs("div",{ref:p,className:`w-full h-full relative overflow-hidden bg-dot-pattern transition-all duration-700 ${N?"blur-md scale-95 opacity-30 grayscale":"blur-0 scale-100"}`,onWheel:v,onMouseDown:y,onMouseMove:E,onMouseUp:A,onMouseLeave:A,onDragOver:g,onDrop:C,style:{backgroundColor:"var(--bg-deep)",backgroundImage:"radial-gradient(var(--border-subtle) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[s.jsxs("div",{className:"absolute transform-gpu transition-transform duration-75 ease-out origin-center",style:{transform:`translate(${a.x}px, ${a.y}px) scale(${a.zoom})`,left:"50%",top:"50%",width:0,height:0},children:[s.jsxs("svg",{className:"absolute overflow-visible",style:{left:0,top:0},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"cableGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[s.jsx("stop",{offset:"0%",stopColor:"var(--accent)",stopOpacity:"0"}),s.jsx("stop",{offset:"50%",stopColor:"var(--accent)",stopOpacity:"1"}),s.jsx("stop",{offset:"100%",stopColor:"var(--accent)",stopOpacity:"0"})]})}),S(),m()]}),d(),e.filter(w=>!w._isDeleted).map(w=>{const{x:B,y:D}=f(w,e),P=!h.current.has(w.id);return P&&h.current.add(w.id),s.jsx("div",{className:`absolute cursor-pointer group ${P?"animate-manifest z-[500]":""}`,onDoubleClick:I=>{I.stopPropagation(),n("SELECT_ARTIFACT",w)},style:{transform:P?"none":`translate(${B}px, ${D}px) translate(-50%, -50%)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",left:P?`${B}px`:"auto",top:P?`${D}px`:"auto"},children:s.jsx(Un,{componentId:w.id,data:{...w,x:B,y:D},perspective:"NODE",schemaId:w.schemaId})},w.id)}),!N&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-[-500px] left-[-450px] transform -translate-x-1/2 -translate-y-full opacity-20 pointer-events-none",children:s.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"ORGENES"})}),s.jsx("div",{className:"absolute top-[-500px] left-[0px] transform -translate-x-1/2 -translate-y-full opacity-20 pointer-events-none",children:s.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"PROCESOS"})}),s.jsx("div",{className:"absolute top-[-500px] left-[450px] transform -translate-x-1/2 -translate-y-full opacity-20 pointer-events-none",children:s.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"RESULTADOS"})})]})]}),!N&&s.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col items-end gap-1 text-[9px] font-mono text-[var(--text-dim)] pointer-events-none",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse"}),s.jsx("span",{children:"DIAGRAMA_FRACTAL: ACTIVO"})]}),s.jsxs("span",{children:["ZOOM: ",Math.round(a.zoom*100),"% | MODO_MAPA: ON"]})]})]})},Pm=()=>{var u;const{state:e,execute:t}=te(),r=e.phenotype.activeLayout,n=e.phenotype.ui.activeViewId||"default",{view:a,slots:o,layoutSchema:i,cosmosContext:c}=R.useMemo(()=>{if(!r)return{view:{visible_slots:["CANVAS_MAIN","TERMINAL_STATUS","FLOAT_OVERLAY"],id:"rescue_view"},slots:{CANVAS_MAIN:compiler.compileSlot({id:"SLOT_NODE"})},layoutSchema:{VIEW_MODE:"DASHBOARD"},cosmosContext:{identity:e.phenotype.cosmosIdentity||{id:"dev_scaffold"}}};const p={},h=r.slots||r.SLOTS||{};Object.keys(h).forEach(y=>{const E=h[y];p[y]=compiler.compileSlot(E,{slotKey:y})}),!p.CANVAS_MAIN&&!Object.values(p).some(y=>y.id==="SLOT_NODE")&&(p.CANVAS_MAIN=compiler.compileSlot({id:"SLOT_NODE"}));const x=r.views||[];return{view:x.find(y=>y.id===n)||x[0]||{id:"default",visible_slots:Object.keys(p)},slots:p,layoutSchema:r.config||{VIEW_MODE:"DASHBOARD"},cosmosContext:{identity:e.phenotype.cosmosIdentity,layout:r,flow:e.phenotype.activeFlow}}},[r,n,e.sovereignty,e.phenotype.cosmosIdentity]),{visible_slots:l=[]}=a;return s.jsxs("main",{className:"w-full h-full flex flex-col relative bg-transparent overflow-hidden",children:[s.jsx("section",{className:"flex-1 w-full relative flex overflow-hidden",children:s.jsx("div",{className:"flex-1 relative h-full",children:e.phenotype.cosmosIdentity&&r&&r.id!==e.phenotype.cosmosIdentity.id?s.jsx("div",{className:"w-full h-full flex flex-row animate-in fade-in duration-500 relative",children:s.jsx("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:s.jsx(Un,{componentId:r.id,data:r,perspective:e.sovereignty.mode==="DEV_LAB"?((u=e.phenotype.devLab)==null?void 0:u.perspective)||"VAULT":"BRIDGE"})})}):i.VIEW_MODE==="GRAPH"?s.jsx(km,{nodes:(e.phenotype.artifacts||[]).filter(p=>!p._isDeleted),edges:(e.phenotype.relationships||[]).filter(p=>!p._isDeleted)}):s.jsx(os,{slotId:"CANVAS_MAIN",visibleSlots:l,cosmosContext:c,slots:o})})}),l.includes("TERMINAL_STATUS")&&s.jsx("footer",{className:"h-10 shrink-0 relative z-40",children:s.jsx(os,{slotId:"TERMINAL_STATUS",visibleSlots:l,cosmosContext:c,slots:o})}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none z-[100]",children:[s.jsx(os,{slotId:"FLOAT_OVERLAY",visibleSlots:l,cosmosContext:c,slots:o}),l.includes("AUTH_OVERLAY")&&s.jsx(os,{slotId:"AUTH_OVERLAY",visibleSlots:l,cosmosContext:c,slots:o})]})]})},en=40,Mm=(e="top")=>{const[t,r]=R.useState({x:window.innerWidth/2,y:en}),[n,a]=R.useState(e),[o,i]=R.useState(!1),c=R.useRef({startX:0,startY:0,initialX:0,initialY:0,velocity:{x:0,y:0},lastTime:0}),l=()=>{const h=window.innerWidth,x=window.innerHeight,v=h/2,y=x/2;return{top:{x:v,y:en,label:"top"},bottom:{x:v,y:x-en,label:"bottom"},left:{x:en,y,label:"left"},right:{x:h-en,y,label:"right"}}},u=(h,x)=>{const v=l();let y=1/0,E=v.top;Object.values(v).forEach(A=>{const f=h-A.x,d=x-A.y,m=Math.sqrt(f*f+d*d);m<y&&(y=m,E=A)}),r({x:E.x,y:E.y}),a(E.label)},p=h=>{i(!0),c.current={startX:h.clientX,startY:h.clientY,initialX:t.x,initialY:t.y,velocity:{x:0,y:0},lastTime:Date.now()},h.stopPropagation()};return R.useEffect(()=>{const h=v=>{if(!o)return;const y=v.clientX-c.current.startX,E=v.clientY-c.current.startY;r({x:c.current.initialX+y,y:c.current.initialY+E})},x=()=>{o&&(i(!1),u(t.x,t.y))};return o&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",x)),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",x)}},[o,t]),R.useEffect(()=>{const h=()=>u(t.x,t.y);return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[n]),{position:t,dockSide:n,isDragging:o,startDrag:p}},Um=({onSelect:e,onClose:t})=>{var x;const{state:r}=te(),[n,a]=R.useState(""),[o,i]=R.useState([]),c=((x=r.phenotype.artifacts)==null?void 0:x.length)||0;R.useEffect(()=>{ee.isCompiled||ee.compile();const y=ee.getRenderManifest().map(E=>{if(E.visibility==="HIDDEN"||E.VISIBILITY==="HIDDEN")return null;const A=(E.DOMAIN||E.domain||"SYSTEM").toUpperCase(),f=(E.ARCHETYPE||E.archetype||"NODE").toUpperCase(),d=f.includes("VAULT")||f.includes("ADAPTER")||f.includes("TRIGGER"),m=c===0&&!d;if(f.includes("DESIGN_TOOL")||f.includes("STYLING"))return null;const g=["ADAPTER","VAULT","ORCHESTRATOR","AGENT","WIDGET","DATAGRID","SERVICE","TRANSFORM","GRID","COMPUTE","NODE","SLOT","SLOT_NODE","UTILITY","STYLING"].some(O=>f.includes(O)),C=f.includes("ADAPTER")||f.includes("VAULT")||f.includes("AGENT");return["SYSTEM_CORE","SYSTEM_INFRA","DATA_ENGINE","LOGIC","TEMPORAL"].includes(A)&&!C||!g&&!C||!E.LABEL&&!E.label&&!E.functional_name?null:{...E,isLocked:m}}).filter(Boolean);y.sort((E,A)=>{const f=(E.LABEL||E.label||"").toUpperCase(),d=(A.LABEL||A.label||"").toUpperCase();return f.localeCompare(d)}),i(y)},[c]);const l=v=>{const y=(v.ARCHETYPE||v.archetype||"").toUpperCase(),E=(v.DOMAIN||v.domain||"").toUpperCase();return y.includes("VAULT")||E.includes("KNOWLEDGE")||E.includes("DATA")?"KNOWLEDGE_VAULTS":E.includes("INTELLIGENCE")||E.includes("COGNITIVE")||y.includes("AGENT")?"COGNITIVE_ENGINES":y.includes("ADAPTER")||E.includes("COMMUNICATION")||E.includes("SPATIAL")||E.includes("MEDIA")?"BRIDGES_AND_ADAPTERS":y.includes("SLOT")||y.includes("REALITY")||y.includes("UTILITY")||y.includes("VISUAL_UTILITY")?"VISUAL_UTILITIES":y.includes("WIDGET")||y.includes("STYLING")||y.includes("MATH")?"ATOMIC_WIDGETS":y.includes("ORCHESTRATOR")||y.includes("TRANSFORM")||y.includes("GRID")?"ORCHESTRATION_UNITS":"UTILITIES"},u=[{id:"COGNITIVE_ENGINES",label:"Cerebros y Motores Cognitivos",icon:"",desc:"Sistemas de razonamiento y procesamiento inteligente."},{id:"KNOWLEDGE_VAULTS",label:"Bvedas de Conocimiento",icon:"",desc:"Repositorios de archivos, bases de datos y memoria."},{id:"BRIDGES_AND_ADAPTERS",label:"Puentes y Herramientas",icon:"",desc:"Conectores con el mundo exterior y herramientas operativas."},{id:"VISOR_REALITY",label:"Proyectores de Realidad",icon:"",desc:"Motores para visualizar datos complejos (3D, Tiempo, Mapas)."},{id:"VISUAL_UTILITIES",label:"Herramientas de Frontend (Apps)",icon:"",desc:"Aplicaciones completas para manipular datos."},{id:"ATOMIC_WIDGETS",label:"Controles y tomos (Widgets)",icon:"",desc:"Componentes pequeos para incrustar en otras herramientas."},{id:"ORCHESTRATION_UNITS",label:"Unidades de Orquestacin",icon:"",desc:"Sistemas de control de flujos y estructuras complejas."},{id:"UTILITIES",label:"Utilidades Diversas",icon:"",desc:"Herramientas de soporte y servicios auxiliares."}],p=R.useMemo(()=>{const v=n.toLowerCase();return o.filter(y=>{const E=(y.LABEL||y.label||y.functional_name||"").toLowerCase(),A=(y.ARCHETYPE||y.archetype||"").toLowerCase(),f=(y.DOMAIN||y.domain||"").toLowerCase();return E.includes(v)||A.includes(v)||f.includes(v)})},[n,o]),h=R.useMemo(()=>{const v={};return p.forEach(y=>{const E=l(y);v[E]||(v[E]=[]),v[E].push(y)}),v},[p]);return s.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/70 backdrop-blur-md animate-in fade-in duration-300",onClick:t,children:s.jsxs("div",{className:"w-[800px] max-h-[85vh] bg-[var(--bg-deep)] border border-[var(--border-vibrant)]/30 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"p-8 border-b border-[var(--border-subtle)] bg-gradient-to-b from-[var(--bg-secondary)]/50 to-transparent",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-[var(--accent)]/10 rounded-2xl border border-[var(--accent)]/20 shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)]",children:s.jsx(k.Search,{size:24,className:"text-[var(--accent)]"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("h2",{className:"text-2xl font-black text-[var(--text-vibrant)] tracking-tighter uppercase italic",children:["Manifest ",s.jsx("span",{className:"text-[var(--accent)]",children:"Protocol"})]}),s.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)] tracking-[0.3em] uppercase opacity-70",children:"Reality_Synchronization_Interface // L1_GATE"})]})]}),s.jsx("button",{onClick:t,className:"text-[var(--text-dim)] hover:text-[var(--accent)] transition-all p-3 hover:bg-[var(--accent)]/5 rounded-full border border-transparent hover:border-[var(--accent)]/20",children:s.jsx(k.Close,{size:24})})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:"text",className:"w-full bg-[var(--bg-primary)]/80 border border-[var(--border-subtle)] rounded-2xl py-4 pl-12 pr-6 text-base text-[var(--text-vibrant)] placeholder:text-[var(--text-dim)] focus:border-[var(--accent)] focus:ring-4 focus:ring-[var(--accent)]/10 outline-none transition-all shadow-inner font-medium",placeholder:"Identify artifact by frequency name, archetype or domain...",value:n,onChange:v=>a(v.target.value),autoFocus:!0}),s.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:s.jsx(k.Search,{size:18,className:"text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-dot-pattern scrollbar-thin scrollbar-thumb-[var(--border-subtle)]",children:[u.map(v=>{const y=h[v.id];return!y||y.length===0?null:s.jsxs("div",{className:"mb-10 last:mb-0",children:[s.jsxs("header",{className:"flex flex-col gap-1 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-subtle)] flex items-center justify-center text-lg shadow-sm",children:v.icon}),s.jsx("h3",{className:"text-xs font-black text-[var(--text-vibrant)] uppercase tracking-[0.25em]",children:v.label}),s.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-[var(--border-subtle)] to-transparent ml-2 opacity-50"}),s.jsxs("span",{className:"text-[10px] font-mono text-[var(--accent)] px-2 py-0.5 rounded bg-[var(--accent)]/5 border border-[var(--accent)]/20",children:[y.length," UNITS"]})]}),s.jsx("p",{className:"text-[10px] text-[var(--text-dim)] font-medium pl-11 opacity-60 italic",children:v.desc})]}),s.jsx("div",{className:"grid grid-cols-2 gap-4 pl-11",children:y.map((E,A)=>s.jsxs("button",{onClick:()=>!E.isLocked&&e(E),className:`flex items-center gap-4 p-5 rounded-2xl border transition-all group text-left relative overflow-hidden ${E.isLocked?"bg-black/20 border-white/5 cursor-not-allowed opacity-50":"bg-[var(--bg-secondary)]/30 border-[var(--border-subtle)] hover:bg-[var(--bg-secondary)]/80 hover:border-[var(--accent)]/50 hover:shadow-[0_8px_30px_rgba(0,0,0,0.2)]"}`,children:[!E.isLocked&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--accent)]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:`w-12 h-12 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] flex items-center justify-center transition-all shadow-sm ${E.isLocked?"grayscale":"group-hover:border-[var(--accent)] group-hover:text-[var(--accent)] group-hover:scale-110"} relative z-10`,children:s.jsx("span",{className:`text-2xl filter drop-shadow-md ${!E.isLocked&&"group-hover:drop-shadow-[0_0_8px_rgba(var(--accent-rgb),0.5)]"}`,children:E.isLocked?"":v.icon})}),s.jsxs("div",{className:"relative z-10 flex-1 min-w-0",children:[s.jsx("h4",{className:`font-bold text-sm mb-1 transition-colors truncate ${E.isLocked?"text-white/20":"text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)]"}`,children:E.LABEL||E.label||E.functional_name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[9px] font-black px-2 py-0.5 rounded bg-[var(--bg-deep)] border border-[var(--border-subtle)] tracking-tighter uppercase transition-colors ${E.isLocked?"text-white/10":"text-[var(--text-dim)] group-hover:text-[var(--accent)]"}`,children:E.isLocked?"SOCKED":(E.ARCHETYPE||E.archetype||"UNIT").split("_")[0]}),s.jsx("div",{className:"w-1 h-1 rounded-full bg-[var(--border-subtle)]"}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-40 uppercase truncate",children:E.isLocked?"REQUIRES_DATA_SEED":E.DOMAIN||E.domain||"SYSTEM"})]})]})]},`${v.id}-${A}`))})]},v.id)}),p.length===0&&s.jsxs("div",{className:"py-24 text-center flex flex-col items-center justify-center gap-6 animate-in zoom-in-90 duration-300",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-[var(--bg-secondary)] flex items-center justify-center text-5xl opacity-20 shadow-inner",children:""}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"font-black text-sm text-[var(--text-dim)] tracking-widest uppercase",children:"SIGNAL_LOSS // NO_RESULTS_FOUND"}),s.jsxs("div",{className:"font-mono text-[10px] text-[var(--text-dim)] opacity-50 italic",children:['Frequency "',n,'" does not match any known manifest circuit.']})]})]})]}),s.jsxs("div",{className:"px-8 py-5 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)]/50 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] animate-pulse"}),s.jsxs("span",{className:"text-[10px] font-mono text-[var(--text-dim)] uppercase tracking-wider",children:["L0_ONTOLOGY: ",o.length]})]}),s.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] opacity-50"}),s.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)] uppercase tracking-wider",children:"ACTIVE_SIEVE: SOVEREIGN_V3"})]}),s.jsxs("div",{className:"flex items-center gap-2 font-black text-[9px] tracking-[0.3em] text-[var(--accent)] opacity-80 uppercase",children:[s.jsx("span",{children:"Indra_OS"}),s.jsx("span",{className:"text-[var(--text-dim)] opacity-30",children:"//"}),s.jsx("span",{children:"Manifest_v8.1"})]})]})]})})},Fm=(e,t,r,n,a)=>{const o=gc(e,t,r,a),i=gc(e,t,r,n),c=a-n<=180?"0":"1";return["M",o.x,o.y,"A",r,r,0,c,0,i.x,i.y].join(" ")},gc=(e,t,r,n)=>{const a=(n-90)*Math.PI/180;return{x:e+r*Math.cos(a),y:t+r*Math.sin(a)}},Bm=({syncStatus:e="SYNCED",isOpen:t})=>{const r={SYNCED:{color:"#60a5fa",glow:"rgba(96, 165, 250, 0.6)"},RETRY:{color:"#fbbf24",glow:"rgba(251, 191, 36, 0.6)"},OFFLINE:{color:"#ef4444",glow:"rgba(239, 68, 68, 0.8)"}},n=r[e]||r.SYNCED;return s.jsxs("div",{className:"sphere-core","data-state":e,style:{"--core-color":n.color,"--glow-color":n.glow},children:[s.jsx("div",{className:"sphere-corona sphere-corona-outer"}),s.jsx("div",{className:"sphere-corona sphere-corona-middle"}),s.jsx("div",{className:"sphere-corona sphere-corona-inner"}),s.jsx("div",{className:"sphere-nucleus"}),[...Array(6)].map((a,o)=>s.jsx("div",{className:"sphere-particle",style:{"--particle-size":`${Math.random()*2+1}px`,"--particle-color":n.color,"--particle-opacity":Math.random()*.5+.3,transform:`rotate(${o*60}deg)`},children:s.jsx("div",{className:"particle-dot",style:{animation:`orbit ${Math.random()*4+4}s linear infinite`,animationDelay:`${Math.random()*-8}s`}})},o))]})},zm=({manualLayer:e,setManualLayer:t})=>{const{state:r,execute:n}=te(),a=H(P=>P.session),[o,i]=R.useState(!1),[c,l]=R.useState(!1),[u,p]=R.useState([]),[h,x]=R.useState(""),[v,y]=R.useState(""),{position:E,dockSide:A,isDragging:f,startDrag:d}=Mm("bottom"),m=!!r.phenotype.cosmosIdentity,S=e==="PORTAL"?"PORTAL":m?"COSMOS":"DEFAULT",g=[],N=(()=>{var P;if(e==="DEV_LAB"){const I=((P=r.phenotype.devLab)==null?void 0:P.perspective)||"BRIDGE";return[{id:"PERSPECTIVE_BRIDGE",label:"Vista Bridge",icon:k.Eye,isActive:I==="BRIDGE",action:()=>n("SET_LAB_PERSPECTIVE","BRIDGE")},{id:"PERSPECTIVE_WIDGET",label:"Vista Widget",icon:k.SidebarLeft,isActive:I==="WIDGET",action:()=>n("SET_LAB_PERSPECTIVE","WIDGET")},{id:"PERSPECTIVE_NODE",label:"Vista Nodo",icon:k.Terminal,isActive:I==="NODE",action:()=>n("SET_LAB_PERSPECTIVE","NODE")},{id:"SELECT_ADAPTER",label:"Seleccionar Adaptador",icon:k.Search,action:()=>l(!0)},{id:"TEST_SUITE",label:"Mdulo de Caos",icon:k.Activity,action:()=>n("TOGGLE_UI_PANEL",{panel:"chaos"})},{id:"NUCLEAR_PURGE",label:"Purgado Nuclear",icon:k.Sync,action:()=>{confirm(` PURGADO NUCLEAR

Esto borrar toda la memoria local (Genotipo L0) y forzar una descarga completa del Servidor.

Proceder?`)&&n("NUCLEAR_PURGE")}}]}return S==="COSMOS"?[{id:"ADD_ARTIFACT",label:"Manifestar Artefacto",icon:k.Plus,action:()=>l(!0)},{id:"TOGGLE_VISUALIZATION",label:"Modo de Realidad",icon:k.Eye,action:()=>n("TOGGLE_VISUALIZATION_MODE")},{id:"AUTO_LAYOUT",label:"Auto Agrupamiento",icon:k.List,action:()=>n("APPLY_AUTO_LAYOUT")}]:[]})(),T=P=>{var b;if(e==="DEV_LAB"){console.log("[SovereignSphere] DevLab Target Selected:",P),n("SET_LAB_TARGET",P),l(!1),i(!1);return}const I=(b=r.phenotype.cosmosIdentity)==null?void 0:b.id;console.log("[SovereignSphere] Manifesting:",P),n("ADD_ARTIFACT_REQUEST",{cosmosId:I,artifact:{...P,type:"MODULE",domain:P.DOMAIN},schemaId:P.technical_id}),l(!1),i(!1)},O=(P,I)=>{P.preventDefault(),P.stopPropagation();const b=P.deltaY>0?10:-10;B(_=>({..._,[I]:_[I]+b}))},[w,B]=R.useState({outer:0,inner:0}),D=(P="outer",I=0)=>{const b=P==="inner",_=b?32:40,U=b?60:110,M=Math.max(_/(2*Math.PI*U)*360,15)*Math.max(I-1,0);let $=180;M>180&&($=M>270?360:270);const G={top:{center:90,span:$},bottom:{center:270,span:$},left:{center:0,span:$},right:{center:180,span:$}},X=G[A]||G.top,ie=Math.max($-(b?15:0)*2,90),Oe=X.center-ie/2,Fe=X.center+ie/2;return{start:Oe,end:Fe,labelPos:A==="top"?"-bottom-8":A==="bottom"?"-top-8":A==="left"?"-right-24":"-left-24",arcSpan:ie,canScroll:M>ie,rotation:P==="outer"?w.outer:w.inner}};return s.jsxs(s.Fragment,{children:[c&&(e==="DEV_LAB"?s.jsx(kd,{onSelect:T,onClose:()=>l(!1)}):s.jsx(Um,{onSelect:T,onClose:()=>l(!1)})),s.jsxs("div",{className:"fixed z-[300] flex flex-col items-center gap-4 pointer-events-none transition-none",style:{left:E.x,top:E.y,transform:"translate(-50%, -50%)"},children:[s.jsxs("button",{onMouseDown:d,onClick:P=>{f||i(!o)},className:`
                        w-16 h-16 rounded-full
                        flex items-center justify-center cursor-pointer pointer-events-auto
                        transition-all duration-700 ease-[cubic-bezier(0.16,1,0.3,1)]
                        glass-sphere-button group relative
                        ${o?"scale-110":"hover:scale-105 active:scale-95"}
                        ${f?"cursor-grabbing scale-105":"cursor-grab"}
                    `,style:{zIndex:60},children:[s.jsx(Bm,{syncStatus:a==null?void 0:a.syncStatus,isOpen:o}),s.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-full pb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:s.jsxs("div",{className:"glass px-2 py-1 rounded border border-[var(--accent)]/30 backdrop-blur-md",children:[s.jsx("p",{className:"text-[7px] font-black uppercase tracking-widest text-[var(--accent)] whitespace-nowrap",children:(a==null?void 0:a.syncStatus)==="SYNCED"?"Sincronizado":(a==null?void 0:a.syncStatus)==="RETRY"?`Reintentando (${a==null?void 0:a.failedSyncAttempts})`:"Arquitectura Offline"}),(a==null?void 0:a.lastSyncTimestamp)&&s.jsxs("p",{className:"text-[6px] text-white/40 mt-0.5 whitespace-nowrap",children:["Last: ",new Date(a.lastSyncTimestamp).toLocaleTimeString()]})]})})]}),s.jsxs("div",{className:`absolute top-1/2 left-1/2 w-0 h-0 flex items-center justify-center transition-all duration-500 ${o?"opacity-100":"opacity-0 pointer-events-none"}`,onWheel:P=>{const I=D("outer",g.length),b=D("inner",N.length);(I.canScroll||b.canScroll)&&O(P,I.canScroll?"outer":"inner")},children:[(()=>{const P=D("outer",g.length),I=D("inner",N.length);return(P.canScroll||I.canScroll)&&o?s.jsxs("div",{className:"absolute -bottom-24 left-1/2 -translate-x-1/2 flex items-center gap-2 glass px-3 py-1.5 rounded-full border border-[var(--accent)]/20 animate-pulse pointer-events-none",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)]"}),s.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] uppercase tracking-wider",children:"Scroll to rotate"})]}):null})(),(()=>{D("outer",g.length);const P=D("inner",N.length);return s.jsx(s.Fragment,{children:N.length>0&&s.jsx("svg",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none",width:"140",height:"140",style:{opacity:o?.2:0,transition:"opacity 500ms"},children:s.jsx("path",{d:Fm(70,70,60,P.start+P.rotation,P.end+P.rotation),fill:"none",stroke:"var(--accent)",strokeWidth:"1",strokeDasharray:"2 2"})})})})(),N.length>0&&N.map((P,I)=>{const b=D("inner",N.length),_=N.length,U=_>1?b.end-b.start:0,j=_>1?b.start:(b.start+b.end)/2,L=_>1?U/(_-1):0,$=(j+L*I+b.rotation)*Math.PI/180,G=Math.round(60*Math.cos($)),X=Math.round(60*Math.sin($)),Z=P.isActive||!1;return s.jsxs("button",{onClick:ie=>{ie.stopPropagation(),console.log("[Sphere] Action:",P.id),P.action(),i(!1)},className:`absolute w-8 h-8 rounded-full flex items-center justify-center border transition-all duration-300 z-50 shadow-lg group/inner pointer-events-auto ${Z?"bg-[var(--accent)] text-black border-[var(--accent)] shadow-[0_0_15px_var(--accent)]":"glass border-[var(--accent)]/30 hover:bg-[var(--accent)] hover:text-black"}`,style:{transform:o?`translate(${G}px, ${X}px)`:"translate(0px, 0px)",opacity:o?1:0,transitionDelay:`${I*30+100}ms`},children:[s.jsx(P.icon,{size:12}),s.jsx("div",{className:`absolute pointer-events-none opacity-0 group-hover/inner:opacity-100 transition-opacity whitespace-nowrap bg-black/90 px-2 py-1 rounded text-[var(--accent)] border border-[var(--accent)]/20 backdrop-blur-md z-[100] ${b.labelPos}`,children:s.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em]",children:P.label})})]},P.id)})]})]})]})},Vm=({onClose:e})=>{const{state:t,execute:r}=te(),[n,a]=R.useState(""),[o,i]=R.useState(Mt.CORE_URL||""),[c,l]=R.useState(!1),[u,p]=R.useState(null),h=async()=>{if(!(!n||c)){l(!0),p({type:"info",msg:"Sincronizando con el Core..."});try{if(o!==Mt.CORE_URL){localStorage.setItem("INDRA_OVERRIDE_URL",o);const{default:v}=await $r(async()=>{const{default:y}=await Promise.resolve().then(()=>Rd);return{default:y}},void 0);v.init(o,localStorage.getItem("INDRA_SESSION_TOKEN"))}const x=await se.call("public","setSystemToken",{newToken:n});x&&x.success?(localStorage.setItem("INDRA_SESSION_TOKEN",n),p({type:"success",msg:" Token Maestro actualizado exitosamente."}),r("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" Token del Sistema rotado con xito.",type:"SUCCESS"}),setTimeout(()=>{e(),window.location.reload()},1500)):p({type:"error",msg:" El Core rechaz la actualizacin."})}catch(x){p({type:"error",msg:` Error: ${x.message}`})}finally{l(!1)}}};return s.jsx("div",{className:"fixed inset-0 z-[500] flex items-center justify-center bg-black/60 dark:bg-black/80 backdrop-blur-md animate-fade-in p-6",children:s.jsxs("div",{className:"w-full max-w-md glass border border-[var(--border-subtle)] rounded-[2.5rem] p-8 shadow-2xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-30"}),s.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2 text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-colors",children:s.jsx(k.Close,{size:18})}),s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--accent)]/10 flex items-center justify-center text-[var(--accent)] border border-[var(--accent)]/20 shadow-[0_0_20px_rgba(var(--accent-rgb),0.1)]",children:s.jsx(k.Lock,{size:20})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-black tracking-widest uppercase",children:"Bveda de Seguridad"}),s.jsx("p",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-tight",children:"Configuracin del Token Maestro"})]})]}),u&&s.jsx("div",{className:`p-4 rounded-xl text-[10px] font-mono leading-relaxed border ${u.type==="success"?"bg-[var(--success)]/10 border-[var(--success)]/20 text-[var(--success)]":u.type==="error"?"bg-[var(--error-surface)] border-[var(--error)]/20 text-[var(--error)]":"bg-[var(--accent)]/10 border-[var(--accent)]/20 text-[var(--accent)]"}`,children:u.msg}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-widest ml-1",children:"URL de Conexin Core"}),s.jsx("input",{type:"text",value:o,onChange:x=>i(x.target.value),placeholder:"https://script.google.com/...",className:"w-full h-10 bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-xl px-4 text-[10px] font-mono text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-widest ml-1",children:"Nuevo Token Maestro / Contrasea"}),s.jsx("input",{type:"password",value:n,onChange:x=>a(x.target.value),placeholder:"Escribe tu nueva frase de acceso...",className:"w-full h-12 bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-xl px-4 text-sm font-mono text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),s.jsx("p",{className:"text-[7px] font-mono text-[var(--text-dim)] opacity-50 px-1",children:"Advertencia: Actualizar esto rotar la clave maestra para todos los satlites interconectados."})]}),s.jsx("button",{onClick:h,disabled:!n||c,className:`
                            h-12 rounded-xl font-black text-[10px] uppercase tracking-[0.4em] transition-all duration-500 mt-2
                            ${!n||c?"bg-[var(--bg-secondary)] text-[var(--text-dim)] cursor-not-allowed border border-[var(--border-subtle)]":"bg-[var(--accent)] text-black shadow-lg hover:scale-[1.02] active:scale-95"}
                        `,children:c?"Sincronizando...":"Rotar Token Maestro"}),s.jsx("div",{className:"text-center mt-2",children:s.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] opacity-30 uppercase tracking-[0.2em]",children:"Protocolo Axiomtico: La Identidad es la Prueba."})})]})]})})},$m=()=>{var m,S;const{state:e,execute:t}=te(),r=H(g=>g.session),[n,a]=R.useState(!1),[o,i]=R.useState(!1),c=e.sovereignty.theme||"dark",l=e.sovereignty.mode==="DEV_LAB",u=(m=e.phenotype.devLab)==null?void 0:m.targetId,p=(S=e.phenotype.devLab)==null?void 0:S.perspective,{ui:h,focusStack:x,cosmosIdentity:v,artifacts:y}=e.phenotype;e.ui_layer_override;const E=!!(v!=null&&v.id);let A=[];if(l){if(A=[{id:"DEV_LAB",label:"Laboratory",archetype:"LAB",icon:k.Lab}],u){const g=Nm(u,y);A.push({id:"TARGET",label:g,archetype:"TARGET",icon:k.Terminal})}p&&p!==u&&A.push({id:"PERSPECTIVE",label:p,archetype:"VIEW",icon:k.Eye})}else A=E?x&&x.length>0?x.filter(g=>!g._isGhost):[v]:[];const f=()=>{const g=c==="dark"?"light":"dark";t("SET_THEME",{theme:g}),localStorage.setItem("INDRA_THEME",g)},d=()=>{confirm(` NUCLEAR PURGE

Esto borrar toda la memoria local (Genotipo L0) y forzar una descarga completa del Servidor.

Proceder?`)&&t("NUCLEAR_PURGE")};return s.jsxs("div",{className:"fixed top-4 right-4 z-[350] flex items-center justify-end pointer-events-auto",children:[s.jsxs("div",{className:`
                flex items-center gap-2 p-1 rounded-full glass border transition-all duration-500 ease-out shadow-lg max-w-[90vw]
                ${l?"border-orange-500/50 shadow-[0_0_20px_rgba(249,115,22,0.1)]":"border-[var(--border-subtle)]"}
                ${n?"bg-[var(--bg-deep)] pr-2":""}
            `,children:[A.length>0&&s.jsx("div",{className:"hidden md:flex items-center gap-1 pl-3 pr-2 border-r border-[var(--border-subtle)] mr-2 h-6",children:A.map((g,C)=>{var N;return s.jsxs("div",{className:"flex items-center gap-1 text-[10px] uppercase font-bold tracking-wider text-[var(--text-secondary)] hover:text-[var(--accent)] cursor-pointer transition-colors",onClick:()=>{g.id==="DEV_LAB"?t("SET_MODE",{mode:"DEV_LAB"}):g.id===(v==null?void 0:v.id)?t("EXIT_FOCUS"):t("SELECT_ARTIFACT",g)},children:[s.jsx("span",{className:"opacity-50",children:"/"}),s.jsx("span",{children:g.LABEL||g.label||((N=g.identity)==null?void 0:N.label)||g.NAME||g.name||g.id})]},g.id||C)})}),(r==null?void 0:r.syncStatus)==="OFFLINE"&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 ml-1 bg-[var(--error-surface)] text-[var(--error)] rounded-full border border-[var(--error)]/20 animate-pulse",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--error)]"}),s.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter",children:"Trabajo sin conexin"})]}),s.jsxs("div",{className:`
                    flex items-center gap-2 overflow-hidden transition-all duration-500
                    ${n?"max-w-[400px] opacity-100 ml-1":"max-w-0 opacity-0 ml-0"}
                `,children:[s.jsx("button",{onClick:()=>t("SET_CURRENT_LAYER","SELECTOR"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${e.phenotype.ui.currentLayer==="SELECTOR"?"bg-[var(--accent)]/20 text-[var(--accent)]":"text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-secondary)]"}`,title:"Selector de Cosmos",children:s.jsx(k.Cosmos,{size:14})}),s.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] mx-1"}),s.jsxs("button",{onClick:()=>t("SET_MODE",{mode:e.sovereignty.mode==="LIVE"?"DEV_LAB":"LIVE"}),className:`h-8 px-3 rounded-full flex items-center gap-2 transition-all ${e.sovereignty.mode==="DEV_LAB"?"bg-[var(--accent)]/20 text-[var(--accent)]":"text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-secondary)]"}`,title:`Cambiar a Modo ${e.sovereignty.mode==="LIVE"?"Laboratorio":"Produccin"}`,children:[s.jsx(k.Sync,{size:12,className:e.sovereignty.mode==="DEV_LAB"?"animate-spin":""}),s.jsx("span",{className:"text-[8px] font-black tracking-[0.2em] uppercase",children:e.sovereignty.mode==="LIVE"?"Live":"Dev"})]}),s.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] mx-1"}),s.jsx("button",{onClick:f,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--bg-secondary)] transition-colors group",title:c==="dark"?"Light Mode":"Dark Mode",children:c==="dark"?s.jsx(k.Sun,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"}):s.jsx(k.Moon,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"})}),s.jsx("button",{onClick:()=>i(!0),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--accent)]/10 transition-colors group",title:"Security / Tokens",children:s.jsx(k.Lock,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"})}),s.jsx("button",{onClick:d,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--error)]/10 transition-colors group",title:"Nuclear Purge",children:s.jsx(k.Sync,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--error)]"})})]}),s.jsx("button",{onClick:()=>a(!n),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all border ${n?"border-[var(--accent)] bg-[var(--accent)] text-white shadow-[0_0_15px_rgba(var(--accent-rgb),0.3)]":"border-transparent hover:bg-[var(--bg-secondary)] text-[var(--text-dim)]"}`,children:s.jsx("div",{className:`transition-transform duration-500 ${n?"rotate-180":""}`,children:n?s.jsx(k.Close,{size:16}):s.jsx(k.List,{size:18})})})]}),o&&s.jsx(Vm,{onClose:()=>i(!1)})]})},Gm=()=>{const e=H(a=>a.session),t=e==null?void 0:e.isLoading;if((e==null?void 0:e.syncStatus)==="SYNCED"&&!t)return null;const r=(e==null?void 0:e.syncStatus)==="RETRY",n=(e==null?void 0:e.syncStatus)==="OFFLINE";return s.jsx("div",{className:"fixed bottom-10 left-10 flex flex-col gap-2 z-[100] animate-fade-in group pointer-events-none",children:s.jsxs("div",{className:`
                glass rounded-full px-4 py-2 flex items-center gap-3 border transition-all duration-500 bg-black/40
                ${n?"border-[var(--error)]/30":r?"border-[var(--warning)]/30":"border-white/5"}
            `,children:[s.jsx("div",{className:`${t||r?"animate-spin-slow":""}`,children:s.jsx(k.Sync,{className:`w-3 h-3 ${n?"text-[var(--error)]":r?"text-[var(--warning)]":"text-white/20"}`})}),s.jsx("div",{className:"flex flex-col",children:s.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.2em] text-white/40",children:t?"SYNCING_REALITY":n?"LOCAL_SOVEREIGNTY":r?"RETRYING_SYNC":"REALITY_SYNCED"})})]})})},Ym=({onComplete:e})=>{const{state:t}=te(),{progress:r,label:n,color:a,iskResonance:o}=Oi("system"),[i,c]=R.useState(!0);return R.useEffect(()=>{if(r>=100&&t.sovereignty.status!=="STANDBY"){const l=setTimeout(()=>{c(!1),e&&e()},1e3);return()=>clearTimeout(l)}},[r,t.sovereignty.status]),i?s.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center transition-opacity duration-1000",children:[s.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--accent)_0%,_transparent_70%)]",style:{transform:`scale(${1+(o||0)*.1})`,opacity:.1+(o||0)*.2}})}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8",children:[s.jsx("div",{className:"relative",children:s.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-[var(--accent)]/30 flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 rounded-full bg-[var(--accent)]/10 animate-pulse flex items-center justify-center",children:s.jsx("div",{className:"w-4 h-4 bg-[var(--accent)] rounded-full",style:{boxShadow:`0 0 20px ${a||"var(--accent)"}`}})})})}),s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("h1",{className:"text-xl font-black tracking-[0.5em] text-[var(--accent)] uppercase animate-pulse",children:"INDRA_OS"}),s.jsxs("span",{className:"text-[10px] font-mono text-[var(--text-dim)] tracking-widest uppercase",children:[n||"Initialising_Reality","..."]})]}),s.jsxs("div",{className:"w-64",children:[s.jsx("div",{className:"h-0.5 w-full bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[var(--accent)] transition-all duration-500",style:{width:`${r}%`,boxShadow:"0 0 10px var(--accent)"}})}),s.jsxs("div",{className:"flex justify-between mt-2 font-mono text-[9px] text-[var(--text-dim)] opacity-50",children:[s.jsxs("span",{children:[r,"%"]}),s.jsx("span",{children:"v5.5.0-Axiom"})]})]})]})]}):null},Hm=()=>{const{state:e,execute:t}=te(),{ui:r,cosmosIdentity:n}=e.phenotype;return e.sovereignty.mode==="LIVE"&&!!n?s.jsx("div",{className:"fixed left-4 top-1/2 -translate-y-1/2 z-[350] flex flex-col items-center gap-4 animate-fade-in-left",children:s.jsxs("div",{className:"flex flex-col gap-2 p-1.5 glass border border-[var(--border-subtle)] rounded-full shadow-2xl",children:[s.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"}),className:`
                        w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500
                        ${r.vaultPanelOpen?"bg-[var(--accent)] text-black shadow-[0_0_20px_rgba(var(--accent-rgb),0.4)] rotate-12":"text-[var(--text-dim)] hover:text-[var(--text-vibrant)] hover:bg-[var(--bg-secondary)]"}
                    `,title:"Almacn de Artefactos (Vault)",children:s.jsx(k.Vault,{size:20})}),s.jsx("div",{className:"w-6 h-[1px] bg-[var(--border-subtle)] mx-auto opacity-30"})]})}):null},Wm=()=>{const{state:e,execute:t}=te(),{ui:r}=e.phenotype;if(!r.vaultPanelOpen)return null;const n={id:"vault_global",LABEL:"Almacn de Artefactos",DOMAIN:"SYSTEM_VAULT"};return s.jsxs("div",{className:"fixed inset-0 z-[400] flex animate-fade-in pointer-events-none",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm pointer-events-auto",onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"})}),s.jsxs("div",{className:`
                relative w-full max-w-2xl h-full bg-[#050505]/95 backdrop-blur-3xl border-r border-white/10 shadow-2xl
                flex flex-col animate-slide-in-left pointer-events-auto overflow-hidden
            `,children:[s.jsxs("div",{className:"h-16 px-8 border-b border-white/5 flex items-center justify-between bg-black/40",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--accent)]/10 border border-[var(--accent)]/20 flex items-center justify-center text-[var(--accent)]",children:s.jsx(k.Vault,{size:16})}),s.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.3em] text-white/70",children:"Almacn de Artefactos"})]}),s.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"}),className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-[var(--text-dim)] hover:text-white hover:bg-white/10 transition-all group",title:"Cerrar Panel",children:s.jsx(k.Close,{size:16,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),s.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-20"}),s.jsx("div",{className:"h-full",children:s.jsx(Es,{data:n,perspective:"VAULT"})})]})]})]})};R.lazy(()=>$r(()=>import("./SemanticDataCube-gWe1me_h.js"),__vite__mapDeps([0,1])));R.lazy(()=>$r(()=>import("./SpatialCanvas-DAK0NKmy.js"),__vite__mapDeps([2,3])));const Km={PORTAL:{id:"PORTAL",label:"Selector de Realidades (Core)",profile:"AMBIENT",component:"CoreSelector"},SELECTOR:{id:"SELECTOR",label:"Selector de Cosmos",profile:"NAVIGATIONAL",component:"CosmosSelector"},DESKTOP:{id:"DESKTOP",label:"Escritorio de Indra",profile:"DEEP_FOCUS",component:"DynamicLayoutEngine"},DEV_LAB:{id:"DEV_LAB",label:"Laboratorio de Cnones",profile:"DEEP_FOCUS",component:"DevLab"}},Qm=({initialAssembly:e})=>{const{state:t,execute:r}=te(),n=H(o=>{var i;return(i=o.session)==null?void 0:i.isLoading});R.useEffect(()=>{e&&(e.status==="LOCKED"?r("SYSTEM_LOCKED"):(e.status==="ACTIVE"||e.status==="DEGRADED")&&r("IGNITE_SYSTEM",{sovereignty:e.status,genotype:e.genotype||t.genotype}))},[e]),R.useEffect(()=>{t.phenotype.cosmosIdentity&&t.phenotype.ui.currentLayer==="SELECTOR"&&(console.log("[Orchestrator]  Realidad Habitada. Colapsando Selector."),r("SET_CURRENT_LAYER",null))},[t.phenotype.cosmosIdentity]),R.useEffect(()=>{const o=t.sovereignty.theme;document.documentElement.setAttribute("data-theme",o),document.body.className="indra-os-shell bg-hex-grid transition-colors duration-1000"},[t.sovereignty.theme]);const a=()=>{var y;const o=t.phenotype.ui.currentLayer,i=E=>r("SET_CURRENT_LAYER",E),c=!!((y=t.phenotype.cosmosIdentity)!=null&&y.id),u=(E=>{if(!E)return null;const A=Object.values(Km).find(f=>f.id===E);return A?A.profile:null})(o),p=t.sovereignty.status==="LOCKED",h=o==="PORTAL"||u==="AMBIENT",x=o==="SELECTOR"||u==="NAVIGATIONAL",v=p;return s.jsxs("div",{className:"w-full h-full relative overflow-hidden flex flex-col",children:[s.jsx("div",{className:"absolute inset-0 layer-transition",style:{zIndex:0,filter:x?"blur(15px) brightness(0.6) grayscale(0.5)":v?"brightness(0.2)":"none",transform:x?"scale(0.96) translateY(-20px)":"scale(1)",opacity:v?.3:1},children:t.sovereignty.mode==="DEV_LAB"||o==="DEV_LAB"?s.jsx(jm,{}):c?s.jsx(Pm,{}):s.jsx(xc,{asHome:!0})}),s.jsx("div",{className:"absolute inset-0 z-[10] pointer-events-none flex items-center justify-center",children:h&&s.jsx("div",{className:"w-full max-w-xl glass p-8 rounded-[2.5rem] border border-[var(--indra-glass-border)] shadow-2xl animate-fade-in pointer-events-auto",children:s.jsx(ko,{asOverlay:!0,onClose:()=>i(null)})})}),x&&s.jsx("div",{onClick:()=>i(null),className:"absolute inset-0 flex items-center justify-center p-12 z-[20] animate-fade-in backdrop-blur-sm cursor-pointer",children:s.jsxs("div",{onClick:E=>E.stopPropagation(),className:"w-full max-w-7xl h-full glass rounded-[3rem] shadow-2xl overflow-hidden border border-[var(--indra-glass-border)] flex flex-col pointer-events-auto cursor-default",children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-20"}),s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsx(xc,{})})]})}),v&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-[100] animate-fade-in bg-black/60 backdrop-blur-md",children:s.jsx("div",{className:"w-full max-w-xl glass p-10 rounded-[2.5rem] border border-[var(--indra-glass-border)] shadow-2xl pointer-events-auto text-center",children:s.jsx(ko,{asOverlay:!1})})}),s.jsxs("div",{className:"absolute inset-0 z-[300] pointer-events-none overflow-hidden",children:[s.jsxs("div",{className:"pointer-events-auto",children:[s.jsx(zm,{manualLayer:o,setManualLayer:i}),s.jsx($m,{}),s.jsx(Hm,{}),s.jsx(Gm,{})]}),s.jsx(Wm,{}),n&&!t.phenotype.cosmosIdentity&&o!=="SELECTOR"&&s.jsxs("div",{className:"absolute inset-0 z-[1000] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md animate-in fade-in duration-500 pointer-events-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-24 h-24 rounded-full border-t-2 border-b-2 border-[var(--accent)] animate-spin"}),s.jsx("div",{className:"absolute inset-0 w-24 h-24 rounded-full border-l-2 border-r-2 border-[var(--accent)]/30 animate-spin-reverse opacity-50"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-[var(--accent)] rounded-full shadow-[0_0_20px_var(--accent)] animate-pulse"})]}),s.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-[var(--accent)] animate-pulse",children:"Sintonizando Realidad"}),s.jsx("div",{className:"flex gap-1 h-1",children:[0,1,2].map(E=>s.jsx("div",{className:"w-8 h-full bg-[var(--accent)]/20 rounded-full overflow-hidden",children:s.jsx("div",{className:"w-full h-full bg-[var(--accent)] animate-[indra-loading-bar_1.5s_infinite]",style:{animationDelay:`${E*.2}s`}})},E))})]})]}),t.phenotype.isDeepHydrating&&!n&&s.jsxs("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 px-8 py-4 glass rounded-full border border-[var(--accent)]/30 shadow-[0_0_30px_rgba(0,210,255,0.2)] animate-pulse flex items-center gap-4 pointer-events-auto",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] shadow-[0_0_10px_var(--accent)]"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Materia Oscura Detectada"}),s.jsx("span",{className:"text-[8px] font-mono text-[var(--text-secondary)] uppercase tracking-widest opacity-60",children:"Hidratando Realidad en Profundidad (Deep Reading)..."})]}),s.jsxs("div",{className:"ml-4 flex gap-1",children:[s.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/20 rounded-full animate-[indra-breath_1s_infinite_ease-in-out]"}),s.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/40 rounded-full animate-[indra-breath_1.2s_infinite_ease-in-out]"}),s.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/60 rounded-full animate-[indra-breath_1.4s_infinite_ease-in-out]"})]})]})]})]})};return t.sovereignty.status==="STANDBY"?s.jsx(Ym,{}):s.jsx("div",{className:"w-screen h-screen overflow-hidden layer-transition bg-black",children:a()})},Xm=()=>{const{dispatch:e}=te(),[t,r]=R.useState("BOOTING"),[n,a]=R.useState(null);return R.useEffect(()=>{(async()=>{console.log(" [Main] Iniciando Bootloader...");const i=await mm.assemble();i.success&&i.status==="ACTIVE"?(console.log(" [Main] Sistema Activo. Transfiriendo control a Orchestrator."),a(i),r("ACTIVE")):(console.warn(" [Main] Sistema Bloqueado o Requiere Autenticacin."),r("LOCKED"))})()},[e]),t==="BOOTING"?s.jsxs("div",{className:"w-screen h-screen bg-black flex flex-col items-center justify-center gap-6 text-[var(--accent)] font-mono",children:[s.jsx("div",{className:"w-16 h-16 border-2 border-[var(--accent)] border-t-transparent rounded-full animate-spin"}),s.jsx("div",{className:"text-xs tracking-[0.5em] animate-pulse uppercase",children:"INITIALIZING INDRA OS"})]}):t==="ACTIVE"?s.jsx(Qm,{initialAssembly:n}):s.jsx(ko,{})};za.createRoot(document.getElementById("root")).render(s.jsx(ce.StrictMode,{children:s.jsx(fm,{children:s.jsx(Xm,{})})}));export{s as j,R as r};
//# sourceMappingURL=index-C9iTgkd2.js.map
