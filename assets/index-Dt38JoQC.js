const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SemanticDataCube-RjLlZpz-.js","assets/SemanticDataCube-eP7qemwd.css","assets/SpatialCanvas-CNx1-iP3.js","assets/SpatialCanvas-MojIPDI7.css"])))=>i.map(i=>d[i]);
var Md=Object.defineProperty;var Ud=(e,t,r)=>t in e?Md(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var eo=(e,t,r)=>Ud(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function zd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ic={exports:{}},Ms={},lc={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tn=Symbol.for("react.element"),Fd=Symbol.for("react.portal"),Bd=Symbol.for("react.fragment"),Vd=Symbol.for("react.strict_mode"),$d=Symbol.for("react.profiler"),Gd=Symbol.for("react.provider"),Hd=Symbol.for("react.context"),Yd=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),Kd=Symbol.for("react.memo"),Qd=Symbol.for("react.lazy"),zi=Symbol.iterator;function Xd(e){return e===null||typeof e!="object"?null:(e=zi&&e[zi]||e["@@iterator"],typeof e=="function"?e:null)}var cc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uc=Object.assign,dc={};function Mr(e,t,r){this.props=e,this.context=t,this.refs=dc,this.updater=r||cc}Mr.prototype.isReactComponent={};Mr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function pc(){}pc.prototype=Mr.prototype;function Ia(e,t,r){this.props=e,this.context=t,this.refs=dc,this.updater=r||cc}var ja=Ia.prototype=new pc;ja.constructor=Ia;uc(ja,Mr.prototype);ja.isPureReactComponent=!0;var Fi=Array.isArray,fc=Object.prototype.hasOwnProperty,Ra={current:null},hc={key:!0,ref:!0,__self:!0,__source:!0};function mc(e,t,r){var n,s={},a=null,i=null;if(t!=null)for(n in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)fc.call(t,n)&&!hc.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Tn,type:e,key:a,ref:i,props:s,_owner:Ra.current}}function qd(e,t){return{$$typeof:Tn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function La(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tn}function Jd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Bi=/\/+/g;function to(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jd(""+e.key):t.toString(36)}function es(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Tn:case Fd:i=!0}}if(i)return i=e,s=s(i),e=n===""?"."+to(i,0):n,Fi(s)?(r="",e!=null&&(r=e.replace(Bi,"$&/")+"/"),es(s,t,r,"",function(d){return d})):s!=null&&(La(s)&&(s=qd(s,r+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Bi,"$&/")+"/")+e)),t.push(s)),1;if(i=0,n=n===""?".":n+":",Fi(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+to(a,l);i+=es(a,t,r,c,s)}else if(c=Xd(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+to(a,l++),i+=es(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function On(e,t,r){if(e==null)return e;var n=[],s=0;return es(e,n,"","",function(a){return t.call(r,a,s++)}),n}function Zd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ce={current:null},ts={transition:null},ep={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:ts,ReactCurrentOwner:Ra};function xc(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:On,forEach:function(e,t,r){On(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return On(e,function(){t++}),t},toArray:function(e){return On(e,function(t){return t})||[]},only:function(e){if(!La(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=Mr;G.Fragment=Bd;G.Profiler=$d;G.PureComponent=Ia;G.StrictMode=Vd;G.Suspense=Wd;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ep;G.act=xc;G.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=uc({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=Ra.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)fc.call(t,c)&&!hc.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Tn,type:e.type,key:s,ref:a,props:n,_owner:i}};G.createContext=function(e){return e={$$typeof:Hd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Gd,_context:e},e.Consumer=e};G.createElement=mc;G.createFactory=function(e){var t=mc.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:Yd,render:e}};G.isValidElement=La;G.lazy=function(e){return{$$typeof:Qd,_payload:{_status:-1,_result:e},_init:Zd}};G.memo=function(e,t){return{$$typeof:Kd,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=ts.transition;ts.transition={};try{e()}finally{ts.transition=t}};G.unstable_act=xc;G.useCallback=function(e,t){return Ce.current.useCallback(e,t)};G.useContext=function(e){return Ce.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Ce.current.useDeferredValue(e)};G.useEffect=function(e,t){return Ce.current.useEffect(e,t)};G.useId=function(){return Ce.current.useId()};G.useImperativeHandle=function(e,t,r){return Ce.current.useImperativeHandle(e,t,r)};G.useInsertionEffect=function(e,t){return Ce.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Ce.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Ce.current.useMemo(e,t)};G.useReducer=function(e,t,r){return Ce.current.useReducer(e,t,r)};G.useRef=function(e){return Ce.current.useRef(e)};G.useState=function(e){return Ce.current.useState(e)};G.useSyncExternalStore=function(e,t,r){return Ce.current.useSyncExternalStore(e,t,r)};G.useTransition=function(){return Ce.current.useTransition()};G.version="18.3.1";lc.exports=G;var T=lc.exports;const ve=zd(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp=T,rp=Symbol.for("react.element"),np=Symbol.for("react.fragment"),sp=Object.prototype.hasOwnProperty,op=tp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ap={key:!0,ref:!0,__self:!0,__source:!0};function vc(e,t,r){var n,s={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)sp.call(t,n)&&!ap.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:rp,type:e,key:a,ref:i,props:s,_owner:op.current}}Ms.Fragment=np;Ms.jsx=vc;Ms.jsxs=vc;ic.exports=Ms;var o=ic.exports,ko={},gc={exports:{}},Fe={},yc={exports:{}},Ec={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,z){var U=k.length;k.push(z);e:for(;0<U;){var $=U-1>>>1,K=k[$];if(0<s(K,z))k[$]=z,k[U]=K,U=$;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var z=k[0],U=k.pop();if(U!==z){k[0]=U;e:for(var $=0,K=k.length,me=K>>>1;$<me;){var Ee=2*($+1)-1,je=k[Ee],Se=Ee+1,Ve=k[Se];if(0>s(je,U))Se<K&&0>s(Ve,je)?(k[$]=Ve,k[Se]=U,$=Se):(k[$]=je,k[Ee]=U,$=Ee);else if(Se<K&&0>s(Ve,U))k[$]=Ve,k[Se]=U,$=Se;else break e}}return z}function s(k,z){var U=k.sortIndex-z.sortIndex;return U!==0?U:k.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],d=[],h=1,m=null,x=3,E=!1,g=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(k){for(var z=r(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=k)n(d),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(d)}}function v(k){if(S=!1,p(k),!g)if(r(c)!==null)g=!0,Q(y);else{var z=r(d);z!==null&&ce(v,z.startTime-k)}}function y(k,z){g=!1,S&&(S=!1,f(w),w=-1),E=!0;var U=x;try{for(p(z),m=r(c);m!==null&&(!(m.expirationTime>z)||k&&!I());){var $=m.callback;if(typeof $=="function"){m.callback=null,x=m.priorityLevel;var K=$(m.expirationTime<=z);z=e.unstable_now(),typeof K=="function"?m.callback=K:m===r(c)&&n(c),p(z)}else n(c);m=r(c)}if(m!==null)var me=!0;else{var Ee=r(d);Ee!==null&&ce(v,Ee.startTime-z),me=!1}return me}finally{m=null,x=U,E=!1}}var b=!1,A=null,w=-1,O=5,N=-1;function I(){return!(e.unstable_now()-N<O)}function M(){if(A!==null){var k=e.unstable_now();N=k;var z=!0;try{z=A(!0,k)}finally{z?R():(b=!1,A=null)}}else b=!1}var R;if(typeof u=="function")R=function(){u(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,B=V.port2;V.port1.onmessage=M,R=function(){B.postMessage(null)}}else R=function(){_(M,0)};function Q(k){A=k,b||(b=!0,R())}function ce(k,z){w=_(function(){k(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){g||E||(g=!0,Q(y))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(k){switch(x){case 1:case 2:case 3:var z=3;break;default:z=x}var U=x;x=z;try{return k()}finally{x=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,z){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var U=x;x=k;try{return z()}finally{x=U}},e.unstable_scheduleCallback=function(k,z,U){var $=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?$+U:$):U=$,k){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=U+K,k={id:h++,callback:z,priorityLevel:k,startTime:U,expirationTime:K,sortIndex:-1},U>$?(k.sortIndex=U,t(d,k),r(c)===null&&k===r(d)&&(S?(f(w),w=-1):S=!0,ce(v,U-$))):(k.sortIndex=K,t(c,k),g||E||(g=!0,Q(y))),k},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(k){var z=x;return function(){var U=x;x=z;try{return k.apply(this,arguments)}finally{x=U}}}})(Ec);yc.exports=Ec;var ip=yc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=T,ze=ip;function j(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sc=new Set,un={};function ar(e,t){Ir(e,t),Ir(e+"Capture",t)}function Ir(e,t){for(un[e]=t,e=0;e<t.length;e++)Sc.add(t[e])}var yt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Do=Object.prototype.hasOwnProperty,cp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vi={},$i={};function up(e){return Do.call($i,e)?!0:Do.call(Vi,e)?!1:cp.test(e)?$i[e]=!0:(Vi[e]=!0,!1)}function dp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pp(e,t,r,n){if(t===null||typeof t>"u"||dp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ie(e,t,r,n,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ye[e]=new Ie(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ye[t]=new Ie(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ye[e]=new Ie(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ye[e]=new Ie(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ye[e]=new Ie(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ye[e]=new Ie(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ye[e]=new Ie(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ye[e]=new Ie(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ye[e]=new Ie(e,5,!1,e.toLowerCase(),null,!1,!1)});var Oa=/[\-:]([a-z])/g;function ka(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Oa,ka);ye[t]=new Ie(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Oa,ka);ye[t]=new Ie(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Oa,ka);ye[t]=new Ie(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ye[e]=new Ie(e,1,!1,e.toLowerCase(),null,!1,!1)});ye.xlinkHref=new Ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ye[e]=new Ie(e,1,!1,e.toLowerCase(),null,!0,!0)});function Da(e,t,r,n){var s=ye.hasOwnProperty(t)?ye[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pp(t,r,s,n)&&(r=null),n||s===null?up(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var bt=lp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kn=Symbol.for("react.element"),cr=Symbol.for("react.portal"),ur=Symbol.for("react.fragment"),Pa=Symbol.for("react.strict_mode"),Po=Symbol.for("react.profiler"),Nc=Symbol.for("react.provider"),bc=Symbol.for("react.context"),Ma=Symbol.for("react.forward_ref"),Mo=Symbol.for("react.suspense"),Uo=Symbol.for("react.suspense_list"),Ua=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Ac=Symbol.for("react.offscreen"),Gi=Symbol.iterator;function Fr(e){return e===null||typeof e!="object"?null:(e=Gi&&e[Gi]||e["@@iterator"],typeof e=="function"?e:null)}var se=Object.assign,ro;function Qr(e){if(ro===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ro=t&&t[1]||""}return`
`+ro+e}var no=!1;function so(e,t){if(!e||no)return"";no=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{no=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qr(e):""}function fp(e){switch(e.tag){case 5:return Qr(e.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 2:case 15:return e=so(e.type,!1),e;case 11:return e=so(e.type.render,!1),e;case 1:return e=so(e.type,!0),e;default:return""}}function zo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ur:return"Fragment";case cr:return"Portal";case Po:return"Profiler";case Pa:return"StrictMode";case Mo:return"Suspense";case Uo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bc:return(e.displayName||"Context")+".Consumer";case Nc:return(e._context.displayName||"Context")+".Provider";case Ma:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ua:return t=e.displayName||null,t!==null?t:zo(e.type)||"Memo";case wt:t=e._payload,e=e._init;try{return zo(e(t))}catch{}}return null}function hp(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zo(t);case 8:return t===Pa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _c(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mp(e){var t=_c(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){n=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dn(e){e._valueTracker||(e._valueTracker=mp(e))}function wc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_c(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function fs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fo(e,t){var r=t.checked;return se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Hi(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Bt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tc(e,t){t=t.checked,t!=null&&Da(e,"checked",t,!1)}function Bo(e,t){Tc(e,t);var r=Bt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vo(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vo(e,t.type,Bt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yi(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vo(e,t,r){(t!=="number"||fs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xr=Array.isArray;function Sr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Bt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function $o(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(j(91));return se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wi(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(j(92));if(Xr(r)){if(1<r.length)throw Error(j(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bt(r)}}function Cc(e,t){var r=Bt(t.value),n=Bt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ki(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ic(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Go(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ic(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pn,jc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function dn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xp=["Webkit","ms","Moz","O"];Object.keys(Zr).forEach(function(e){xp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zr[t]=Zr[e]})});function Rc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zr.hasOwnProperty(e)&&Zr[e]?(""+t).trim():t+"px"}function Lc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Rc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var vp=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ho(e,t){if(t){if(vp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(j(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(j(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(j(61))}if(t.style!=null&&typeof t.style!="object")throw Error(j(62))}}function Yo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wo=null;function za(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ko=null,Nr=null,br=null;function Qi(e){if(e=jn(e)){if(typeof Ko!="function")throw Error(j(280));var t=e.stateNode;t&&(t=Vs(t),Ko(e.stateNode,e.type,t))}}function Oc(e){Nr?br?br.push(e):br=[e]:Nr=e}function kc(){if(Nr){var e=Nr,t=br;if(br=Nr=null,Qi(e),t)for(e=0;e<t.length;e++)Qi(t[e])}}function Dc(e,t){return e(t)}function Pc(){}var oo=!1;function Mc(e,t,r){if(oo)return e(t,r);oo=!0;try{return Dc(e,t,r)}finally{oo=!1,(Nr!==null||br!==null)&&(Pc(),kc())}}function pn(e,t){var r=e.stateNode;if(r===null)return null;var n=Vs(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(j(231,t,typeof r));return r}var Qo=!1;if(yt)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Qo=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Qo=!1}function gp(e,t,r,n,s,a,i,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var en=!1,hs=null,ms=!1,Xo=null,yp={onError:function(e){en=!0,hs=e}};function Ep(e,t,r,n,s,a,i,l,c){en=!1,hs=null,gp.apply(yp,arguments)}function Sp(e,t,r,n,s,a,i,l,c){if(Ep.apply(this,arguments),en){if(en){var d=hs;en=!1,hs=null}else throw Error(j(198));ms||(ms=!0,Xo=d)}}function ir(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Uc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xi(e){if(ir(e)!==e)throw Error(j(188))}function Np(e){var t=e.alternate;if(!t){if(t=ir(e),t===null)throw Error(j(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Xi(s),e;if(a===n)return Xi(s),t;a=a.sibling}throw Error(j(188))}if(r.return!==n.return)r=s,n=a;else{for(var i=!1,l=s.child;l;){if(l===r){i=!0,r=s,n=a;break}if(l===n){i=!0,n=s,r=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===r){i=!0,r=a,n=s;break}if(l===n){i=!0,n=a,r=s;break}l=l.sibling}if(!i)throw Error(j(189))}}if(r.alternate!==n)throw Error(j(190))}if(r.tag!==3)throw Error(j(188));return r.stateNode.current===r?e:t}function zc(e){return e=Np(e),e!==null?Fc(e):null}function Fc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fc(e);if(t!==null)return t;e=e.sibling}return null}var Bc=ze.unstable_scheduleCallback,qi=ze.unstable_cancelCallback,bp=ze.unstable_shouldYield,Ap=ze.unstable_requestPaint,le=ze.unstable_now,_p=ze.unstable_getCurrentPriorityLevel,Fa=ze.unstable_ImmediatePriority,Vc=ze.unstable_UserBlockingPriority,xs=ze.unstable_NormalPriority,wp=ze.unstable_LowPriority,$c=ze.unstable_IdlePriority,Us=null,ct=null;function Tp(e){if(ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Us,e,void 0,(e.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:jp,Cp=Math.log,Ip=Math.LN2;function jp(e){return e>>>=0,e===0?32:31-(Cp(e)/Ip|0)|0}var Mn=64,Un=4194304;function qr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var l=i&~s;l!==0?n=qr(l):(a&=i,a!==0&&(n=qr(a)))}else i=r&~s,i!==0?n=qr(i):a!==0&&(n=qr(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-tt(t),s=1<<r,n|=e[r],t&=~s;return n}function Rp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lp(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-tt(a),l=1<<i,c=s[i];c===-1?(!(l&r)||l&n)&&(s[i]=Rp(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function qo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gc(){var e=Mn;return Mn<<=1,!(Mn&4194240)&&(Mn=64),e}function ao(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Cn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tt(t),e[t]=r}function Op(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-tt(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function Ba(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-tt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var W=0;function Hc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yc,Va,Wc,Kc,Qc,Jo=!1,zn=[],Ot=null,kt=null,Dt=null,fn=new Map,hn=new Map,Ct=[],kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ji(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":fn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(t.pointerId)}}function Vr(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=jn(t),t!==null&&Va(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Dp(e,t,r,n,s){switch(t){case"focusin":return Ot=Vr(Ot,e,t,r,n,s),!0;case"dragenter":return kt=Vr(kt,e,t,r,n,s),!0;case"mouseover":return Dt=Vr(Dt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return fn.set(a,Vr(fn.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,hn.set(a,Vr(hn.get(a)||null,e,t,r,n,s)),!0}return!1}function Xc(e){var t=Xt(e.target);if(t!==null){var r=ir(t);if(r!==null){if(t=r.tag,t===13){if(t=Uc(r),t!==null){e.blockedOn=t,Qc(e.priority,function(){Wc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Zo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Wo=n,r.target.dispatchEvent(n),Wo=null}else return t=jn(r),t!==null&&Va(t),e.blockedOn=r,!1;t.shift()}return!0}function Zi(e,t,r){rs(e)&&r.delete(t)}function Pp(){Jo=!1,Ot!==null&&rs(Ot)&&(Ot=null),kt!==null&&rs(kt)&&(kt=null),Dt!==null&&rs(Dt)&&(Dt=null),fn.forEach(Zi),hn.forEach(Zi)}function $r(e,t){e.blockedOn===t&&(e.blockedOn=null,Jo||(Jo=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,Pp)))}function mn(e){function t(s){return $r(s,e)}if(0<zn.length){$r(zn[0],e);for(var r=1;r<zn.length;r++){var n=zn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ot!==null&&$r(Ot,e),kt!==null&&$r(kt,e),Dt!==null&&$r(Dt,e),fn.forEach(t),hn.forEach(t),r=0;r<Ct.length;r++)n=Ct[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ct.length&&(r=Ct[0],r.blockedOn===null);)Xc(r),r.blockedOn===null&&Ct.shift()}var Ar=bt.ReactCurrentBatchConfig,gs=!0;function Mp(e,t,r,n){var s=W,a=Ar.transition;Ar.transition=null;try{W=1,$a(e,t,r,n)}finally{W=s,Ar.transition=a}}function Up(e,t,r,n){var s=W,a=Ar.transition;Ar.transition=null;try{W=4,$a(e,t,r,n)}finally{W=s,Ar.transition=a}}function $a(e,t,r,n){if(gs){var s=Zo(e,t,r,n);if(s===null)vo(e,t,n,ys,r),Ji(e,n);else if(Dp(s,e,t,r,n))n.stopPropagation();else if(Ji(e,n),t&4&&-1<kp.indexOf(e)){for(;s!==null;){var a=jn(s);if(a!==null&&Yc(a),a=Zo(e,t,r,n),a===null&&vo(e,t,n,ys,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else vo(e,t,n,null,r)}}var ys=null;function Zo(e,t,r,n){if(ys=null,e=za(n),e=Xt(e),e!==null)if(t=ir(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Uc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ys=e,null}function qc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_p()){case Fa:return 1;case Vc:return 4;case xs:case wp:return 16;case $c:return 536870912;default:return 16}default:return 16}}var jt=null,Ga=null,ns=null;function Jc(){if(ns)return ns;var e,t=Ga,r=t.length,n,s="value"in jt?jt.value:jt.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===s[a-n];n++);return ns=s.slice(e,1<n?1-n:void 0)}function ss(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fn(){return!0}function el(){return!1}function Be(e){function t(r,n,s,a,i){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fn:el,this.isPropagationStopped=el,this}return se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),t}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=Be(Ur),In=se({},Ur,{view:0,detail:0}),zp=Be(In),io,lo,Gr,zs=se({},In,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gr&&(Gr&&e.type==="mousemove"?(io=e.screenX-Gr.screenX,lo=e.screenY-Gr.screenY):lo=io=0,Gr=e),io)},movementY:function(e){return"movementY"in e?e.movementY:lo}}),tl=Be(zs),Fp=se({},zs,{dataTransfer:0}),Bp=Be(Fp),Vp=se({},In,{relatedTarget:0}),co=Be(Vp),$p=se({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Gp=Be($p),Hp=se({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yp=Be(Hp),Wp=se({},Ur,{data:0}),rl=Be(Wp),Kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xp[e])?!!t[e]:!1}function Ya(){return qp}var Jp=se({},In,{key:function(e){if(e.key){var t=Kp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ss(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(e){return e.type==="keypress"?ss(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ss(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zp=Be(Jp),ef=se({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nl=Be(ef),tf=se({},In,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),rf=Be(tf),nf=se({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),sf=Be(nf),of=se({},zs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),af=Be(of),lf=[9,13,27,32],Wa=yt&&"CompositionEvent"in window,tn=null;yt&&"documentMode"in document&&(tn=document.documentMode);var cf=yt&&"TextEvent"in window&&!tn,Zc=yt&&(!Wa||tn&&8<tn&&11>=tn),sl=" ",ol=!1;function eu(e,t){switch(e){case"keyup":return lf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var dr=!1;function uf(e,t){switch(e){case"compositionend":return tu(t);case"keypress":return t.which!==32?null:(ol=!0,sl);case"textInput":return e=t.data,e===sl&&ol?null:e;default:return null}}function df(e,t){if(dr)return e==="compositionend"||!Wa&&eu(e,t)?(e=Jc(),ns=Ga=jt=null,dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zc&&t.locale!=="ko"?null:t.data;default:return null}}var pf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function al(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pf[e.type]:t==="textarea"}function ru(e,t,r,n){Oc(n),t=Es(t,"onChange"),0<t.length&&(r=new Ha("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var rn=null,xn=null;function ff(e){fu(e,0)}function Fs(e){var t=hr(e);if(wc(t))return e}function hf(e,t){if(e==="change")return t}var nu=!1;if(yt){var uo;if(yt){var po="oninput"in document;if(!po){var il=document.createElement("div");il.setAttribute("oninput","return;"),po=typeof il.oninput=="function"}uo=po}else uo=!1;nu=uo&&(!document.documentMode||9<document.documentMode)}function ll(){rn&&(rn.detachEvent("onpropertychange",su),xn=rn=null)}function su(e){if(e.propertyName==="value"&&Fs(xn)){var t=[];ru(t,xn,e,za(e)),Mc(ff,t)}}function mf(e,t,r){e==="focusin"?(ll(),rn=t,xn=r,rn.attachEvent("onpropertychange",su)):e==="focusout"&&ll()}function xf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fs(xn)}function vf(e,t){if(e==="click")return Fs(t)}function gf(e,t){if(e==="input"||e==="change")return Fs(t)}function yf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nt=typeof Object.is=="function"?Object.is:yf;function vn(e,t){if(nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Do.call(t,s)||!nt(e[s],t[s]))return!1}return!0}function cl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ul(e,t){var r=cl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cl(r)}}function ou(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ou(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function au(){for(var e=window,t=fs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=fs(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ef(e){var t=au(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ou(r.ownerDocument.documentElement,r)){if(n!==null&&Ka(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=ul(r,a);var i=ul(r,n);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Sf=yt&&"documentMode"in document&&11>=document.documentMode,pr=null,ea=null,nn=null,ta=!1;function dl(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ta||pr==null||pr!==fs(n)||(n=pr,"selectionStart"in n&&Ka(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),nn&&vn(nn,n)||(nn=n,n=Es(ea,"onSelect"),0<n.length&&(t=new Ha("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=pr)))}function Bn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fr={animationend:Bn("Animation","AnimationEnd"),animationiteration:Bn("Animation","AnimationIteration"),animationstart:Bn("Animation","AnimationStart"),transitionend:Bn("Transition","TransitionEnd")},fo={},iu={};yt&&(iu=document.createElement("div").style,"AnimationEvent"in window||(delete fr.animationend.animation,delete fr.animationiteration.animation,delete fr.animationstart.animation),"TransitionEvent"in window||delete fr.transitionend.transition);function Bs(e){if(fo[e])return fo[e];if(!fr[e])return e;var t=fr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in iu)return fo[e]=t[r];return e}var lu=Bs("animationend"),cu=Bs("animationiteration"),uu=Bs("animationstart"),du=Bs("transitionend"),pu=new Map,pl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $t(e,t){pu.set(e,t),ar(t,[e])}for(var ho=0;ho<pl.length;ho++){var mo=pl[ho],Nf=mo.toLowerCase(),bf=mo[0].toUpperCase()+mo.slice(1);$t(Nf,"on"+bf)}$t(lu,"onAnimationEnd");$t(cu,"onAnimationIteration");$t(uu,"onAnimationStart");$t("dblclick","onDoubleClick");$t("focusin","onFocus");$t("focusout","onBlur");$t(du,"onTransitionEnd");Ir("onMouseEnter",["mouseout","mouseover"]);Ir("onMouseLeave",["mouseout","mouseover"]);Ir("onPointerEnter",["pointerout","pointerover"]);Ir("onPointerLeave",["pointerout","pointerover"]);ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Af=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jr));function fl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Sp(n,t,void 0,e),e.currentTarget=null}function fu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;fl(s,l,d),a=c}else for(i=0;i<n.length;i++){if(l=n[i],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;fl(s,l,d),a=c}}}if(ms)throw e=Xo,ms=!1,Xo=null,e}function Z(e,t){var r=t[aa];r===void 0&&(r=t[aa]=new Set);var n=e+"__bubble";r.has(n)||(hu(t,e,2,!1),r.add(n))}function xo(e,t,r){var n=0;t&&(n|=4),hu(r,e,n,t)}var Vn="_reactListening"+Math.random().toString(36).slice(2);function gn(e){if(!e[Vn]){e[Vn]=!0,Sc.forEach(function(r){r!=="selectionchange"&&(Af.has(r)||xo(r,!1,e),xo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vn]||(t[Vn]=!0,xo("selectionchange",!1,t))}}function hu(e,t,r,n){switch(qc(t)){case 1:var s=Mp;break;case 4:s=Up;break;default:s=$a}r=s.bind(null,t,r,e),s=void 0,!Qo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function vo(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var i=n.tag;if(i===3||i===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=n.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=Xt(l),i===null)return;if(c=i.tag,c===5||c===6){n=a=i;continue e}l=l.parentNode}}n=n.return}Mc(function(){var d=a,h=za(r),m=[];e:{var x=pu.get(e);if(x!==void 0){var E=Ha,g=e;switch(e){case"keypress":if(ss(r)===0)break e;case"keydown":case"keyup":E=Zp;break;case"focusin":g="focus",E=co;break;case"focusout":g="blur",E=co;break;case"beforeblur":case"afterblur":E=co;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Bp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=rf;break;case lu:case cu:case uu:E=Gp;break;case du:E=sf;break;case"scroll":E=zp;break;case"wheel":E=af;break;case"copy":case"cut":case"paste":E=Yp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=nl}var S=(t&4)!==0,_=!S&&e==="scroll",f=S?x!==null?x+"Capture":null:x;S=[];for(var u=d,p;u!==null;){p=u;var v=p.stateNode;if(p.tag===5&&v!==null&&(p=v,f!==null&&(v=pn(u,f),v!=null&&S.push(yn(u,v,p)))),_)break;u=u.return}0<S.length&&(x=new E(x,g,null,r,h),m.push({event:x,listeners:S}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",x&&r!==Wo&&(g=r.relatedTarget||r.fromElement)&&(Xt(g)||g[Et]))break e;if((E||x)&&(x=h.window===h?h:(x=h.ownerDocument)?x.defaultView||x.parentWindow:window,E?(g=r.relatedTarget||r.toElement,E=d,g=g?Xt(g):null,g!==null&&(_=ir(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(E=null,g=d),E!==g)){if(S=tl,v="onMouseLeave",f="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(S=nl,v="onPointerLeave",f="onPointerEnter",u="pointer"),_=E==null?x:hr(E),p=g==null?x:hr(g),x=new S(v,u+"leave",E,r,h),x.target=_,x.relatedTarget=p,v=null,Xt(h)===d&&(S=new S(f,u+"enter",g,r,h),S.target=p,S.relatedTarget=_,v=S),_=v,E&&g)t:{for(S=E,f=g,u=0,p=S;p;p=lr(p))u++;for(p=0,v=f;v;v=lr(v))p++;for(;0<u-p;)S=lr(S),u--;for(;0<p-u;)f=lr(f),p--;for(;u--;){if(S===f||f!==null&&S===f.alternate)break t;S=lr(S),f=lr(f)}S=null}else S=null;E!==null&&hl(m,x,E,S,!1),g!==null&&_!==null&&hl(m,_,g,S,!0)}}e:{if(x=d?hr(d):window,E=x.nodeName&&x.nodeName.toLowerCase(),E==="select"||E==="input"&&x.type==="file")var y=hf;else if(al(x))if(nu)y=gf;else{y=xf;var b=mf}else(E=x.nodeName)&&E.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(y=vf);if(y&&(y=y(e,d))){ru(m,y,r,h);break e}b&&b(e,x,d),e==="focusout"&&(b=x._wrapperState)&&b.controlled&&x.type==="number"&&Vo(x,"number",x.value)}switch(b=d?hr(d):window,e){case"focusin":(al(b)||b.contentEditable==="true")&&(pr=b,ea=d,nn=null);break;case"focusout":nn=ea=pr=null;break;case"mousedown":ta=!0;break;case"contextmenu":case"mouseup":case"dragend":ta=!1,dl(m,r,h);break;case"selectionchange":if(Sf)break;case"keydown":case"keyup":dl(m,r,h)}var A;if(Wa)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else dr?eu(e,r)&&(w="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(w="onCompositionStart");w&&(Zc&&r.locale!=="ko"&&(dr||w!=="onCompositionStart"?w==="onCompositionEnd"&&dr&&(A=Jc()):(jt=h,Ga="value"in jt?jt.value:jt.textContent,dr=!0)),b=Es(d,w),0<b.length&&(w=new rl(w,e,null,r,h),m.push({event:w,listeners:b}),A?w.data=A:(A=tu(r),A!==null&&(w.data=A)))),(A=cf?uf(e,r):df(e,r))&&(d=Es(d,"onBeforeInput"),0<d.length&&(h=new rl("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:d}),h.data=A))}fu(m,t)})}function yn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Es(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=pn(e,r),a!=null&&n.unshift(yn(e,a,s)),a=pn(e,t),a!=null&&n.push(yn(e,a,s))),e=e.return}return n}function lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hl(e,t,r,n,s){for(var a=t._reactName,i=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=pn(r,a),c!=null&&i.unshift(yn(r,c,l))):s||(c=pn(r,a),c!=null&&i.push(yn(r,c,l)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var _f=/\r\n?/g,wf=/\u0000|\uFFFD/g;function ml(e){return(typeof e=="string"?e:""+e).replace(_f,`
`).replace(wf,"")}function $n(e,t,r){if(t=ml(t),ml(e)!==t&&r)throw Error(j(425))}function Ss(){}var ra=null,na=null;function sa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oa=typeof setTimeout=="function"?setTimeout:void 0,Tf=typeof clearTimeout=="function"?clearTimeout:void 0,xl=typeof Promise=="function"?Promise:void 0,Cf=typeof queueMicrotask=="function"?queueMicrotask:typeof xl<"u"?function(e){return xl.resolve(null).then(e).catch(If)}:oa;function If(e){setTimeout(function(){throw e})}function go(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),mn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);mn(t)}function Pt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var zr=Math.random().toString(36).slice(2),lt="__reactFiber$"+zr,En="__reactProps$"+zr,Et="__reactContainer$"+zr,aa="__reactEvents$"+zr,jf="__reactListeners$"+zr,Rf="__reactHandles$"+zr;function Xt(e){var t=e[lt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Et]||r[lt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=vl(e);e!==null;){if(r=e[lt])return r;e=vl(e)}return t}e=r,r=e.parentNode}return null}function jn(e){return e=e[lt]||e[Et],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(j(33))}function Vs(e){return e[En]||null}var ia=[],mr=-1;function Gt(e){return{current:e}}function ee(e){0>mr||(e.current=ia[mr],ia[mr]=null,mr--)}function J(e,t){mr++,ia[mr]=e.current,e.current=t}var Vt={},_e=Gt(Vt),Oe=Gt(!1),tr=Vt;function jr(e,t){var r=e.type.contextTypes;if(!r)return Vt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ke(e){return e=e.childContextTypes,e!=null}function Ns(){ee(Oe),ee(_e)}function gl(e,t,r){if(_e.current!==Vt)throw Error(j(168));J(_e,t),J(Oe,r)}function mu(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(j(108,hp(e)||"Unknown",s));return se({},r,n)}function bs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vt,tr=_e.current,J(_e,e),J(Oe,Oe.current),!0}function yl(e,t,r){var n=e.stateNode;if(!n)throw Error(j(169));r?(e=mu(e,t,tr),n.__reactInternalMemoizedMergedChildContext=e,ee(Oe),ee(_e),J(_e,e)):ee(Oe),J(Oe,r)}var mt=null,$s=!1,yo=!1;function xu(e){mt===null?mt=[e]:mt.push(e)}function Lf(e){$s=!0,xu(e)}function Ht(){if(!yo&&mt!==null){yo=!0;var e=0,t=W;try{var r=mt;for(W=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}mt=null,$s=!1}catch(s){throw mt!==null&&(mt=mt.slice(e+1)),Bc(Fa,Ht),s}finally{W=t,yo=!1}}return null}var xr=[],vr=0,As=null,_s=0,$e=[],Ge=0,rr=null,xt=1,vt="";function Wt(e,t){xr[vr++]=_s,xr[vr++]=As,As=e,_s=t}function vu(e,t,r){$e[Ge++]=xt,$e[Ge++]=vt,$e[Ge++]=rr,rr=e;var n=xt;e=vt;var s=32-tt(n)-1;n&=~(1<<s),r+=1;var a=32-tt(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,xt=1<<32-tt(t)+s|r<<s|n,vt=a+e}else xt=1<<a|r<<s|n,vt=e}function Qa(e){e.return!==null&&(Wt(e,1),vu(e,1,0))}function Xa(e){for(;e===As;)As=xr[--vr],xr[vr]=null,_s=xr[--vr],xr[vr]=null;for(;e===rr;)rr=$e[--Ge],$e[Ge]=null,vt=$e[--Ge],$e[Ge]=null,xt=$e[--Ge],$e[Ge]=null}var Ue=null,Me=null,te=!1,Ze=null;function gu(e,t){var r=He(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function El(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ue=e,Me=Pt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ue=e,Me=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=rr!==null?{id:xt,overflow:vt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=He(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ue=e,Me=null,!0):!1;default:return!1}}function la(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ca(e){if(te){var t=Me;if(t){var r=t;if(!El(e,t)){if(la(e))throw Error(j(418));t=Pt(r.nextSibling);var n=Ue;t&&El(e,t)?gu(n,r):(e.flags=e.flags&-4097|2,te=!1,Ue=e)}}else{if(la(e))throw Error(j(418));e.flags=e.flags&-4097|2,te=!1,Ue=e}}}function Sl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ue=e}function Gn(e){if(e!==Ue)return!1;if(!te)return Sl(e),te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sa(e.type,e.memoizedProps)),t&&(t=Me)){if(la(e))throw yu(),Error(j(418));for(;t;)gu(e,t),t=Pt(t.nextSibling)}if(Sl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(j(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Me=Pt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Me=null}}else Me=Ue?Pt(e.stateNode.nextSibling):null;return!0}function yu(){for(var e=Me;e;)e=Pt(e.nextSibling)}function Rr(){Me=Ue=null,te=!1}function qa(e){Ze===null?Ze=[e]:Ze.push(e)}var Of=bt.ReactCurrentBatchConfig;function Hr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(j(309));var n=r.stateNode}if(!n)throw Error(j(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(j(284));if(!r._owner)throw Error(j(290,e))}return e}function Hn(e,t){throw e=Object.prototype.toString.call(t),Error(j(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nl(e){var t=e._init;return t(e._payload)}function Eu(e){function t(f,u){if(e){var p=f.deletions;p===null?(f.deletions=[u],f.flags|=16):p.push(u)}}function r(f,u){if(!e)return null;for(;u!==null;)t(f,u),u=u.sibling;return null}function n(f,u){for(f=new Map;u!==null;)u.key!==null?f.set(u.key,u):f.set(u.index,u),u=u.sibling;return f}function s(f,u){return f=Ft(f,u),f.index=0,f.sibling=null,f}function a(f,u,p){return f.index=p,e?(p=f.alternate,p!==null?(p=p.index,p<u?(f.flags|=2,u):p):(f.flags|=2,u)):(f.flags|=1048576,u)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function l(f,u,p,v){return u===null||u.tag!==6?(u=wo(p,f.mode,v),u.return=f,u):(u=s(u,p),u.return=f,u)}function c(f,u,p,v){var y=p.type;return y===ur?h(f,u,p.props.children,v,p.key):u!==null&&(u.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===wt&&Nl(y)===u.type)?(v=s(u,p.props),v.ref=Hr(f,u,p),v.return=f,v):(v=ds(p.type,p.key,p.props,null,f.mode,v),v.ref=Hr(f,u,p),v.return=f,v)}function d(f,u,p,v){return u===null||u.tag!==4||u.stateNode.containerInfo!==p.containerInfo||u.stateNode.implementation!==p.implementation?(u=To(p,f.mode,v),u.return=f,u):(u=s(u,p.children||[]),u.return=f,u)}function h(f,u,p,v,y){return u===null||u.tag!==7?(u=er(p,f.mode,v,y),u.return=f,u):(u=s(u,p),u.return=f,u)}function m(f,u,p){if(typeof u=="string"&&u!==""||typeof u=="number")return u=wo(""+u,f.mode,p),u.return=f,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case kn:return p=ds(u.type,u.key,u.props,null,f.mode,p),p.ref=Hr(f,null,u),p.return=f,p;case cr:return u=To(u,f.mode,p),u.return=f,u;case wt:var v=u._init;return m(f,v(u._payload),p)}if(Xr(u)||Fr(u))return u=er(u,f.mode,p,null),u.return=f,u;Hn(f,u)}return null}function x(f,u,p,v){var y=u!==null?u.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return y!==null?null:l(f,u,""+p,v);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case kn:return p.key===y?c(f,u,p,v):null;case cr:return p.key===y?d(f,u,p,v):null;case wt:return y=p._init,x(f,u,y(p._payload),v)}if(Xr(p)||Fr(p))return y!==null?null:h(f,u,p,v,null);Hn(f,p)}return null}function E(f,u,p,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return f=f.get(p)||null,l(u,f,""+v,y);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case kn:return f=f.get(v.key===null?p:v.key)||null,c(u,f,v,y);case cr:return f=f.get(v.key===null?p:v.key)||null,d(u,f,v,y);case wt:var b=v._init;return E(f,u,p,b(v._payload),y)}if(Xr(v)||Fr(v))return f=f.get(p)||null,h(u,f,v,y,null);Hn(u,v)}return null}function g(f,u,p,v){for(var y=null,b=null,A=u,w=u=0,O=null;A!==null&&w<p.length;w++){A.index>w?(O=A,A=null):O=A.sibling;var N=x(f,A,p[w],v);if(N===null){A===null&&(A=O);break}e&&A&&N.alternate===null&&t(f,A),u=a(N,u,w),b===null?y=N:b.sibling=N,b=N,A=O}if(w===p.length)return r(f,A),te&&Wt(f,w),y;if(A===null){for(;w<p.length;w++)A=m(f,p[w],v),A!==null&&(u=a(A,u,w),b===null?y=A:b.sibling=A,b=A);return te&&Wt(f,w),y}for(A=n(f,A);w<p.length;w++)O=E(A,f,w,p[w],v),O!==null&&(e&&O.alternate!==null&&A.delete(O.key===null?w:O.key),u=a(O,u,w),b===null?y=O:b.sibling=O,b=O);return e&&A.forEach(function(I){return t(f,I)}),te&&Wt(f,w),y}function S(f,u,p,v){var y=Fr(p);if(typeof y!="function")throw Error(j(150));if(p=y.call(p),p==null)throw Error(j(151));for(var b=y=null,A=u,w=u=0,O=null,N=p.next();A!==null&&!N.done;w++,N=p.next()){A.index>w?(O=A,A=null):O=A.sibling;var I=x(f,A,N.value,v);if(I===null){A===null&&(A=O);break}e&&A&&I.alternate===null&&t(f,A),u=a(I,u,w),b===null?y=I:b.sibling=I,b=I,A=O}if(N.done)return r(f,A),te&&Wt(f,w),y;if(A===null){for(;!N.done;w++,N=p.next())N=m(f,N.value,v),N!==null&&(u=a(N,u,w),b===null?y=N:b.sibling=N,b=N);return te&&Wt(f,w),y}for(A=n(f,A);!N.done;w++,N=p.next())N=E(A,f,w,N.value,v),N!==null&&(e&&N.alternate!==null&&A.delete(N.key===null?w:N.key),u=a(N,u,w),b===null?y=N:b.sibling=N,b=N);return e&&A.forEach(function(M){return t(f,M)}),te&&Wt(f,w),y}function _(f,u,p,v){if(typeof p=="object"&&p!==null&&p.type===ur&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case kn:e:{for(var y=p.key,b=u;b!==null;){if(b.key===y){if(y=p.type,y===ur){if(b.tag===7){r(f,b.sibling),u=s(b,p.props.children),u.return=f,f=u;break e}}else if(b.elementType===y||typeof y=="object"&&y!==null&&y.$$typeof===wt&&Nl(y)===b.type){r(f,b.sibling),u=s(b,p.props),u.ref=Hr(f,b,p),u.return=f,f=u;break e}r(f,b);break}else t(f,b);b=b.sibling}p.type===ur?(u=er(p.props.children,f.mode,v,p.key),u.return=f,f=u):(v=ds(p.type,p.key,p.props,null,f.mode,v),v.ref=Hr(f,u,p),v.return=f,f=v)}return i(f);case cr:e:{for(b=p.key;u!==null;){if(u.key===b)if(u.tag===4&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){r(f,u.sibling),u=s(u,p.children||[]),u.return=f,f=u;break e}else{r(f,u);break}else t(f,u);u=u.sibling}u=To(p,f.mode,v),u.return=f,f=u}return i(f);case wt:return b=p._init,_(f,u,b(p._payload),v)}if(Xr(p))return g(f,u,p,v);if(Fr(p))return S(f,u,p,v);Hn(f,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,u!==null&&u.tag===6?(r(f,u.sibling),u=s(u,p),u.return=f,f=u):(r(f,u),u=wo(p,f.mode,v),u.return=f,f=u),i(f)):r(f,u)}return _}var Lr=Eu(!0),Su=Eu(!1),ws=Gt(null),Ts=null,gr=null,Ja=null;function Za(){Ja=gr=Ts=null}function ei(e){var t=ws.current;ee(ws),e._currentValue=t}function ua(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function _r(e,t){Ts=e,Ja=gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function We(e){var t=e._currentValue;if(Ja!==e)if(e={context:e,memoizedValue:t,next:null},gr===null){if(Ts===null)throw Error(j(308));gr=e,Ts.dependencies={lanes:0,firstContext:e}}else gr=gr.next=e;return t}var qt=null;function ti(e){qt===null?qt=[e]:qt.push(e)}function Nu(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ti(t)):(r.next=s.next,s.next=r),t.interleaved=r,St(e,n)}function St(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Tt=!1;function ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,H&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,St(e,r)}return s=n.interleaved,s===null?(t.next=t,ti(n)):(t.next=s.next,s.next=t),n.interleaved=t,St(e,r)}function os(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ba(e,r)}}function bl(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Cs(e,t,r,n){var s=e.updateQueue;Tt=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,i===null?a=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(a!==null){var m=s.baseState;i=0,h=d=c=null,l=a;do{var x=l.lane,E=l.eventTime;if((n&x)===x){h!==null&&(h=h.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,S=l;switch(x=t,E=r,S.tag){case 1:if(g=S.payload,typeof g=="function"){m=g.call(E,m,x);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,x=typeof g=="function"?g.call(E,m,x):g,x==null)break e;m=se({},m,x);break e;case 2:Tt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,x=s.effects,x===null?s.effects=[l]:x.push(l))}else E={eventTime:E,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=E,c=m):h=h.next=E,i|=x;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;x=l,l=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);sr|=i,e.lanes=i,e.memoizedState=m}}function Al(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(j(191,s));s.call(n)}}}var Rn={},ut=Gt(Rn),Sn=Gt(Rn),Nn=Gt(Rn);function Jt(e){if(e===Rn)throw Error(j(174));return e}function ni(e,t){switch(J(Nn,t),J(Sn,e),J(ut,Rn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Go(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Go(t,e)}ee(ut),J(ut,t)}function Or(){ee(ut),ee(Sn),ee(Nn)}function Au(e){Jt(Nn.current);var t=Jt(ut.current),r=Go(t,e.type);t!==r&&(J(Sn,e),J(ut,r))}function si(e){Sn.current===e&&(ee(ut),ee(Sn))}var re=Gt(0);function Is(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Eo=[];function oi(){for(var e=0;e<Eo.length;e++)Eo[e]._workInProgressVersionPrimary=null;Eo.length=0}var as=bt.ReactCurrentDispatcher,So=bt.ReactCurrentBatchConfig,nr=0,ne=null,de=null,fe=null,js=!1,sn=!1,bn=0,kf=0;function Ne(){throw Error(j(321))}function ai(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!nt(e[r],t[r]))return!1;return!0}function ii(e,t,r,n,s,a){if(nr=a,ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,as.current=e===null||e.memoizedState===null?Uf:zf,e=r(n,s),sn){a=0;do{if(sn=!1,bn=0,25<=a)throw Error(j(301));a+=1,fe=de=null,t.updateQueue=null,as.current=Ff,e=r(n,s)}while(sn)}if(as.current=Rs,t=de!==null&&de.next!==null,nr=0,fe=de=ne=null,js=!1,t)throw Error(j(300));return e}function li(){var e=bn!==0;return bn=0,e}function it(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fe===null?ne.memoizedState=fe=e:fe=fe.next=e,fe}function Ke(){if(de===null){var e=ne.alternate;e=e!==null?e.memoizedState:null}else e=de.next;var t=fe===null?ne.memoizedState:fe.next;if(t!==null)fe=t,de=e;else{if(e===null)throw Error(j(310));de=e,e={memoizedState:de.memoizedState,baseState:de.baseState,baseQueue:de.baseQueue,queue:de.queue,next:null},fe===null?ne.memoizedState=fe=e:fe=fe.next=e}return fe}function An(e,t){return typeof t=="function"?t(e):t}function No(e){var t=Ke(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=de,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=i=null,c=null,d=a;do{var h=d.lane;if((nr&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,i=n):c=c.next=m,ne.lanes|=h,sr|=h}d=d.next}while(d!==null&&d!==a);c===null?i=n:c.next=l,nt(n,t.memoizedState)||(Le=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ne.lanes|=a,sr|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function bo(e){var t=Ke(),r=t.queue;if(r===null)throw Error(j(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);nt(a,t.memoizedState)||(Le=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function _u(){}function wu(e,t){var r=ne,n=Ke(),s=t(),a=!nt(n.memoizedState,s);if(a&&(n.memoizedState=s,Le=!0),n=n.queue,ci(Iu.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||fe!==null&&fe.memoizedState.tag&1){if(r.flags|=2048,_n(9,Cu.bind(null,r,n,s,t),void 0,null),he===null)throw Error(j(349));nr&30||Tu(r,t,s)}return s}function Tu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ne.updateQueue,t===null?(t={lastEffect:null,stores:null},ne.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Cu(e,t,r,n){t.value=r,t.getSnapshot=n,ju(t)&&Ru(e)}function Iu(e,t,r){return r(function(){ju(t)&&Ru(e)})}function ju(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!nt(e,r)}catch{return!0}}function Ru(e){var t=St(e,1);t!==null&&rt(t,e,1,-1)}function _l(e){var t=it();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:An,lastRenderedState:e},t.queue=e,e=e.dispatch=Mf.bind(null,ne,e),[t.memoizedState,e]}function _n(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ne.updateQueue,t===null?(t={lastEffect:null,stores:null},ne.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Lu(){return Ke().memoizedState}function is(e,t,r,n){var s=it();ne.flags|=e,s.memoizedState=_n(1|t,r,void 0,n===void 0?null:n)}function Gs(e,t,r,n){var s=Ke();n=n===void 0?null:n;var a=void 0;if(de!==null){var i=de.memoizedState;if(a=i.destroy,n!==null&&ai(n,i.deps)){s.memoizedState=_n(t,r,a,n);return}}ne.flags|=e,s.memoizedState=_n(1|t,r,a,n)}function wl(e,t){return is(8390656,8,e,t)}function ci(e,t){return Gs(2048,8,e,t)}function Ou(e,t){return Gs(4,2,e,t)}function ku(e,t){return Gs(4,4,e,t)}function Du(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pu(e,t,r){return r=r!=null?r.concat([e]):null,Gs(4,4,Du.bind(null,t,e),r)}function ui(){}function Mu(e,t){var r=Ke();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ai(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Uu(e,t){var r=Ke();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ai(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function zu(e,t,r){return nr&21?(nt(r,t)||(r=Gc(),ne.lanes|=r,sr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=r)}function Df(e,t){var r=W;W=r!==0&&4>r?r:4,e(!0);var n=So.transition;So.transition={};try{e(!1),t()}finally{W=r,So.transition=n}}function Fu(){return Ke().memoizedState}function Pf(e,t,r){var n=zt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Bu(e))Vu(t,r);else if(r=Nu(e,t,r,n),r!==null){var s=Te();rt(r,e,n,s),$u(r,t,n)}}function Mf(e,t,r){var n=zt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bu(e))Vu(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,nt(l,i)){var c=t.interleaved;c===null?(s.next=s,ti(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Nu(e,t,s,n),r!==null&&(s=Te(),rt(r,e,n,s),$u(r,t,n))}}function Bu(e){var t=e.alternate;return e===ne||t!==null&&t===ne}function Vu(e,t){sn=js=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $u(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ba(e,r)}}var Rs={readContext:We,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},Uf={readContext:We,useCallback:function(e,t){return it().memoizedState=[e,t===void 0?null:t],e},useContext:We,useEffect:wl,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,is(4194308,4,Du.bind(null,t,e),r)},useLayoutEffect:function(e,t){return is(4194308,4,e,t)},useInsertionEffect:function(e,t){return is(4,2,e,t)},useMemo:function(e,t){var r=it();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=it();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Pf.bind(null,ne,e),[n.memoizedState,e]},useRef:function(e){var t=it();return e={current:e},t.memoizedState=e},useState:_l,useDebugValue:ui,useDeferredValue:function(e){return it().memoizedState=e},useTransition:function(){var e=_l(!1),t=e[0];return e=Df.bind(null,e[1]),it().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ne,s=it();if(te){if(r===void 0)throw Error(j(407));r=r()}else{if(r=t(),he===null)throw Error(j(349));nr&30||Tu(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,wl(Iu.bind(null,n,a,e),[e]),n.flags|=2048,_n(9,Cu.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=it(),t=he.identifierPrefix;if(te){var r=vt,n=xt;r=(n&~(1<<32-tt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=bn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=kf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zf={readContext:We,useCallback:Mu,useContext:We,useEffect:ci,useImperativeHandle:Pu,useInsertionEffect:Ou,useLayoutEffect:ku,useMemo:Uu,useReducer:No,useRef:Lu,useState:function(){return No(An)},useDebugValue:ui,useDeferredValue:function(e){var t=Ke();return zu(t,de.memoizedState,e)},useTransition:function(){var e=No(An)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:wu,useId:Fu,unstable_isNewReconciler:!1},Ff={readContext:We,useCallback:Mu,useContext:We,useEffect:ci,useImperativeHandle:Pu,useInsertionEffect:Ou,useLayoutEffect:ku,useMemo:Uu,useReducer:bo,useRef:Lu,useState:function(){return bo(An)},useDebugValue:ui,useDeferredValue:function(e){var t=Ke();return de===null?t.memoizedState=e:zu(t,de.memoizedState,e)},useTransition:function(){var e=bo(An)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:wu,useId:Fu,unstable_isNewReconciler:!1};function qe(e,t){if(e&&e.defaultProps){t=se({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function da(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:se({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Hs={isMounted:function(e){return(e=e._reactInternals)?ir(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Te(),s=zt(e),a=gt(n,s);a.payload=t,r!=null&&(a.callback=r),t=Mt(e,a,s),t!==null&&(rt(t,e,s,n),os(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Te(),s=zt(e),a=gt(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Mt(e,a,s),t!==null&&(rt(t,e,s,n),os(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Te(),n=zt(e),s=gt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Mt(e,s,n),t!==null&&(rt(t,e,n,r),os(t,e,n))}};function Tl(e,t,r,n,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,i):t.prototype&&t.prototype.isPureReactComponent?!vn(r,n)||!vn(s,a):!0}function Gu(e,t,r){var n=!1,s=Vt,a=t.contextType;return typeof a=="object"&&a!==null?a=We(a):(s=ke(t)?tr:_e.current,n=t.contextTypes,a=(n=n!=null)?jr(e,s):Vt),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Hs,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Cl(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Hs.enqueueReplaceState(t,t.state,null)}function pa(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},ri(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=We(a):(a=ke(t)?tr:_e.current,s.context=jr(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(da(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Hs.enqueueReplaceState(s,s.state,null),Cs(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function kr(e,t){try{var r="",n=t;do r+=fp(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Ao(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function fa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Bf=typeof WeakMap=="function"?WeakMap:Map;function Hu(e,t,r){r=gt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Os||(Os=!0,ba=n),fa(e,t)},r}function Yu(e,t,r){r=gt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){fa(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){fa(e,t),typeof n!="function"&&(Ut===null?Ut=new Set([this]):Ut.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Il(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Bf;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=th.bind(null,e,t,r),t.then(e,e))}function jl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rl(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=gt(-1,1),t.tag=2,Mt(r,t,1))),r.lanes|=1),e)}var Vf=bt.ReactCurrentOwner,Le=!1;function we(e,t,r,n){t.child=e===null?Su(t,null,r,n):Lr(t,e.child,r,n)}function Ll(e,t,r,n,s){r=r.render;var a=t.ref;return _r(t,s),n=ii(e,t,r,n,a,s),r=li(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nt(e,t,s)):(te&&r&&Qa(t),t.flags|=1,we(e,t,n,s),t.child)}function Ol(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!gi(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Wu(e,t,a,n,s)):(e=ds(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:vn,r(i,n)&&e.ref===t.ref)return Nt(e,t,s)}return t.flags|=1,e=Ft(a,n),e.ref=t.ref,e.return=t,t.child=e}function Wu(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(vn(a,n)&&e.ref===t.ref)if(Le=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,Nt(e,t,s)}return ha(e,t,r,n,s)}function Ku(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Er,Pe),Pe|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(Er,Pe),Pe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,J(Er,Pe),Pe|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,J(Er,Pe),Pe|=n;return we(e,t,s,r),t.child}function Qu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ha(e,t,r,n,s){var a=ke(r)?tr:_e.current;return a=jr(t,a),_r(t,s),r=ii(e,t,r,n,a,s),n=li(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Nt(e,t,s)):(te&&n&&Qa(t),t.flags|=1,we(e,t,r,s),t.child)}function kl(e,t,r,n,s){if(ke(r)){var a=!0;bs(t)}else a=!1;if(_r(t,s),t.stateNode===null)ls(e,t),Gu(t,r,n),pa(t,r,n,s),n=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=We(d):(d=ke(r)?tr:_e.current,d=jr(t,d));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Cl(t,i,n,d),Tt=!1;var x=t.memoizedState;i.state=x,Cs(t,n,i,s),c=t.memoizedState,l!==n||x!==c||Oe.current||Tt?(typeof h=="function"&&(da(t,r,h,n),c=t.memoizedState),(l=Tt||Tl(t,r,l,n,x,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),i.props=n,i.state=c,i.context=d,n=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,bu(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:qe(t.type,l),i.props=d,m=t.pendingProps,x=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=We(c):(c=ke(r)?tr:_e.current,c=jr(t,c));var E=r.getDerivedStateFromProps;(h=typeof E=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==m||x!==c)&&Cl(t,i,n,c),Tt=!1,x=t.memoizedState,i.state=x,Cs(t,n,i,s);var g=t.memoizedState;l!==m||x!==g||Oe.current||Tt?(typeof E=="function"&&(da(t,r,E,n),g=t.memoizedState),(d=Tt||Tl(t,r,d,n,x,g,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,g,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,g,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=c,n=d):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),n=!1)}return ma(e,t,r,n,a,s)}function ma(e,t,r,n,s,a){Qu(e,t);var i=(t.flags&128)!==0;if(!n&&!i)return s&&yl(t,r,!1),Nt(e,t,a);n=t.stateNode,Vf.current=t;var l=i&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&i?(t.child=Lr(t,e.child,null,a),t.child=Lr(t,null,l,a)):we(e,t,l,a),t.memoizedState=n.state,s&&yl(t,r,!0),t.child}function Xu(e){var t=e.stateNode;t.pendingContext?gl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gl(e,t.context,!1),ni(e,t.containerInfo)}function Dl(e,t,r,n,s){return Rr(),qa(s),t.flags|=256,we(e,t,r,n),t.child}var xa={dehydrated:null,treeContext:null,retryLane:0};function va(e){return{baseLanes:e,cachePool:null,transitions:null}}function qu(e,t,r){var n=t.pendingProps,s=re.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),J(re,s&1),e===null)return ca(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=n.children,e=n.fallback,a?(n=t.mode,a=t.child,i={mode:"hidden",children:i},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Ks(i,n,0,null),e=er(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=va(r),t.memoizedState=xa,e):di(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return $f(e,t,i,n,l,s,r);if(a){a=n.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(i&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ft(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Ft(l,a):(a=er(a,i,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,i=e.child.memoizedState,i=i===null?va(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=xa,n}return a=e.child,e=a.sibling,n=Ft(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function di(e,t){return t=Ks({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yn(e,t,r,n){return n!==null&&qa(n),Lr(t,e.child,null,r),e=di(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $f(e,t,r,n,s,a,i){if(r)return t.flags&256?(t.flags&=-257,n=Ao(Error(j(422))),Yn(e,t,i,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Ks({mode:"visible",children:n.children},s,0,null),a=er(a,s,i,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Lr(t,e.child,null,i),t.child.memoizedState=va(i),t.memoizedState=xa,a);if(!(t.mode&1))return Yn(e,t,i,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(j(419)),n=Ao(a,n,void 0),Yn(e,t,i,n)}if(l=(i&e.childLanes)!==0,Le||l){if(n=he,n!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,St(e,s),rt(n,e,s,-1))}return vi(),n=Ao(Error(j(421))),Yn(e,t,i,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=rh.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Me=Pt(s.nextSibling),Ue=t,te=!0,Ze=null,e!==null&&($e[Ge++]=xt,$e[Ge++]=vt,$e[Ge++]=rr,xt=e.id,vt=e.overflow,rr=t),t=di(t,n.children),t.flags|=4096,t)}function Pl(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ua(e.return,t,r)}function _o(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Ju(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(we(e,t,n.children,r),n=re.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pl(e,r,t);else if(e.tag===19)Pl(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(J(re,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Is(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),_o(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Is(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}_o(t,!0,r,null,a);break;case"together":_o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ls(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),sr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(j(153));if(t.child!==null){for(e=t.child,r=Ft(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ft(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Gf(e,t,r){switch(t.tag){case 3:Xu(t),Rr();break;case 5:Au(t);break;case 1:ke(t.type)&&bs(t);break;case 4:ni(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;J(ws,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(J(re,re.current&1),t.flags|=128,null):r&t.child.childLanes?qu(e,t,r):(J(re,re.current&1),e=Nt(e,t,r),e!==null?e.sibling:null);J(re,re.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Ju(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),J(re,re.current),n)break;return null;case 22:case 23:return t.lanes=0,Ku(e,t,r)}return Nt(e,t,r)}var Zu,ga,ed,td;Zu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ga=function(){};ed=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Jt(ut.current);var a=null;switch(r){case"input":s=Fo(e,s),n=Fo(e,n),a=[];break;case"select":s=se({},s,{value:void 0}),n=se({},n,{value:void 0}),a=[];break;case"textarea":s=$o(e,s),n=$o(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ss)}Ho(r,n);var i;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(i in l)l.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(un.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(un.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Z("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};td=function(e,t,r,n){r!==n&&(t.flags|=4)};function Yr(e,t){if(!te)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function be(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Hf(e,t,r){var n=t.pendingProps;switch(Xa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return be(t),null;case 1:return ke(t.type)&&Ns(),be(t),null;case 3:return n=t.stateNode,Or(),ee(Oe),ee(_e),oi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Gn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ze!==null&&(wa(Ze),Ze=null))),ga(e,t),be(t),null;case 5:si(t);var s=Jt(Nn.current);if(r=t.type,e!==null&&t.stateNode!=null)ed(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(j(166));return be(t),null}if(e=Jt(ut.current),Gn(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[lt]=t,n[En]=a,e=(t.mode&1)!==0,r){case"dialog":Z("cancel",n),Z("close",n);break;case"iframe":case"object":case"embed":Z("load",n);break;case"video":case"audio":for(s=0;s<Jr.length;s++)Z(Jr[s],n);break;case"source":Z("error",n);break;case"img":case"image":case"link":Z("error",n),Z("load",n);break;case"details":Z("toggle",n);break;case"input":Hi(n,a),Z("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Z("invalid",n);break;case"textarea":Wi(n,a),Z("invalid",n)}Ho(r,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&$n(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&$n(n.textContent,l,e),s=["children",""+l]):un.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Z("scroll",n)}switch(r){case"input":Dn(n),Yi(n,a,!0);break;case"textarea":Dn(n),Ki(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ss)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ic(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=i.createElement(r,{is:n.is}):(e=i.createElement(r),r==="select"&&(i=e,n.multiple?i.multiple=!0:n.size&&(i.size=n.size))):e=i.createElementNS(e,r),e[lt]=t,e[En]=n,Zu(e,t,!1,!1),t.stateNode=e;e:{switch(i=Yo(r,n),r){case"dialog":Z("cancel",e),Z("close",e),s=n;break;case"iframe":case"object":case"embed":Z("load",e),s=n;break;case"video":case"audio":for(s=0;s<Jr.length;s++)Z(Jr[s],e);s=n;break;case"source":Z("error",e),s=n;break;case"img":case"image":case"link":Z("error",e),Z("load",e),s=n;break;case"details":Z("toggle",e),s=n;break;case"input":Hi(e,n),s=Fo(e,n),Z("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=se({},n,{value:void 0}),Z("invalid",e);break;case"textarea":Wi(e,n),s=$o(e,n),Z("invalid",e);break;default:s=n}Ho(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Lc(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jc(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&dn(e,c):typeof c=="number"&&dn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(un.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Z("scroll",e):c!=null&&Da(e,a,c,i))}switch(r){case"input":Dn(e),Yi(e,n,!1);break;case"textarea":Dn(e),Ki(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Bt(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Sr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Sr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ss)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return be(t),null;case 6:if(e&&t.stateNode!=null)td(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(j(166));if(r=Jt(Nn.current),Jt(ut.current),Gn(t)){if(n=t.stateNode,r=t.memoizedProps,n[lt]=t,(a=n.nodeValue!==r)&&(e=Ue,e!==null))switch(e.tag){case 3:$n(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$n(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[lt]=t,t.stateNode=n}return be(t),null;case 13:if(ee(re),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(te&&Me!==null&&t.mode&1&&!(t.flags&128))yu(),Rr(),t.flags|=98560,a=!1;else if(a=Gn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(j(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(j(317));a[lt]=t}else Rr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;be(t),a=!1}else Ze!==null&&(wa(Ze),Ze=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||re.current&1?pe===0&&(pe=3):vi())),t.updateQueue!==null&&(t.flags|=4),be(t),null);case 4:return Or(),ga(e,t),e===null&&gn(t.stateNode.containerInfo),be(t),null;case 10:return ei(t.type._context),be(t),null;case 17:return ke(t.type)&&Ns(),be(t),null;case 19:if(ee(re),a=t.memoizedState,a===null)return be(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)Yr(a,!1);else{if(pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Is(e),i!==null){for(t.flags|=128,Yr(a,!1),n=i.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return J(re,re.current&1|2),t.child}e=e.sibling}a.tail!==null&&le()>Dr&&(t.flags|=128,n=!0,Yr(a,!1),t.lanes=4194304)}else{if(!n)if(e=Is(i),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!te)return be(t),null}else 2*le()-a.renderingStartTime>Dr&&r!==1073741824&&(t.flags|=128,n=!0,Yr(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=le(),t.sibling=null,r=re.current,J(re,n?r&1|2:r&1),t):(be(t),null);case 22:case 23:return xi(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Pe&1073741824&&(be(t),t.subtreeFlags&6&&(t.flags|=8192)):be(t),null;case 24:return null;case 25:return null}throw Error(j(156,t.tag))}function Yf(e,t){switch(Xa(t),t.tag){case 1:return ke(t.type)&&Ns(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(),ee(Oe),ee(_e),oi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return si(t),null;case 13:if(ee(re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(j(340));Rr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ee(re),null;case 4:return Or(),null;case 10:return ei(t.type._context),null;case 22:case 23:return xi(),null;case 24:return null;default:return null}}var Wn=!1,Ae=!1,Wf=typeof WeakSet=="function"?WeakSet:Set,P=null;function yr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){oe(e,t,n)}else r.current=null}function ya(e,t,r){try{r()}catch(n){oe(e,t,n)}}var Ml=!1;function Kf(e,t){if(ra=gs,e=au(),Ka(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,l=-1,c=-1,d=0,h=0,m=e,x=null;t:for(;;){for(var E;m!==r||s!==0&&m.nodeType!==3||(l=i+s),m!==a||n!==0&&m.nodeType!==3||(c=i+n),m.nodeType===3&&(i+=m.nodeValue.length),(E=m.firstChild)!==null;)x=m,m=E;for(;;){if(m===e)break t;if(x===r&&++d===s&&(l=i),x===a&&++h===n&&(c=i),(E=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=E}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(na={focusedElem:e,selectionRange:r},gs=!1,P=t;P!==null;)if(t=P,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,P=e;else for(;P!==null;){t=P;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var S=g.memoizedProps,_=g.memoizedState,f=t.stateNode,u=f.getSnapshotBeforeUpdate(t.elementType===t.type?S:qe(t.type,S),_);f.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(v){oe(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,P=e;break}P=t.return}return g=Ml,Ml=!1,g}function on(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&ya(t,r,a)}s=s.next}while(s!==n)}}function Ys(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ea(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rd(e){var t=e.alternate;t!==null&&(e.alternate=null,rd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lt],delete t[En],delete t[aa],delete t[jf],delete t[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function nd(e){return e.tag===5||e.tag===3||e.tag===4}function Ul(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||nd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ss));else if(n!==4&&(e=e.child,e!==null))for(Sa(e,t,r),e=e.sibling;e!==null;)Sa(e,t,r),e=e.sibling}function Na(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Na(e,t,r),e=e.sibling;e!==null;)Na(e,t,r),e=e.sibling}var xe=null,Je=!1;function _t(e,t,r){for(r=r.child;r!==null;)sd(e,t,r),r=r.sibling}function sd(e,t,r){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Us,r)}catch{}switch(r.tag){case 5:Ae||yr(r,t);case 6:var n=xe,s=Je;xe=null,_t(e,t,r),xe=n,Je=s,xe!==null&&(Je?(e=xe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):xe.removeChild(r.stateNode));break;case 18:xe!==null&&(Je?(e=xe,r=r.stateNode,e.nodeType===8?go(e.parentNode,r):e.nodeType===1&&go(e,r),mn(e)):go(xe,r.stateNode));break;case 4:n=xe,s=Je,xe=r.stateNode.containerInfo,Je=!0,_t(e,t,r),xe=n,Je=s;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&ya(r,t,i),s=s.next}while(s!==n)}_t(e,t,r);break;case 1:if(!Ae&&(yr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){oe(r,t,l)}_t(e,t,r);break;case 21:_t(e,t,r);break;case 22:r.mode&1?(Ae=(n=Ae)||r.memoizedState!==null,_t(e,t,r),Ae=n):_t(e,t,r);break;default:_t(e,t,r)}}function zl(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Wf),t.forEach(function(n){var s=nh.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Xe(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:xe=l.stateNode,Je=!1;break e;case 3:xe=l.stateNode.containerInfo,Je=!0;break e;case 4:xe=l.stateNode.containerInfo,Je=!0;break e}l=l.return}if(xe===null)throw Error(j(160));sd(a,i,s),xe=null,Je=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){oe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)od(t,e),t=t.sibling}function od(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xe(t,e),ot(e),n&4){try{on(3,e,e.return),Ys(3,e)}catch(S){oe(e,e.return,S)}try{on(5,e,e.return)}catch(S){oe(e,e.return,S)}}break;case 1:Xe(t,e),ot(e),n&512&&r!==null&&yr(r,r.return);break;case 5:if(Xe(t,e),ot(e),n&512&&r!==null&&yr(r,r.return),e.flags&32){var s=e.stateNode;try{dn(s,"")}catch(S){oe(e,e.return,S)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Tc(s,a),Yo(l,i);var d=Yo(l,a);for(i=0;i<c.length;i+=2){var h=c[i],m=c[i+1];h==="style"?Lc(s,m):h==="dangerouslySetInnerHTML"?jc(s,m):h==="children"?dn(s,m):Da(s,h,m,d)}switch(l){case"input":Bo(s,a);break;case"textarea":Cc(s,a);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var E=a.value;E!=null?Sr(s,!!a.multiple,E,!1):x!==!!a.multiple&&(a.defaultValue!=null?Sr(s,!!a.multiple,a.defaultValue,!0):Sr(s,!!a.multiple,a.multiple?[]:"",!1))}s[En]=a}catch(S){oe(e,e.return,S)}}break;case 6:if(Xe(t,e),ot(e),n&4){if(e.stateNode===null)throw Error(j(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(S){oe(e,e.return,S)}}break;case 3:if(Xe(t,e),ot(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{mn(t.containerInfo)}catch(S){oe(e,e.return,S)}break;case 4:Xe(t,e),ot(e);break;case 13:Xe(t,e),ot(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(hi=le())),n&4&&zl(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Ae=(d=Ae)||h,Xe(t,e),Ae=d):Xe(t,e),ot(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(P=e,h=e.child;h!==null;){for(m=P=h;P!==null;){switch(x=P,E=x.child,x.tag){case 0:case 11:case 14:case 15:on(4,x,x.return);break;case 1:yr(x,x.return);var g=x.stateNode;if(typeof g.componentWillUnmount=="function"){n=x,r=x.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(S){oe(n,r,S)}}break;case 5:yr(x,x.return);break;case 22:if(x.memoizedState!==null){Bl(m);continue}}E!==null?(E.return=x,P=E):Bl(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Rc("display",i))}catch(S){oe(e,e.return,S)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(S){oe(e,e.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Xe(t,e),ot(e),n&4&&zl(e);break;case 21:break;default:Xe(t,e),ot(e)}}function ot(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(nd(r)){var n=r;break e}r=r.return}throw Error(j(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(dn(s,""),n.flags&=-33);var a=Ul(e);Na(e,a,s);break;case 3:case 4:var i=n.stateNode.containerInfo,l=Ul(e);Sa(e,l,i);break;default:throw Error(j(161))}}catch(c){oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Qf(e,t,r){P=e,ad(e)}function ad(e,t,r){for(var n=(e.mode&1)!==0;P!==null;){var s=P,a=s.child;if(s.tag===22&&n){var i=s.memoizedState!==null||Wn;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ae;l=Wn;var d=Ae;if(Wn=i,(Ae=c)&&!d)for(P=s;P!==null;)i=P,c=i.child,i.tag===22&&i.memoizedState!==null?Vl(s):c!==null?(c.return=i,P=c):Vl(s);for(;a!==null;)P=a,ad(a),a=a.sibling;P=s,Wn=l,Ae=d}Fl(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,P=a):Fl(e)}}function Fl(e){for(;P!==null;){var t=P;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ae||Ys(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ae)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:qe(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Al(t,a,n);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Al(t,i,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&mn(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}Ae||t.flags&512&&Ea(t)}catch(x){oe(t,t.return,x)}}if(t===e){P=null;break}if(r=t.sibling,r!==null){r.return=t.return,P=r;break}P=t.return}}function Bl(e){for(;P!==null;){var t=P;if(t===e){P=null;break}var r=t.sibling;if(r!==null){r.return=t.return,P=r;break}P=t.return}}function Vl(e){for(;P!==null;){var t=P;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ys(4,t)}catch(c){oe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){oe(t,s,c)}}var a=t.return;try{Ea(t)}catch(c){oe(t,a,c)}break;case 5:var i=t.return;try{Ea(t)}catch(c){oe(t,i,c)}}}catch(c){oe(t,t.return,c)}if(t===e){P=null;break}var l=t.sibling;if(l!==null){l.return=t.return,P=l;break}P=t.return}}var Xf=Math.ceil,Ls=bt.ReactCurrentDispatcher,pi=bt.ReactCurrentOwner,Ye=bt.ReactCurrentBatchConfig,H=0,he=null,ue=null,ge=0,Pe=0,Er=Gt(0),pe=0,wn=null,sr=0,Ws=0,fi=0,an=null,Re=null,hi=0,Dr=1/0,ht=null,Os=!1,ba=null,Ut=null,Kn=!1,Rt=null,ks=0,ln=0,Aa=null,cs=-1,us=0;function Te(){return H&6?le():cs!==-1?cs:cs=le()}function zt(e){return e.mode&1?H&2&&ge!==0?ge&-ge:Of.transition!==null?(us===0&&(us=Gc()),us):(e=W,e!==0||(e=window.event,e=e===void 0?16:qc(e.type)),e):1}function rt(e,t,r,n){if(50<ln)throw ln=0,Aa=null,Error(j(185));Cn(e,r,n),(!(H&2)||e!==he)&&(e===he&&(!(H&2)&&(Ws|=r),pe===4&&It(e,ge)),De(e,n),r===1&&H===0&&!(t.mode&1)&&(Dr=le()+500,$s&&Ht()))}function De(e,t){var r=e.callbackNode;Lp(e,t);var n=vs(e,e===he?ge:0);if(n===0)r!==null&&qi(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&qi(r),t===1)e.tag===0?Lf($l.bind(null,e)):xu($l.bind(null,e)),Cf(function(){!(H&6)&&Ht()}),r=null;else{switch(Hc(n)){case 1:r=Fa;break;case 4:r=Vc;break;case 16:r=xs;break;case 536870912:r=$c;break;default:r=xs}r=hd(r,id.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function id(e,t){if(cs=-1,us=0,H&6)throw Error(j(327));var r=e.callbackNode;if(wr()&&e.callbackNode!==r)return null;var n=vs(e,e===he?ge:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ds(e,n);else{t=n;var s=H;H|=2;var a=cd();(he!==e||ge!==t)&&(ht=null,Dr=le()+500,Zt(e,t));do try{Zf();break}catch(l){ld(e,l)}while(!0);Za(),Ls.current=a,H=s,ue!==null?t=0:(he=null,ge=0,t=pe)}if(t!==0){if(t===2&&(s=qo(e),s!==0&&(n=s,t=_a(e,s))),t===1)throw r=wn,Zt(e,0),It(e,n),De(e,le()),r;if(t===6)It(e,n);else{if(s=e.current.alternate,!(n&30)&&!qf(s)&&(t=Ds(e,n),t===2&&(a=qo(e),a!==0&&(n=a,t=_a(e,a))),t===1))throw r=wn,Zt(e,0),It(e,n),De(e,le()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(j(345));case 2:Kt(e,Re,ht);break;case 3:if(It(e,n),(n&130023424)===n&&(t=hi+500-le(),10<t)){if(vs(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Te(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=oa(Kt.bind(null,e,Re,ht),t);break}Kt(e,Re,ht);break;case 4:if(It(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var i=31-tt(n);a=1<<i,i=t[i],i>s&&(s=i),n&=~a}if(n=s,n=le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Xf(n/1960))-n,10<n){e.timeoutHandle=oa(Kt.bind(null,e,Re,ht),n);break}Kt(e,Re,ht);break;case 5:Kt(e,Re,ht);break;default:throw Error(j(329))}}}return De(e,le()),e.callbackNode===r?id.bind(null,e):null}function _a(e,t){var r=an;return e.current.memoizedState.isDehydrated&&(Zt(e,t).flags|=256),e=Ds(e,t),e!==2&&(t=Re,Re=r,t!==null&&wa(t)),e}function wa(e){Re===null?Re=e:Re.push.apply(Re,e)}function qf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!nt(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function It(e,t){for(t&=~fi,t&=~Ws,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-tt(t),n=1<<r;e[r]=-1,t&=~n}}function $l(e){if(H&6)throw Error(j(327));wr();var t=vs(e,0);if(!(t&1))return De(e,le()),null;var r=Ds(e,t);if(e.tag!==0&&r===2){var n=qo(e);n!==0&&(t=n,r=_a(e,n))}if(r===1)throw r=wn,Zt(e,0),It(e,t),De(e,le()),r;if(r===6)throw Error(j(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kt(e,Re,ht),De(e,le()),null}function mi(e,t){var r=H;H|=1;try{return e(t)}finally{H=r,H===0&&(Dr=le()+500,$s&&Ht())}}function or(e){Rt!==null&&Rt.tag===0&&!(H&6)&&wr();var t=H;H|=1;var r=Ye.transition,n=W;try{if(Ye.transition=null,W=1,e)return e()}finally{W=n,Ye.transition=r,H=t,!(H&6)&&Ht()}}function xi(){Pe=Er.current,ee(Er)}function Zt(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Tf(r)),ue!==null)for(r=ue.return;r!==null;){var n=r;switch(Xa(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ns();break;case 3:Or(),ee(Oe),ee(_e),oi();break;case 5:si(n);break;case 4:Or();break;case 13:ee(re);break;case 19:ee(re);break;case 10:ei(n.type._context);break;case 22:case 23:xi()}r=r.return}if(he=e,ue=e=Ft(e.current,null),ge=Pe=t,pe=0,wn=null,fi=Ws=sr=0,Re=an=null,qt!==null){for(t=0;t<qt.length;t++)if(r=qt[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var i=a.next;a.next=s,n.next=i}r.pending=n}qt=null}return e}function ld(e,t){do{var r=ue;try{if(Za(),as.current=Rs,js){for(var n=ne.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}js=!1}if(nr=0,fe=de=ne=null,sn=!1,bn=0,pi.current=null,r===null||r.return===null){pe=1,wn=t,ue=null;break}e:{var a=e,i=r.return,l=r,c=t;if(t=ge,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var x=h.alternate;x?(h.updateQueue=x.updateQueue,h.memoizedState=x.memoizedState,h.lanes=x.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=jl(i);if(E!==null){E.flags&=-257,Rl(E,i,l,a,t),E.mode&1&&Il(a,d,t),t=E,c=d;var g=t.updateQueue;if(g===null){var S=new Set;S.add(c),t.updateQueue=S}else g.add(c);break e}else{if(!(t&1)){Il(a,d,t),vi();break e}c=Error(j(426))}}else if(te&&l.mode&1){var _=jl(i);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Rl(_,i,l,a,t),qa(kr(c,l));break e}}a=c=kr(c,l),pe!==4&&(pe=2),an===null?an=[a]:an.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var f=Hu(a,c,t);bl(a,f);break e;case 1:l=c;var u=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof u.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ut===null||!Ut.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var v=Yu(a,l,t);bl(a,v);break e}}a=a.return}while(a!==null)}dd(r)}catch(y){t=y,ue===r&&r!==null&&(ue=r=r.return);continue}break}while(!0)}function cd(){var e=Ls.current;return Ls.current=Rs,e===null?Rs:e}function vi(){(pe===0||pe===3||pe===2)&&(pe=4),he===null||!(sr&268435455)&&!(Ws&268435455)||It(he,ge)}function Ds(e,t){var r=H;H|=2;var n=cd();(he!==e||ge!==t)&&(ht=null,Zt(e,t));do try{Jf();break}catch(s){ld(e,s)}while(!0);if(Za(),H=r,Ls.current=n,ue!==null)throw Error(j(261));return he=null,ge=0,pe}function Jf(){for(;ue!==null;)ud(ue)}function Zf(){for(;ue!==null&&!bp();)ud(ue)}function ud(e){var t=fd(e.alternate,e,Pe);e.memoizedProps=e.pendingProps,t===null?dd(e):ue=t,pi.current=null}function dd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Yf(r,t),r!==null){r.flags&=32767,ue=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pe=6,ue=null;return}}else if(r=Hf(r,t,Pe),r!==null){ue=r;return}if(t=t.sibling,t!==null){ue=t;return}ue=t=e}while(t!==null);pe===0&&(pe=5)}function Kt(e,t,r){var n=W,s=Ye.transition;try{Ye.transition=null,W=1,eh(e,t,r,n)}finally{Ye.transition=s,W=n}return null}function eh(e,t,r,n){do wr();while(Rt!==null);if(H&6)throw Error(j(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(j(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Op(e,a),e===he&&(ue=he=null,ge=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Kn||(Kn=!0,hd(xs,function(){return wr(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ye.transition,Ye.transition=null;var i=W;W=1;var l=H;H|=4,pi.current=null,Kf(e,r),od(r,e),Ef(na),gs=!!ra,na=ra=null,e.current=r,Qf(r),Ap(),H=l,W=i,Ye.transition=a}else e.current=r;if(Kn&&(Kn=!1,Rt=e,ks=s),a=e.pendingLanes,a===0&&(Ut=null),Tp(r.stateNode),De(e,le()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Os)throw Os=!1,e=ba,ba=null,e;return ks&1&&e.tag!==0&&wr(),a=e.pendingLanes,a&1?e===Aa?ln++:(ln=0,Aa=e):ln=0,Ht(),null}function wr(){if(Rt!==null){var e=Hc(ks),t=Ye.transition,r=W;try{if(Ye.transition=null,W=16>e?16:e,Rt===null)var n=!1;else{if(e=Rt,Rt=null,ks=0,H&6)throw Error(j(331));var s=H;for(H|=4,P=e.current;P!==null;){var a=P,i=a.child;if(P.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(P=d;P!==null;){var h=P;switch(h.tag){case 0:case 11:case 15:on(8,h,a)}var m=h.child;if(m!==null)m.return=h,P=m;else for(;P!==null;){h=P;var x=h.sibling,E=h.return;if(rd(h),h===d){P=null;break}if(x!==null){x.return=E,P=x;break}P=E}}}var g=a.alternate;if(g!==null){var S=g.child;if(S!==null){g.child=null;do{var _=S.sibling;S.sibling=null,S=_}while(S!==null)}}P=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,P=i;else e:for(;P!==null;){if(a=P,a.flags&2048)switch(a.tag){case 0:case 11:case 15:on(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,P=f;break e}P=a.return}}var u=e.current;for(P=u;P!==null;){i=P;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,P=p;else e:for(i=u;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ys(9,l)}}catch(y){oe(l,l.return,y)}if(l===i){P=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,P=v;break e}P=l.return}}if(H=s,Ht(),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Us,e)}catch{}n=!0}return n}finally{W=r,Ye.transition=t}}return!1}function Gl(e,t,r){t=kr(r,t),t=Hu(e,t,1),e=Mt(e,t,1),t=Te(),e!==null&&(Cn(e,1,t),De(e,t))}function oe(e,t,r){if(e.tag===3)Gl(e,e,r);else for(;t!==null;){if(t.tag===3){Gl(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ut===null||!Ut.has(n))){e=kr(r,e),e=Yu(t,e,1),t=Mt(t,e,1),e=Te(),t!==null&&(Cn(t,1,e),De(t,e));break}}t=t.return}}function th(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Te(),e.pingedLanes|=e.suspendedLanes&r,he===e&&(ge&r)===r&&(pe===4||pe===3&&(ge&130023424)===ge&&500>le()-hi?Zt(e,0):fi|=r),De(e,t)}function pd(e,t){t===0&&(e.mode&1?(t=Un,Un<<=1,!(Un&130023424)&&(Un=4194304)):t=1);var r=Te();e=St(e,t),e!==null&&(Cn(e,t,r),De(e,r))}function rh(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),pd(e,r)}function nh(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(j(314))}n!==null&&n.delete(t),pd(e,r)}var fd;fd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Oe.current)Le=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Le=!1,Gf(e,t,r);Le=!!(e.flags&131072)}else Le=!1,te&&t.flags&1048576&&vu(t,_s,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ls(e,t),e=t.pendingProps;var s=jr(t,_e.current);_r(t,r),s=ii(null,t,n,e,s,r);var a=li();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ke(n)?(a=!0,bs(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ri(t),s.updater=Hs,t.stateNode=s,s._reactInternals=t,pa(t,n,e,r),t=ma(null,t,n,!0,a,r)):(t.tag=0,te&&a&&Qa(t),we(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ls(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=oh(n),e=qe(n,e),s){case 0:t=ha(null,t,n,e,r);break e;case 1:t=kl(null,t,n,e,r);break e;case 11:t=Ll(null,t,n,e,r);break e;case 14:t=Ol(null,t,n,qe(n.type,e),r);break e}throw Error(j(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),ha(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),kl(e,t,n,s,r);case 3:e:{if(Xu(t),e===null)throw Error(j(387));n=t.pendingProps,a=t.memoizedState,s=a.element,bu(e,t),Cs(t,n,null,r);var i=t.memoizedState;if(n=i.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=kr(Error(j(423)),t),t=Dl(e,t,n,r,s);break e}else if(n!==s){s=kr(Error(j(424)),t),t=Dl(e,t,n,r,s);break e}else for(Me=Pt(t.stateNode.containerInfo.firstChild),Ue=t,te=!0,Ze=null,r=Su(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rr(),n===s){t=Nt(e,t,r);break e}we(e,t,n,r)}t=t.child}return t;case 5:return Au(t),e===null&&ca(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,sa(n,s)?i=null:a!==null&&sa(n,a)&&(t.flags|=32),Qu(e,t),we(e,t,i,r),t.child;case 6:return e===null&&ca(t),null;case 13:return qu(e,t,r);case 4:return ni(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Lr(t,null,n,r):we(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),Ll(e,t,n,s,r);case 7:return we(e,t,t.pendingProps,r),t.child;case 8:return we(e,t,t.pendingProps.children,r),t.child;case 12:return we(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,J(ws,n._currentValue),n._currentValue=i,a!==null)if(nt(a.value,i)){if(a.children===s.children&&!Oe.current){t=Nt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=gt(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),ua(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(j(341));i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),ua(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}we(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,_r(t,r),s=We(s),n=n(s),t.flags|=1,we(e,t,n,r),t.child;case 14:return n=t.type,s=qe(n,t.pendingProps),s=qe(n.type,s),Ol(e,t,n,s,r);case 15:return Wu(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qe(n,s),ls(e,t),t.tag=1,ke(n)?(e=!0,bs(t)):e=!1,_r(t,r),Gu(t,n,s),pa(t,n,s,r),ma(null,t,n,!0,e,r);case 19:return Ju(e,t,r);case 22:return Ku(e,t,r)}throw Error(j(156,t.tag))};function hd(e,t){return Bc(e,t)}function sh(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function He(e,t,r,n){return new sh(e,t,r,n)}function gi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oh(e){if(typeof e=="function")return gi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ma)return 11;if(e===Ua)return 14}return 2}function Ft(e,t){var r=e.alternate;return r===null?(r=He(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ds(e,t,r,n,s,a){var i=2;if(n=e,typeof e=="function")gi(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ur:return er(r.children,s,a,t);case Pa:i=8,s|=8;break;case Po:return e=He(12,r,t,s|2),e.elementType=Po,e.lanes=a,e;case Mo:return e=He(13,r,t,s),e.elementType=Mo,e.lanes=a,e;case Uo:return e=He(19,r,t,s),e.elementType=Uo,e.lanes=a,e;case Ac:return Ks(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nc:i=10;break e;case bc:i=9;break e;case Ma:i=11;break e;case Ua:i=14;break e;case wt:i=16,n=null;break e}throw Error(j(130,e==null?e:typeof e,""))}return t=He(i,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function er(e,t,r,n){return e=He(7,e,n,t),e.lanes=r,e}function Ks(e,t,r,n){return e=He(22,e,n,t),e.elementType=Ac,e.lanes=r,e.stateNode={isHidden:!1},e}function wo(e,t,r){return e=He(6,e,null,t),e.lanes=r,e}function To(e,t,r){return t=He(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ah(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ao(0),this.expirationTimes=ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ao(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yi(e,t,r,n,s,a,i,l,c){return e=new ah(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=He(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ri(a),e}function ih(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function md(e){if(!e)return Vt;e=e._reactInternals;e:{if(ir(e)!==e||e.tag!==1)throw Error(j(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(j(171))}if(e.tag===1){var r=e.type;if(ke(r))return mu(e,r,t)}return t}function xd(e,t,r,n,s,a,i,l,c){return e=yi(r,n,!0,e,s,a,i,l,c),e.context=md(null),r=e.current,n=Te(),s=zt(r),a=gt(n,s),a.callback=t??null,Mt(r,a,s),e.current.lanes=s,Cn(e,s,n),De(e,n),e}function Qs(e,t,r,n){var s=t.current,a=Te(),i=zt(s);return r=md(r),t.context===null?t.context=r:t.pendingContext=r,t=gt(a,i),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mt(s,t,i),e!==null&&(rt(e,s,i,a),os(e,s,i)),i}function Ps(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ei(e,t){Hl(e,t),(e=e.alternate)&&Hl(e,t)}function lh(){return null}var vd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Si(e){this._internalRoot=e}Xs.prototype.render=Si.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(j(409));Qs(e,t,null,null)};Xs.prototype.unmount=Si.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;or(function(){Qs(null,e,null,null)}),t[Et]=null}};function Xs(e){this._internalRoot=e}Xs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Kc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ct.length&&t!==0&&t<Ct[r].priority;r++);Ct.splice(r,0,e),r===0&&Xc(e)}};function Ni(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yl(){}function ch(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=Ps(i);a.call(d)}}var i=xd(t,n,e,0,null,!1,!1,"",Yl);return e._reactRootContainer=i,e[Et]=i.current,gn(e.nodeType===8?e.parentNode:e),or(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Ps(c);l.call(d)}}var c=yi(e,0,!1,null,null,!1,!1,"",Yl);return e._reactRootContainer=c,e[Et]=c.current,gn(e.nodeType===8?e.parentNode:e),or(function(){Qs(t,c,r,n)}),c}function Js(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=Ps(i);l.call(c)}}Qs(t,i,e,s)}else i=ch(r,t,e,s,n);return Ps(i)}Yc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=qr(t.pendingLanes);r!==0&&(Ba(t,r|1),De(t,le()),!(H&6)&&(Dr=le()+500,Ht()))}break;case 13:or(function(){var n=St(e,1);if(n!==null){var s=Te();rt(n,e,1,s)}}),Ei(e,1)}};Va=function(e){if(e.tag===13){var t=St(e,134217728);if(t!==null){var r=Te();rt(t,e,134217728,r)}Ei(e,134217728)}};Wc=function(e){if(e.tag===13){var t=zt(e),r=St(e,t);if(r!==null){var n=Te();rt(r,e,t,n)}Ei(e,t)}};Kc=function(){return W};Qc=function(e,t){var r=W;try{return W=e,t()}finally{W=r}};Ko=function(e,t,r){switch(t){case"input":if(Bo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Vs(n);if(!s)throw Error(j(90));wc(n),Bo(n,s)}}}break;case"textarea":Cc(e,r);break;case"select":t=r.value,t!=null&&Sr(e,!!r.multiple,t,!1)}};Dc=mi;Pc=or;var uh={usingClientEntryPoint:!1,Events:[jn,hr,Vs,Oc,kc,mi]},Wr={findFiberByHostInstance:Xt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dh={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zc(e),e===null?null:e.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||lh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qn.isDisabled&&Qn.supportsFiber)try{Us=Qn.inject(dh),ct=Qn}catch{}}Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uh;Fe.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ni(t))throw Error(j(200));return ih(e,t,null,r)};Fe.createRoot=function(e,t){if(!Ni(e))throw Error(j(299));var r=!1,n="",s=vd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yi(e,1,!1,null,null,r,!1,n,s),e[Et]=t.current,gn(e.nodeType===8?e.parentNode:e),new Si(t)};Fe.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(j(188)):(e=Object.keys(e).join(","),Error(j(268,e)));return e=zc(t),e=e===null?null:e.stateNode,e};Fe.flushSync=function(e){return or(e)};Fe.hydrate=function(e,t,r){if(!qs(t))throw Error(j(200));return Js(null,e,t,!0,r)};Fe.hydrateRoot=function(e,t,r){if(!Ni(e))throw Error(j(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",i=vd;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=xd(t,null,e,1,r??null,s,!1,a,i),e[Et]=t.current,gn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Xs(t)};Fe.render=function(e,t,r){if(!qs(t))throw Error(j(200));return Js(null,e,t,!1,r)};Fe.unmountComponentAtNode=function(e){if(!qs(e))throw Error(j(40));return e._reactRootContainer?(or(function(){Js(null,null,e,!1,function(){e._reactRootContainer=null,e[Et]=null})}),!0):!1};Fe.unstable_batchedUpdates=mi;Fe.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!qs(r))throw Error(j(200));if(e==null||e._reactInternals===void 0)throw Error(j(38));return Js(e,t,r,!1,n)};Fe.version="18.3.1-next-f1338f8080-20240426";function gd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gd)}catch(e){console.error(e)}}gd(),gc.exports=Fe;var ph=gc.exports,Wl=ph;ko.createRoot=Wl.createRoot,ko.hydrateRoot=Wl.hydrateRoot;const fh={BASE_URL:"/indra-os/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GAS_URL:"https://placeholder-backend.example.com"},Xn=(e,t)=>fh[e]||t,Kl=e=>{const t=localStorage.getItem(e);return!t||t==="undefined"||t==="null"?"":t},Lt={CORE_URL:Kl("INDRA_OVERRIDE_URL")||Xn("VITE_CORE_URL","https://script.google.com/macros/s/AKfycbydiid-N9D6YW-Q5ldpRAhpi9pv6mDRwfMuFaQ97EXhR1qg8bbknwMiPI8xIL6an16o/exec"),SYSTEM_TOKEN:Kl("INDRA_SESSION_TOKEN")||Xn("VITE_SYSTEM_TOKEN",""),CLIENT_NAME:Xn("VITE_CLIENT_NAME","INDRA_V2_STARK"),VERSION:Xn("VITE_VERSION","2.0.0")},hh=e=>{e&&e.startsWith("http")&&(localStorage.setItem("INDRA_OVERRIDE_URL",e),console.log(" URL del Core actualizada en persistencia local. Recargando..."),window.location.reload())};class mh{constructor(){this.config={url:Lt.CORE_URL,getApiKey:()=>localStorage.getItem("INDRA_SESSION_TOKEN")||Lt.SYSTEM_TOKEN||"",clientName:Lt.CLIENT_NAME,version:Lt.VERSION};const t=this.config.apiKey||"",r=t.length>0?`${t.length} chars (starts: ${t.substring(0,3)}... ends: ...${t.substring(t.length-2)})`:"EMPTY";console.warn(`[CORE] Initializing with URL: ${this.config.url} | Token: ${r}`)}init(t,r){this.config.url=t,this.config.apiKey=r,console.warn(`[CORE] Re-Initialized for: ${t}`)}async call(t,r,n={}){var l,c;if(!this.config.url)throw new Error("CORE_NOT_INITIALIZED: Debes llamar a init(url, key) antes de realizar peticiones.");const s=this.config.getApiKey(),a=s.length>0?`${s.length} chars (starts: ${s.substring(0,3)}... ends: ...${s.substring(s.length-2)})`:"EMPTY";console.warn(`[CORE] Call: ${t}:${r} | Token: ${a}`);const i={executor:t,method:r,payload:n,Axiom:s,systemToken:s,context:{timestamp:Date.now(),client:this.config.clientName,version:this.config.version}};try{console.warn(`[CORE]  Awaiting fetch to: ${this.config.url}...`);const d=await fetch(this.config.url,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(i)});if(console.warn(`[CORE]  Response Status: ${d.status} ${d.statusText}`),!d.ok)throw new Error(`HTTP_ERROR: ${d.status}`);const h=await d.text();console.warn(`[CORE]  Raw Response (${h.length} chars):`,h.substring(0,150)+"...");let m;try{const x=this._sanitizeResponse(h);m=JSON.parse(x),console.warn("[CORE]  Parsed JSON keys:",Object.keys(m))}catch(x){throw this._handleTransmissionError(h,x),new Error("CORE_PARSING_ERROR: La respuesta del Core no es un JSON vlido.")}if(m&&m._SIGNAL){const{_SIGNAL:x,payload:E}=m;return console.warn(`[CORE]  Signal Intercepted: ${x}`),m}if(this._validateSovereignResponse(m),m.success===!1){console.error("[CORE] Veto Error:",m.error);const x=new Error(((l=m.error)==null?void 0:l.message)||"Error desconocido en el Core");throw(c=m.error)!=null&&c.code&&(x.code=m.error.code),x}return m.result}catch(d){if(d.name==="TypeError"&&d.message==="Failed to fetch"){console.group(" [CORE] Fallo Crtico de Handshake (Network Break)"),console.error("Contexto:",`${t}:${r}`),console.warn("Posibles Causas:"),console.warn("1. La URL del Core ha caducado (necesitas nuevo despliegue GAS)."),console.warn("2. Bloqueo de CORS (GAS ha devuelto una pgina de error HTML)."),console.warn("3. Ests offline o el dominio script.google.com es inalcanzable."),console.warn("URL Intentada:",this.config.url),console.groupEnd();const h=new Error(`FALLO_DE_CONEXIN: El Core en ${this.config.url} no responde.`);throw h.code="NETWORK_DISRUPTION",h}throw console.error(`[CORE] Transmission Fail (${t}:${r}):`,d),d}}_sanitizeResponse(t){const r=t.indexOf("{"),n=t.lastIndexOf("}");return r!==-1&&n!==-1&&r<n?t.substring(r,n+1):t}_validateSovereignResponse(t){if(!t||typeof t!="object")throw new Error("VIOLACIN_DE_SOBERANA: La respuesta no es un objeto vlido.");if(t.success===void 0)throw new Error("VIOLACIN_DE_SOBERANA: Estructura de respuesta corrupta (missing success bit).")}_handleTransmissionError(t,r){console.group(" [CORE] Handshake Failure: Sovereign Membrane Breach"),console.error("Error Detail:",r.message),console.warn("Raw Payload (possible leak):",t),console.groupEnd()}async executeAction(t,r={}){const n={action:t,payload:r};return await this.call("system","executeAction",n)}}const Tr=new mh,Ta=Object.freeze(Object.defineProperty({__proto__:null,default:Tr},Symbol.toStringTag,{value:"Module"})),Ql={},Xl=Object.freeze({BRIDGE:"CANVAS_MAIN",IDEATION:"CANVAS_MAIN",DASHBOARD:"CANVAS_MAIN",ORCHESTRATION:"CANVAS_MAIN",COMMUNICATION:"CANVAS_MAIN",ASSISTANCE:"CANVAS_MAIN",INSPECTION:"CANVAS_MAIN",DIAGNOSTIC:"CANVAS_MAIN",GATE:"CANVAS_MAIN",NAVIGATION:"CANVAS_MAIN",EXPLORATION:"CANVAS_MAIN",IDENTITY:"CANVAS_MAIN",MONITORING:"TERMINAL_STATUS",SYSTEM:"HIDDEN"}),ql="CANVAS_MAIN";function xh(e){if(!e)return ql;const t=(e.SEMANTIC_INTENT||e.semantic_intent||"").toUpperCase(),r=(e.ARCHETYPE||e.archetype||"").toUpperCase();if(t&&Xl[t])return Xl[t];const n=(e.LABEL||"").toUpperCase();return n.includes("GATEWAY")||n.includes("COMMANDER")||n.includes("SYSTEM")?"SIDEBAR_SECONDARY":r==="SERVICE"?"TERMINAL_STATUS":ql}class vh{constructor(){this._ontology={},this._genotype={},this._renderManifest=[],this._modulesByLevel={},this._schemas={},this._enrichedRegistry={},this._isCompiled=!1}get ontology(){return this._ontology}get isCompiled(){return this._isCompiled}setArtifactSchemas(t){this._schemas=t||{},console.log(`[LawCompiler] Esquemas de artefactos inyectados: ${Object.keys(this._schemas).length} tipos.`)}setOntology(t,r){this._ontology=t||{},this._genotype=r||{},console.log(`[LawCompiler] Ontologa inyectada: ${Object.keys(this._ontology).length} activos.`)}compile(){console.log("[LawCompiler] Iniciando compilacin de leyes (Enriquecimiento Fenotpico)...");const t=Object.values(this._ontology);return this._enrichedRegistry={},this._renderManifest=t.map((r,n)=>{const s=r.id||r.ID||`UNKNOWN_ID_${n}`;let a=Ql[s];a||(a=Object.values(Ql).find(l=>l.technical_id===s)||{});const i={...r,id:s,omd:r.omd||r.OMD||s||a.technical_id||"UNKNOWN_OMD",slot:r.slot||r.SLOT||a.slot||xh(r),LABEL:r.LABEL||r.label||a.LABEL||a.functional_name||"UNIT_SKELETON",ARCHETYPE:r.ARCHETYPE||r.archetype||(r.ARCHETYPES?r.ARCHETYPES[0]:null)||(a.config?a.config.archetype:"SERVICE"),DOMAIN:r.DOMAIN||r.domain||(a.config?a.config.intent:"SYSTEM"),layer:r.LEVEL||r.level||a.layer||"NIVEL_3",CAPABILITIES:this._normalizeCapabilities(r.CAPABILITIES||r.capabilities||r.methods||{}),ui_layout_hint:r.ui_layout_hint||a.ui_layout_hint||"LAYOUT_SMART_FORM"};return this._enrichedRegistry[s.toLowerCase()]=i,i}),this._modulesByLevel={},this._renderManifest.forEach(r=>{const n=r.layer||0,s=typeof n=="string"?parseInt(n.split("_")[1])||0:n;this._modulesByLevel[s]||(this._modulesByLevel[s]=[]),this._modulesByLevel[s].push(r)}),console.log(`[LawCompiler] Compilacin finalizada. Manifiesto: ${this._renderManifest.length} items.`),this._isCompiled=!0,this._renderManifest}_normalizeCapabilities(t){const r={};let n=[];return Array.isArray(t)?n=t.map(s=>[s,{}]):typeof t=="object"&&t!==null&&(n=Object.entries(t)),n.forEach(([s,a])=>{const i=typeof a=="object"&&a!==null?a:{};let l=i.io;if(!l){const c=String(s).toLowerCase();c.match(/^(get|read|fetch|list|scan|query|search|check|retrieve)/)?l="READ":c.match(/^(set|write|update|create|delete|add|remove|send|post|exec|insert|append)/)?l="WRITE":c.match(/^(on|listen|sub|watch)/)?l="STREAM":l="TRIGGER"}r[s]={...i,io:l,type:i.type||"SIGNAL",human_label:i.human_label||i.desc||s}}),r}getCanon(t){if(!t)return null;const r=String(t).toLowerCase();return this._enrichedRegistry[r]?this._enrichedRegistry[r]:this._ontology[t]?this._ontology[t]:Object.values(this._ontology).find(s=>(s.id||s.ID||"").toLowerCase()===r)}getRenderManifest(){return this._renderManifest}getModulesByLevel(t){return this._modulesByLevel[t]||[]}}const X=new vh;class gh{constructor(){return this.isLabMode=window.location.href.includes("mode=lab"),this.isIgnited=!1,this.sovereigntyStatus="STANDBY",this.L0=null,new Proxy(this,{get:(t,r)=>r in t?t[r]:(n,s)=>t.call(r,n,s)})}async runSystemAudit(){return await this.call("public","runSystemAudit",{})}async call(t,r,n={}){return await Tr.call(t,r,n)}async executeAction(t,r={}){return await Tr.executeAction(t,r)}async ignite(){const t=(n,s="warn")=>{window.INDRA_DEBUG&&window.INDRA_DEBUG.logs.push({msg:n,level:s,time:new Date().toLocaleTimeString(),node:"ADAPTER"}),console[s==="error"?"error":"log"](` [SovereignAdapter] ${n}`)};t("[IGNITION] Iniciando descubrimiento core...");const r=localStorage.getItem("INDRA_GENOTYPE_L0");if(r&&!this.isLabMode)try{this.L0=JSON.parse(r),this.isIgnited=!0,this.sovereigntyStatus="ACTIVE",this.L0.COMPONENT_REGISTRY&&X.setOntology(this.L0.COMPONENT_REGISTRY,this.L0),t(` [L0] Cache restaurado v${this.L0.VERSION}.`)}catch{localStorage.removeItem("INDRA_GENOTYPE_L0")}try{t("Sincronizando Genotipo con el Core...");const n=await Tr.call("system","getSovereignGenotype",{});n&&n.COMPONENT_REGISTRY&&(this.L0=n,this.isIgnited=!0,this.sovereigntyStatus="ACTIVE",localStorage.setItem("INDRA_GENOTYPE_L0",JSON.stringify(this.L0)),X.setOntology(this.L0.COMPONENT_REGISTRY,this.L0),this.L0.ARTIFACT_SCHEMAS&&X.setArtifactSchemas(this.L0.ARTIFACT_SCHEMAS),t(" Genotipo Sincronizado correctamente.","info"))}catch(n){t(` Fallo en sincronizacin core: ${n.message}`,"error"),this.L0||(this.sovereigntyStatus="LOCKED")}return{success:this.sovereigntyStatus==="ACTIVE",status:this.sovereigntyStatus,genotype:this.L0,error:this.sovereigntyStatus==="LOCKED"?"CORE_UNREACHABLE":null}}async getCanon(t){return this.L0?X.getCanon(t):null}}const ae=new gh,Jl=e=>{let t;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const x=t;t=h??(typeof m!="object"||m===null)?m:Object.assign({},t,m),r.forEach(E=>E(t,x))}},s=()=>t,l={setState:n,getState:s,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d))},c=t=e(n,s,l);return l},yh=e=>e?Jl(e):Jl,Eh=e=>e;function Sh(e,t=Eh){const r=ve.useSyncExternalStore(e.subscribe,ve.useCallback(()=>t(e.getState()),[e,t]),ve.useCallback(()=>t(e.getInitialState()),[e,t]));return ve.useDebugValue(r),r}const Zl=e=>{const t=yh(e),r=n=>Sh(t,n);return Object.assign(r,t),r},bi=e=>e?Zl(e):Zl,Nh=e=>(t,r,n)=>{const s=n.subscribe;return n.subscribe=(i,l,c)=>{let d=i;if(l){const h=(c==null?void 0:c.equalityFn)||Object.is;let m=i(n.getState());d=x=>{const E=i(x);if(!h(m,E)){const g=m;l(m=E,g)}},c!=null&&c.fireImmediately&&l(m,m)}return s(d)},e(t,r,n)},bh=Nh,Ah="INDRA_COSMOS_DB",_h=1,at="realities";let wh=class{constructor(){this.db=null,this.initPromise=this._init()}async _init(){return new Promise((t,r)=>{const n=indexedDB.open(Ah,_h);n.onupgradeneeded=s=>{const a=s.target.result;a.objectStoreNames.contains(at)||a.createObjectStore(at,{keyPath:"id"})},n.onsuccess=s=>{this.db=s.target.result,console.log("[AxiomaticDB]  L2 Repository connected."),t(this.db)},n.onerror=s=>{console.error("[AxiomaticDB]  Failed to open IndexedDB:",s.target.error),r(s.target.error)}})}async ensureDB(){if(await this.initPromise,!this.db)throw new Error("Database not initialized")}async setItem(t,r){return await this.ensureDB(),new Promise((n,s)=>{const l=this.db.transaction([at],"readwrite").objectStore(at).put({id:t,data:r,updatedAt:Date.now()});l.onsuccess=()=>n(!0),l.onerror=()=>s(l.error)})}async getItem(t){return await this.ensureDB(),new Promise((r,n)=>{const i=this.db.transaction([at],"readonly").objectStore(at).get(t);i.onsuccess=()=>r(i.result?i.result.data:null),i.onerror=()=>n(i.error)})}async deleteCosmos(t){return await this.ensureDB(),new Promise((r,n)=>{const i=this.db.transaction([at],"readwrite").objectStore(at).delete(t);i.onsuccess=()=>r(!0),i.onerror=()=>n(i.error)})}async purge(){return await this.ensureDB(),new Promise((t,r)=>{const a=this.db.transaction([at],"readwrite").objectStore(at).clear();a.onsuccess=()=>t(!0),a.onerror=()=>r(a.error)})}};const et=new wh,F=bi(bh((e,t)=>({session:{id:null,status:"BOOTING",mode:"STANDARD",last_validated:null,currentRevisionHash:null,revisionCycle:0,hashInitialized:!1,isLoading:!1,syncStatus:"SYNCED",failedSyncAttempts:0,lastSyncTimestamp:null,lastSyncError:null},interdiction:{active:!1,reason:null},setSessionAuthorized:(r,n="STANDARD")=>{console.log(`[AxiomaticState]  Session Authorized: ${r} [${n}]`),e({session:{id:r,status:"READY",mode:n,last_validated:Date.now()},interdiction:{active:n==="ARCHEOLOGICAL",reason:n==="ARCHEOLOGICAL"?"READ_ONLY_RECOVERY":null}})},terminateSession:r=>{console.warn(`[AxiomaticState]  Session Terminated: ${r}`),e({session:{id:null,status:"TERMINATED",mode:"STANDARD",last_validated:null,hashInitialized:!0},interdiction:{active:!1,reason:null}})},engageWorldLock:r=>{console.log(`[AxiomaticState]  World Lock Engaged: ${r}`),e(n=>({interdiction:{active:!0,reason:r}}))},releaseWorldLock:()=>{console.log("[AxiomaticState]  World Lock Released"),e(r=>({interdiction:{active:!1,reason:null}}))},igniteHash:async()=>{try{console.log("[AxiomaticState]  Recalling temporal identity from Iron Memory...");let r=await et.getItem("INDRA_REVISION_HASH");r||(r=localStorage.getItem("INDRA_REVISION_HASH"),r&&console.info("[AxiomaticState]  Fallback to Legacy Memory successful.")),e(n=>({session:{...n.session,currentRevisionHash:r,hashInitialized:!0}}))}catch(r){console.error("[AxiomaticState]  Memory corrupted during ignition:",r),e(n=>({session:{...n.session,hashInitialized:!0}}))}},updateRevisionHash:r=>{r&&(localStorage.setItem("INDRA_REVISION_HASH",r),et.setItem("INDRA_REVISION_HASH",r).catch(n=>console.warn("[AxiomaticState] Failed to persist hash to Iron Memory:",n)),e(n=>({session:{...n.session,currentRevisionHash:r,revisionCycle:n.session.revisionCycle+1,hashInitialized:!0}})))},isWriteAllowed:()=>{const r=t();return r.interdiction.active?!1:r.session.id===null?!0:r.session.status==="READY"},setLoading:r=>{e(n=>{const s=n.interdiction.reason,a=s&&s!=="TRANSIT_RESONANCE",i=r?!0:s==="TRANSIT_RESONANCE"?!1:n.interdiction.active;return{session:{...n.session,isLoading:r},interdiction:{active:i,reason:r?a?s:"TRANSIT_RESONANCE":s==="TRANSIT_RESONANCE"?null:s}}})},updateSyncStatus:(r,n=null)=>{e(s=>{const a={session:{...s.session,syncStatus:r,lastSyncError:n}};if(r==="SYNCED"&&(a.session.lastSyncTimestamp=Date.now(),a.session.failedSyncAttempts=0,console.log("%c  [AxiomaticState] Sync SUCCESS - Reality backed up","color: #10b981")),r==="RETRY"||r==="OFFLINE"){a.session.failedSyncAttempts=s.session.failedSyncAttempts+1;const i=a.session.failedSyncAttempts;console.warn(`%c  [AxiomaticState] Sync FAIL (attempt ${i}) - ${(n==null?void 0:n.message)||"Unknown error"}`,"color: #f59e0b"),i>=4&&r==="RETRY"&&(a.session.syncStatus="OFFLINE",console.error("%c  [AxiomaticState] Entering OFFLINE MODE","color: #ef4444; font-weight: bold"))}return a})}})));window.INDRA_AXIOMATIC_STATE=F;const Th=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"})),Ch={transmute:(e,t)=>{const r=F.getState();let n=(e==null?void 0:e.result)!==void 0?e.result:e;if(Array.isArray(n)&&(n=n[0]),!n)return e;if(!n.id&&(n.cosmos_id||n.ID||n.cosmosId)&&(n.id=n.cosmos_id||n.ID||n.cosmosId),n._SIGNAL)return Ih(n._SIGNAL,n.payload||n);if(n.error)throw jh(n.error,t),new Error(`[Transmuter] Blocked Error: ${n.error}`);if(t==="SYNC"&&n.id&&r.session.id&&n.id!==r.session.id)throw console.error(`[Transmuter]  Ghost Data Detected! Incoming: ${n.id}, Session: ${r.session.id}`),new Error("[Transmuter] Identity Mismatch blocked.");return n}};function Ih(e,t){const r=F.getState();switch(e){case"PATIENCE_TOKEN":return console.log("[Transmuter]  Patience Token received. Identifying as Dark Matter..."),{...t,_SIGNAL:"PATIENCE_TOKEN"};case"FORCE_EJECT":throw console.warn("[Transmuter]  FORCE EJECT SIGNAL RECEIVED."),r.terminateSession("CORE_EJECT_COMMAND"),new Error("CORE_EJECT");case"RECOVERY_MODE":return console.warn("[Transmuter]  RECOVERY MODE SIGNAL RECEIVED."),t&&t.id&&r.setSessionAuthorized(t.id,"ARCHEOLOGICAL"),t;default:return console.warn(`[Transmuter] Unknown Signal: ${e}`),t}}function jh(e,t){const r=F.getState(),n=(e||"").toUpperCase();(n.includes("NOT FOUND")||n.includes("DELETED")||n.includes("NO EXISTE"))&&(t==="MOUNT"||t==="SYNC")&&(console.error(`[Transmuter]  Fatal Reality Error detected: ${n}`),r.terminateSession("REALITY_NOT_FOUND")),(n.includes("LOCKED")||n.includes("READ ONLY"))&&(console.warn("[Transmuter]  Locking Session due to server restriction."),r.engageWorldLock("SERVER_MANDATE"))}class Rh{constructor(){this.batchQueue=[],this.batchTimer=null,this.BATCH_WINDOW_MS=100}async call(t,r,n={}){const s=F.getState();if(this._detectWriteIntent(r)&&(s.session.hashInitialized||(console.log("[InterdictionUnit]  Waiting for temporal reification before write..."),await this._waitFor(()=>F.getState().session.hashInitialized)),!s.isWriteAllowed())){const i=s.interdiction.reason||s.session.status;throw console.warn(`[InterdictionUnit]  DEFERRED: ${t}.${r} [Reason: ${i}]`),new Error(`[Interdiction] ${i}`)}return new Promise((i,l)=>{this.batchQueue.push({service:t,method:r,payload:n,resolve:i,reject:l}),this.batchTimer||(this.batchTimer=setTimeout(()=>this._flushBatch(),this.BATCH_WINDOW_MS))})}async _flushBatch(){var r,n,s,a;const t=[...this.batchQueue];if(this.batchQueue=[],this.batchTimer=null,t.length!==0){try{console.log(`[InterdictionUnit]  Dispatching Batch of ${t.length} commands...`);const i=F.getState().session.currentRevisionHash,l=t.map(h=>({service:h.service,method:h.method,payload:{...h.payload,revisionHash:i,_revisionHash:i}})),c=(n=(r=window.useSyncOrchestrator)==null?void 0:r.getState)==null?void 0:n.call(r);if(c&&typeof c.prepareSnapshot=="function"){const h=c.prepareSnapshot();h&&(((s=h.artifacts)==null?void 0:s.length)>0||((a=h.relationships)==null?void 0:a.length)>0)&&(console.info(`%c  [Interdiction] Piggybacking reality snapshot (${h.artifacts.length} nodes)`,"color: #10b981; font-weight: bold;"),l.forEach(m=>{m.payload._carriedReality=!0,m.payload.snapshot=h}))}const d=await Tr.call("system","executeBatch",{commands:l});if(Array.isArray(d)){let h=null;d.forEach((m,x)=>{try{const E=Ch.transmute(m,t[x].method);t[x].resolve(E),t[x]._resolved=!0,m&&m._snapshot&&(h=m._snapshot),t[x].method==="stabilizeAxiomaticReality"&&(h=E)}catch(E){t[x].reject(E),t[x]._resolved=!1}}),h&&(h.success?F.getState().updateSyncStatus("SYNCED"):F.getState().updateSyncStatus("RETRY",new Error(h.error||"Snapshot sync failed")))}else throw new Error(d.error||"Invalid Batch Response from Gateway.")}catch(i){console.error("[InterdictionUnit]  Batch Execution Failed:",i.message),t.forEach(d=>d.reject(i));const l=F.getState(),c=l.session.failedSyncAttempts;if(l.session.syncStatus!=="OFFLINE"){l.updateSyncStatus("RETRY",i);const d=[5e3,1e4,3e4],h=d[Math.min(c,d.length-1)];c<3&&(console.warn(`%c  [InterdictionUnit] Retry scheduled in ${h/1e3}s...`,"color: #fbbf24"),setTimeout(async()=>{var m,x,E,g;try{const S=(x=(m=window.useSyncOrchestrator)==null?void 0:m.getState)==null?void 0:x.call(m);if(S&&typeof S.prepareSnapshot=="function"){const _=S.prepareSnapshot();_&&(((E=_.artifacts)==null?void 0:E.length)>0||((g=_.relationships)==null?void 0:g.length)>0)&&((await Tr.call("sensing","stabilizeAxiomaticReality",{snapshot:_,_carriedReality:!0,_isRetry:!0})).success?F.getState().updateSyncStatus("SYNCED"):F.getState().updateSyncStatus("RETRY",new Error("Retry failed")))}}catch(S){console.error("[InterdictionUnit] Retry attempt failed:",S),F.getState().updateSyncStatus("RETRY",S)}},h))}}t.some(i=>i.method==="stabilizeAxiomaticReality")&&t.some(i=>i.method==="stabilizeAxiomaticReality"&&i._resolved===!0)}}async _waitFor(t){return new Promise(r=>{const n=()=>{t()?r():setTimeout(n,100)};n()})}_detectTempIds(t){if(!t||typeof t!="object")return[];let r=[];const n=s=>{typeof s=="string"&&s.startsWith("temp_")?r.push(s):Array.isArray(s)?s.forEach(n):typeof s=="object"&&s!==null&&Object.values(s).forEach(n)};return n(t),[...new Set(r)]}_detectWriteIntent(t){const r=t.toUpperCase();return r.includes("SAVE")||r.includes("WRITE")||r.includes("DELETE")||r.includes("CREATE")||r.includes("UPDATE")||r.includes("PATCH")||r.includes("MOVE")||r.includes("RENAME")}}const qn=new Rh;class Lh{constructor(){this.enabled=localStorage.getItem("BACKEND_LOGS_ENABLED")==="true"||!0}processResponse(t,r){return!this.enabled||!t._logs||(console.group(` [BACKEND] ${r}`),t._logs.forEach(n=>{const s={DEBUG:"",INFO:"",WARN:"",ERROR:"",FATAL:"",USER:""}[n.level]||"",a={DEBUG:"color: #888",INFO:"color: #0066cc",WARN:"color: #ff9900",ERROR:"color: #cc0000",FATAL:"color: #ff0000; font-weight: bold",USER:"color: #00cc00"}[n.level]||"";console.log(`%c${s} [${n.component}] ${n.message}`,a,n.data||"")}),console.groupEnd(),delete t._logs),t}toggle(t){this.enabled=t,localStorage.setItem("BACKEND_LOGS_ENABLED",t.toString()),console.log(`Backend logs ${t?"enabled":"disabled"}`)}isEnabled(){return this.enabled}}const Co=new Lh;class Cr{static setDispatcher(t){this.dispatcher=t}static log(t,r,n={}){this.dispatcher&&this.dispatcher({type:"LOG_ENTRY",payload:{source:"Validator_IO_node_Data",level:t,message:r,timestamp:new Date().toISOString(),...n}})}static scrub(t,r="UNKNOWN"){if(!t){const i=`[Validator_IO_node_Data] FATAL: Null response in ${r}`;throw this.log("FATAL",i),new Error(i)}const n=t.result!==void 0?t.result:t;if(t._SIGNAL&&t._SIGNAL!=="PATIENCE_TOKEN"&&t._SIGNAL!=="REALITY_CONFLICT")return t;const s=n.artifacts||n.ARTIFACTS,a=n.id||n.ID||n.uuid;if(r.includes("mountCosmos")){const i=[];if(a||i.push("ID/UUID"),s||i.push("ARTIFACTS"),i.length>0){const l=`VIOLACIN_DE_Soberana: El contrato de '${r}' carece de campos mandatorios: ${i.join(", ")}`;throw console.error(`[Validator_IO_node_Data] Contract Violation in ${r}:`,n),this.log("FATAL",l,{context:r,missing:i}),new Error(l)}this.log("SUCCESS",` Reality '${a}' Certified (Integrity: 100%)`,{context:r})}return t}static validateRelationship(t,r,n){var l,c;if(!t||!r)return!1;const s=(l=t.CAPABILITIES)==null?void 0:l[n.sourcePort],a=(c=r.CAPABILITIES)==null?void 0:c[n.targetPort];if(!s||!a)return this.log("WARNING",` Invalid Ports: ${n.sourcePort} -> ${n.targetPort}`),!1;if(!(s.type===a.type||s.type==="SIGNAL"||a.type==="SIGNAL")){const d=` POLARITY ERROR: Cannot connect ${s.type} to ${a.type}`;return this.log("FATAL",d,{source:t.LABEL,target:r.LABEL}),!1}return!0}static validateBatch(t){if(!Array.isArray(t)){const r="[Validator_IO_node_Data] Invalid Batch: Expected Array.";throw this.log("FATAL",r),new Error(r)}return t}}eo(Cr,"dispatcher",null);class Oh{constructor(){this.activeCosmosId=null,this.memoryCache=new Map,this.pendingRequests=new Map,this.PERSISTENCE_KEY="INDRA_CORTEX_CACHE_V1",this._loadPersistence(),this.syncQueue=Promise.resolve(),this.isSyncing=!1,this.lastRevisionHash=null;try{this.lockChannel=new BroadcastChannel("INDRA_SATTVA_LOCK");const t=Date.now();this.lockChannel.onmessage=r=>{r.data.type==="CHECK_ALIVE"?Date.now()-t>2e3&&this.lockChannel.postMessage({type:"I_AM_ALIVE",timestamp:t}):r.data.type==="I_AM_ALIVE"&&Date.now()-t<2e3&&(console.error(" [CRITICAL] Instance Conflict. Locking UI."),window.dispatchEvent(new CustomEvent("INDRA_LOCKDOWN",{detail:{reason:"MULTIPLE_TABS"}})))},this.lockChannel.postMessage({type:"CHECK_ALIVE"}),window.addEventListener("beforeunload",()=>{this.lockChannel.close()})}catch{console.warn("BroadcastChannel not supported. IndraLock disabled.")}this.compressionEngine={compress:async t=>{try{const n=new Blob([JSON.stringify(t)]).stream().pipeThrough(new CompressionStream("gzip")),a=await new Response(n).blob();return new Promise(i=>{const l=new FileReader;l.onloadend=()=>{const c=l.result;i(c.split(",")[1])},l.readAsDataURL(a)})}catch{return console.warn("Compression failed, fallback to raw JSON."),null}}}}_loadPersistence(){try{const t=localStorage.getItem(this.PERSISTENCE_KEY);if(t){const r=JSON.parse(t);Object.keys(r).forEach(n=>this.memoryCache.set(n,r[n]))}}catch{console.warn("[ContextClient] Memory corruption detected. Resetting Cortex.")}}_savePersistence(){try{const t=Object.fromEntries(this.memoryCache);localStorage.setItem(this.PERSISTENCE_KEY,JSON.stringify(t))}catch{}}async igniteReflexes(t){console.log(" [Cortex] Igniting Autonomic Reflexes...");const r=this.memoryCache.get("availableCosmos");r&&t({type:"UPDATE_COSMOS_REGISTRY",payload:r}),this.listAvailableCosmos(!1).then(n=>{t({type:"UPDATE_COSMOS_REGISTRY",payload:n.artifacts||[]})}).catch(n=>console.warn("[Cortex] Reflex fizzled:",n))}async listAvailableCosmos(t=!1){const r=`availableCosmos_${t}`;if(this.pendingRequests.has(r))return this.pendingRequests.get(r);const n=(async()=>{try{const s=await qn.call("cosmos","listAvailableCosmos",{includeAll:t}),a=Cr.scrub(s,"listAvailableCosmos"),i=Co.processResponse(a,"listAvailableCosmos");return i&&i.artifacts&&(this.memoryCache.set(r,i.artifacts),t||this.memoryCache.set("availableCosmos",i.artifacts),this._savePersistence()),i}catch(s){throw console.error(` [Cortex] Synapse Failed: ${s.message}`),s}finally{this.pendingRequests.delete(r)}})();return this.pendingRequests.set(r,n),n}async mountCosmos(t){if(!t)throw new Error("[ContextClient] cosmosId is required to mount.");try{const r=localStorage.getItem(`INDRA_COSMOS_${t}`);if(r){const l=JSON.parse(r);this.activeCosmosId=t,this.lastRevisionHash=l._local_hash||"unknown",console.log(" [ContextClient] L7 Cache Hit. Instant Mount.")}const n=await qn.call("cosmos","mountCosmos",{cosmosId:t});if(!n||!n.payload){if(n&&n.nodes)return console.warn("[ContextClient]  Legacy Response detected."),this.activeCosmosId=t,n;throw new Error("Invalid Reality Envelope received.")}const s=n.payload;this.lastRevisionHash=n.revision_hash;try{s._local_hash=n.revision_hash,localStorage.setItem(`INDRA_COSMOS_${t}`,JSON.stringify(s))}catch{console.warn("L7 Cache Full")}const a=Cr.scrub(s,"mountCosmos"),i=Co.processResponse(a,"mountCosmos");if(i)return this.activeCosmosId=t,i;throw new Error("Empty payload in envelope.")}catch(r){throw console.error(` [ContextClient] Failed to mount: ${r.message}`),r}}async saveCosmos(t){if(!t)throw new Error("[ContextClient] Invalid cosmos object");try{localStorage.setItem(`INDRA_COSMOS_${this.activeCosmosId}`,JSON.stringify(t)),console.log(" [ContextClient] Local Save Secured.")}catch{console.warn(" [ContextClient] LocalStorage Full. Risk of data loss.")}return this._enqueueUpload(t)}async _enqueueUpload(t){return this.syncQueue=this.syncQueue.then(async()=>{this.isSyncing=!0;try{console.log(" [ContextClient] Compressing & Uploading...");const r=await this.compressionEngine.compress(t),n=await qn.call("cosmos","saveCosmos",{cosmosId:this.activeCosmosId,content_base64:r,revisionHash:this.lastRevisionHash||"force"});return n&&n.success&&n.new_revision_hash&&(this.lastRevisionHash=n.new_revision_hash,console.log(` [ContextClient] Cloud Sync Complete. Hash: ${n.new_revision_hash.substr(0,8)}`)),n}catch(r){return console.error(` [ContextClient] Background Sync Failed: ${r.message}`),{success:!1,local_saved:!0,error:r.message}}finally{this.isSyncing=!1}}),{success:!0,optimistic:!0}}async deleteCosmos(t){try{const r=await qn.call("cosmos","deleteCosmos",{cosmosId:t}),n=Cr.scrub(r,"deleteCosmos");return Co.processResponse(n,"deleteCosmos")}catch(r){throw console.error(` [ContextClient] Delete failed: ${r.message}`),r}}}const Io=new Oh,ec={COMPONENT_REGISTRY:{DRIVE:{LABEL:"Google Drive",ARCHETYPE:"VAULT",DOMAIN:"SYSTEM_CORE",CAPABILITIES:{search:{io:"READ",type:"DATAFRAME",desc:"Global semantic search"},upload:{io:"WRITE",type:"BLOB",desc:"Blob storage ingestion"},sync:{io:"REFRESH",type:"SIGNAL",desc:"Force state consistency"},move:{io:"WRITE",type:"SIGNAL",desc:"Relocate atomic unit"}},VITAL_SIGNS:{LATENCY:{criticality:"NOMINAL",value:"45ms",trend:"stable"},STORAGE:{criticality:"WARNING",value:"85%",trend:"rising"},API_QUOTA:{criticality:"NOMINAL",value:"1200/min",trend:"stable"}},UI_LAYOUT:{SIDE_PANEL:"ENABLED",TERMINAL_STREAM:"ENABLED"}},NOTION:{LABEL:"Notion",ARCHETYPE:"VAULT",DOMAIN:"KNOWLEDGE_GRAPH",CAPABILITIES:{listContents:{io:"READ",type:"DATAFRAME",desc:"Explora estructura del grafo"},search:{io:"READ",type:"DATAFRAME",desc:"Bsqueda semntica global"},query_db:{io:"READ",type:"DATAFRAME",desc:"Consulta tablas y bases de datos"},read_content:{io:"READ",type:"DATAFRAME",desc:"Lectura de bloques como Markdown"}},VITAL_SIGNS:{API_RATE:{criticality:"NOMINAL",value:"3/sec",trend:"flat"},TOKEN_STATUS:{criticality:"NOMINAL",value:"VALID",trend:"stable"}}},EMAIL:{LABEL:"Terminal Mail",ARCHETYPE:"ADAPTER",DOMAIN:"COMMUNICATION",CAPABILITIES:{send:{io:"WRITE",type:"SIGNAL",desc:"Dispatch secure courier",inputs:{to:{type:"string"},subject:{type:"string"},body:{type:"DATAFRAME"},attachment:{type:"BLOB"},accountId:{type:"string"}}},scan:{io:"READ",type:"DATAFRAME",desc:"Inbox telemetry search"}},VITAL_SIGNS:{SCAN:{criticality:"NOMINAL",value:"ACTIVE",trend:"stable"},QUOTA_USED:{criticality:"NOMINAL",value:"12%",trend:"flat"}}},SLOT_MANAGER:{LABEL:"Reality Slot",ARCHETYPE:"SLOT_NODE",DOMAIN:"ORCHESTRATION",CAPABILITIES:{RENDER_VIEW:{io:"READ",type:"SIGNAL",desc:"Proyectar vista hacia el dashboard"},EXPORT_PDF:{io:"WRITE",type:"BLOB",desc:"Materializar documento esttico"},STYLE_SYNC:{io:"INPUT",type:"DATAFRAME",desc:"Sincronizar ADN visual"}},views:[{id:"v1",label:"Tablero de Control",type:"CANVAS_INFINITE"},{id:"v2",label:"Factura Impresa",type:"DOCUMENT_PAGINATED"}]},LLM:{LABEL:"Cognitive Engine",ARCHETYPE:"SERVICE",DOMAIN:"INTELLIGENCE",CAPABILITIES:{generate:{io:"WRITE",type:"SIGNAL",desc:"Generar texto creativo",inputs:{prompt:{type:"string"}}},analyze:{io:"READ",type:"DATAFRAME",desc:"Analizar sentimiento/entidades"},chat:{io:"STREAM",type:"SIGNAL",desc:"Conversacin continua"}},VITAL_SIGNS:{TOKENS_PM:{criticality:"NOMINAL",value:"450",trend:"stable"},LATENCY:{criticality:"WARNING",value:"1.2s",trend:"rising"}}},NODE:{LABEL:"Generic Processor",ARCHETYPE:"NODE",DOMAIN:"LOGIC",CAPABILITIES:{process:{io:"TRIGGER",type:"SIGNAL",desc:"Execute logic"},result:{io:"READ",type:"DATAFRAME",desc:"Output data"}},VITAL_SIGNS:{CPU:{criticality:"NOMINAL",value:"12%",trend:"stable"}}},DATABASE:{LABEL:"Generic DB",ARCHETYPE:"DATABASE",DOMAIN:"DATA_L1",CAPABILITIES:{query:{io:"READ",type:"DATAFRAME",desc:"Ejecutar SQL/NoSQL"},persist:{io:"WRITE",type:"SIGNAL",desc:"Guardar registro"},schema:{io:"READ",type:"DATAFRAME",desc:"Obtener esquema"}},VITAL_SIGNS:{CONNECTIONS:{criticality:"NOMINAL",value:"4/10",trend:"flat"}},data:{type:"DATABASE",columns:[{id:"id",label:"ID",type:"number"},{id:"nombre",label:"Nombre",type:"string"},{id:"contacto",label:"Contacto",type:"string"},{id:"estado",label:"Estado",type:"tag"},{id:"prioridad",label:"Prioridad",type:"number"}],rows:[{id:1,nombre:"Empresa Alpha",contacto:"Juan Perez",estado:"ACTIVO",prioridad:5},{id:2,nombre:"Beta Dynamics",contacto:"Maria Garcia",estado:"PENDIENTE",prioridad:3},{id:3,nombre:"Gamma Solutions",contacto:"Luis Rodriguez",estado:"INACTIVO",prioridad:1},{id:4,nombre:"Delta Systems",contacto:"Ana Martinez",estado:"ACTIVO",prioridad:4},{id:5,nombre:"Epsilon Tech",contacto:"Carlos Sanchez",estado:"ACTIVO",prioridad:2}]}}}},kh=[{id:"root_1",name:"Mi Unidad",type:"FOLDER",mimeType:"folder",parent:"ROOT"},{id:"root_2",name:"Compartidos con migo",type:"FOLDER",mimeType:"folder",parent:"ROOT"},{id:"root_3",name:"Recientes",type:"FOLDER",mimeType:"folder",parent:"ROOT"},{id:"f1",name:"PROYECTOS_2024",type:"FOLDER",mimeType:"folder",parent:"root_1"},{id:"f2",name:"LEGAL_DOCS",type:"FOLDER",mimeType:"folder",parent:"root_1"},{id:"db_notion_1",name:"Tabla de Clientes (Notion)",type:"DATABASE",mimeType:"application/vnd.indra.notion-db",parent:"f1"},{id:"d1",name:"blueprint_v8.pdf",type:"FILE",mimeType:"application/pdf",size:"2.4MB",parent:"f1"},{id:"d2",name:"budget_draft.xlsx",type:"FILE",mimeType:"application/vnd.ms-excel",size:"156KB",parent:"f1"},{id:"d3",name:"emergency_contact.txt",type:"FILE",mimeType:"text/plain",size:"1KB",parent:"root_1"}],Dh={db_notion_1:[{id:1,nombre:"Empresa Alpha",contacto:"Juan Perez",estado:"ACTIVO",prioridad:5},{id:2,nombre:"Beta Dynamics",contacto:"Maria Garcia",estado:"PENDIENTE",prioridad:3},{id:3,nombre:"Gamma Solutions",contacto:"Luis Rodriguez",estado:"INACTIVO",prioridad:1},{id:4,nombre:"Delta Systems",contacto:"Ana Martinez",estado:"ACTIVO",prioridad:4},{id:5,nombre:"Epsilon Tech",contacto:"Carlos Sanchez",estado:"ACTIVO",prioridad:2}]};class Ph{constructor(){this.contracts=new Map,this.metadataCache=new Map,this.storageKey="INDRA_PERSISTENCE_METADATA",this._loadMetadata(),this._registerDefaultContracts()}_registerDefaultContracts(){const t={vault_tree_ROOT:{hydrate:!0,scope:"COSMOS",ttl:3600,compute:"EAGER"},metadata:{hydrate:!0,scope:"COSMOS",ttl:3600,compute:"EAGER"}};this.registerContract("drive",t),this.registerContract("notion",t)}registerContract(t,r){!r||typeof r!="object"||(this.contracts.set(t,r),console.log(`[PersistenceManager]  Registered contract for ${t}`))}async hydrate(t,r){var a,i;const n={},s=Date.now();for(const[l,c]of this.contracts.entries()){n[l]={};for(const[d,h]of Object.entries(c)){if(!h.hydrate)continue;const m=`${l}.${d}`,x=(i=(a=t==null?void 0:t.persistence)==null?void 0:a[l])==null?void 0:i[d];let E=x;if(!E){const g=await et.getItem(m);g&&(E=g)}if(E&&E.timestamp&&(s-new Date(E.timestamp).getTime())/1e3<h.ttl){n[l][d]=E.data,console.log(`[PersistenceManager]  Hydrated ${m} from ${x?"COSMOS":"L2_DB"}`);continue}try{console.log(`[PersistenceManager]  Fetching fresh data for ${m}...`);const g=await this._fetchData(l,d,r);n[l][d]=g,await this.saveLocal(m,g)}catch(g){console.error(`[PersistenceManager]  Failed to fetch ${m}:`,g)}}}return n}async saveLocal(t,r){const n={data:r,timestamp:new Date().toISOString()};await et.setItem(t,n),this.metadataCache.set(t,{timestamp:n.timestamp}),this._saveMetadata()}updateFlowState(t,r,n){const s=this.contracts.get(t);if(!s||!s[r]||s[r].scope!=="COSMOS")return null;const a=`${t}.${r}`,i={data:n,timestamp:new Date().toISOString()};return this.saveLocal(a,n),{adapterId:t,dataKey:r,entry:i}}isCacheValid(t,r){const n=this.contracts.get(t);if(!n||!n[r]){if(r.startsWith("vault_tree_")){const l=this.metadataCache.get(`${t}.${r}`);return l?(Date.now()-new Date(l.timestamp).getTime())/1e3<3600:!1}return!1}const s=`${t}.${r}`,a=this.metadataCache.get(s);return a?(Date.now()-new Date(a.timestamp).getTime())/1e3<n[r].ttl:!1}async getCached(t,r){const n=`${t}.${r}`,s=await et.getItem(n);return s?s.data:null}async clearCache(t=null){if(t)for(const r of this.metadataCache.keys())r.startsWith(`${t}.`)&&(this.metadataCache.delete(r),await et.deleteCosmos(r));else this.metadataCache.clear(),await et.purge();this._saveMetadata()}async fetchContent(t,r,n){const{folderId:s="ROOT",query:a}=r,i=a?null:`${t}.vault_tree_${s}`,l=r.forceRefresh||r.refresh;if(i&&this.isCacheValid(t,`vault_tree_${s}`)&&!l){const c=await this.getCached(t,`vault_tree_${s}`);if(c)return console.log(`[PersistenceManager]  DB Hit for ${i}`),{items:c,fromCache:!0}}try{const c=r.accountId||null,d={folderId:s,query:a,accountId:c,forceRefresh:l},h=await n.executeAction(`${t}:listContents`,d);if(h&&h.error)throw new Error(`[${h.error_code||"UNKNOWN"}] ${h.error}`);const m=Array.isArray(h)?h:(h==null?void 0:h.results)||(h==null?void 0:h.items)||(h==null?void 0:h.artifacts)||(h==null?void 0:h.result)||[],x=(h==null?void 0:h.metadata)||{hydrationLevel:100,total:m?m.length:0};return i&&m&&await this.saveLocal(i,m),typeof h=="object"&&!Array.isArray(h)?{...h,items:m||[],metadata:x}:{items:m||[],metadata:x}}catch(c){throw console.error(`[PersistenceManager]  Signal Lost for ${t}:`,c),c}}async _fetchData(t,r,n){let s={folderId:"ROOT"};return r.startsWith("vault_tree_")&&(s.folderId=r.replace("vault_tree_","")),(await this.fetchContent(t,s,n)).items}async triggerBackgroundHydration(t,r,n){console.log("[PersistenceManager]  Background Hydration sequence initiated...");const s=(t==null?void 0:t.adapters)||[],a=[];try{for(const[i,l]of this.contracts.entries()){const c=s.includes(i);for(const[d,h]of Object.entries(l))(h.compute==="EAGER"||c&&h.hydrate)&&(this.isCacheValid(i,d)||a.push(this._fetchData(i,d,r).then(m=>this.saveLocal(`${i}.${d}`,m))))}a.length>0&&await Promise.all(a)}catch(i){console.error("[PersistenceManager]  Hydration sweep interrupted:",i)}finally{n&&n()}}_loadMetadata(){try{const t=localStorage.getItem(this.storageKey);if(t){const r=JSON.parse(t);for(const[n,s]of Object.entries(r))this.metadataCache.set(n,s)}}catch(t){console.warn("[PersistenceManager] Meta-error:",t)}}_saveMetadata(){try{const t=Object.fromEntries(this.metadataCache);localStorage.setItem(this.storageKey,JSON.stringify(t))}catch(t){console.warn("[PersistenceManager] Meta-save fail:",t)}}}const cn=new Ph;class Mh{constructor(){eo(this,"lib",{map:(t,r,n,s,a)=>(t-r)*(a-s)/(n-r)+s,oscillate:(t,r)=>Math.sin(t*r*Math.PI*2)*.5+.5,lerp:(t,r,n)=>t+(r-t)*n});this.cache=new Map,this.allowedMathDocs=["sin","cos","tan","abs","min","max","pow","sqrt","exp","log","floor","ceil","round"],this.aliases=new Map}setAliases(t){for(const[r,n]of Object.entries(t))this.aliases.set(r,n)}compile(t){if(this.cache.has(t))return this.cache.get(t);const n=t.replace(/^{{|}}$/g,"").trim().split("|").map(d=>d.trim()),s=n[0],a=n.slice(1),i=this._buildJSExecutor(s,a),l=this._tryTranspileToGLSL(s,a),c={executor:i,glsl:l,dependencies:[s]};return this.cache.set(t,c),c}_buildJSExecutor(t,r){r.forEach(n=>{n.startsWith("map(")?n.match(/\(([^)]+)\)/)[1]:n.startsWith("oscillate(")&&n.match(/\(([^)]+)\)/)[1]});try{const s=(this.aliases.has(t)?this.aliases.get(t):t).replace(/[^a-zA-Z0-9_.]/g,"");return new Function("state","compiler",`
        "use strict";
        let val = state["${s}"];
        if (val === undefined) return 0;
        ${this._buildFilterLogic(r)}
        return val;
      `)}catch(n){return console.error("JIT Error compiling expression:",t,n),()=>0}}_buildFilterLogic(t){let r="";return t.forEach(n=>{const s=n.match(/^(\w+)\((.*)\)$/);if(s){const a=s[1],i=s[2];r+=`val = compiler.lib.${a}(val, ${i});
`}}),r}_tryTranspileToGLSL(t,r){let n=`state_${t.replace(/\./g,"_")}`;for(const s of r)if(s.startsWith("map(")){const a=s.match(/\((.*)\)/)[1].split(",").map(i=>i.trim());n=`mix(${a[2]}, ${a[3]}, clamp((${n} - ${a[0]}) / (${a[1]} - ${a[0]}), 0.0, 1.0))`}else return null;return n}}class Uh{constructor(){this.pools=new Map,this.activeNodes=new Map}get(t,r){this.pools.has(t)||this.pools.set(t,[]);const n=this.pools.get(t);let s;return n.length>0?(s=n.pop(),s.isActive=!0):s=this._createNodePrimitive(t),s.id=r,this.activeNodes.set(r,s),s}release(t){const r=this.activeNodes.get(t);if(!r)return;r.isActive=!1,this._resetNodeState(r),this.pools.get(r.type).push(r),this.activeNodes.delete(t)}releaseAll(){for(const t of this.activeNodes.keys())this.release(t)}_createNodePrimitive(t){return{type:t,id:null,isActive:!0,geometry:{},physiology:{bindings:[],uniforms:{}},_internal:{instanceId:-1,dirty:!0}}}_resetNodeState(t){t.geometry={},t.physiology.bindings=[],t.physiology.uniforms={},t._internal.dirty=!0}}class zh{constructor(t){if(this.canvas=t,this.gl=t.getContext("webgl2",{antialias:!0,alpha:!0}),!this.gl)throw new Error("ISK: WebGL2 not supported by the environment.");this.programs=new Map,this.textures=new Map,this.vaos=new Map,this.textureSize=128,this._setupBaseEngine()}_setupBaseEngine(){const t=this.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0)}initArchetype(t,r,n){const s=this._createProgram(r,n);this.programs.set(t,s),this._setupInstancingBuffers(t)}render(t,r,n){const s=this.gl;s.clear(s.COLOR_BUFFER_BIT),this._updateDataTextures(t);for(const[a,i]of this.programs){s.useProgram(i),s.uniform2f(s.getUniformLocation(i,"u_resolution"),this.canvas.width,this.canvas.height),s.uniform1f(s.getUniformLocation(i,"u_interpolation"),n),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.textures.get("last")),s.uniform1i(s.getUniformLocation(i,"u_dataLast"),0),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this.textures.get("current")),s.uniform1i(s.getUniformLocation(i,"u_dataCurrent"),1);const l=this.vaos.get(a);s.bindVertexArray(l),s.drawArraysInstanced(s.TRIANGLE_STRIP,0,4,r)}}_updateDataTextures(t){const r=this.gl;if(!this.textures.has("current")){this.textures.set("last",this._createDataTexture(t)),this.textures.set("current",this._createDataTexture(t)),this.lastBuffer=new Float32Array(t);return}r.bindTexture(r.TEXTURE_2D,this.textures.get("last")),r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.textureSize,this.textureSize,r.RGBA,r.FLOAT,this.lastBuffer),r.bindTexture(r.TEXTURE_2D,this.textures.get("current")),r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.textureSize,this.textureSize,r.RGBA,r.FLOAT,t),this.lastBuffer.set(t)}resizeDataTextures(t){this.textureSize=t,this.textures.has("current")&&(this.gl.deleteTexture(this.textures.get("last")),this.gl.deleteTexture(this.textures.get("current")),this.textures.delete("last"),this.textures.delete("current"))}_createDataTexture(t){const r=this.gl,n=r.createTexture();return r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,this.textureSize,this.textureSize,0,r.RGBA,r.FLOAT,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}_createProgram(t,r){const n=this.gl,s=this._compileShader(n.VERTEX_SHADER,t),a=this._compileShader(n.FRAGMENT_SHADER,r),i=n.createProgram();return n.attachShader(i,s),n.attachShader(i,a),n.linkProgram(i),i}_compileShader(t,r){const n=this.gl,s=n.createShader(t);return n.shaderSource(s,r),n.compileShader(s),n.getShaderParameter(s,n.COMPILE_STATUS)||console.error(n.getShaderInfoLog(s)),s}_setupInstancingBuffers(t){const r=this.gl,n=r.createVertexArray();r.bindVertexArray(n);const s=new Float32Array([-1,-1,1,-1,-1,1,1,1]),a=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,s,r.STATIC_DRAW);const i=0;r.enableVertexAttribArray(i),r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),this.vaos.set(t,n)}}const Jn={getBaseVertexShader:()=>`#version 300 es
        layout(location = 0) in vec2 a_position; // Geometra base (quad/unit circle)
        
        uniform sampler2D u_dataLast;
        uniform sampler2D u_dataCurrent;
        uniform float u_interpolation; // t entre frames
        uniform vec2 u_resolution;
        uniform float u_textureSize;

        out vec4 v_color;
        out float v_visibility;

        vec4 fetchData(int id, sampler2D tex) {
            int x = id % int(u_textureSize);
            int y = id / int(u_textureSize);
            return texelFetch(tex, ivec2(x, y), 0);
        }

        void main() {
            int id = gl_InstanceID;
            
            // Fetch de estados
            vec4 dataLast = fetchData(id, u_dataLast);
            vec4 dataCurrent = fetchData(id, u_dataCurrent);
            
            // Interpolacin L2 (Anti-Stuttering)
            vec2 pos = mix(dataLast.xy, dataCurrent.xy, u_interpolation);
            float radius = mix(dataLast.z, dataCurrent.z, u_interpolation);
            v_visibility = mix(dataLast.w, dataCurrent.w, u_interpolation);

            // Descarte temprano si no es visible
            if (v_visibility < 0.01) {
                gl_Position = vec4(2.0, 2.0, 2.0, 1.0); // Fuera del clip space
                return;
            }

            // Transformacin al Clip Space
            vec2 screenPos = (pos / u_resolution) * 2.0 - 1.0;
            vec2 scaledOffset = (a_position * radius * 2.0) / u_resolution;
            
            gl_Position = vec4(screenPos + scaledOffset, 0.0, 1.0);
            v_color = vec4(1.0); // Se sobreescribe en fragment shader si se desea
        }
    `,getCircleFragmentShader:()=>`#version 300 es
        precision highp float;
        in vec4 v_color;
        in float v_visibility;
        out vec4 fragColor;

        void main() {
            // Calculamos distancia al centro del quad para dibujar el crculo
            vec2 uv = gl_PointCoord * 2.0 - 1.0; 
            // Nota: En instancing manual usamos a_position como UV interna
            
            // Implementacin simplificada para el arquetipo Circle
            fragColor = vec4(0.0, 0.8, 1.0, v_visibility);
        }
    `,getArcFragmentShader:()=>`#version 300 es
        precision highp float;
        out vec4 fragColor;
        // ... Lgica de arco v3.2
        void main() {
            fragColor = vec4(1.0, 0.5, 0.0, 1.0);
        }
    `};class Fh{constructor(){this.schemaSnapshots=new Map}validateStructure(t,r){const n=new Set;for(const[s,a]of Object.entries(r))for(const[i,l]of Object.entries(a))l.dependencies.forEach(c=>{this._getValueByPath(t,c)===void 0&&n.add(c)});return n.size>0?{step:"HANDSHAKE",status:"CRITICAL",message:"Incoherencia Estructural Detectada",missing:Array.from(n)}:{status:"VALID"}}auditExploitation(t,r){const n=this._getAllPaths(t),s=new Set;for(const i of Object.values(r))for(const l of Object.values(i))l.dependencies.forEach(c=>s.add(c));const a=n.filter(i=>!s.has(i));return a.length>0?{status:"WARNING",message:"Sub-explotacin de Datos Detectada",unusedRatio:`${a.length}/${n.length}`,unusedFields:a}:{status:"OPTIMAL"}}createRefactorSnapshot(t,r){const n=JSON.stringify(this._getAllPaths(r).sort());this.schemaSnapshots.set(t,n)}checkRefactorDebt(t,r){if(!this.schemaSnapshots.has(t))return{status:"NEW"};const n=JSON.stringify(this._getAllPaths(r).sort()),s=this.schemaSnapshots.get(t);return n!==s?{status:"REFACTOR_ALARM",message:"Cambio de esquema detectado en el Core. El ISK puede estar desactualizado."}:{status:"SAFE"}}_getValueByPath(t,r){return r.split(".").reduce((n,s)=>n&&n[s],t)}_getAllPaths(t,r=""){return Object.keys(t).reduce((n,s)=>{const a=r?`${r}.${s}`:s;return typeof t[s]=="object"&&t[s]!==null&&!Array.isArray(t[s])?n.concat(this._getAllPaths(t[s],a)):n.concat([a])},[])}}const Bh={RECT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[100,100],min:[1,1]},u_fill:{type:"v4",default:[1,1,1,1]},u_stroke:{type:"v4",default:[0,0,0,1]},u_strokeWidth:{type:"f32",default:0,min:0,max:50},u_opacity:{type:"f32",default:1,min:0,max:1},u_cornerRadius:{type:"f32",default:0,min:0},u_visibility:{type:"f32",default:1,min:0,max:1}}},ELLIPSE:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_radius:{type:"f32",default:50,min:1},u_fill:{type:"v4",default:[1,1,1,1]},u_stroke:{type:"v4",default:[0,0,0,1]},u_opacity:{type:"f32",default:1,min:0,max:1},u_visibility:{type:"f32",default:1,min:0,max:1}}},TEXT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_fontSize:{type:"f32",default:14,min:1,max:200},u_color:{type:"v4",default:[1,1,1,1]},u_opacity:{type:"f32",default:1,min:0,max:1},u_weight:{type:"f32",default:400,min:100,max:900},u_visibility:{type:"f32",default:1,min:0,max:1}}},IMAGE:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[100,100]},u_opacity:{type:"f32",default:1,min:0,max:1},u_saturation:{type:"f32",default:1,min:0,max:2},u_visibility:{type:"f32",default:1,min:0,max:1}}},GROUP:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_scale:{type:"f32",default:1},u_rotation:{type:"f32",default:0},u_visibility:{type:"f32",default:1,min:0,max:1}}},FRAME:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_size:{type:"v2",default:[200,200]},u_padding:{type:"v4",default:[0,0,0,0]},u_gap:{type:"f32",default:0},u_fill:{type:"v4",default:[0,0,0,0]},u_visibility:{type:"f32",default:1,min:0,max:1}}},DATA_SLOT:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_intensity:{type:"f32",default:.5,min:0,max:1},u_color:{type:"v4",default:[.5,1,.5,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}},REPEATER:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_count:{type:"f32",default:1,min:1,max:1e3},u_offset:{type:"v2",default:[0,50]},u_visibility:{type:"f32",default:1,min:0,max:1}}},ARC:{properties:{u_pos:{type:"v3",default:[0,0,0]},u_innerRadius:{type:"f32",default:40},u_outerRadius:{type:"f32",default:50},u_startAngle:{type:"f32",default:0},u_endAngle:{type:"f32",default:180},u_fill:{type:"v4",default:[0,.5,1,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}},LINE:{properties:{u_start:{type:"v3",default:[0,0,0]},u_end:{type:"v3",default:[100,100,0]},u_thickness:{type:"f32",default:2,min:.1},u_color:{type:"v4",default:[1,1,1,1]},u_visibility:{type:"f32",default:1,min:0,max:1}}}},Vh={roles:Bh};class $h{constructor(t){this.kernel=t,this.registry=Vh.roles,this.persistenceBuffer=null}processMessage(t){const{payload:r,integrity:n}=t,{target_id:s,property:a,value:i,action:l}=r,c=this.kernel.pool.activeNodes.get(s);if(!c)return this._logError("ERR_ENTITY_NOT_FOUND",`Target ${s} does not exist in pool.`),!1;const d=this.registry[c.type];if(!d)return this._logError("ERR_INVALID_ROLE",`Role ${c.type} is not defined in ContractRegistry.`),!1;const h=d.properties[a];return h?this._validateValue(i,h)?(this.kernel.worker&&this.kernel.worker.postMessage({action:"HFS_UPDATE",payload:{target_id:s,property:a,value:i}}),n.persistence>0&&this.persistenceBuffer&&this.persistenceBuffer.queueChange(t),!0):(this._logError("ERR_TYPE_VIOLATION",`Value for ${a} does not match expected type ${h.type} or is out of range.`),!1):(this._logError("ERR_INVALID_PROPERTY",`Property ${a} is not valid for role ${c.type}.`),!1)}_validateValue(t,r){const{type:n,min:s,max:a}=r;switch(n){case"f32":if(typeof t!="number"||s!==void 0&&t<s||a!==void 0&&t>a)return!1;break;case"v2":if(!Array.isArray(t)||t.length!==2||s&&(t[0]<s[0]||t[1]<s[1]))return!1;break;case"v3":if(!Array.isArray(t)||t.length!==3)return!1;break;case"v4":if(!Array.isArray(t)||t.length!==4)return!1;break;case"str":if(typeof t!="string")return!1;break;case"bool":if(typeof t!="boolean")return!1;break}return!0}_logError(t,r){console.warn(`[ISK-USSP] ${t}: ${r}`)}setPersistenceBuffer(t){this.persistenceBuffer=t}}const Gh="modulepreload",Hh=function(e){return"/indra-os/"+e},tc={},Pr=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Hh(c),c in tc)return;tc[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Gh,d||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((x,E)=>{m.addEventListener("load",x),m.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};class Yh{constructor(t=300){this.debounceTime=t,this.queue=new Map,this.timer=null,this.isProcessing=!1}queueChange(t){const{target_id:r,property:n}=t.payload,s=`${r}.${n}`;this.queue.set(s,t),this._resetTimer()}_resetTimer(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>this._flush(),this.debounceTime)}async _flush(){if(this.queue.size===0||this.isProcessing)return;this.isProcessing=!0;const t=Array.from(this.queue.values());this.queue.clear();try{console.log(`[ISK-USSP] Persisting ${t.length} changes to Core...`);const r=await ae.call("indra","commitSpatialChanges",{changes:t.map(n=>n.payload)});r.status==="success"?console.log(`[ISK-USSP] Persistence successful: ${r.summary}`):this._handleFailure(t)}catch(r){console.error("[ISK-USSP] Persistence error:",r),this._handleFailure(t)}finally{this.isProcessing=!1}}async _handleFailure(t){console.warn(`[ISK-USSP] Persistence failed for ${t.length} items. Moving to Iron Memory (AxiomaticDB).`);try{const n=[...await AxiomaticDB.getItem("USSP_RETRY_QUEUE")||[],...t];n.length>500&&(console.error("[ISK-USSP]  PRESSURE RELIEF: Backup queue exceeding safety limits. Engaging World Lock."),(await Pr(async()=>{const{default:a}=await Promise.resolve().then(()=>Th);return{default:a}},void 0)).default.getState().engageWorldLock("USSP_BUFFER_FULL")),await AxiomaticDB.setItem("USSP_RETRY_QUEUE",n)}catch(r){console.error("[ISK-USSP] Critical: Failed to save to Iron Memory.",r)}}}const Wh=bi((e,t)=>({snapshot:{nodes:{},edges:[],metadata:{}},history:[],historyPointer:-1,hydrate:r=>{e({snapshot:r,history:[JSON.stringify(r)],historyPointer:0})},applyChange:r=>{const{target_id:n,property:s,value:a}=r,i=t().snapshot,l={...i.nodes},c={...l[n]||{}};c[s.replace("u_","")]=a,l[n]=c;const d={...i,nodes:l};e({snapshot:d}),t()._recordHistory(d)},undo:()=>{const{history:r,historyPointer:n}=t();if(n>0){const s=n-1;e({snapshot:JSON.parse(r[s]),historyPointer:s})}},redo:()=>{const{history:r,historyPointer:n}=t();if(n<r.length-1){const s=n+1;e({snapshot:JSON.parse(r[s]),historyPointer:s})}},_recordHistory:r=>{const{history:n,historyPointer:s}=t(),a=JSON.stringify(r);if(a===n[s])return;const i=n.slice(0,s+1);i.push(a),i.length>50&&i.shift(),e({history:i,historyPointer:i.length-1})}}));class yd{constructor(){this.compiler=new Mh,this.pool=new Uh,this.integrity=new Fh,this.bridge=new $h(this),this.persistence=new Yh,this.bridge.setPersistenceBuffer(this.persistence),this.worker=null,this.laws=new Map,this.compiledLaws={},this.state={nodes:[],lastReification:{},lastUpdateTime:Date.now(),targetFrameRate:60,integrity:{status:"INITIALIZING"},sequenceId:0,lastProcessedSequenceId:-1},this.textureSize=128,this.dataBuffer=new Float32Array(this.textureSize*this.textureSize*4),this.renderer=null,this._initWorker()}setCanvas(t){this.renderer=new zh(t),this._setupArchetypes()}loadLaws(t){this.pool.releaseAll(),this.laws.clear(),this.compiledLaws={};const r=t.length;this._ensureTextureCapacity(r);let n=0;t.forEach(a=>{this.laws.set(a.identity.uuid,a);const i=this._compilePhysiology(a);this.compiledLaws[a.identity.uuid]={executors:i,index:n++},this.pool.get(a.dna.archetype,a.identity.uuid)}),this._syncWorker();const s={"core.power":0,"time.now":0};this.integrity.createRefactorSnapshot("INITIAL_LOAD",s),Wh.getState().hydrate({nodes:{},edges:[],metadata:{}})}update(t){const r=this.integrity.validateStructure(t,this.compiledLaws);if(this.state.integrity=r,r.status==="CRITICAL"){console.error("ISK INTEGRITY CRITICAL:",r.message,r.missing);return}const n=this.integrity.checkRefactorDebt("INITIAL_LOAD",t);n.status==="REFACTOR_ALARM"&&(this.state.integrity={status:"WARNING",message:n.message});const s=this.integrity.auditExploitation(t,this.compiledLaws);if(this.state.exploitation=s,this.worker){const a=++this.state.sequenceId;this.worker.postMessage({action:"UPDATE_STATE",payload:{state:t,sequenceId:a}})}}_compilePhysiology(t){var r;return((r=t.dna.geometry)==null?void 0:r.expressions)||{}}_initWorker(){try{this.worker=new Worker(new URL("/indra-os/assets/SpatialWorker-B4jZiYSs.js",import.meta.url)),this.worker.onmessage=t=>this._handleWorkerMessage(t)}catch(t){console.warn("ISK: Worker initialization failed. Falling back to Main Thread.",t)}}_syncWorker(){this.worker&&this.worker.postMessage({action:"INIT",payload:{laws:this.compiledLaws,textureSize:this.textureSize}})}_handleWorkerMessage(t){var i,l,c;const{action:r,results:n,sequenceId:s,isPartial:a}=t.data;if(r==="REIFICATION_RESULT"){if(!a&&s<=this.state.lastProcessedSequenceId)return;a||(this.state.lastProcessedSequenceId=s),this.dataBuffer.set(n);const d=(l=(i=window.AxiomaticStore)==null?void 0:i.getState)==null?void 0:l.call(i),h=((c=d==null?void 0:d.phenotype)==null?void 0:c.artifacts)||[],m=new Set(h.filter(g=>g._isDirty).map(g=>g.id)),x=Date.now();this._hysteresisMap||(this._hysteresisMap=new Map);let E=0;for(const[g,S]of this.laws){const _=E*4;if(m.has(g))this._hysteresisMap.set(g,x),this.dataBuffer[_+3]=.75;else{const u=this._hysteresisMap.get(g)||0;x-u<300?this.dataBuffer[_+3]=.75:this.dataBuffer[_+3]=1}E++}this.state.lastUpdateTime=Date.now()}}tick(){if(!this.renderer)return;const t=Date.now();if(this._fpsLastTime||(this._fpsLastTime=t,this._fpsFrames=0,this.panicMode=!1),this._fpsFrames++,t-this._fpsLastTime>1e3){const a=this._fpsFrames*1e3/(t-this._fpsLastTime);this._fpsLastTime=t,this._fpsFrames=0,a<30&&!this.panicMode?(console.warn(`[ProjectionKernel]  PANIC MODE: FPS dropped to ${Math.round(a)}. Throttling physics.`),this.panicMode=!0,this._syncPanicState()):a>45&&this.panicMode&&(console.log(`[ProjectionKernel]  STABILIZED: FPS recovered to ${Math.round(a)}. Restoring physics.`),this.panicMode=!1,this._syncPanicState())}const r=t-this.state.lastUpdateTime,n=1e3/this.state.targetFrameRate,s=Math.min(r/n,1);this.renderer.render(this.dataBuffer,this.laws.size,s)}_syncPanicState(){this.worker&&this.worker.postMessage({action:"SET_PANIC_MODE",payload:{enabled:this.panicMode}})}_setupArchetypes(){this.renderer&&(this.renderer.initArchetype("arc",Jn.getBaseVertexShader(),Jn.getArcFragmentShader()),this.renderer.initArchetype("circle",Jn.getBaseVertexShader(),Jn.getCircleFragmentShader()))}_applyReificationToNodes(){let t=0;for(const[r,n]of this.pool.activeNodes){const s=this.state.lastReification[r];if(s){const a=t*4;this.dataBuffer[a]=s.x||0,this.dataBuffer[a+1]=s.y||0,this.dataBuffer[a+2]=s.radius||0,this.dataBuffer[a+3]=n.isActive?1:0,n._internal.dirty=!0}t++}}_ensureTextureCapacity(t){let r=128;for(;r*r<t;)r*=2;r!==this.textureSize&&(console.log(`ISK: Re-scaling Data Texture to ${r}x${r} for ${t} nodes.`),this.textureSize=r,this.dataBuffer=new Float32Array(this.textureSize*this.textureSize*4),this.renderer&&this.renderer.resizeDataTextures(this.textureSize))}}class Kh{constructor(){this.activePulses=new Set,this.dispatchFunction=null,this._maxTTL=10,this.pulseRegistry=new Map}setDispatcher(t){this.dispatchFunction=t}async propagate(t,r,n,s=10,a=new Set){var d,h,m,x,E;const{state:i,execute:l}=t;if(s<=0){console.warn(`[SynapticDispatcher]  TTL EXPIRED for ${r}. Signal auto-terminated.`);return}if(a.has(r)){console.warn(`[SynapticDispatcher]  LOOP DETECTED at ${r}. Breaking circuit.`);return}a.add(r);const c=((d=i.phenotype.relationships)==null?void 0:d.filter(g=>g.source===r&&!g._isDeleted))||[];if(c.length!==0)for(const g of c){const S=i.phenotype.artifacts.find(u=>u.id===g.target&&!u._isDeleted);if(!S)continue;this._triggerPulse(g.id);const _=g.targetPort,f=(h=Object.entries(S.CAPABILITIES||{}).find(([u,p])=>u===_||p.io==="INPUT"||p.io==="WRITE"||p.io==="TRIGGER"))==null?void 0:h[0];if(f){console.log(`[SynapticDispatcher]  Flowing: ${r} [${g.sourcePort}] >> ${S.id} [${_}]`);let u=n;const p=i.phenotype.artifacts.find(b=>b.id===r),v=(m=p==null?void 0:p.CAPABILITIES)==null?void 0:m[g.sourcePort],y=((x=S.CAPABILITIES)==null?void 0:x[_])||((E=S.CAPABILITIES)==null?void 0:E[f]);(v==null?void 0:v.type)==="BLOB"&&(y==null?void 0:y.type)==="DATAFRAME"?u=(n==null?void 0:n.name)||(n==null?void 0:n.id)||String(n):(y==null?void 0:y.type)==="SIGNAL"&&(u=null),this.dispatchFunction&&this.dispatchFunction({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Sinapsis: ${r} >> ${S.LABEL} (${(y==null?void 0:y.type)||"SIGNAL"})`,type:"SUCCESS"}}),setTimeout(()=>{l("EXECUTE_NODE_ACTION",{nodeId:S.id,capability:f,payload:u,_ttl:s-1,_visited:new Set(a)})},100)}setTimeout(()=>this._clearPulse(g.id),1e3)}}_triggerPulse(t){this.pulseRegistry.set(t,!0),this.dispatchFunction&&this.dispatchFunction({type:"PULSE_START",payload:t})}_clearPulse(t){this.pulseRegistry.delete(t),this.dispatchFunction&&this.dispatchFunction({type:"PULSE_END",payload:t})}isPulseActive(t){return this.pulseRegistry.has(t)}}const rc=new Kh,Ai=T.createContext(null);Ai.displayName="AxiomaticContext";const jo={sovereignty:{status:"UNKNOWN",mode:localStorage.getItem("INDRA_MODE")||"LIVE",theme:"dark",portalOpen:!1},ui:{dnaPanelOpen:!1,chaosPanelOpen:!1,currentLayer:localStorage.getItem("INDRA_ANCHOR_LAYER")||null,pendingConnection:null,vaultPanelOpen:!1},devLab:{perspective:"VAULT",targetId:"VAULT",isMockEnabled:!0}},Qh=(e,t)=>{var r;switch(t.type){case"SET_CURRENT_LAYER":return t.payload?localStorage.setItem("INDRA_ANCHOR_LAYER",t.payload):localStorage.removeItem("INDRA_ANCHOR_LAYER"),{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,currentLayer:t.payload}}};case"TOGGLE_UI_PANEL":{const n=t.payload.panel,s=e.phenotype.ui;let a={...s};return n==="dna"&&(a.dnaPanelOpen=!s.dnaPanelOpen),n==="chaos"&&(a.chaosPanelOpen=!s.chaosPanelOpen),n==="vault"&&(a.vaultPanelOpen=!s.vaultPanelOpen),{...e,phenotype:{...e.phenotype,ui:a}}}case"SET_THEME":return{...e,sovereignty:{...e.sovereignty,theme:t.payload.theme}};case"SET_MODE":return localStorage.setItem("INDRA_MODE",t.payload.mode),{...e,sovereignty:{...e.sovereignty,mode:t.payload.mode}};case"TOGGLE_PORTAL":return{...e,sovereignty:{...e.sovereignty,portalOpen:t.payload!==void 0?t.payload:!e.sovereignty.portalOpen}};case"TOGGLE_VISUALIZATION_MODE":{const s=(((r=e.phenotype.activeLayout)==null?void 0:r.VIEW_MODE)||"GRAPH")==="GRAPH"?"DASHBOARD":"GRAPH";return{...e,phenotype:{...e.phenotype,activeLayout:{...e.phenotype.activeLayout||{},VIEW_MODE:s}}}}case"SET_LAB_PERSPECTIVE":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,perspective:t.payload}}};case"SET_LAB_TARGET":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,targetId:t.payload}}};case"TOGGLE_LAB_MOCK":return{...e,phenotype:{...e.phenotype,devLab:{...e.phenotype.devLab,isMockEnabled:!e.phenotype.devLab.isMockEnabled}}};case"SYSTEM_LOCKED":return{...e,sovereignty:{...e.sovereignty,status:"LOCKED",portalOpen:!1}};case"SYSTEM_HALTED":return{...e,sovereignty:{...e.sovereignty,status:"HALTED"}};case"SET_LAYOUT_DIRTY":return{...e,_layoutDirty:t.payload};default:return e}},Xh={phenotype:{vault:[],artifacts:[],relationships:[],silos:{},siloMetadata:{},cosmosIdentity:null,activeLayout:null,activeFlow:null,focusStack:[],activePulses:[],availableCosmos:[],discoveryStatus:"IDLE"}},qh=(e,t)=>{var r,n,s,a,i,l,c,d,h,m,x,E,g,S,_,f;switch(t.type){case"SELECT_ARTIFACT":{const u=t.payload;if(!u||e.phenotype.cosmosIdentity&&u.id===e.phenotype.cosmosIdentity.id)return{...e,phenotype:{...e.phenotype,activeLayout:e.phenotype.cosmosIdentity,focusStack:[e.phenotype.cosmosIdentity].filter(Boolean)}};const p=[...e.phenotype.focusStack||[]];return p.some(v=>v.id===u.id)||p.push(u),{...e,phenotype:{...e.phenotype,activeLayout:u,focusStack:p}}}case"EXIT_FOCUS":{const u=[...e.phenotype.focusStack||[]];u.pop();const p=u[u.length-1]||e.phenotype.cosmosIdentity;return{...e,phenotype:{...e.phenotype,activeLayout:p,focusStack:u}}}case"VAULT_LOAD_SUCCESS":{const u=t.payload.nodeId||"unknown_node",p=t.payload.data,v=Array.isArray(p)?p:p.results||p.items||[];p.metadata||v.length;let y=e.phenotype.activeLayout;(y==null?void 0:y.id)===u&&(y={...y,...p,items:v});const b=(e.phenotype.artifacts||[]).map(A=>{var w;return A.id===u||((w=A.data)==null?void 0:w.id)===u?{...A,data:{...A.data,...p,items:v,_reifiedAt:Date.now()}}:A});return{...e,phenotype:{...e.phenotype,activeLayout:y,artifacts:b,vault:v,silos:{...e.phenotype.silos,[u]:p},siloMetadata:{...e.phenotype.siloMetadata,[u]:{ORIGIN_SOURCE:p.ORIGIN_SOURCE,SCHEMA:p.SCHEMA,PAGINATION:p.PAGINATION,BURST_METADATA:p.BURST_METADATA,_loadedAt:Date.now()}}}}}case"VAULT_WRITE":{const u=t.payload,p=[u,...e.phenotype.vault.filter(v=>v.id!==u.id)];return{...e,phenotype:{...e.phenotype,vault:p}}}case"UPDATE_ARTIFACT_POSITION":{const{nodeId:u,x:p,y:v}=t.payload;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.map(y=>y.id===u?{...y,x:p,y:v,_isDirty:!0}:y)}}}case"ADD_ARTIFACT_REQUEST":{const{artifact:u,position:p,schemaId:v}=t.payload,b=(((r=e.phenotype.artifacts)==null?void 0:r.length)||0)*30,A=p||{x:b,y:b},w=u.LABEL||u.label||u.functional_name||u.name||"Manifested Protocol",O=(u.DOMAIN||u.domain||"SYSTEM").toUpperCase();let N=u.ARCHETYPE||u.archetype||"NODE",I=u.CAPABILITIES||u.capabilities||u.schemas||{};N==="BRIDGE"&&(N="VAULT"),(u.mimeType==="application/vnd.indra.notion-db"||u.mimeType==="application/vnd.google-apps.spreadsheet"||((n=u.mimeType)==null?void 0:n.includes("sheet"))||u.type==="DATABASE"||N==="DATABASE")&&(N="DATABASE",I={...I,rows:{io:"OUTPUT",type:"JSON",human_label:"Data Rows "},query:{io:"INPUT",type:"QUERY",human_label:"Query Filter "}});const R={id:u.id||`temp_node_${Date.now()}_${Math.random().toString(36).substr(2,4)}`,schemaId:v||((u==null?void 0:u.type)==="DIRECTORY"?"FOLDER_NODE":"FILE_NODE"),LABEL:w,DOMAIN:O,ARCHETYPE:N,x:A.x,y:A.y,data:u||{},CAPABILITIES:I,_isDirty:!0};return{...e,phenotype:{...e.phenotype,artifacts:[...e.phenotype.artifacts||[],R]}}}case"COSMOS_MOUNTED":{const u=((s=t.payload)==null?void 0:s.flow_state)||{},p={...t.payload,id:t.payload.id||t.payload.cosmos_id||t.payload.ID},v={},y={};let b=[];return Object.entries(u).forEach(([A,w])=>{var N;const O=Array.isArray(w)?w:(w==null?void 0:w.items)||(w==null?void 0:w.vault_tree)||[];v[A]=O,y[A]={hydrationLevel:((N=t.payload)==null?void 0:N._SIGNAL)==="PATIENCE_TOKEN"?20:100,status:"SYNCED",total:O.length,source:"CACHE"},(!b.length||A==="drive"||A==="root")&&(b=O)}),{...e,sovereignty:{...e.sovereignty,status:"ACTIVE"},phenotype:{...e.phenotype,cosmosIdentity:p,activeLayout:p,focusStack:p?[p]:[],isDeepHydrating:((a=t.payload)==null?void 0:a._SIGNAL)==="PATIENCE_TOKEN",ui:{...e.phenotype.ui,currentLayer:null},silos:{...e.phenotype.silos,...v},vault:b,siloMetadata:{...e.phenotype.siloMetadata,...y},artifacts:((i=t.payload)==null?void 0:i.artifacts)||[],relationships:((l=t.payload)==null?void 0:l.relationships)||[]}}}case"ADD_RELATIONSHIP":{const{source:u,target:p,sourcePort:v,targetPort:y}=t.payload;if((e.phenotype.relationships||[]).some(N=>N.source===u&&N.target===p&&N.sourcePort===v&&N.targetPort===y))return e;const A=e.phenotype.artifacts.find(N=>N.id===u),w=e.phenotype.artifacts.find(N=>N.id===p);if(!Cr.validateRelationship(A,w,t.payload))return e;const O={id:`temp_rel_${Date.now()}_${Math.random().toString(36).substr(2,4)}`,source:u,target:p,sourcePort:v,targetPort:y,created_at:new Date().toISOString(),_isDirty:!0};return{...e,phenotype:{...e.phenotype,relationships:[...e.phenotype.relationships||[],O],ui:{...e.phenotype.ui,pendingConnection:null},_relationshipsDirty:!0}}}case"VAULT_LOADING":{const u=(d=(c=t.payload)==null?void 0:c.nodeId)==null?void 0:d.toLowerCase();return{...e,phenotype:{...e.phenotype,siloMetadata:{...e.phenotype.siloMetadata,[u]:{...e.phenotype.siloMetadata[u],hydrationLevel:5,status:"SCANNING"}}}}}case"HYDRATION_LOADING":return e;case"VAULT_ITEM_DELETED":{const u=(t.payload.nodeId||"drive").toLowerCase(),p=e.phenotype.silos[u]||[],v=t.payload.itemId,y=Date.now(),b=(((m=(h=window.useAxiomaticState)==null?void 0:h.getState)==null?void 0:m.call(h))||{session:{revisionCycle:0}}).session.revisionCycle,A=e.phenotype.artifacts.map(I=>{var M;return((M=I.data)==null?void 0:M.id)===v?{...I,_isDeleted:!0,_isDirty:!0,_tombstoneAt:y,_deathCycle:b}:I}),w=A.filter(I=>{var M;return I._isDeleted&&((M=I.data)==null?void 0:M.id)===v}).map(I=>I.id),O=e.phenotype.relationships.map(I=>w.includes(I.source)||w.includes(I.target)?{...I,_isDeleted:!0,_isDirty:!0,_tombstoneAt:y,_deathCycle:b}:I),N=O!==e.phenotype.relationships;return{...e,phenotype:{...e.phenotype,vault:e.phenotype.vault.filter(I=>I.id!==v),silos:{...e.phenotype.silos,[u]:Array.isArray(p)?p.filter(I=>I.id!==v):p},artifacts:A,relationships:O,_relationshipsDirty:e.phenotype._relationshipsDirty||N}}}case"VAULT_ITEM_RENAMED":{const u=(t.payload.nodeId||"drive").toLowerCase(),p=e.phenotype.silos[u]||[];return{...e,phenotype:{...e.phenotype,vault:e.phenotype.vault.map(v=>v.id===t.payload.itemId?{...v,name:t.payload.newName}:v),silos:{...e.phenotype.silos,[u]:Array.isArray(p)?p.map(v=>v.id===t.payload.itemId?{...v,name:t.payload.newName}:v):p},artifacts:e.phenotype.artifacts.map(v=>{var y;return((y=v.data)==null?void 0:y.id)===t.payload.itemId?{...v,LABEL:t.payload.newName,_isDirty:!0}:v})}}}case"VAULT_ITEM_MOVED":{const u=(t.payload.nodeId||"drive").toLowerCase(),p=e.phenotype.silos[u]||[];return{...e,phenotype:{...e.phenotype,vault:e.phenotype.vault.filter(v=>v.id!==t.payload.itemId),silos:{...e.phenotype.silos,[u]:Array.isArray(p)?p.filter(v=>v.id!==t.payload.itemId):p}}}}case"HYDRATE_FROM_PERSISTENCE":{if(((x=e.phenotype.cosmosIdentity)==null?void 0:x.id)!==t.payload.cosmosId)return e;const u=t.payload.hydratedData||{},p=u.silos||{};let v=e.phenotype.vault;return p.drive?v=Array.isArray(p.drive)?p.drive:p.drive.items||p.drive.vault_tree||[]:p.root&&(v=Array.isArray(p.root)?p.root:p.root.items||p.root.vault_tree||[]),{...e,phenotype:{...e.phenotype,...u,vault:v,silos:{...e.phenotype.silos,...p},siloMetadata:{...e.phenotype.siloMetadata,...u.siloMetadata}}}}case"CLEAR_COSMOS_SESSION":return{...e,phenotype:{...e.phenotype,cosmosIdentity:null,activeLayout:null,activeFlow:null,artifacts:[],relationships:[],focusStack:[],ui:{...e.phenotype.ui,currentLayer:e.phenotype.ui.currentLayer==="DEV_LAB"?"DEV_LAB":"SELECTOR"}}};case"SET_PENDING_CONNECTION":return{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,pendingConnection:t.payload}}};case"PURGE_LOGICAL_DELETION":{const u=(E=t.payload)==null?void 0:E.ids;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.filter(p=>u?!(u.includes(p.id)&&p._isDeleted):!p._isDeleted),relationships:e.phenotype.relationships.filter(p=>u?!(u.includes(p.id)&&p._isDeleted):!p._isDeleted)}}}case"CLEAR_PENDING_CONNECTION":return{...e,phenotype:{...e.phenotype,ui:{...e.phenotype.ui,pendingConnection:null}}};case"PULSE_START":return{...e,phenotype:{...e.phenotype,activePulses:[...e.phenotype.activePulses,t.payload]}};case"PULSE_END":return{...e,phenotype:{...e.phenotype,activePulses:e.phenotype.activePulses.filter(u=>u!==t.payload)}};case"PURGE_TOMBSTONES":{const u=(((S=(g=window.useAxiomaticState)==null?void 0:g.getState)==null?void 0:S.call(g))||{session:{revisionCycle:0}}).session.revisionCycle,p=v=>v._isDeleted?u-(v._deathCycle||0)<2:!0;return{...e,phenotype:{...e.phenotype,artifacts:e.phenotype.artifacts.filter(p),relationships:e.phenotype.relationships.filter(p)}}}case"UPDATE_COSMOS_REGISTRY":return{...e,phenotype:{...e.phenotype,availableCosmos:t.payload||[],discoveryStatus:"READY"}};case"SET_DISCOVERY_STATUS":return{...e,phenotype:{...e.phenotype,discoveryStatus:t.payload}};case"REMOVE_ARTIFACT":{const u=t.payload.id,p=Date.now(),v=(((f=(_=window.useAxiomaticState)==null?void 0:_.getState)==null?void 0:f.call(_))||{session:{revisionCycle:0}}).session.revisionCycle,y=e.phenotype.artifacts.map(A=>String(A.id).toLowerCase()===String(u).toLowerCase()?{...A,_isDeleted:!0,_isDirty:!0,_tombstoneAt:p,_deathCycle:v}:A),b=e.phenotype.relationships.map(A=>{const w=String(A.source).toLowerCase()===String(u).toLowerCase(),O=String(A.target).toLowerCase()===String(u).toLowerCase();return w||O?{...A,_isDeleted:!0,_isDirty:!0,_tombstoneAt:p,_deathCycle:v}:A});return{...e,phenotype:{...e.phenotype,artifacts:y,relationships:b,_relationshipsDirty:!0}}}default:return e}},Jh={NEVER_PERSISTED:["_isDirty","_simulated","_tombstoned","_liveData","_cache","_fetching","_error","_lastFetched","_adapterState","_uiState","_virtualData"]};function Zh(e){if(!e||typeof e!="object")return console.warn("[DataConventions] Invalid artifact for cleaning:",e),e;const t={...e};return Jh.NEVER_PERSISTED.forEach(r=>{delete t[r]}),e.type,t}function em(e){return Array.isArray(e)?e.map(t=>{const r={...t};return delete r._isDirty,delete r._simulated,delete r._tombstoned,delete r._uiState,r}):[]}const nc=bi((e,t)=>({lastSnapshotTime:null,snapshotCount:0,prepareSnapshot:()=>{var c,d,h;const r=(d=(c=window.AxiomaticStore)==null?void 0:c.getState)==null?void 0:d.call(c);if(!r||!((h=r.phenotype)!=null&&h.cosmosIdentity))return null;const n=r.phenotype.cosmosIdentity.id,s=F.getState(),a=(r.phenotype.artifacts||[]).map(m=>Zh(m)),i=em(r.phenotype.relationships||[]),l={cosmosId:n,artifacts:a,relationships:i,activeLayout:r.phenotype.activeLayout,activeFlow:r.phenotype.activeFlow,devLab:r.phenotype.devLab,_timestamp:Date.now(),_revisionHash:s.session.currentRevisionHash};return e({lastSnapshotTime:Date.now(),snapshotCount:t().snapshotCount+1}),l},getStats:()=>({lastSnapshotTime:t().lastSnapshotTime,snapshotCount:t().snapshotCount,timeSinceLastSnapshot:t().lastSnapshotTime?Date.now()-t().lastSnapshotTime:null})})),tm={sovereignty:{...jo.sovereignty,status:ae.sovereigntyStatus||"UNKNOWN",mode:localStorage.getItem("INDRA_MODE")||(window.location.href.includes("mode=lab")?"LAB":"LIVE"),genesisTime:Date.now()},genotype:null,phenotype:{...Xh.phenotype,devLab:jo.devLab,ui:jo.ui,logs:[],availableCosmos:[],discoveryStatus:"IDLE",currentRevisionHash:null}},rm=(e,t)=>{if(t.type==="LOG_ENTRY")return{...e,phenotype:{...e.phenotype,logs:[t.payload,...e.phenotype.logs].slice(0,50)}};if(t.type==="NUCLEAR_PURGE")return localStorage.removeItem("INDRA_GENOTYPE_L0"),localStorage.removeItem("INDRA_PERSISTENCE_CACHE"),window.location.reload(),e;if(t.type==="IGNITE_SYSTEM")return{...e,sovereignty:{...e.sovereignty,status:t.payload.sovereignty,portalOpen:!0},genotype:t.payload.genotype||e.genotype,phenotype:{...e.phenotype,logs:[{time:new Date().toLocaleTimeString(),msg:` SYSTEM IGNITION: ${t.payload.sovereignty}`,type:"SUCCESS"},...e.phenotype.logs].slice(0,50)}};let r=e;return r=Qh(r,t),r=qh(r,t),r},nm=({children:e})=>{const[t,r]=T.useReducer(rm,tm),n=ve.useRef(new yd);T.useEffect(()=>{F.getState().igniteHash(),Cr.setDispatcher(r),rc.setDispatcher(r),window.ISK_KERNEL=n.current;const l=F.subscribe(d=>{d.session.status==="TERMINATED"&&r({type:"CLEAR_COSMOS_SESSION"})}),c=d=>{var m,x,E,g,S;const h=nc.getState();if(h&&typeof h.prepareSnapshot=="function"){const _=h.prepareSnapshot();if(_&&(((m=_.artifacts)==null?void 0:m.length)>0||((x=_.relationships)==null?void 0:x.length)>0)){const f=(g=(E=window.AxiomaticStore)==null?void 0:E.getState)==null?void 0:g.call(E);(((S=f==null?void 0:f.phenotype)==null?void 0:S.artifacts)||[]).some(v=>v._isDirty)&&(d.preventDefault(),d.returnValue="")}}};return window.addEventListener("beforeunload",c),()=>{l(),window.removeEventListener("beforeunload",c)}},[]),T.useEffect(()=>{window.AxiomaticStore={getState:()=>t,dispatch:r,kernel:n.current},window.useSyncOrchestrator=nc},[t]);const s=async(l,c)=>{var d,h,m,x,E,g,S,_,f,u,p,v;if(console.error(`[EXECUTE]  ${l}`,{payload:c,thread:"AXIOM_MAIN"}),l==="IGNITE_SYSTEM"&&Io.igniteReflexes(r),l==="CLEAR_COSMOS_SESSION"&&(localStorage.removeItem("LAST_ACTIVE_COSMOS_ID"),cn.clearCache()),l==="MOUNT_COSMOS"){const y=c.cosmosId;F.getState().setLoading(!0),r({type:"VAULT_LOADING"});let b=!1;const A=w=>{b||(b=!0,F.getState().setLoading(!1),cn.triggerBackgroundHydration(w==null?void 0:w.activeLayout,ae))};try{const w=await et.getItem(`COSMOS_STATE_${y}`);w&&(console.info("%c  [Axiom:Store] Local-First: Instant mount from L2 Repository.","color: #10b981; font-weight: bold;"),r({type:"COSMOS_MOUNTED",payload:w}),F.getState().setSessionAuthorized(y),A(w))}catch(w){console.warn("[Axiom:Store] L2 Read failed:",w)}try{const w=await Io.mountCosmos(y),O=w.result||w,N=Array.isArray(O)?O[0]:O;if(!N)throw new Error("Cosmos Data is empty or corrupted.");const I=N.id||N.cosmos_id||N.ID,M=await et.getItem(`COSMOS_STATE_${I}`);if(!M||N._revisionHash!==M._revisionHash){console.info("%c  [Axiom:Store] Cloud Consensus: Updating reality to latest server revision.","color: #38bdf8;"),r({type:"COSMOS_MOUNTED",payload:N});const R=w.revision_hash||(N==null?void 0:N.revision_hash)||w._revisionHash;R&&F.getState().updateRevisionHash(R),await et.setItem(`COSMOS_STATE_${I}`,N),A(N)}F.getState().setSessionAuthorized(I),localStorage.setItem("LAST_ACTIVE_COSMOS_ID",I),b||A(N),r({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Cosmos '${(N==null?void 0:N.label)||(N==null?void 0:N.LABEL)||"unnamed"}' sincronizado`,type:"SUCCESS"}})}catch(w){console.warn("[Store:Mount] Background Sync failed, relying on Local-First sovereignty.",w),b||(F.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Error al montar: ${w.message}`,type:"ERROR"}}))}return}if(l==="SELECT_ARTIFACT"){let y=c;if(typeof y=="string"){const b=X.getCanon(y)||((d=t.phenotype.artifacts)==null?void 0:d.find(A=>A.id===y));if(!b){console.error(`[Axiom:Store] FATAL: Cannot resolve identity for: ${y}`);return}y=b}if((y==null?void 0:y.schemaId)==="COSMOS_NODE"||(y==null?void 0:y.ARCHETYPE)==="COSMOS"){s("MOUNT_COSMOS",{cosmosId:((h=y.data)==null?void 0:h.id)||y.id});return}if(r({type:"SELECT_ARTIFACT",payload:y}),(y==null?void 0:y.schemaId)==="FOLDER_NODE"||((m=y==null?void 0:y.data)==null?void 0:m.type)==="DIRECTORY"){const b=((x=y.data)==null?void 0:x.id)||y.id,A=(((E=y.data)==null?void 0:E.ORIGIN_SOURCE)||y.ORIGIN_SOURCE||"drive").toLowerCase();s("FETCH_VAULT_CONTENT",{folderId:b,nodeId:A})}return}if(l==="EXIT_FOCUS"){r({type:"SELECT_ARTIFACT",payload:null});return}if(l==="EXECUTE_NODE_ACTION"){const{nodeId:y,capability:b,payload:A,_ttl:w,_visited:O}=c,N=(g=t.phenotype.artifacts)==null?void 0:g.find(I=>I.id===y);if(!N)return;r({type:"LOG_ENTRY",payload:{time:new Date().toLocaleTimeString(),msg:` Triggering ${N.LABEL} -> ${b}`,type:"INFO"}});try{const I=await ae.executeAction(`${((S=N.data)==null?void 0:S.id)||N.id}:${b}`,A);rc.propagate({state:t,execute:s},y,I,w!==void 0?w:10,O||new Set)}catch(I){r({type:"LOG_ENTRY",payload:{msg:` Flow Error: ${I.message}`,type:"ERROR"}})}return}if(l==="FETCH_VAULT_CONTENT"){const{folderId:y,query:b,accountId:A,nodeId:w,refresh:O}=c;let N=(w||"drive").toLowerCase();N==="vault_global"&&(N="drive");const I=y||"ROOT";F.getState().setLoading(!0),r({type:"VAULT_LOADING",payload:{nodeId:N,folderId:I}});try{const M=await cn.fetchContent(N,{folderId:I,query:b,accountId:A,forceRefresh:O},ae);F.getState().setLoading(!1),r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:N,data:M}})}catch(M){F.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`[IO:${N.toUpperCase()}] Error: ${M.message}`,type:"ERROR"}})}return}if(l==="START_DISCOVERY"){r({type:"SET_DISCOVERY_STATUS",payload:"SCANNING"});try{const y=await Io.listAvailableCosmos(!0);r({type:"UPDATE_COSMOS_REGISTRY",payload:y.artifacts||[]})}catch(y){r({type:"LOG_ENTRY",payload:{msg:`Discovery Failed: ${y.message}`,type:"ERROR"}}),r({type:"UPDATE_COSMOS_REGISTRY",payload:[]})}return}if(l==="FETCH_DATABASE_CONTENT"){const{databaseId:y,nodeId:b,refresh:A,accountId:w}=c;if(!b){console.error(`[AxiomaticStore]  FETCH_DATABASE_CONTENT called without nodeId for database: ${y}`),r({type:"LOG_ENTRY",payload:{msg:`Cannot fetch database ${y}: origin source (nodeId) is missing`,type:"ERROR"}});return}const O=b.toLowerCase();F.getState().setLoading(!0);try{let N;if(O==="drive")N=await ae.executeAction("sheet:read",{sheetId:y,accountId:w});else if(O==="notion")N=await ae.executeAction("notion:query_db",{databaseId:y,accountId:w});else throw new Error(`Unsupported database origin: ${O}`);const I=Array.isArray(N)?N:(N==null?void 0:N.results)||(N==null?void 0:N.items)||[],M=(N==null?void 0:N.SCHEMA)||null;r({type:"VAULT_LOAD_SUCCESS",payload:{nodeId:y,data:typeof N=="object"&&!Array.isArray(N)?{...N,items:I,SCHEMA:M}:{items:I,SCHEMA:M}}}),F.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:` Data reified: ${I.length} records retrieved.`,type:"SUCCESS"}})}catch(N){F.getState().setLoading(!1),r({type:"LOG_ENTRY",payload:{msg:`[DB:${O.toUpperCase()}] Failure: ${N.message}`,type:"ERROR"}})}return}if(l==="INTEGRATE_SMART_NODE"){const{baseNode:y,config:b,schemaId:A}=c;console.log(`[Store]  Integrating Smart Node: ${y.name} using schema ${A}`);const w={id:`smart_${y.id}`,LABEL:((_=b.base_info)==null?void 0:_.label)||y.name,MATH_CAPABILITIES:{constructs:{EstimationLogic:{syntax:`PRICE = ${((f=b.pricing_logic)==null?void 0:f.base_rate)||0} * ${((u=b.pricing_logic)==null?void 0:u.complexity_factor)||1} ${(p=b.pricing_logic)!=null&&p.enable_urgency?"+ URGENCY_FEE":""}`}}}};r({type:"LOG_ENTRY",payload:{msg:`Indra Node Reified: ${w.LABEL}. Semantic bridge active.`,type:"SUCCESS"}});return}if(l==="BIND_TO_COSMOS"){const{artifact:y}=c,b=(v=t.phenotype.cosmosIdentity)==null?void 0:v.id;if(!b){r({type:"LOG_ENTRY",payload:{msg:"Debe haber un Cosmos activo para entrelazar artefactos.",type:"ERROR"}});return}r({type:"LOG_ENTRY",payload:{msg:`Entrelazando ${y.name}...`,type:"INFO"}});try{const A=await ae.call("system","bindArtifactToCosmos",{cosmosId:b,artifactId:y.id,metadata:{name:y.name,type:y.type,origin:y.origin||"VAULT"}});A!=null&&A.success&&(r({type:"LOG_ENTRY",payload:{msg:`Vnculo atmico establecido para ${y.name}`,type:"SUCCESS"}}),s("ADD_ARTIFACT_REQUEST",{artifact:{...y,LABEL:y.name,DOMAIN:"VAULT_BOND"}}))}catch(A){r({type:"LOG_ENTRY",payload:{msg:`Fallo de Entrelazamiento: ${A.message}`,type:"ERROR"}}),console.warn("[Store:Bind] Backend failed, manifesting locally only."),s("ADD_ARTIFACT_REQUEST",{artifact:y}),s("TOGGLE_UI_PANEL",{panel:"vault"})}return}r({type:l,payload:c}),setTimeout(()=>{window.ISK_KERNEL&&window.ISK_KERNEL.update({...t,_lastAction:{type:l,payload:c}})},0)},a=F(l=>l.session.hashInitialized),i=F(l=>l.session.isLoading);return T.useEffect(()=>{if(!a)return;const l=localStorage.getItem("LAST_ACTIVE_COSMOS_ID");l&&!t.phenotype.cosmosIdentity&&!i&&s("MOUNT_COSMOS",{cosmosId:l})},[a,i]),T.useEffect(()=>{var m,x,E,g,S,_,f;const l=(m=t.phenotype.cosmosIdentity)==null?void 0:m.id;if(localStorage.setItem("INDRA_ANCHOR_LAYER",t.phenotype.ui.currentLayer||""),((x=t.phenotype.focusStack)==null?void 0:x.length)>0?localStorage.setItem("INDRA_FOCUS_STACK",JSON.stringify(t.phenotype.focusStack.map(u=>u.id))):localStorage.removeItem("INDRA_FOCUS_STACK"),l&&!l.toString().startsWith("temp_")&&localStorage.setItem("LAST_ACTIVE_COSMOS_ID",l),!(((E=t.phenotype.cosmosIdentity)==null?void 0:E.id)||((g=t.phenotype.cosmosIdentity)==null?void 0:g.cosmos_id)))return;const d=(((S=t.phenotype.artifacts)==null?void 0:S.length)||0)+(((_=t.phenotype.relationships)==null?void 0:_.length)||0),h=window._INDRA_LAST_STRUCT_COUNT||0;if(((f=t.session)==null?void 0:f.status)!=="HALTED"){const u={...t.phenotype.cosmosIdentity,artifacts:t.phenotype.artifacts,relationships:t.phenotype.relationships,silos:t.phenotype.silos,siloMetadata:t.phenotype.siloMetadata,activeLayout:t.phenotype.activeLayout,activeFlow:t.phenotype.activeFlow,_revisionHash:F.getState().session.currentRevisionHash,_localTimestamp:Date.now()};et.setItem(`COSMOS_STATE_${l}`,u),d!==h&&(window._INDRA_LAST_STRUCT_COUNT=d,console.info("%c  [Axiom:L2] Reality reified in local storage.","color: #38bdf8;"))}},[t.phenotype.cosmosIdentity,t.phenotype.artifacts,t.phenotype.relationships,t.phenotype.activeLayout,t.phenotype.activeFlow,t.phenotype.devLab]),T.useEffect(()=>F.subscribe(c=>c.session.isLoading,(c,d)=>{d===!0&&c===!1&&console.log("%c[Axiom:Guardian] Reality stabilized.","color: #00ffcc; font-weight: bold;")}),[t]),o.jsx(Ai.Provider,{value:{state:t,dispatch:r,execute:s},children:e})},q=()=>{const e=T.useContext(Ai);if(!e)throw new Error("useAxiomaticStore must be used within an AxiomaticProvider.");return e};class sm{constructor(){this.status="GENESIS",this.coherenceIndex=0}async assemble(){console.log(" [Assembler] Iniciando secuencia de ignicin soberana..."),this.status="STANDBY";try{const t=await ae.ignite();console.warn("[ATOMIC 5] Ignite returned to Assembler"),t.genotype&&t.genotype.COMPONENT_REGISTRY&&(console.warn("[ATOMIC 6] Injecting Ontology (Assembler side)..."),X.setOntology(t.genotype.COMPONENT_REGISTRY,t.genotype)),t.sovereignty==="LOCKED"||t.status,t.success||console.warn(" [Assembler] Handshake impuro detectado."),console.warn("[ATOMIC 7] Start Compilation..."),X.compile(),console.warn("[ATOMIC 8] Compilation Finished"),this._registerCoreModules(),console.warn("[ATOMIC 9] Core Modules Registered");const r=await this.verifyUniversalIntegrity();return console.warn("[ATOMIC 10] Integrity Checked"),console.log(" [Assembler] Phase 4: Activating Homeostasis Cycles..."),r.isCoherent?(this.status="ACTIVE",this.coherenceIndex=r.score):(this.status="DEGRADED",console.warn(" [Assembler] El sistema no es totalmente coherente:",r.errors)),console.log(` [Assembler] Sistema ensamblado. Estado: ${this.status} (Coherence: ${this.coherenceIndex}%)`),{success:!0,status:this.status,coherence:this.coherenceIndex,genotype:t.genotype,error:r.isCoherent?null:r.errors.join(", ")}}catch(t){return this.status="LOCKED",console.error(" [Assembler] Fallo crtico durante el ensamblaje. Forzando modo bloqueo:",t),{success:!0,status:"LOCKED",error:t.message||"Error desconocido"}}}async verifyUniversalIntegrity(){if(!ae.isIgnited||!ae.L0)return{isCoherent:!1,score:0,errors:["Genotipo L0 no hidratado"]};const t=[],r=X.getRenderManifest();ae.L0,console.log(" [Assembler] Iniciando Auditora de Coherencia..."),r.length===0&&t.push("ONTOLOGA VACA: No hay contratos para proyectar."),r.forEach(a=>{(!a.artefacts||a.artefacts.length===0)&&console.warn(`[Assembler] Host ${a.omd} inicializado sin artefactos activos.`),(!a.slot||a.slot==="UNDEFINED")&&t.push(`FRACTURA ANATMICA: El mdulo ${a.omd} no tiene un Slot asignado.`),a.functional_name==="UNIT_SKELETON"&&a.omd!=="OMD-00"&&console.warn(`[Assembler] Identidad Genrica detectada en ${a.omd}. Falta label en Core?`)});const n=Math.max(0,100-t.length*5),s=t.length===0;return s||console.error(" [Assembler] Auditora Fallida:",t),{isCoherent:s,score:n,errors:t}}_registerCoreModules(){const t=X.getModulesByLevel(3);console.log(` [Assembler] Backbone de Soberana registrado: ${t.length} mdulos.`)}getStatus(){return this.status}}const om=new sm,Y=({children:e,size:t=16,color:r="currentColor",className:n=""})=>o.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`inline-block transition-all duration-300 ${n}`,children:e}),L={System:e=>o.jsxs(Y,{...e,children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("path",{d:"M12 8v8M8 12h8"})]}),Lock:e=>o.jsxs(Y,{...e,children:[o.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),o.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),Cosmos:e=>o.jsxs(Y,{...e,children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M12 2v2M12 20v2M2 12h2M20 12h2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12c0-5.52 4.48-10 10-10s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12z"})]}),Desktop:e=>o.jsxs(Y,{...e,children:[o.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2"}),o.jsx("path",{d:"M8 21h8M12 17v4"})]}),Lab:e=>o.jsx(Y,{...e,children:o.jsx("path",{d:"M9 3h6M10 3v13a4 4 0 1 0 4 0V3M8.5 10h7"})}),Sync:e=>o.jsx(Y,{...e,children:o.jsx("path",{d:"M1 4v6h6M23 20v-6h-6M20.49 9A9 9 0 0 0 5.64 5.64L1 10M3.51 15a9 9 0 0 0 14.85 3.36L23 14"})}),Sun:e=>o.jsxs(Y,{...e,children:[o.jsx("circle",{cx:"12",cy:"12",r:"5"}),o.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),Moon:e=>o.jsx(Y,{...e,children:o.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Terminal:e=>o.jsxs(Y,{...e,children:[o.jsx("polyline",{points:"4 17 10 11 4 5"}),o.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),List:e=>o.jsxs(Y,{...e,children:[o.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),o.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),o.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),o.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),o.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),o.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),Clock:e=>o.jsxs(Y,{...e,children:[o.jsx("circle",{cx:"12",cy:"12",r:"10"}),o.jsx("polyline",{points:"12 6 12 12 16 14"})]}),ChevronDown:e=>o.jsx(Y,{...e,children:o.jsx("polyline",{points:"6 9 12 15 18 9"})}),Plus:e=>o.jsxs(Y,{...e,children:[o.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),o.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Eye:e=>o.jsxs(Y,{...e,children:[o.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),o.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),SidebarLeft:e=>o.jsxs(Y,{...e,children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),SidebarRight:e=>o.jsxs(Y,{...e,children:[o.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),o.jsx("line",{x1:"15",y1:"3",x2:"15",y2:"21"})]}),Search:e=>o.jsxs(Y,{...e,children:[o.jsx("circle",{cx:"11",cy:"11",r:"8"}),o.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Filter:e=>o.jsx(Y,{...e,children:o.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),Close:e=>o.jsxs(Y,{...e,children:[o.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),ChevronRight:e=>o.jsx(Y,{...e,children:o.jsx("polyline",{points:"9 18 15 12 9 6"})}),Activity:e=>o.jsx(Y,{...e,children:o.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),Trash:e=>o.jsxs(Y,{...e,children:[o.jsx("polyline",{points:"3 6 5 6 21 6"}),o.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Sovereign:e=>o.jsxs(Y,{...e,children:[o.jsx("path",{d:"M12 2L3 7v9c0 5 9 6 9 6s9-1 9-6V7l-9-5z"}),o.jsx("path",{d:"M12 22V12"}),o.jsx("path",{d:"M12 12l-5 3"}),o.jsx("path",{d:"M12 12l5 3"}),o.jsx("path",{d:"M12 7l-5 3"}),o.jsx("path",{d:"M12 7l5 3"}),o.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),Database:e=>o.jsxs(Y,{...e,children:[o.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),o.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),o.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),Vault:e=>o.jsx(Y,{...e,children:o.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),Download:e=>o.jsxs(Y,{...e,children:[o.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),o.jsx("polyline",{points:"7 10 12 15 17 10"}),o.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Inbox:e=>o.jsxs(Y,{...e,children:[o.jsx("polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12"}),o.jsx("path",{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"})]}),Transform:e=>o.jsxs(Y,{...e,children:[o.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v10a4 4 0 0 0 4 4h6"}),o.jsx("path",{d:"M2 11h20"}),o.jsx("path",{d:"M7 6l-5 5 5 5"}),o.jsx("path",{d:"M17 16l5-5-5-5"})]}),Settings:e=>o.jsxs(Y,{...e,children:[o.jsx("circle",{cx:"12",cy:"12",r:"3"}),o.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})},am=({title:e,domain:t,data:r,inspectorPanel:n,children:s,slotId:a})=>{var d;const[i,l]=T.useState(!1),c=a==null?void 0:a.includes("SIDEBAR");return o.jsxs("div",{className:`w-full h-full flex overflow-hidden relative bg-[var(--bg-deep)] ${c?"flex-col":"flex-row"}`,children:[o.jsxs("main",{className:"flex-1 h-full relative overflow-hidden flex flex-col min-w-0",children:[o.jsxs("header",{className:"h-14 border-b border-white/5 flex items-center justify-between px-6 bg-black/20 backdrop-blur-md z-10 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] shadow-[0_0_8px_var(--accent)] animate-pulse"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h2",{className:"text-[10px] font-black tracking-[0.2em] text-white uppercase truncate max-w-[150px]",children:e}),o.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:t})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:()=>l(!i),className:`p-1.5 rounded-lg transition-all ${i?"bg-[var(--accent)] text-black":"text-white/40 hover:bg-white/5"}`,title:"Toggle Inspector",children:o.jsx(L.SidebarRight,{size:14})})})]}),o.jsx("div",{className:"flex-1 overflow-hidden relative",children:s})]}),o.jsx("aside",{className:`
                    border-white/10 bg-black/60 backdrop-blur-3xl transition-all duration-500 ease-out flex flex-col overflow-hidden
                    ${c?i?"h-1/2 w-full border-t":"h-0 w-full border-t-0":i?"w-[320px] h-full border-l":"w-0 h-full border-l-0"}
                `,style:{zIndex:30},children:o.jsxs("div",{className:`${c?"w-full":"w-[320px]"} h-full flex flex-col`,children:[o.jsxs("header",{className:"h-12 border-b border-white/5 flex items-center px-6 shrink-0 justify-between",children:[o.jsx("span",{className:"text-[8px] font-black tracking-[0.3em] text-[var(--accent)] uppercase opacity-60",children:"Intelligence_Unit"}),c&&o.jsx("button",{onClick:()=>l(!1),className:"text-[var(--text-dim)] hover:text-white",children:o.jsx(L.Close,{size:12})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-5",children:n}),!c&&o.jsx("footer",{className:"p-4 border-t border-white/5 bg-black/20",children:o.jsx("div",{className:"flex flex-col gap-2",children:o.jsxs("div",{className:"flex justify-between items-center text-[7px] font-mono text-[var(--text-dim)] uppercase",children:[o.jsx("span",{children:"Artifact_ID:"}),o.jsxs("span",{className:"text-[var(--accent)]",children:[(d=r==null?void 0:r.id)==null?void 0:d.slice(0,8),"..."]})]})})})]})}),o.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] mix-blend-overlay",style:{backgroundImage:'url("https://www.transparenttextures.com/patterns/carbon-fibre.png")'}})]})},_i=e=>{var i,l,c;const{state:t}=q(),r=F(d=>d.session.isLoading),n=((i=t.phenotype.siloMetadata)==null?void 0:i[e])||{hydrationLevel:0,status:"IDLE",total:0},s=((l=t.phenotype.silos)==null?void 0:l[e])||[];let a={label:"IDLE",color:"var(--text-dim)",progress:n.hydrationLevel,isHoneymoon:!1,pulse:!1};return r&&n.status==="SCANNING"?a={label:"RESONATING",color:"var(--accent)",progress:Math.max(n.hydrationLevel,10),pulse:!0}:s.length>0&&n.hydrationLevel>=100?a={label:"SYNCED",color:"var(--success)",progress:100,pulse:!1}:r&&(a={label:"HYDRATING",color:"var(--accent-bright)",progress:n.hydrationLevel,pulse:!0}),r&&((c=window.ISK_SIGNALS)==null?void 0:c.GLOBAL_RESONANCE)!==void 0&&(a.iskResonance=window.ISK_SIGNALS.GLOBAL_RESONANCE,a.opacity=.5+window.ISK_SIGNALS.GLOBAL_RESONANCE*.5),{...a,totalItems:s.length,metadata:n}},im=({nodeId:e,className:t=""})=>{const{progress:r,signifierColor:n,pulse:s,iskResonance:a,opacity:i}=_i(e);return o.jsx("div",{className:`h-1.5 w-full bg-[var(--bg-deep)] rounded-full overflow-hidden border border-[var(--border-subtle)]/30 ${t}`,children:o.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${r}%`,backgroundColor:n||"var(--accent)",opacity:i!==void 0?i:1,boxShadow:s||a?`0 0 ${10+(a||0)*15}px ${n}`:"none",filter:a?`brightness(${1+a*.5})`:"none"}})})},Ed=({schemaId:e,onCommit:t,onCancel:r,isLoading:n=!1,error:s=null})=>{const a=X.getArtifactSchema(e),[i,l]=T.useState({}),[c,d]=T.useState({});if(!a)return o.jsxs("div",{className:"p-6 text-[var(--error)] border border-[var(--error)]/20 rounded-xl bg-[var(--error)]/5 font-mono text-sm",children:["[PROJECTION_ERROR] Unknown Schema: ",e]});const h=(E,g)=>{l(S=>{const _={...S},f=E.split(".");let u=_;for(let p=0;p<f.length-1;p++)u[f[p]]||(u[f[p]]={}),u=u[f[p]];return u[f[f.length-1]]=g,_})},m=E=>{E.preventDefault(),t&&t(i)},x=(E,g,S)=>{var v,y;const _=S?`${S}.${E}`:E,f=S?((v=i[S])==null?void 0:v[E])||"":i[E]||"";if(g.type==="object"&&g.structure)return o.jsxs("div",{className:"mb-6 animate-in fade-in slide-in-from-top-2 duration-500",children:[o.jsxs("h4",{className:"text-[10px] uppercase tracking-[0.2em] text-[var(--accent)] font-black mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-[var(--accent)] rounded-full shadow-[0_0_8px_var(--accent)]"}),g.label||E]}),o.jsx("div",{className:"grid grid-cols-1 gap-4 pl-4 border-l border-[var(--border-subtle)]",children:Object.entries(g.structure).map(([b,A])=>x(b,A,_))})]},_);const u=Array.isArray(g.options)||Array.isArray(g.enum),p=g.options||(g.enum?g.enum.map(b=>({label:b,value:b})):[]);return o.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[o.jsxs("label",{className:"text-[10px] uppercase tracking-widest text-[var(--text-dim)] font-black flex justify-between",children:[o.jsx("span",{children:g.label||E}),((y=g.validation)==null?void 0:y.required)&&o.jsx("span",{className:"text-[var(--error)] font-mono text-[8px]",children:"* REQUIRED"})]}),u?o.jsxs("div",{className:"relative",children:[o.jsxs("select",{className:"w-full appearance-none bg-[var(--bg-deep)]/50 border border-[var(--border-subtle)] focus:border-[var(--accent)]/50 rounded-lg px-4 py-2.5 text-xs text-[var(--text-soft)] outline-none transition-all focus:shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)] cursor-pointer",value:f,onChange:b=>h(_,b.target.value),children:[o.jsx("option",{value:"",disabled:!0,children:"Selecciona una opcin..."}),p.map(b=>o.jsx("option",{value:b.value,children:b.label},b.value))]}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-[var(--text-dim)]",children:""})]}):o.jsx("input",{type:"text",className:"bg-[var(--bg-deep)]/50 border border-[var(--border-subtle)] focus:border-[var(--accent)]/50 rounded-lg px-4 py-2.5 text-xs text-[var(--text-soft)] placeholder:text-[var(--text-dim)]/30 outline-none transition-all focus:shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)]",placeholder:`Ingresa ${g.label||E}...`,value:f,onChange:b=>h(_,b.target.value)}),g.description&&o.jsx("span",{className:"text-[9px] text-[var(--text-dim)] leading-relaxed italic",children:g.description})]},_)};return o.jsxs("form",{onSubmit:m,className:"flex flex-col h-full overflow-hidden",children:[o.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 custom-scrollbar",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h2",{className:"text-xl font-bold text-[var(--text-vibrant)] tracking-tight mb-1",children:["Create New ",e.replace("_V1","")]}),o.jsx("p",{className:"text-xs text-[var(--text-dim)]",children:"Indra Axiomatic Projection Protocol v8.0"})]}),s&&o.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl animate-in shake duration-500",children:[o.jsx("p",{className:"text-[10px] text-red-500 font-bold uppercase tracking-widest mb-1 font-mono",children:" Veto Alert (Validation Fail)"}),o.jsx("p",{className:"text-[11px] text-red-400 opacity-80 italic",children:s})]}),Object.entries(a).map(([E,g])=>x(E,g))]}),o.jsxs("div",{className:"mt-8 flex gap-4 pt-6 border-t border-[var(--border-subtle)]",children:[o.jsx("button",{type:"button",onClick:r,className:"px-6 py-2.5 rounded-xl border border-[var(--border-subtle)] text-xs font-black uppercase tracking-widest text-[var(--text-dim)] hover:bg-[var(--bg-secondary)] hover:text-[var(--text-soft)] transition-all active:scale-[0.98]",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:n,className:`
                        flex-1 px-6 py-2.5 rounded-xl text-black text-xs font-black uppercase tracking-widest transition-all active:scale-[0.98] shadow-lg
                        ${n?"bg-[var(--accent)]/50 cursor-wait opacity-50":"bg-[var(--accent)] hover:brightness-125 shadow-[var(--accent)]/20"}
                    `,children:n?"Inyectando Realidad...":"Initialize Source"})]})]})},lm=(e=[],t={})=>{const{initialSort:r={key:"name",direction:"asc"},searchKeys:n=["name","LABEL","type","mimeType"]}=t,[s,a]=T.useState(""),[i,l]=T.useState(r),[c,d]=T.useState({}),h=_=>_?String(_).normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim():"",m=(_,f)=>{const u=h(_),p=h(f);if(u===p)return 1;if(u.startsWith(p))return .9;if(u.includes(p))return .7;if(p.length>3){let v=0,y=-1;for(let b of p){const A=u.indexOf(b,y+1);A>-1&&(v++,y=A)}if(v>=p.length-1)return .5}return 0},x=T.useMemo(()=>{if(!e)return[];let _=[...e];return Object.entries(c).forEach(([f,u])=>{u==null||u==="ALL"||(_=_.filter(p=>{const v=p[f];return typeof u=="function"?u(p):typeof u=="string"&&typeof v=="string"?h(v).includes(h(u)):v===u}))}),s&&!s.startsWith("/")&&(_=_.map(f=>{const u=n.map(v=>m(f[v],s)),p=Math.max(...u);return{...f,_prismScore:p}}).filter(f=>f._prismScore>0).sort((f,u)=>u._prismScore-f._prismScore)),i.key&&(!s||s.startsWith("/"))&&_.sort((f,u)=>{const p=f[i.key],v=u[i.key];return p<v?i.direction==="asc"?-1:1:p>v?i.direction==="asc"?1:-1:0}),_},[e,s,i,c,n]),E=T.useCallback((_,f)=>{d(u=>u[_]===f?u:{...u,[_]:f})},[]),g=T.useCallback(()=>d({}),[]),S=T.useCallback(_=>{l(f=>({key:_,direction:f.key===_&&f.direction==="asc"?"desc":"asc"}))},[]);return{data:x,searchTerm:s,setSearchTerm:a,activeFilters:c,setFilter:E,clearFilters:g,sortConfig:i,toggleSort:S,totalCount:e.length,filteredCount:x.length}},ps=({data:e={},perspective:t="VAULT",slotId:r})=>{var Li,Oi,ki;const{state:n,execute:s}=q(),a=F(C=>C.session.isLoading);n.sovereignty.mode;const i=[{id:"drive",label:"GDrive",icon:"Vault",color:"#4285F4"},{id:"notion",label:"Notion",icon:"List",color:"#000000"},{id:"local",label:"Local",icon:"Desktop",color:"#FF9800"},{id:"cosmos",label:"Cosmos",icon:"Cosmos",color:"#9C27B0"}],l=(e.id||"drive").toLowerCase(),[c,d]=T.useState(l),h=((Li=n.phenotype.cosmos)==null?void 0:Li.artifacts)||[],m=ve.useMemo(()=>new Set(Array.isArray(h)?h.map(C=>typeof C=="string"?C:C.id):[]),[h]),x=c.toLowerCase(),{label:E,progress:g,color:S,pulse:_}=_i(x),f=r==null?void 0:r.includes("SIDEBAR"),[u,p]=T.useState(""),[v,y]=T.useState("GRID"),[b,A]=T.useState([{id:"ROOT",name:"ROOT"}]),[w,O]=T.useState(!1),[N,I]=T.useState(null),[M,R]=T.useState(!1),[V,B]=T.useState(!1),[Q,ce]=T.useState(""),[k,z]=T.useState(""),[U,$]=T.useState({visible:!1,x:0,y:0,node:null}),[K,me]=T.useState(!1),[Ee,je]=T.useState("ISK_ADAPTER_v1.0"),[Se,Ve]=T.useState(!1),[Zs,wi]=T.useState([]),[Yt,Ti]=T.useState(null);T.useEffect(()=>{(async()=>{try{const D=await ae.executeAction("tokenManager:listTokenAccounts",{provider:x});if(Array.isArray(D)){wi(D);const ie=D.find(Qe=>Qe.isDefault);ie&&Ti(ie.id)}}catch(D){console.warn(`[VaultEngine] Discovery failed for ${x}:`,D),wi([])}})(),A([{id:"ROOT",name:"ROOT"}]),I(null),p("")},[x]);const At=c==="cosmos"?n.phenotype.artifacts||[]:((Oi=n.phenotype.silos)==null?void 0:Oi[x])||[],{data:Ci,setSearchTerm:Nd,setFilter:dt,activeFilters:pt}=lm(At,{searchKeys:["name","mimeType","type"]});T.useEffect(()=>{u.startsWith("/")||Nd(u)},[u]);const Ii=ve.useCallback(C=>m.has(C.id),[m]);if(T.useEffect(()=>{c==="cosmos"?dt("id",Ii):pt.id&&dt("id",void 0)},[c,Ii,dt,pt]),!x)return o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-10 bg-[var(--bg-deep)] border border-[var(--error)]/30 rounded-2xl animate-in zoom-in duration-300",children:[o.jsx("div",{className:"text-4xl mb-4",children:""}),o.jsx("h3",{className:"text-[var(--error)] font-bold text-lg mb-2 uppercase tracking-tighter",children:"Identity_Corrupted"}),o.jsx("p",{className:"text-[var(--text-dim)] text-xs text-center max-w-md font-mono mb-6",children:"Este motor de bveda no ha recibido un ID de nodo vlido desde el Core. El sistema no puede determinar qu silo de datos proyectar."}),o.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-[var(--border-subtle)] w-full max-w-md",children:[o.jsx("span",{className:"text-[9px] font-black text-[var(--accent)] uppercase block mb-2",children:"Protocolo de Reparacin:"}),o.jsxs("ul",{className:"text-[10px] text-[var(--text-soft)] space-y-2 list-disc pl-4",children:[o.jsxs("li",{children:["Verifica que el adaptador en ",o.jsx("code",{className:"text-[var(--accent)]",children:"SystemAssembler.gs"})," est decorado correctamente."]}),o.jsxs("li",{children:["Asegrate de que el campo ",o.jsx("code",{className:"text-[var(--accent)]",children:"id"})," est presente en el objeto ",o.jsx("code",{className:"text-[var(--accent)]",children:"CANON"}),"."]}),o.jsxs("li",{children:["Ejecuta ",o.jsx("code",{className:"text-[var(--accent)]",children:"clasp push"})," para sincronizar los cambios de identidad."]})]})]})]});const ji=ve.useRef(new Set);T.useEffect(()=>{(async()=>{if(c==="cosmos")return;const D="vault_tree_ROOT";if(cn.isCacheValid(x,D)){const ie=await cn.getCached(x,D);ie&&(!At||At.length===0)&&(st(` [Vault] Optimistic recall from L2 Repository: ${x}`,"SUCCESS"),s("VAULT_LOAD_SUCCESS",{nodeId:x,data:{items:ie,metadata:{hydrationLevel:100,source:"CACHE"}}}))}})()},[x,c]),T.useEffect(()=>{c!=="cosmos"&&(!At||At.length===0)&&!a&&!ji.current.has(x)&&(console.log(`[VaultEngine:${x}] Silo empty. Triggering Ignition Discovery...`),ji.current.add(x),s("FETCH_VAULT_CONTENT",{nodeId:x,folderId:"ROOT",accountId:Yt}))},[x,At.length,a,c]);const{LABEL:bd,DOMAIN:Gm}=e,st=(C,D="INFO")=>{s("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:C,type:D})},Ad=C=>{C.key==="Enter"&&(O(!0),st(`Iniciando Escaneo Neural para: "${u}"...`),u&&!u.startsWith("/")&&s("FETCH_VAULT_CONTENT",{nodeId:x,query:u}),setTimeout(()=>O(!1),800))},_d=(C,D)=>{C.stopPropagation(),I(D)},wd=(C,D)=>{var ie;C.stopPropagation(),D.type==="DIRECTORY"?(O(!0),st(`Deep Scan Initiated: ${D.name}...`,"INFO"),s("FETCH_VAULT_CONTENT",{nodeId:x,folderId:D.id,accountId:Yt}),A(Qe=>[...Qe,{id:D.id,name:D.name}]),setTimeout(()=>O(!1),500)):D.type==="DATABASE"||D.type==="GRID"||(ie=D.mimeType)!=null&&ie.includes("sheet")?(st(`Manifesting ${D.name} into Reality Engine...`,"SUCCESS"),s("SELECT_ARTIFACT",{...D,LABEL:D.name,ARCHETYPES:["DATABASE","VAULT"],ARCHETYPE:"DATABASE",DOMAIN:"DATABASE_L1",ORIGIN_SOURCE:D.ORIGIN_SOURCE||c||"drive",ACCOUNT_ID:Yt}),(c==="VAULT_GLOBAL"||n.phenotype.ui.vaultPanelOpen)&&s("TOGGLE_UI_PANEL",{panel:"vault"})):st(`Opening file: ${D.name} (Preview not available in Kernel)`,"WARNING")},Td=()=>{I(null)},Cd=async()=>{N&&(st(`Eliminando ${N.name}...`,"WARNING"),await s("DELETE_VAULT_ITEM",{nodeId:x,itemId:N.id,itemName:N.name}),I(null))},Id=C=>{const D=b.slice(0,C+1),ie=D[D.length-1];O(!0),st(`Reverting to: ${ie.name}...`),s("FETCH_VAULT_CONTENT",{nodeId:x,folderId:ie.id==="ROOT"?"ROOT":ie.id,accountId:Yt}),A(D),O(!1)},Ri=(C,D)=>{const ie=D.type==="DATABASE"||D.type==="GRID"||D.type==="database",Qe={...D,ARCHETYPE:ie?"DATABASE":D.ARCHETYPE||D.type||"FILE",ORIGIN_SOURCE:c};C.dataTransfer.setData("indra/artifact",JSON.stringify(Qe)),st(`Initiating data drag: ${D.name} [Archetype: ${Qe.ARCHETYPE}]`),C.currentTarget.style.opacity="0.5"},jd=C=>{C.currentTarget.style.opacity="1"},Rd=(C,D)=>{C.preventDefault(),$({visible:!0,x:C.clientX,y:C.clientY,node:D}),I(D)},Ld=C=>{var Qe;const D=C.type==="DATABASE"||C.type==="GRID"||C.mimeType==="application/vnd.indra.notion-db"||((Qe=C.mimeType)==null?void 0:Qe.includes("sheet")),ie={...C,LABEL:C.name,ARCHETYPE:D?"DATABASE":C.archetype||"NODE",DOMAIN:D?"DATA_ENGINE":C.DOMAIN||"SYSTEM_VAULT",ORIGIN_SOURCE:c,ACCOUNT_ID:Yt,VITAL_SIGNS:D?{IO_CONSISTENCY:{value:"NOMINAL",criticality:"NOMINAL"},HYDRATION:{value:"PARTIAL",criticality:"WARNING"}}:{}};s("BIND_TO_COSMOS",{artifact:ie}),d("cosmos")},Od=C=>{st(`Artifact defined: ${U.node.name}. Integrating into Cosmos...`,"SUCCESS"),s("INTEGRATE_SMART_NODE",{baseNode:U.node,config:C,schemaId:Ee}),me(!1),$({visible:!1,x:0,y:0,node:null})},kd=()=>{var C,D,ie;return N?o.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right duration-300",children:[o.jsxs("div",{className:"p-6 border-b border-[var(--border-subtle)] bg-[var(--bg-secondary)]/10",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[var(--bg-primary)] border border-[var(--border-subtle)] flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-4xl",children:N.type==="DATABASE"||(C=N.mimeType)!=null&&C.includes("sheet")?"":N.type==="DIRECTORY"?"":""})})}),o.jsx("h3",{className:"text-sm font-bold text-[var(--text-vibrant)] text-center break-words leading-tight mb-2",children:N.name}),o.jsx("div",{className:"flex justify-center",children:o.jsx("span",{className:`text-[9px] font-black px-2 py-1 rounded uppercase tracking-wider ${N.type==="DIRECTORY"?"bg-[var(--accent)]/10 text-[var(--accent)]":"bg-[var(--text-dim)]/10 text-[var(--text-dim)]"}`,children:N.type||"FILE"})})]}),o.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar",children:[o.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mb-4",children:"Meta Data"}),o.jsxs("div",{className:"space-y-4 font-mono text-[10px]",children:[o.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[o.jsx("span",{className:"text-[var(--text-dim)]",children:"Size"}),o.jsx("span",{className:"text-[var(--text-soft)]",children:(D=N.raw)!=null&&D.size?(N.raw.size/1024).toFixed(1)+" KB":"--"})]}),o.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[o.jsx("span",{className:"text-[var(--text-dim)]",children:"MIME"}),o.jsx("span",{className:"text-[var(--text-soft)] truncate max-w-[120px]",title:N.mimeType,children:((ie=N.mimeType)==null?void 0:ie.split(".").pop())||"Unknown"})]}),o.jsxs("div",{className:"flex justify-between border-b border-[var(--border-subtle)]/50 pb-2",children:[o.jsx("span",{className:"text-[var(--text-dim)]",children:"Updated"}),o.jsx("span",{className:"text-[var(--text-soft)]",children:new Date(N.lastUpdated).toLocaleDateString()})]})]}),o.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mt-8 mb-4",children:"Protocols"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("button",{onClick:()=>{ce(N.name),R(!0)},className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-primary)] border border-transparent hover:border-[var(--border-subtle)] transition-all text-left group",children:[o.jsx("svg",{className:"w-4 h-4 text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),o.jsx("span",{className:"text-[10px] font-bold text-[var(--text-soft)]",children:"RENAME"})]}),o.jsxs("button",{onClick:()=>B(!0),className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-primary)] border border-transparent hover:border-[var(--border-subtle)] transition-all text-left group",children:[o.jsx("svg",{className:"w-4 h-4 text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),o.jsx("span",{className:"text-[10px] font-bold text-[var(--text-soft)]",children:"MOVE TO..."})]}),o.jsxs("button",{onClick:Cd,className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-red-500/10 border border-transparent hover:border-red-500/30 transition-all text-left group mt-4",children:[o.jsx("svg",{className:"w-4 h-4 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),o.jsx("span",{className:"text-[10px] font-bold text-red-400",children:"DELETE"})]})]})]})]}):o.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right duration-300",children:[o.jsxs("div",{className:"p-6 border-b border-[var(--border-subtle)]",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4",children:o.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Current Sector"})}),o.jsx("h3",{className:"text-lg font-bold text-[var(--text-vibrant)] truncate",children:b[b.length-1].name}),o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-[10px] font-mono text-[var(--text-dim)]",children:[o.jsx("span",{children:"Status"}),o.jsx("span",{style:{color:S},className:_?"animate-pulse":"",children:E})]}),o.jsxs("div",{className:"flex justify-between text-[10px] font-mono text-[var(--text-dim)] mt-2",children:[o.jsx("span",{children:"Hydration"}),o.jsxs("span",{children:[g,"%"]})]}),o.jsx(im,{nodeId:x}),o.jsxs("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-50 block text-right",children:[At.length," items projected"]})]})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] block mb-4",children:"Quick Actions"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>st("Upload Protocol Initiated"),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all group",children:[o.jsx("svg",{className:"w-5 h-5 text-[var(--text-soft)] group-hover:text-[var(--accent)] group-hover:scale-110 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),o.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)]",children:"UPLOAD"})]}),o.jsxs("button",{onClick:()=>s("FETCH_VAULT_CONTENT",{nodeId:x,folderId:b[b.length-1].id,refresh:!0}),className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all group",children:[o.jsx("svg",{className:"w-5 h-5 text-[var(--text-soft)] group-hover:text-[var(--accent)] group-hover:rotate-180 transition-all duration-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),o.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)]",children:"SYNC"})]})]})]})]})};return t==="VAULT"||t==="BRIDGE"||t==="STANDARD"?o.jsx(am,{title:"ALMACN DE ARTEFACTOS",domain:"SYSTEM_VAULT",data:e,slotId:r,inspectorPanel:kd(),children:o.jsxs("div",{className:"w-full h-full flex flex-col overflow-hidden relative",children:[o.jsxs("nav",{className:"flex items-center gap-1 p-2 bg-black/40 border-b border-white/5 shrink-0 overflow-x-auto scrollbar-hide",children:[i.map(C=>o.jsxs("button",{onClick:()=>d(C.id),className:`
                                    flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all text-[9px] font-black uppercase tracking-widest
                                    ${c===C.id?"bg-[var(--accent)]/10 border-[var(--accent)]/40 text-[var(--accent)]":"bg-transparent border-transparent text-[var(--text-dim)] hover:bg-white/5"}
                                `,children:[L[C.icon]&&ve.createElement(L[C.icon],{size:10}),o.jsx("span",{className:f?"hidden xs:inline":"inline",children:C.label})]},C.id)),Zs.length>1&&o.jsxs("div",{className:"ml-auto flex items-center gap-2 px-3 border-l border-white/10",children:[o.jsx("span",{className:"text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter",children:"Identity:"}),o.jsx("select",{className:"bg-black/60 border border-white/10 rounded px-2 py-0.5 text-[8px] font-mono text-[var(--accent)] outline-none cursor-pointer",value:Yt||"",onChange:C=>Ti(C.target.value),children:Zs.map(C=>o.jsxs("option",{value:C.id,children:[C.label," ",C.isDefault?"()":""]},C.id))})]})]}),!e.hideSearch&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-black/10 shrink-0",children:[o.jsxs("div",{className:"flex-1 relative group",children:[o.jsx(L.Search,{size:12,className:"absolute left-4 top-1/2 -translate-y-1/2 text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"}),o.jsx("input",{type:"text",placeholder:"Escanear Bveda...",className:"w-full bg-black/40 border border-white/5 rounded-full pl-10 pr-4 py-2 text-[10px] font-mono text-[var(--text-soft)] outline-none focus:border-[var(--accent)]/30 transition-all shadow-inner",value:u,onChange:C=>p(C.target.value),onKeyDown:Ad})]}),o.jsx("button",{onClick:()=>Ve(!Se),className:`p-2 rounded-full border transition-all duration-300 ${Se?"bg-[var(--accent)] text-black border-[var(--accent)]":"bg-white/5 border-white/5 text-[var(--text-dim)] hover:text-white"}`,title:"Filtros de Proyeccin",children:o.jsx(L.Filter,{size:12})}),o.jsx("button",{onClick:()=>s("FETCH_VAULT_CONTENT",{nodeId:x,folderId:b[b.length-1].id,accountId:Yt,refresh:!0}),className:"p-2 rounded-full bg-white/5 border border-white/5 text-[var(--text-dim)] hover:text-white transition-all hover:rotate-180 duration-500",children:o.jsx(L.Sync,{size:12})})]}),Se&&o.jsxs("div",{className:"px-6 py-2 bg-black/20 border-b border-white/5 flex flex-wrap gap-2 animate-in slide-in-from-top duration-200",children:[o.jsx("button",{onClick:()=>{clearFilters()},className:"px-2 py-1 rounded-md border border-red-500/30 text-red-400 text-[8px] font-bold uppercase hover:bg-red-500/10",children:"PURGAR"}),(c==="drive"||c==="VAULT")&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>dt("mimeType",C=>{var D;return(D=C.mimeType)==null?void 0:D.includes("spreadsheet")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${pt.mimeType?"bg-green-500/20 border-green-500 text-green-400":"border-white/10 text-[var(--text-dim)] hover:bg-white/5"}`,children:"MATRICES (SHEETS)"}),o.jsx("button",{onClick:()=>dt("mimeType",C=>{var D;return(D=C.mimeType)==null?void 0:D.includes("document")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${pt.mimeType?"bg-blue-500/20 border-blue-500 text-blue-400":"border-white/10 text-[var(--text-dim)] hover:bg-white/5"}`,children:"MANIFIESTOS (DOCS)"})]}),c==="local"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>dt("name",C=>{var D;return(D=C.name)==null?void 0:D.toLowerCase().endsWith(".skp")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${pt.name?"bg-cyan-500/20 border-cyan-500 text-cyan-400":"border-white/10 text-[var(--text-dim)] hover:bg-white/5"}`,children:"MOLDES (SKP)"}),o.jsx("button",{onClick:()=>dt("name",C=>{var D;return(D=C.name)==null?void 0:D.toLowerCase().endsWith(".dwg")}),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${pt.name?"bg-indigo-500/20 border-indigo-500 text-indigo-400":"border-white/10 text-[var(--text-dim)] hover:bg-white/5"}`,children:"PLANOS (DWG)"})]}),o.jsx("button",{onClick:()=>dt("type","DIRECTORY"),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${pt.type==="DIRECTORY"?"bg-amber-500/20 border-amber-500 text-amber-400":"border-white/10 text-[var(--text-dim)] hover:bg-white/5"}`,children:"CONTENEDORES"}),o.jsx("button",{onClick:()=>dt("type",C=>C.type!=="DIRECTORY"),className:`px-2 py-1 rounded-md border text-[8px] font-bold uppercase transition-all ${pt.type&&pt.type!=="DIRECTORY"?"bg-purple-500/20 border-purple-500 text-purple-400":"border-white/10 text-[var(--text-dim)] hover:bg-white/5"}`,children:"ENTIDADES"})]})]}),o.jsx("div",{className:"px-6 py-2 border-b border-white/5 flex items-center gap-2 overflow-x-auto scrollbar-hide shrink-0 bg-black/5",children:b.map((C,D)=>o.jsxs(ve.Fragment,{children:[o.jsx("button",{onClick:()=>Id(D),className:`text-[8px] font-black uppercase tracking-widest hover:text-[var(--accent)] transition-all ${D===b.length-1?"text-[var(--text-vibrant)]":"text-[var(--text-dim)]"}`,children:C.name}),D<b.length-1&&o.jsx("span",{className:"text-[var(--text-dim)] opacity-30 text-[8px]",children:"/"})]},C.id))}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",onClick:Td,children:o.jsx("div",{className:`grid gap-4 ${f?"grid-cols-1":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"}`,children:Ci.length>0?Ci.map(C=>{var Di,Pi,Mi,Ui;const D=m.has(C.id),ie=C.type==="DATABASE"||((Di=C.mimeType)==null?void 0:Di.includes("sheet")),Qe=C.type==="DIRECTORY",Dd=D?"opacity-100 scale-100 ring-1 ring-[var(--accent)]/50":"opacity-60 grayscale hover:grayscale-0 hover:opacity-100 hover:scale-[1.02]",Pd=Qe?"hover:border-amber-500/30":ie?"hover:border-violet-500/50 shadow-[0_0_20px_rgba(139,92,246,0.05)]":"hover:border-blue-500/30";return o.jsxs("div",{draggable:!0,onDragStart:ft=>Ri(ft,C),onDragEnd:jd,onClick:ft=>_d(ft,C),onDoubleClick:ft=>wd(ft,C),onContextMenu:ft=>Rd(ft,C),className:`
                                                group relative p-4 rounded-2xl border transition-all duration-300 cursor-pointer flex flex-col items-center text-center
                                                ${Dd} ${Pd}
                                                ${(N==null?void 0:N.id)===C.id?"bg-[var(--accent)]/10 border-[var(--accent)]/30 shadow-2xl !opacity-100 !grayscale-0 !scale-105":"bg-[var(--bg-secondary)]/10 border-white/5 hover:bg-white/5"}
                                                ${f?"flex-row text-left !items-start !text-left p-3":"flex-col"}
                                            `,children:[D&&o.jsx("div",{className:"absolute top-2 right-2 w-1.5 h-1.5 bg-[var(--accent)] rounded-full shadow-[0_0_5px_var(--accent)] z-10"}),o.jsx("div",{className:`${f?"w-8 h-8 mr-3":"w-12 h-12 mb-3"} rounded-xl bg-black/20 flex items-center justify-center text-xl group-hover:scale-110 transition-all duration-500 shadow-inner shrink-0`,children:C.type==="DIRECTORY"?o.jsx("span",{className:"text-amber-400/80",children:""}):C.type==="DATABASE"||(Pi=C.mimeType)!=null&&Pi.includes("sheet")?o.jsx(L.Database,{size:24,color:"var(--accent)"}):o.jsx("span",{className:"text-blue-400/80",children:""})}),o.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[o.jsx("span",{className:"text-[10px] font-bold text-[var(--text-soft)] truncate w-full break-words group-hover:text-[var(--text-vibrant)]",children:C.name}),o.jsx("span",{className:`text-[7px] font-mono uppercase mt-0.5 tracking-tighter opacity-60 ${C.type==="DATABASE"||(Mi=C.mimeType)!=null&&Mi.includes("sheet")?"text-[var(--accent)] font-black":"text-[var(--text-dim)]"}`,children:(Ui=C.mimeType)!=null&&Ui.includes("sheet")?"SPREADSHEET":C.type||"FILE"})]}),o.jsx("button",{onClick:ft=>{ft.stopPropagation(),Ld(C)},className:"absolute top-2 left-2 w-6 h-6 rounded-full bg-[var(--accent)] text-black flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all hover:scale-110 shadow-lg z-20",title:"Manifestar en Cosmos",children:o.jsx(L.Plus,{size:12})})]},C.id)}):o.jsxs("div",{className:"col-span-full py-20 flex flex-col items-center justify-center text-[var(--text-dim)] space-y-4",children:[o.jsx(L.Inbox,{size:48,className:"opacity-10"}),o.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em] opacity-40",children:"Empty_Vector"}),o.jsx("button",{onClick:()=>s("FETCH_VAULT_CONTENT",{nodeId:x,folderId:"ROOT",refresh:!0}),className:"mt-4 px-4 py-2 bg-[var(--bg-secondary)] border border-[var(--border-subtle)] rounded-full text-[9px] font-mono hover:bg-[var(--accent)] hover:text-black transition-colors",children:"FORZAR_SINCRONIZACIN"})]})})}),K&&o.jsxs("div",{className:"absolute inset-0 z-[110] bg-black/90 backdrop-blur-xl flex flex-col p-8 sm:p-12 animate-in slide-in-from-bottom duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--accent)]/10 border border-[var(--accent)]/30 flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-[var(--text-vibrant)]",children:"Define Smart Artifact"}),o.jsxs("p",{className:"text-xs text-[var(--text-dim)] font-mono",children:["Transforming: ",(ki=U.node)==null?void 0:ki.name]})]})]}),o.jsx("button",{onClick:()=>me(!1),className:"p-3 rounded-full hover:bg-[var(--bg-secondary)] transition-colors text-[var(--text-dim)]",children:o.jsx(L.Close,{size:24})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-2xl p-4 sm:p-8 max-w-2xl mx-auto w-full shadow-2xl",children:o.jsx(Ed,{schemaId:Ee,onCommit:Od,onCancel:()=>me(!1)})})]})]})}):t==="WIDGET"?o.jsxs("div",{className:"w-full bg-[var(--bg-glass)] border border-[var(--border-vibrant)] rounded-2xl p-4 backdrop-blur-xl shadow-xl animate-in slide-in-from-right duration-500 overflow-hidden relative",children:[o.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-[var(--accent)]/20"}),o.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-[var(--border-subtle)]",children:[o.jsx("span",{className:"text-[10px] font-black text-[var(--accent)] tracking-[0.2em] uppercase",children:bd}),o.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--success)] animate-pulse shadow-[0_0_8px_var(--success)]"})]}),o.jsx("div",{className:"space-y-1.5",children:At.slice(0,3).map(C=>o.jsxs("div",{draggable:!0,onDragStart:D=>Ri(D,C),className:"flex items-center gap-3 p-2.5 bg-[var(--bg-secondary)]/30 border border-transparent hover:border-[var(--accent)]/30 rounded-xl cursor-grab active:cursor-grabbing transition-all group hover:bg-[var(--bg-secondary)]/50",children:[o.jsx("span",{className:"text-xs opacity-50",children:C.type==="DIRECTORY"?"":""}),o.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[o.jsx("span",{className:"text-[10px] font-mono text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)] truncate",children:C.name}),o.jsx("span",{className:`text-[8px] font-mono uppercase opacity-50 ${C.type==="DIRECTORY"?"text-[var(--accent)]":"text-[var(--text-dim)]"}`,children:C.type||"FILE"})]}),o.jsx("button",{className:"opacity-0 group-hover:opacity-100 text-[9px] font-bold text-[var(--accent)] transition-opacity uppercase tracking-widest bg-[var(--accent)]/10 px-2 py-1 rounded-lg border border-[var(--accent)]/20",children:"Inject"})]},C.id))}),o.jsxs("div",{className:"mt-4 pt-3 border-t border-[var(--border-subtle)] flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 h-1 bg-[var(--bg-secondary)] rounded-full overflow-hidden",children:o.jsx("div",{className:"w-full h-full bg-gradient-to-r from-[var(--accent)]/5 via-[var(--accent)] to-[var(--accent)]/5 animate-loading-bar"})}),o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tighter",children:"Ready_Link"})]})]}):null},cm=({data:e,execute:t})=>{var h;const{label:r,VITAL_SIGNS:n={},CAPABILITIES:s={},data:a={}}=e,i=a.from||"Sovereign Entity",l=a.subject||r,c=((h=n.URGENCY)==null?void 0:h.value)>.8||l.toLowerCase().includes("urgente"),d=m=>{t("EXECUTE_NODE_ACTION",{nodeId:e.id,capability:m,payload:{emailId:a.id}})};return o.jsxs("div",{className:"flex flex-col gap-2 p-1",children:[o.jsxs("div",{className:"flex flex-col border-l-2 border-[var(--accent)] pl-2 bg-white/5 p-2 rounded-r",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-[10px] font-bold text-[var(--accent)] truncate",children:i}),c&&o.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 shadow-[0_0_5px_red] animate-pulse"})]}),o.jsxs("div",{className:"text-[9px] text-[var(--text-soft)] line-clamp-2 leading-tight italic",children:['"',l,'"']})]}),o.jsxs("div",{className:"flex gap-2 mt-1",children:[Object.keys(s).includes("SEND_REPLY")&&o.jsx("button",{onClick:()=>d("SEND_REPLY"),className:"px-2 py-1 bg-[var(--accent)]/20 hover:bg-[var(--accent)]/40 border border-[var(--accent)]/30 rounded text-[8px] font-black uppercase transition-all",children:"Reply"}),o.jsx("button",{onClick:()=>d("ARCHIVE"),className:"px-2 py-1 bg-white/5 hover:bg-white/10 border border-white/10 rounded text-[8px] font-black uppercase transition-all text-[var(--text-dim)]",children:"Archive"})]})]})},um=({data:e,execute:t})=>{const{LABEL:r,data:n={}}=e,s=n.extension||(r&&r.includes(".")?r.split(".").pop():"bin"),a=n.size?`${(n.size/1024).toFixed(1)} KB`:"---",i=l=>({pdf:"",doc:"",docx:"",xls:"",xlsx:"",jpg:"",png:"",zip:"",gs:""})[l.toLowerCase()]||"";return o.jsxs("div",{className:"flex items-center gap-3 p-2 bg-black/20 rounded-lg border border-white/5 group-hover:border-[var(--accent)]/30 transition-all",children:[o.jsx("div",{className:"text-2xl filter drop-shadow-[0_0_8px_rgba(255,255,255,0.1)]",children:i(s)}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsx("span",{className:"text-[10px] font-black text-[var(--text-soft)] truncate tracking-tight",children:r}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] uppercase font-bold px-1 bg-[var(--accent)]/10 rounded",children:s}),o.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)]",children:a})]})]})]})},dm=({data:e,execute:t})=>{const{label:r,data:n={}}=e,s=!!n.thumbnailLink;return o.jsxs("div",{className:"flex flex-col gap-2 p-1",children:[o.jsxs("div",{className:"relative w-full h-24 bg-black/40 rounded border border-white/10 overflow-hidden flex items-center justify-center",children:[s?o.jsx("img",{src:n.thumbnailLink,alt:"Preview",className:"w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"}):o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx("span",{className:"text-3xl opacity-20",children:""}),o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tighter",children:"No Preview Available"})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:o.jsx("button",{className:"w-full py-1 bg-[var(--accent)] text-black text-[8px] font-black uppercase rounded shadow-lg transform translate-y-2 group-hover:translate-y-0 transition-transform",onClick:a=>{a.stopPropagation(),window.open(n.webViewLink,"_blank")},children:"Focus Reader"})})]}),o.jsxs("div",{className:"flex justify-between items-center px-1",children:[o.jsx("span",{className:"text-[9px] font-bold text-[var(--text-soft)] truncate max-w-[120px]",children:r}),o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)]",children:"PDF"})]})]})},pm=({data:e,execute:t})=>{var d,h,m,x,E;const{state:r}=q(),n=e.id||((d=e.data)==null?void 0:d.id),s=(m=e.ORIGIN_SOURCE||((h=e.data)==null?void 0:h.ORIGIN_SOURCE))==null?void 0:m.toLowerCase(),a=e.ACCOUNT_ID||((x=e.data)==null?void 0:x.ACCOUNT_ID),i=T.useMemo(()=>{var S,_;return(((S=e.data)==null?void 0:S.items)||e.items||((_=r.phenotype.silos)==null?void 0:_[n])||[]).slice(0,5)},[e.data,e.items,(E=r.phenotype.silos)==null?void 0:E[n]]),l=T.useMemo(()=>i.length===0?[]:Object.keys(i[0]).filter(g=>!g.startsWith("_")).slice(0,3).map(g=>({id:g,label:g.replace(/_/g," ").toUpperCase()})),[i]),c=(g,S)=>{const _=S.id||`row_${Math.random().toString(36).substr(2,5)}`,f={id:`${e.id}_${_}`,parentId:e.id,LABEL:S.name||S.title||S.LABEL||`Entry: ${_}`,ARCHETYPE:"DATA_ENTRY",DOMAIN:"FRAGMENT",data:S};g.dataTransfer.setData("indra/artifact",JSON.stringify(f)),g.dataTransfer.effectAllowed="copy"};return o.jsxs("div",{className:"flex flex-col w-full min-h-[140px] relative overflow-hidden group/db bg-black/40 rounded-xl border border-white/5",children:[o.jsx("div",{className:"absolute inset-0 opacity-5 pointer-events-none",style:{backgroundImage:"linear-gradient(var(--accent) 1px, transparent 1px), linear-gradient(90deg, var(--accent) 1px, transparent 1px)",backgroundSize:"10px 10px"}}),o.jsx("div",{className:"relative z-10 flex flex-col h-full",children:o.jsxs("table",{className:"w-full text-left border-collapse border-spacing-0",children:[o.jsx("thead",{children:o.jsx("tr",{className:"bg-white/5",children:l.map(g=>o.jsx("th",{className:"px-3 py-1.5 text-[7px] font-black text-[var(--text-dim)] uppercase tracking-widest border-b border-white/5",children:g.label},g.id))})}),o.jsx("tbody",{className:"divide-y divide-white/[0.02]",children:i.length>0?i.map((g,S)=>o.jsx("tr",{draggable:!0,onDragStart:_=>c(_,g),className:"hover:bg-[var(--accent)]/[0.05] cursor-grab active:cursor-grabbing transition-colors group/row",children:l.map(_=>o.jsx("td",{className:"px-3 py-1.5 text-[8px] font-mono text-[var(--text-soft)] opacity-60 group-hover/row:opacity-100 truncate max-w-[100px]",children:g[_.id]||"-"},_.id))},S)):o.jsx("tr",{children:o.jsx("td",{colSpan:l.length||1,className:"py-8 text-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3 opacity-30 group-hover/db:opacity-100 transition-opacity",children:[o.jsx(L.Inbox,{size:24}),o.jsx("span",{className:"text-[7px] font-mono uppercase tracking-[0.3em]",children:"Empty_Refraction"}),o.jsx("button",{onClick:()=>{if(!s){console.error(`[DatabaseWidget]  Cannot reify ${n}: ORIGIN_SOURCE is missing`);return}console.log(`[DatabaseWidget]  Reifying ${n} from ${s}`),t("FETCH_DATABASE_CONTENT",{databaseId:n,nodeId:s,accountId:a,refresh:!0})},className:"px-3 py-1 bg-[var(--accent)]/10 border border-[var(--accent)]/30 rounded-full text-[7px] font-black text-[var(--accent)] hover:bg-[var(--accent)] hover:text-black transition-all",children:"REIFY_DATA"})]})})})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-4 bg-gradient-to-t from-black/80 to-transparent pointer-events-none"}),o.jsx("div",{className:"absolute top-1 right-1 flex items-center gap-1 opacity-0 group-hover/db:opacity-100 transition-opacity",children:o.jsx("div",{className:"text-[7px] font-mono text-[var(--accent)] bg-[var(--accent)]/10 px-1 rounded border border-[var(--accent)]/20 uppercase tracking-tighter",children:"SURFACE_MODE"})})]})},fm=({data:e,execute:t})=>{var i,l;const{DOMAIN:r,schemaId:n,LABEL:s}=e,a=s&&s.includes(".")?s.split(".").pop().toLowerCase():"";return r==="COMMUNICATION"?o.jsx(cm,{data:e,execute:t}):n==="PDF_NODE"||a==="pdf"?o.jsx(dm,{data:e,execute:t}):n==="FILE_NODE"||((i=e.data)==null?void 0:i.type)==="FILE"?o.jsx(um,{data:e,execute:t}):n==="DATABASE_NODE"||e.ARCHETYPE==="DATABASE"||r==="DATA_ENGINE"||((l=e.data)==null?void 0:l.type)==="DATABASE"?o.jsx(pm,{data:e,execute:t}):o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-20",children:o.jsx("div",{className:"w-12 h-12 rounded-full border border-dashed border-white/20 animate-spin-slow"})})},hm=({onComplete:e,label:t})=>{const[r,n]=T.useState(0),s=T.useRef(null),a=r>0,i=m=>{m.stopPropagation(),m.preventDefault();const x=1e3,E=20,g=100/(x/E);clearInterval(s.current),s.current=setInterval(()=>{n(S=>{const _=S+g;return _>=100?(clearInterval(s.current),setTimeout(()=>e(),0),100):_})},E)},l=m=>{m&&(m.stopPropagation(),m.preventDefault()),clearInterval(s.current),n(0)};T.useEffect(()=>()=>clearInterval(s.current),[]);const c=7,d=2*Math.PI*c,h=d-r/100*d;return o.jsxs("div",{className:"relative flex items-center justify-center w-6 h-6 rounded-full cursor-pointer group/delete",onMouseDown:i,onMouseUp:l,onMouseLeave:l,onTouchStart:i,onTouchEnd:l,title:"MANTENER PRESIONADO PARA PERMANENTE ELIMITACIN (1.5s)",children:[o.jsx("div",{className:`absolute inset-0 rounded-full bg-red-500/10 transition-all duration-300 ${a?"scale-125 opacity-100":"scale-0 opacity-0 group-hover/delete:scale-100 group-hover/delete:opacity-100"}`}),a&&o.jsx("svg",{className:"absolute inset-0 w-full h-full -rotate-90 pointer-events-none z-10",viewBox:"0 0 24 24",children:o.jsx("circle",{cx:"12",cy:"12",r:c,fill:"none",stroke:r>80?"#ef4444":"#f87171",strokeWidth:"2",strokeDasharray:d,strokeDashoffset:h,strokeLinecap:"round",className:"transition-all duration-75 ease-linear"})}),o.jsx("div",{className:`transition-all duration-200 z-20 ${a?"text-red-500 scale-90":"text-[var(--text-dim)] group-hover/delete:text-red-400 opacity-50 group-hover/delete:opacity-100 transform group-hover/delete:scale-110"}`,children:o.jsx(L.Trash,{size:10})}),a&&r<100&&o.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-black/90 text-white text-[8px] px-1.5 py-0.5 rounded whitespace-nowrap border border-red-500/30 pointer-events-none",children:r>80?"SOLTAR PARA CANCELAR!":"MANTENIENDO..."})]})},Qt=({data:e})=>{var _;const{state:t,execute:r}=q(),{id:n,LABEL:s,ARCHETYPE:a,DOMAIN:i,CAPABILITIES:l={},VITAL_SIGNS:c={},schemaId:d}=e,m={SYSTEM_INFRA:"#3b82f6",SYSTEM_CORE:"#f97316",UI_PROJECTION:"#a855f7",SENSING:"#10b981",COMMUNICATION:"#ec4899",DATA_ENGINE:"#8b5cf6",DOCUMENT_ENGINE:"#06b6d4"}[i]||"#6366f1",x=Object.entries(l).filter(([f,u])=>u.io==="WRITE"||u.io==="TRIGGER"||u.io==="GATE"||u.io==="INPUT"),E=Object.entries(l).filter(([f,u])=>u.io==="READ"||u.io==="STREAM"||u.io==="PROBE"||u.io==="REFRESH"||u.io==="OUTPUT"),g=f=>{var p,v;f.stopPropagation(),(d==="FOLDER_NODE"||d==="COSMOS_NODE"||a==="DATABASE"||((p=e.data)==null?void 0:p.type)==="DIRECTORY"||((v=e.data)==null?void 0:v.type)==="DATABASE")&&(console.log(`[NodeEngine]  Deep Focus Triggered: ${s}`),r("SELECT_ARTIFACT",e))},S=a==="DATABASE"||d==="DATABASE_NODE"||((_=e.data)==null?void 0:_.type)==="DATABASE";return o.jsxs("div",{className:`${S?"w-[500px]":"w-64"} bg-[var(--indra-glass-bg)] border border-[var(--indra-glass-border)] rounded-2xl shadow-2xl backdrop-blur-xl overflow-hidden group hover:border-[var(--accent)]/50 transition-all active:scale-[0.98] select-none`,onDoubleClick:g,children:[o.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-b border-[var(--border-subtle)] cursor-grab active:cursor-grabbing",style:{background:`linear-gradient(to right, ${m}22, transparent)`},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:m,boxShadow:`0 0-8px ${m}`}}),o.jsx("span",{className:"text-[10px] font-black text-[var(--text-soft)] uppercase tracking-widest truncate max-w-[150px]",children:s})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tight",children:d||a}),o.jsx(hm,{onComplete:()=>r("REMOVE_ARTIFACT",{id:n}),label:s})]})]}),o.jsxs("div",{className:"p-4 flex flex-col gap-2 relative min-h-[80px]",children:[o.jsx(fm,{data:e,execute:r}),o.jsxs("div",{className:"flex justify-between gap-4 mt-2",children:[o.jsx("div",{className:"flex flex-col gap-2 items-start",children:x.map(([f,u])=>o.jsxs("div",{className:"flex items-center gap-2 group/port cursor-pointer hover:bg-white/5 p-1 rounded transition-colors",onMouseDown:p=>{p.stopPropagation()},onMouseUp:p=>{p.stopPropagation();const v=t.phenotype.ui.pendingConnection;v&&v.sourceNodeId!==n&&r("ADD_RELATIONSHIP",{source:v.sourceNodeId,target:n,sourcePort:v.portId,targetPort:f})},children:[o.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-[var(--border-subtle)] bg-[var(--bg-deep)] group-hover/port:border-[var(--accent)] transition-colors"}),o.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase group-hover/port:text-[var(--text-vibrant)] truncate max-w-[80px]",children:u.human_label||u.LABEL||f})]},f))}),o.jsx("div",{className:"flex flex-col gap-2 items-end",children:E.map(([f,u],p)=>o.jsxs("div",{className:"flex items-center gap-2 group/port cursor-pointer hover:bg-white/5 p-1 rounded transition-colors",onMouseDown:v=>{v.stopPropagation();const y=96+p*18;r("SET_PENDING_CONNECTION",{sourceNodeId:n,portId:f,startX:e.x,startY:e.y,portOffsetX:S?500:256,portOffsetY:y,currentX:v.clientX,currentY:v.clientY})},children:[o.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase group-hover/port:text-[var(--text-vibrant)] truncate max-w-[80px]",children:u.human_label||u.LABEL||f}),o.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-[var(--border-subtle)] bg-[var(--bg-deep)] group-hover/port:scale-125 transition-all",style:{borderColor:`${m}44`}})]},f))})]})]}),o.jsxs("div",{className:"px-4 py-1.5 bg-[var(--bg-secondary)] flex items-center justify-between border-t border-[var(--border-subtle)]",children:[o.jsxs("div",{className:"flex gap-1.5",children:[Object.entries(c).map(([f,u])=>o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${u.criticality==="FATAL"?"bg-[var(--error)]":"bg-[var(--success)]"}`,title:`${f}: ${u.criticality}`},f)),Object.keys(c).length===0&&o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 opacity-50"})]}),o.jsx("span",{className:"text-[7px] font-black text-[var(--text-dim)] uppercase tracking-tighter",children:"Sovereign_Coherence: 1.0"})]}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes spin-slow {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                .animate-spin-slow {
                    animation: spin-slow 10s linear infinite;
                }
            `}})]})},Zn=({data:e})=>{const{LABEL:t,ARCHETYPE:r,CAPABILITIES:n={},VITAL_SIGNS:s={}}=e,{execute:a}=q(),i=r==="MAIL"?"INBOX":r==="MESSAGING"?"CHAT":"SPLIT",[l,c]=T.useState(i),[d,h]=T.useState([]),[m,x]=T.useState(null),[E,g]=T.useState(""),S=()=>o.jsxs("div",{className:"w-1/3 min-w-[250px] border-r border-[var(--border-subtle)] bg-[var(--bg-secondary)]/30 flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] flex justify-between items-center",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--text-dim)]",children:r==="MAIL"?"INBOX":"CONVERSATIONS"}),o.jsxs("span",{className:"text-[9px] font-mono text-[var(--accent)] bg-[var(--accent)]/10 px-1.5 py-0.5 rounded",children:[d.filter(f=>f.unread).length," NEW"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:d.map(f=>o.jsxs("button",{onClick:()=>x(f),className:`w-full text-left p-3 border-b border-[var(--border-subtle)]/50 hover:bg-[var(--bg-secondary)] transition-colors flex gap-3 ${(m==null?void 0:m.id)===f.id?"bg-[var(--accent)]/10 border-l-2 border-l-[var(--accent)]":""}`,children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${f.type==="MAIL"?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"}`,children:f.sender[0]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[o.jsx("span",{className:`text-[11px] font-bold truncate ${f.unread?"text-[var(--text-vibrant)]":"text-[var(--text-soft)]"}`,children:f.sender}),o.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] shrink-0",children:f.time})]}),o.jsx("div",{className:"text-[10px] text-[var(--text-dim)] truncate",children:f.subject})]})]},f.id))})]}),_=()=>{if(!m)return o.jsx("div",{className:"flex-1 flex items-center justify-center text-[var(--text-dim)] italic text-xs",children:"Select a conversation to begin transmission."});const f=m.type==="CHAT"||l==="CHAT";return o.jsxs("div",{className:"flex-1 flex flex-col bg-[var(--bg-deep)]",children:[o.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] flex items-center gap-3",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-500":"bg-blue-500"}`}),o.jsx("span",{className:"font-bold text-sm text-[var(--text-vibrant)]",children:m.sender}),o.jsx("span",{className:"ml-auto text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-wider border border-[var(--border-subtle)] px-2 py-0.5 rounded",children:f?"INSTANT_MESSAGING":"EMAIL_PROTOCOL"})]}),o.jsx("div",{className:"flex-1 p-6 overflow-y-auto space-y-4",children:o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:`self-start max-w-[80%] p-3 rounded-xl rounded-tl-none ${f?"bg-[var(--bg-secondary)]":"bg-[var(--bg-secondary)]/50 border border-[var(--border-subtle)]"}`,children:[o.jsx("p",{className:"text-xs text-[var(--text-soft)] leading-relaxed",children:f?m.preview:`Subject: ${m.subject}

${m.preview}

[Full content loaded from server...]`}),o.jsx("span",{className:"text-[8px] text-[var(--text-dim)] mt-1 block opacity-60",children:m.time})]}),o.jsxs("div",{className:"self-end max-w-[80%] p-3 rounded-xl rounded-tr-none bg-[var(--accent)]/10 border border-[var(--accent)]/20",children:[o.jsx("p",{className:"text-xs text-[var(--text-soft)] leading-relaxed",children:"System Acknowledged."}),o.jsx("span",{className:"text-[8px] text-[var(--text-dim)] mt-1 block opacity-60 text-right",children:"10:05 AM"})]})]})}),o.jsx("div",{className:"p-4 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)]/20",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 bg-[var(--bg-deep)] border border-[var(--border-subtle)] rounded-lg px-3 py-2 text-xs text-[var(--text-soft)] focus:outline-none focus:border-[var(--accent)] transition-colors placeholder:text-[var(--text-dim)] placeholder:italic",placeholder:f?"Type a message...":"Reply via email...",value:E,onChange:u=>g(u.target.value),onKeyDown:u=>{u.key==="Enter"&&E.trim()&&(console.log(`[CommunicationEngine] Sending: ${E}`),g(""),a("LOG_ACTION",{type:"MESSAGE_SENT",payload:E}))}}),o.jsx("button",{className:"px-4 py-2 bg-[var(--accent)] text-black text-[10px] font-black uppercase tracking-wider rounded-lg hover:brightness-110 active:scale-95 transition-all",children:"Send"})]})})]})};return o.jsxs("div",{className:"flex h-full w-full bg-[var(--indra-glass-bg)] backdrop-blur-md rounded-2xl overflow-hidden shadow-2xl border border-[var(--indra-glass-border)] animate-in fade-in zoom-in-95 duration-300",children:[o.jsx(S,{}),o.jsx(_,{})]})},sc=({data:e})=>{const t=T.useRef(null),r=T.useRef(null),{state:n}=q(),s=F(a=>a.session.isLoading);return T.useEffect(()=>{if(!t.current)return;const a=new yd;a.setCanvas(t.current),r.current=a;const i=[{identity:{uuid:"node_1",label:"NEURON_ALPHA"},dna:{archetype:"circle",geometry:{expressions:{}}}},{identity:{uuid:"node_2",label:"NEURON_BETA"},dna:{archetype:"circle",geometry:{expressions:{}}}},{identity:{uuid:"node_3",label:"NEURON_GAMMA"},dna:{archetype:"arc",geometry:{expressions:{}}}}];a.loadLaws(i);let l;const c=()=>{a.tick(),l=requestAnimationFrame(c)};return c(),console.log(" [RealityEngine] ISK Pilot Started."),()=>{cancelAnimationFrame(l)}},[]),T.useEffect(()=>{r.current&&s&&(console.log(" [RealityBridge] React Signal: IS_LOADING detected. Injecting Pulse to ISK."),r.current.bridge)},[n.phenotype.isLoading]),o.jsxs("div",{className:"w-full h-full relative bg-black/40 rounded-3xl overflow-hidden border border-white/5 shadow-2xl",children:[o.jsx("canvas",{ref:t,className:"w-full h-full block",style:{imageRendering:"pixelated"}}),o.jsxs("div",{className:"absolute top-4 left-4 p-4 bg-black/60 backdrop-blur-md rounded-xl border border-white/10 font-mono pointer-events-none",children:[o.jsx("div",{className:"text-[10px] text-accent-primary font-black mb-2 uppercase tracking-widest",children:"Reality_Bridge_Monitor"}),o.jsxs("div",{className:"flex flex-col gap-1 text-[8px] text-white/50",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{children:"Core_Signal:"}),o.jsx("span",{className:s?"text-accent-primary animate-pulse":"text-success",children:s?"RESONATING":"IDLE"})]}),o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx("span",{children:"ISK_Integrity:"}),o.jsx("span",{className:"text-success",children:"NOMINAL"})]})]})]}),o.jsx("div",{className:"absolute bottom-4 right-4 text-[9px] font-mono text-white/20 italic",children:"ISK_PILOT_V1_STARK // WebGL Rendering Active"})]})},mm=({data:e,perspective:t})=>{const{LABEL:r,DOMAIN:n,CAPABILITIES:s,VITAL_SIGNS:a}=e,i=(a==null?void 0:a.status)||"ACTIVE",l=(a==null?void 0:a.load)||"0%";return o.jsxs("div",{className:"h-full w-full flex flex-col bg-[var(--bg-primary)] p-6 overflow-y-auto font-mono",children:[o.jsxs("div",{className:"flex items-start justify-between mb-8 border-b border-[var(--border-subtle)] pb-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse ${i==="ACTIVE"?"bg-[var(--accent)]":"bg-[var(--error)]"}`}),o.jsx("h1",{className:"text-2xl font-black tracking-tighter text-[var(--text-primary)]",children:r==null?void 0:r.toUpperCase()})]}),o.jsxs("span",{className:"text-[10px] bg-[var(--accent)]/10 text-[var(--accent)] px-2 py-0.5 rounded border border-[var(--accent)]/20",children:[n," ENGINE"]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"text-[9px] text-[var(--text-dim)] block mb-1",children:"COMPUTE_LOAD"}),o.jsx("span",{className:"text-xl font-bold text-[var(--accent)]",children:l})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-[var(--bg-secondary)]/30 border border-[var(--border-subtle)] rounded-xl p-5",children:[o.jsxs("h3",{className:"text-[10px] font-bold text-[var(--text-dim)] mb-4 flex items-center gap-2",children:[o.jsx(L.Activity,{size:12}),"PROCESS_TRACE"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 opacity-50",children:[o.jsx("span",{className:"text-[9px] text-[var(--accent)]",children:"[08:24]"}),o.jsx("span",{className:"text-[10px] text-[var(--text-soft)]",children:"Kernel initialized..."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-[9px] text-[var(--accent)]",children:"[09:12]"}),o.jsx("span",{className:"text-[10px] text-[var(--text-vibrant)]",children:"Sensing context in active Cosmos..."})]}),o.jsxs("div",{className:"flex items-center gap-3 italic text-[var(--accent)]",children:[o.jsx("span",{className:"text-[9px] opacity-50",children:">>"}),o.jsx("span",{className:"text-[10px]",children:"Awaiting cognitive trigger..."})]})]})]}),o.jsxs("div",{className:"bg-[var(--bg-secondary)]/30 border border-[var(--border-subtle)] rounded-xl p-5",children:[o.jsxs("h3",{className:"text-[10px] font-bold text-[var(--text-dim)] mb-4 flex items-center gap-2",children:[o.jsx(L.Settings,{size:12}),"ENGINE_PARAMETERS"]}),o.jsx("div",{className:"space-y-4",children:Object.entries(s||{}).map(([c,d])=>o.jsxs("div",{className:"flex items-center justify-between border-b border-[var(--border-subtle)]/30 pb-2",children:[o.jsx("span",{className:"text-[10px] text-[var(--text-soft)] uppercase",children:c.replace("can_","")}),o.jsx("span",{className:`text-[9px] font-bold ${d?"text-[var(--accent)]":"text-[var(--text-dim)]"}`,children:d?"ENABLED":"DISABLED"})]},c))})]})]}),o.jsxs("div",{className:"mt-auto pt-8 flex items-center justify-between text-[8px] text-[var(--text-dim)] border-t border-[var(--border-subtle)]/30",children:[o.jsx("span",{children:"V8.0 SERVICE_RUNTIME"}),o.jsxs("span",{children:["UUID: ",e.technical_id||"LOCAL-INSTANCE"]})]})]})},xm=({data:e,perspective:t})=>{var f,u,p;const{state:r,execute:n}=q(),{id:s,LABEL:a,ARCHETYPE:i}=e,[l,c]=T.useState(((u=(f=e.views)==null?void 0:f[0])==null?void 0:u.id)||"v1"),[d,h]=T.useState(null);if(t==="NODE")return o.jsx(Qt,{data:{...e,LABEL:`[SLOT] ${a}`}});const m=e.views||[{id:"v1",label:"Tablero de Control",type:"DASHBOARD"},{id:"v2",label:"Documento Tcnico",type:"DOCUMENT_PAGINATED"}],x=m.find(v=>v.id===l)||m[0],E=e.CAPABILITIES||{},S=Object.keys(E).length>0?Object.entries(E).map(([v,y])=>({id:v,label:y.label||v,icon:y.icon||"",status:y.status||"DEFAULT",value:y.value||"None"})):i!=null&&i.includes("ADAPTER")?[{id:"api_token",label:"Token de Acceso",icon:"",status:"CONNECTED",value:""},{id:"db_id",label:"Database ID",icon:"",status:"BROKEN",value:"None"},{id:"sync_interval",label:"Refresco (s)",icon:"",status:"DEFAULT",value:"60"},{id:"data_status",label:"Estado Sync",icon:"",status:"CONNECTED",value:"VIVO"}]:[{id:"bg_color",label:"Color de Fondo",icon:"",status:"DEFAULT",value:"#0a0a0a"},{id:"main_font",label:"Tipografa",icon:"Aa",status:"CONNECTED",value:"Inter"},{id:"data_source",label:"Origen de Datos",icon:"",status:"BROKEN",value:"None"},{id:"margin",label:"Mrgenes",icon:"",status:"DEFAULT",value:"20px"}],_=v=>{switch(v){case"CONNECTED":return"var(--accent)";case"BROKEN":return"var(--error)";default:return"var(--text-dim)"}};return o.jsxs("div",{className:"w-full h-full flex flex-col bg-[var(--bg-deep)] overflow-hidden relative",children:[o.jsxs("header",{className:"h-16 border-b border-white/5 bg-black/40 backdrop-blur-2xl flex items-center justify-between px-8 z-50",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--accent)]/10 border border-[var(--accent)]/20 flex items-center justify-center text-[var(--accent)]",children:o.jsx(L.Transform,{size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-white/90 leading-none",children:a}),o.jsx("span",{className:"text-[9px] font-mono text-[var(--accent)] uppercase tracking-widest opacity-60",children:"Composite_Node_Active"})]})]}),o.jsx("nav",{className:"flex items-center gap-1 bg-white/5 p-1 rounded-xl",children:m.map(v=>o.jsx("button",{onClick:()=>c(v.id),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${l===v.id?"bg-[var(--accent)] text-black":"text-white/40 hover:text-white/60"}`,children:v.label},v.id))}),o.jsxs("button",{onClick:()=>n("EXIT_FOCUS"),className:"group flex items-center gap-3 px-4 py-2 rounded-xl bg-[var(--error)]/10 border border-[var(--error)]/20 text-[var(--error)] hover:bg-[var(--error)]/20 transition-all",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter",children:"Exit_Slot"}),o.jsx(L.Close,{size:16,className:"group-hover:rotate-90 transition-transform"})]})]}),o.jsxs("div",{className:"flex-1 flex relative",children:[o.jsxs("aside",{className:"w-72 border-r border-white/5 bg-black/20 flex flex-col p-4 gap-2 z-40",children:[o.jsx("span",{className:"text-[9px] font-black text-white/20 uppercase tracking-[0.3em] mb-4 pl-2",children:"Propiedades_Input"}),S.map(v=>o.jsxs("div",{onClick:()=>h(v.id),className:`flex items-center gap-4 p-3 rounded-2xl border transition-all cursor-pointer group ${d===v.id?"bg-[var(--accent)]/10 border-[var(--accent)]/40 shadow-lg shadow-[var(--accent)]/5":"bg-white/2 bg-transparent border-transparent hover:border-white/10"}`,children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-black/40 flex items-center justify-center text-lg border border-white/5 group-hover:border-[var(--accent)]/30 transition-all",children:v.icon}),o.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-[var(--bg-deep)] shadow-sm animate-pulse",style:{backgroundColor:_(v.status)}})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsx("span",{className:`text-[10px] font-bold uppercase tracking-tight transition-colors ${d===v.id?"text-[var(--accent)]":"text-white/60"}`,children:v.label}),o.jsx("span",{className:"text-[9px] font-mono text-white/20 truncate italic",children:v.status==="CONNECTED"?"Linked_to_Graph":`Default: ${v.value}`})]})]},v.id)),o.jsxs("div",{className:"mt-auto p-4 rounded-2xl bg-white/5 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] animate-pulse"}),o.jsx("span",{className:"text-[9px] font-black text-white/40 uppercase",children:"Static_Analysis"})]}),o.jsx("p",{className:"text-[8px] text-white/30 leading-relaxed font-medium",children:"Este slot est recibiendo datos de [Notion_DB] y aplicando leyes de estilo corporativo L1."})]})]}),o.jsxs("main",{className:"flex-1 relative overflow-hidden flex bg-[#030303]",children:[o.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),o.jsx("div",{className:"flex-1 flex items-center justify-center p-12 overflow-auto scrollbar-hide",children:x.type==="DOCUMENT_PAGINATED"?o.jsxs("div",{className:"w-[794px] min-h-[1123px] bg-white text-black shadow-2xl rounded-sm p-20 animate-in zoom-in-95 duration-700 origin-top",children:[o.jsx("h1",{className:"text-5xl font-black uppercase tracking-tighter mb-4",children:x.label}),o.jsx("div",{className:"h-1 bg-black w-32 mb-12"}),o.jsxs("div",{className:"space-y-8 opacity-20",children:[o.jsx("div",{className:"h-4 bg-black rounded-full w-full"}),o.jsx("div",{className:"h-4 bg-black rounded-full w-3/4"}),o.jsx("div",{className:"h-32 bg-black/5 rounded-2xl border-2 border-dashed border-black/10 flex items-center justify-center font-bold",children:"FRAGMENTO_DE_DATOS"})]})]}):o.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-12 gap-8 h-fit",children:[o.jsxs("div",{className:"col-span-12 p-12 rounded-[40px] bg-white/5 border border-white/10 backdrop-blur-3xl shadow-2xl",children:[o.jsx("span",{className:"text-[10px] font-black text-[var(--accent)] uppercase tracking-[0.4em] mb-6 block",children:"Visualizacin_Infinitia"}),o.jsx("div",{className:"h-64 bg-black/40 rounded-3xl border border-white/5 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 opacity-30",children:[o.jsx(L.Search,{size:32}),o.jsx("span",{className:"text-xs font-mono uppercase",children:"Esperando_Carga_de_Datos..."})]})})]}),o.jsx("div",{className:"col-span-4 h-48 rounded-[30px] bg-white/5 border border-white/5"}),o.jsx("div",{className:"col-span-4 h-48 rounded-[30px] bg-white/5 border border-white/5"}),o.jsx("div",{className:"col-span-4 h-48 rounded-[30px] bg-white/5 border border-white/5"})]})}),d&&o.jsxs("aside",{className:"w-80 border-l border-white/5 bg-black/40 backdrop-blur-xl p-6 flex flex-col gap-6 animate-in slide-in-from-right duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-widest",children:"Ajustes_Locales"}),o.jsx("button",{onClick:()=>h(null),className:"text-white/20 hover:text-white/60",children:o.jsx(L.Close,{size:18})})]}),o.jsxs("div",{className:"p-5 rounded-2xl bg-white/5 border border-white/10 flex flex-col gap-4",children:[o.jsxs("span",{className:"text-[10px] font-bold text-[var(--accent)] uppercase",children:["Configuracin de ",d]}),d==="db_id"&&a.toUpperCase().includes("NOTION")?o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-[9px] text-white/40 leading-relaxed uppercase font-black",children:"Paso 1: Pega tu Database ID de Notion"}),o.jsx("input",{type:"text",placeholder:"8f92-xxxx-xxxx-xxxx",className:"w-full h-10 rounded-lg bg-black/60 border border-[var(--accent)]/30 px-3 text-[10px] font-mono text-[var(--accent)] outline-none"}),o.jsx("button",{className:"w-full py-2 rounded-lg bg-[var(--accent)] text-black text-[10px] font-black uppercase tracking-widest hover:scale-105 transition-all",onClick:()=>n("LOG_ENTRY",{msg:" Sincronizando tabla de Notion...",type:"INFO"}),children:"Vincular Tabla"})]}):o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 h-10 rounded-lg bg-black/40 border border-white/10 flex items-center px-4 text-xs font-mono text-white/80",children:(p=S.find(v=>v.id===d))==null?void 0:p.value}),o.jsx("button",{className:"p-3 rounded-lg bg-[var(--accent)] text-black",children:o.jsx(L.Check,{size:16})})]})]}),o.jsxs("div",{className:"flex-1 border-2 border-dashed border-white/5 rounded-3xl flex flex-col items-center justify-center p-8 gap-4 opacity-30",children:[o.jsx(L.Connect,{size:24}),o.jsx("p",{className:"text-[9px] text-center font-medium leading-relaxed",children:"Arrastra un nodo del Grafo hasta este panel para **Vincular** esta propiedad globalmente."})]})]})]})]})]})},Ro=({data:e,perspective:t="STANDARD"})=>{var _,f;const{state:r,execute:n}=q(),[s,a]=T.useState(""),[i,l]=T.useState({key:null,direction:"asc"}),c=e.id||((_=e.data)==null?void 0:_.id),d=e.ACCOUNT_ID||((f=e.data)==null?void 0:f.ACCOUNT_ID),h=T.useMemo(()=>{var p,v;if(e.ORIGIN_SOURCE)return e.ORIGIN_SOURCE.toLowerCase();if((p=e.data)!=null&&p.ORIGIN_SOURCE)return e.data.ORIGIN_SOURCE.toLowerCase();const u=(v=r.phenotype.siloMetadata)==null?void 0:v[c];return u!=null&&u.ORIGIN_SOURCE?u.ORIGIN_SOURCE.toLowerCase():(console.error(`[DatabaseEngine]  ORIGIN_SOURCE missing for artifact: ${c}`),console.error("[DatabaseEngine] This is a contract violation. Data should be hydrated by ComponentProjector."),null)},[e,c,r.phenotype.siloMetadata]),m=T.useMemo(()=>{var p,v,y,b,A;let u=[];if(Array.isArray(e.items))u=e.items;else if(Array.isArray(e.results))u=e.results;else if(Array.isArray(e.rows))u=e.rows;else if(Array.isArray((p=e.data)==null?void 0:p.results))u=e.data.results;else if(Array.isArray((v=e.data)==null?void 0:v.items))u=e.data.items;else if(Array.isArray((y=e.data)==null?void 0:y.rows))u=e.data.rows;else{const w=c,O=(b=r.phenotype.silos)==null?void 0:b[w];O&&(u=Array.isArray(O)?O:O.results||O.items||O.rows||[])}return u.length===0&&((A=r.sovereignty)==null?void 0:A.mode)!=="LIVE"&&(u=Dh[c]||[]),u.map(w=>w&&typeof w=="object"&&w.fields?w.fields:w)},[e,c,r.phenotype.silos]);ve.useEffect(()=>{if(m.length===0&&c&&h){console.log(`[DatabaseEngine]  Auto-Reifying ${c} from ${h}`);const u=e.technical_id||e.external_id||c;n("FETCH_DATABASE_CONTENT",{databaseId:u,nodeId:h,accountId:d})}else m.length===0&&c&&!h&&console.warn(`[DatabaseEngine]  Cannot auto-reify ${c}: origin source unknown`)},[c,e.technical_id,e.external_id,h]);const x=()=>{if(!h){console.warn(`[DatabaseEngine]  Cannot resync ${c}: origin source unknown`);return}n("FETCH_DATABASE_CONTENT",{databaseId:c,nodeId:h,accountId:d,refresh:!0})},E=T.useMemo(()=>{var u,p,v;return(u=e.SCHEMA)!=null&&u.columns?e.SCHEMA.columns:(v=(p=e.data)==null?void 0:p.SCHEMA)!=null&&v.columns?e.data.SCHEMA.columns:m.length===0?[]:Object.keys(m[0]).filter(y=>!y.startsWith("_")).map(y=>({id:y,label:y.replace(/_/g," ").toUpperCase(),type:typeof m[0][y]=="number"?"NUMBER":"STRING"}))},[e,m]),g=T.useMemo(()=>{let u=[...m];return s&&(u=u.filter(p=>Object.values(p).some(v=>String(v).toLowerCase().includes(s.toLowerCase())))),i.key&&u.sort((p,v)=>p[i.key]<v[i.key]?i.direction==="asc"?-1:1:p[i.key]>v[i.key]?i.direction==="asc"?1:-1:0),u},[m,s,i]),S=u=>{l(p=>({key:u,direction:p.key===u&&p.direction==="asc"?"desc":"asc"}))};return o.jsxs("div",{className:"w-full h-full flex flex-col bg-[var(--bg-deep)] overflow-hidden animate-in fade-in duration-700",children:[o.jsxs("header",{className:"px-8 py-6 border-b border-white/5 bg-black/20 flex items-center justify-between shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--accent)]/10 border border-[var(--accent)]/20 flex items-center justify-center text-[var(--accent)]",children:o.jsx(L.List,{size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-white/90 leading-none",children:e.LABEL||"Database_Grid"}),o.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-[0.2em]",children:"Structure_Mode: SYMMETRIC"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",placeholder:"FILTRAR REALIDAD...",value:s,onChange:u=>a(u.target.value),className:"bg-black/40 border border-white/10 rounded-full px-5 py-2 text-[10px] font-mono text-[var(--text-soft)] outline-none focus:border-[var(--accent)]/50 w-64 transition-all"}),o.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[var(--text-dim)]",children:o.jsx(L.Search,{size:12})})]}),o.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-full hover:bg-white/10 transition-all text-[9px] font-black uppercase tracking-widest text-[var(--text-dim)] hover:text-white",children:[o.jsx(L.Sync,{size:12}),o.jsx("span",{children:"Resync"})]}),o.jsx("button",{className:"w-8 h-8 rounded-full bg-[var(--accent)] text-black flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-lg shadow-[var(--accent)]/20",children:o.jsx(L.Download,{size:14})})]})]}),o.jsxs("div",{className:"flex-1 overflow-auto custom-scrollbar relative",children:[o.jsx("div",{className:"absolute inset-0 opacity-[0.02] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"40px 40px"}}),o.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px] relative z-10",children:[o.jsx("thead",{className:"sticky top-0 z-20 bg-[var(--bg-deep)]/80 backdrop-blur-xl",children:o.jsx("tr",{children:E.map(u=>o.jsx("th",{onClick:()=>S(u.id),className:"px-8 py-5 border-b border-white/10 text-[10px] font-black text-[var(--text-dim)] uppercase tracking-[0.2em] cursor-pointer hover:text-[var(--accent)] transition-colors group",children:o.jsxs("div",{className:"flex items-center gap-2",children:[u.label,o.jsx("span",{className:`opacity-0 group-hover:opacity-100 transition-opacity ${i.key===u.id?"opacity-100 text-[var(--accent)]":""}`,children:i.key===u.id?i.direction==="asc"?"":"":""})]})},u.id))})}),o.jsx("tbody",{children:g.length>0?g.map((u,p)=>o.jsx("tr",{className:"border-b border-white/[0.03] hover:bg-[var(--accent)]/[0.02] group transition-colors",children:E.map(v=>o.jsx("td",{className:"px-8 py-4 text-xs font-mono text-[var(--text-soft)] opacity-70 group-hover:opacity-100 transition-opacity",children:v.type==="NUMBER"?o.jsx("span",{className:"text-[var(--accent)]/80",children:u[v.id]}):typeof u[v.id]=="object"&&u[v.id]!==null?Array.isArray(u[v.id])?o.jsx("span",{className:"text-[9px] opacity-60 ellipsis",children:JSON.stringify(u[v.id]).slice(0,50)}):o.jsx("span",{className:"text-[9px] font-mono text-[var(--warning)]",children:JSON.stringify(u[v.id]).slice(0,30)}):u[v.id]},v.id))},u.id||p)):o.jsx("tr",{children:o.jsx("td",{colSpan:E.length,className:"px-8 py-20 text-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 opacity-20",children:[o.jsx(L.Inbox,{size:48}),o.jsx("span",{className:"text-xs font-mono uppercase tracking-[0.3em]",children:"No_Data_Refracted_In_This_Vector"})]})})})})]})]}),o.jsxs("footer",{className:"h-10 px-8 border-t border-white/5 bg-black/40 backdrop-blur-xl flex items-center justify-between shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4 text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--success)] shadow-[0_0_5px_var(--success)]"}),o.jsx("span",{children:"Protocol: NOMINAL"})]}),o.jsx("div",{className:"w-[1px] h-3 bg-white/10"}),o.jsxs("span",{children:["Total_Entries: ",g.length]}),o.jsx("div",{className:"w-[1px] h-3 bg-white/10"}),o.jsxs("span",{children:["Active_Schema: ",e.schemaId||"DYNAMIC_INFERENCE"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-3 py-1 bg-white/5 border border-white/5 rounded text-[8px] font-mono hover:bg-white/10 text-[var(--text-dim)]",children:"PREV"}),o.jsx("button",{className:"px-3 py-1 bg-white/5 border border-white/5 rounded text-[8px] font-mono hover:bg-white/10 text-[var(--text-dim)]",children:"NEXT"})]})]})]})},Lo={VAULT:ps,BRIDGE:ps,FILES:ps,DATABASE:Ro,GRID:Ro,DATAGRID:Ro,COMMUNICATION:Zn,MAIL:Zn,MESSAGING:Zn,CHAT:Zn,NODE:Qt,AGENT:Qt,SERVICE:mm,REALITY:sc,COSMOS:sc,SLOT:xm,WIDGET:Qt,ADAPTER:Qt,DEFAULT:Qt},vm=e=>{const t=(e||"DEFAULT").toUpperCase(),r=Lo[t]||Lo.DEFAULT;return Lo[t]||console.warn(`[ArchetypeRegistry] Unknown archetype: ${t}. Falling back to NODE.`),r},gm=({currentArtifact:e})=>{var l,c;const{state:t,execute:r}=q();if(!e)return null;const n=((l=t.phenotype.devLab)==null?void 0:l.perspective)||"VAULT",s=e.ARCHETYPE,a=((c=t.phenotype.artifacts)==null?void 0:c.filter(d=>{const h=d.ARCHETYPE;return(h===s||(s==="VAULT"||s==="BRIDGE")&&(h==="VAULT"||h==="BRIDGE"))&&d.id!==e.id&&!d._isDeleted}))||[],i=e.ARCHETYPES||[e.ARCHETYPE];return i.length<=1&&a.length===0?null:o.jsxs(o.Fragment,{children:[a.length>0&&o.jsxs("div",{className:"fixed left-8 top-1/2 -translate-y-1/2 z-[400] group/origins flex items-center animate-in fade-in slide-in-from-left-4 duration-1000",children:[o.jsx("div",{className:"flex flex-col gap-2 p-1.5 glass border border-[var(--border-subtle)] rounded-full shadow-2xl pointer-events-auto",children:o.jsxs("div",{className:"w-10 h-10 rounded-full flex flex-col items-center justify-center relative cursor-pointer group-hover/origins:scale-110 transition-transform duration-500 bg-[var(--bg-deep)]/40 border border-white/5",children:[o.jsx(L.Sync,{size:14,className:"text-[var(--accent)] animate-pulse"}),o.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-[var(--accent)] text-black text-[8px] font-black flex items-center justify-center shadow-[0_0_10px_var(--accent-glow)]",children:a.length})]})}),o.jsxs("div",{className:"absolute left-16 top-1/2 -translate-y-1/2 flex flex-col gap-3 p-4 bg-[var(--bg-deep)]/95 backdrop-blur-3xl border border-white/10 rounded-[2rem] opacity-0 scale-95 translate-x-[-20px] pointer-events-none group-hover/origins:opacity-100 group-hover/origins:scale-100 group-hover/origins:translate-x-0 group-hover/origins:pointer-events-auto transition-all duration-500 shadow-[0_30px_100px_rgba(0,0,0,0.8)]",children:[o.jsxs("header",{className:"px-2 py-1 flex flex-col gap-1 border-b border-white/5 mb-2",children:[o.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] tracking-[0.3em] uppercase opacity-60",children:"Matrix_Peers"}),o.jsx("span",{className:"text-[10px] font-bold text-white/40 uppercase",children:"Orgenes Equivalentes"})]}),o.jsx("div",{className:"flex flex-col gap-2 max-h-[40vh] overflow-y-auto custom-scrollbar pr-2",children:a.map(d=>o.jsxs("button",{onClick:()=>r("SELECT_ARTIFACT",d.id),className:"w-56 flex items-center gap-4 p-3 rounded-2xl bg-white/[0.03] border border-transparent hover:border-[var(--accent)]/30 hover:bg-[var(--accent)]/10 transition-all text-left group/btn",children:[o.jsx("div",{className:"w-9 h-9 rounded-xl bg-[var(--bg-primary)] border border-white/5 flex items-center justify-center text-[var(--text-dim)] shadow-inner group-hover/btn:text-[var(--accent)] transition-colors",children:d.ARCHETYPE==="VAULT"||d.ARCHETYPE==="BRIDGE"?o.jsx(L.Vault,{size:16}):d.ARCHETYPE==="DATABASE"||d.ARCHETYPE==="GRID"?o.jsx(L.List,{size:16}):d.ARCHETYPE==="NODE"?o.jsx(L.Lab,{size:16}):o.jsx(L.System,{size:16})}),o.jsxs("div",{className:"flex flex-col overflow-hidden",children:[o.jsx("span",{className:"text-[11px] font-bold text-[var(--text-soft)] truncate group-hover/btn:text-white transition-colors",children:d.LABEL||d.label}),o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-tighter opacity-50",children:d.id})]})]},d.id))})]})]}),i.length>1&&o.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[400] pointer-events-auto group/hood",children:o.jsxs("div",{className:"flex items-center gap-1 p-1 glass border border-[var(--border-subtle)] rounded-full shadow-2xl animate-in slide-in-from-bottom-8 duration-1000 transition-all group-hover/hood:scale-[1.02]",children:[o.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border-r border-white/10 mr-1",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] shadow-[0_0_10px_var(--accent-glow)] animate-pulse"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] tracking-[0.3em] uppercase leading-none mb-0.5",children:"Matrix_Support"}),o.jsx("span",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest leading-none",children:"Perspectives"})]})]}),o.jsx("div",{className:"flex items-center gap-1 px-1",children:i.map(d=>o.jsx("button",{onClick:()=>r("SET_LAB_PERSPECTIVE",d),className:`
                                        h-9 px-8 rounded-full text-[9px] font-black tracking-[0.2em] uppercase transition-all duration-500
                                        ${n===d?"bg-[var(--accent)] text-black shadow-[0_0_20px_rgba(var(--accent-rgb),0.5)] scale-105 z-10":"text-[var(--text-dim)] hover:text-white hover:bg-white/5"}
                                    `,children:d},d))})]})})]})},Ln=({componentId:e,data:t,perspective:r="VAULT",schemaId:n,slotId:s,onCommit:a,onCancel:i})=>{const{state:l}=q();if(r==="SCHEMA_PROJECTION")return o.jsx(Ed,{schemaId:n,onCommit:a,onCancel:i});let c=t||X.getCanon(e);if(c&&(!c.LABEL||!c.ARCHETYPE)){const p=X.getCanon(e||c.id||c.ID);p&&(c={...p,...c})}if(!c)return o.jsxs("div",{className:"p-10 text-[var(--error)] font-mono border border-[var(--error)]/20 rounded-xl bg-[var(--error)]/5",children:["[FATAL] CANON_NOT_FOUND: ",e]});const d=ve.useMemo(()=>{var y;const p=c.id||c.ID||e,v=(y=l.phenotype.silos)==null?void 0:y[p];return v&&typeof v=="object"&&!Array.isArray(v)?(console.log(`[ComponentProjector]  Hydrated canon with silo data for ${p}`,{hasOriginSource:!!v.ORIGIN_SOURCE,hasSchema:!!v.SCHEMA,hasPagination:!!v.PAGINATION}),{...c,...v}):c},[c,e,l.phenotype.silos]),h=d.LABEL||d.label||"UNIT_SKELETON",m=d.ARCHETYPE||d.archetype||(d.ARCHETYPES?d.ARCHETYPES[0]:"ADAPTER"),x=d.DOMAIN||d.domain||"SYSTEM";!d.LABEL&&!d.ARCHETYPE&&console.warn(`[Projector] Partial Contract for ${e}. Normalizing...`);const E=ve.useMemo(()=>({...d,id:d.id||d.ID||e,LABEL:h,ARCHETYPE:m.toUpperCase(),DOMAIN:x.toUpperCase(),CAPABILITIES:d.CAPABILITIES||d.capabilities||{}}),[d,e,h,m,x]),g=ve.useMemo(()=>E.ARCHETYPES||[E.ARCHETYPE],[E]),[S,_]=ve.useState(null);let f=S&&g.includes(S)?S:g.includes("DATABASE")?"DATABASE":g.includes("VAULT")?"VAULT":g[0];ve.useEffect(()=>{S!==f&&_(f)},[f]);let u=vm(f);return r==="NODE"&&(u=Qt),o.jsxs("div",{className:"flex flex-col h-full relative",children:[o.jsx(gm,{currentArtifact:E}),o.jsx("div",{className:"flex-1 overflow-hidden relative",children:o.jsx(u,{data:E,perspective:r,slotId:s},`${e}-${f}`)})]})},Sd=({onSelect:e,onClose:t})=>{const[r,n]=T.useState(""),s=T.useMemo(()=>{const i=X.ontology||{},l=Object.keys(i);return l.length===0?[]:l},[]),a=T.useMemo(()=>s.filter(i=>i.toLowerCase().includes(r.toLowerCase())),[s,r]);return o.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",onClick:t,children:o.jsxs("div",{className:"w-[400px] max-h-[60vh] bg-[var(--bg-deep)] border border-[var(--border-vibrant)]/50 rounded-2xl shadow-[0_0_40px_rgba(0,0,0,0.6)] flex flex-col overflow-hidden animate-in scale-95 duration-200",onClick:i=>i.stopPropagation(),children:[o.jsxs("div",{className:"p-4 border-b border-[var(--border-subtle)] bg-[var(--bg-secondary)]/30 flex items-center gap-3",children:[o.jsx(L.Search,{size:16,className:"text-[var(--accent)]"}),o.jsx("input",{type:"text",className:"flex-1 bg-transparent border-none text-[var(--text-vibrant)] placeholder:text-[var(--text-dim)] focus:outline-none font-medium text-sm",placeholder:"Select Adapter Protocol...",value:r,onChange:i=>n(i.target.value),autoFocus:!0}),o.jsx("button",{onClick:t,className:"text-[var(--text-dim)] hover:text-[var(--text-soft)]",children:o.jsx(L.Close,{size:16})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 bg-dot-pattern scrollbar-thin scrollbar-thumb-[var(--border-subtle)]",children:a.length>0?a.map(i=>{const l=X.getLabel(i)||i;return o.jsxs("button",{onClick:()=>e(i),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-[var(--accent)]/10 hover:border-[var(--accent)]/30 border border-transparent transition-all group text-left mb-1",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded bg-[var(--bg-primary)] border border-[var(--border-subtle)] flex items-center justify-center text-[var(--text-dim)] group-hover:text-[var(--accent)] group-hover:border-[var(--accent)]/50 font-mono text-xs font-bold",children:i.substring(0,2)}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-xs font-bold text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)]",children:l.toUpperCase()}),o.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-50",children:i})]})]}),o.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(L.ChevronDown,{size:14,className:"-rotate-90 text-[var(--accent)]"})})]},i)}):o.jsx("div",{className:"p-8 text-center text-[var(--text-dim)] text-xs font-mono",children:"NO MATCHES"})}),o.jsx("div",{className:"p-2 border-t border-[var(--border-subtle)] bg-[var(--bg-primary)] text-center",children:o.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] tracking-widest opacity-50",children:"SELECT TARGET TO INSPECT"})})]})})},ym=e=>({igniteChaosTest:async n=>{try{console.error("[CHAOS_ENGINE]  IGNITING PERSISTENCE STRESS TEST..."),n(!0),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" REACTOR_IGNITION: Iniciando Tormenta de Entropa Negativa...",type:"WARN"}),console.error("[CHAOS_ENGINE]  Phase 1: Causal Storm");const s=[];for(let a=0;a<8;a++){const i=`temp_chaos_${a}_${Date.now()}`;s.push(i),e("ADD_ARTIFACT_REQUEST",{artifact:{id:i,LABEL:`Chaos_Node_${a}`,type:"FILE_NODE"},position:{x:Math.random()*500,y:Math.random()*500}}),a>0&&e("ADD_RELATIONSHIP",{source:s[a-1],target:i,type:"CAUSAL_LINK"})}await new Promise(a=>setTimeout(a,800)),console.error("[CHAOS_ENGINE]  Phase 2: Homeostasis Flood");for(let a=0;a<20;a++)e("UPDATE_ARTIFACT_POSITION",{nodeId:s[0],x:Math.random()*1e3,y:Math.random()*1e3});await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" PRESIN_SISTMICA: Verificando estabilidad del SyncOrchestrator...",type:"INFO"}),await new Promise(a=>setTimeout(a,2e3)),console.error("[CHAOS_ENGINE]  Phase 3: Kinetic Dissonance"),s.forEach(a=>{e("UPDATE_ARTIFACT_POSITION",{nodeId:a,x:400,y:400})}),await new Promise(a=>setTimeout(a,3e3)),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" CONSTANCIA_DETERMINSTICA: Test Finalizado. Verifique en consola.",type:"SUCCESS"}),n(!1),console.error("[CHAOS_ENGINE]  Chaos sequence stabilized.")}catch(s){console.error("[CHAOS_ENGINE]  CRITICAL_STRESS_FAILURE:",s),n(!1)}},v12SovereigntyAudit:async n=>{var s,a;try{console.error("[CHAOS_ENGINE]  STARTING V12 SOVEREIGNTY AUDIT..."),n(!0),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" INICIANDO AUDITORA V12: Soberana de Snapshot...",type:"WARN"}),console.error("[CHAOS_ENGINE]  Phase 1: Sovereign Construction");const i=[];for(let m=0;m<5;m++){const x=`sov_node_${m}_${Date.now()}`;i.push(x),e("ADD_ARTIFACT_REQUEST",{artifact:{id:x,LABEL:`Sovereign_Node_${m}`,type:"FILE_NODE"},position:{x:100+m*100,y:200}})}await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 1: Nodos creados localmente. Soberana validada.",type:"INFO"}),await new Promise(m=>setTimeout(m,1e3)),console.error("[CHAOS_ENGINE]  Phase 2: Piggybacking Trigger"),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 2: Disparando consulta al Core con Snapshot Polizn...",type:"INFO"}),console.error("[CHAOS_ENGINE]  Capturing snapshot for deep verification...");const l=(a=(s=window.useSyncOrchestrator)==null?void 0:s.getState)==null?void 0:a.call(s),c=l?JSON.stringify(l.prepareSnapshot()):null;await e("START_DISCOVERY"),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 2: Consulta finalizada. Verificando integridad de la realidad...",type:"SUCCESS"});const d=l?JSON.stringify(l.prepareSnapshot()):null,h=c===d;await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:h?" INTEGRIDAD_OK: La realidad local se mantuvo inalterada tras la sincrona.":" DRIFT_DETECTADO: La realidad local cambi durante/tras la sincrona (Esperado si hubo drift previo).",type:h?"SUCCESS":"WARN"}),console.error("[CHAOS_ENGINE]  Phase 3: Kinetic Drift");for(let m=0;m<10;m++)e("UPDATE_ARTIFACT_POSITION",{nodeId:i[0],x:Math.random()*800,y:Math.random()*600});await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" FASE 3: Deriva cintica completada sin bloqueo de red.",type:"INFO"}),await new Promise(m=>setTimeout(m,2e3)),await e("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" AUDITORA COMPLETADA. Recargue la pgina para verificar Persistencia de Hitos.",type:"SUCCESS"}),n(!1),console.error("[CHAOS_ENGINE]  V12 Audit stabilized.")}catch(i){console.error("[CHAOS_ENGINE]  V12_AUDIT_FAILURE:",i),n(!1)}}}),Em=({state:e,execute:t})=>{var a;const r=e.phenotype.cosmosIdentity,n=e.sovereignty.revisionHash||((a=e.phenotype.cosmosIdentity)==null?void 0:a._revisionHash),s=()=>{!r&&!confirm("No hay un Cosmos activo. Disparar pulso de resonancia al vaco?")||(t("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" Propagating Reality Touch (Resonance Pulse)...",type:"INFO"}),t("SET_LAYOUT_DIRTY",!0))};return o.jsxs("div",{className:"flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[o.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] space-y-4 shadow-inner",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-widest opacity-70",children:"Active_Cosmos_ID"}),o.jsx("span",{className:"text-[10px] font-mono text-[var(--text-soft)] truncate",children:(r==null?void 0:r.id)||"NO_COSMOS_MOUNTED"})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-widest opacity-70",children:"Sovereign_Hash"}),o.jsx("code",{className:"text-[9px] font-mono text-[var(--success)] bg-black/40 px-2 py-1 rounded border border-[var(--success)]/20 shadow-[0_0_10px_rgba(34,197,94,0.05)]",children:n||"AWAITING_GENESIS"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("span",{className:"text-[9px] font-black text-[var(--text-dim)] uppercase tracking-widest block",children:"Core Protocols"}),o.jsxs("button",{onClick:s,className:"w-full py-2.5 rounded-lg border border-[var(--accent)]/30 bg-[var(--accent)]/5 text-[var(--accent)] font-bold text-[9px] tracking-[0.2em] uppercase hover:bg-[var(--accent)]/10 transition-all active:scale-95 mb-2 group overflow-hidden relative",children:[o.jsx("span",{className:"relative z-10",children:"Touch_Reality"}),o.jsx("div",{className:"absolute inset-0 bg-[var(--accent)]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})]}),o.jsxs("div",{className:"p-4 rounded-xl border border-blue-500/20 bg-blue-500/5 backdrop-blur-sm",children:[o.jsx("span",{className:"text-[8px] font-black text-blue-400 uppercase tracking-widest block mb-1",children:"Axiomatic Verification V12"}),o.jsxs("ul",{className:"text-[9px] text-blue-200/60 space-y-1.5 list-none",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Snapshot Sovereignty Protocol."]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Piggybacking Persistence Layer."]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1 h-1 rounded-full bg-blue-500/40"})," Revision Locking Protocol."]})]})]})]})},Sm=({state:e,execute:t,selectedId:r,isDnaOpen:n})=>{var i,l;const[s,a]=T.useState("STRUCTURE");return o.jsx("div",{className:`absolute top-0 right-0 h-full w-[450px] glass border-l border-white/5 z-20 transition-transform duration-700 ease-out backdrop-blur-3xl shadow-[-20px_0_50px_rgba(0,0,0,0.5)] ${n?"translate-x-0":"translate-x-full"}`,children:o.jsxs("div",{className:"h-full overflow-hidden flex flex-col p-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-10 py-2 border-b border-white/5",children:[o.jsxs("h2",{className:"text-sm font-black tracking-[0.4em] text-[var(--accent)] flex items-center gap-3",children:[o.jsx(L.Lab,{size:18})," GENOTYPE INSPECTOR"]}),o.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"dna"}),className:"p-2 hover:bg-white/10 rounded-full transition-all active:rotate-90",children:o.jsx(L.Close,{size:18,className:"text-white/40"})})]}),o.jsx("div",{className:"flex gap-6 mb-6 border-b border-white/10",children:["STRUCTURE","VITAL_LOGS","REALITY"].map(c=>o.jsxs("button",{onClick:()=>a(c),className:`text-[10px] font-bold tracking-widest pb-3 transition-all relative ${s===c?"text-[var(--accent)]":"text-[var(--text-dim)] hover:text-white"}`,children:[c,s===c&&o.jsx("div",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-[var(--accent)] shadow-[0_0_10px_var(--accent)]"})]},c))}),o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[s==="STRUCTURE"&&o.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar bg-black/20 rounded-xl p-4 border border-white/5",children:o.jsx("pre",{className:"text-[10px] font-mono text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed",children:e.genotype?(()=>{const c=e.genotype.COMPONENT_REGISTRY||{},d=Object.keys(c).find(m=>m.toUpperCase()===(r==null?void 0:r.toUpperCase())),h=d?c[d]:{ERROR:"ATOM_NOT_IN_REGISTRY",TARGET:r,FULL_REGISTRY_KEYS:Object.keys(c)};return JSON.stringify(h,null,2)})():o.jsxs("div",{className:"flex flex-col items-center justify-center h-40 opacity-50",children:[o.jsx("div",{className:"animate-spin mb-3",children:""}),o.jsx("span",{className:"text-[8px] tracking-[0.2em]",children:"AWAITING_CORE_GENOTYPE..."})]})})}),s==="VITAL_LOGS"&&o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-black/20 rounded-xl border border-white/5",children:[o.jsxs("div",{className:"p-3 border-b border-white/5 flex justify-between items-center bg-black/20",children:[o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-[0.2em]",children:"Operational Stream"}),o.jsxs("span",{className:"text-[8px] font-mono text-[var(--success)] opacity-50",children:[((i=e.phenotype.logs)==null?void 0:i.length)||0," ENTRIES"]})]}),o.jsx("div",{className:"flex-1 overflow-auto custom-scrollbar font-mono text-[9px] flex flex-col-reverse p-2",children:(l=e.phenotype.logs)==null?void 0:l.map((c,d)=>o.jsxs("div",{className:`flex gap-3 py-1.5 px-2 border-b border-white/5 animate-in fade-in slide-in-from-left-2 duration-300 ${c.type==="ERROR"?"text-red-400 bg-red-400/5":c.type==="SUCCESS"?"text-[var(--success)] bg-green-400/5":c.type==="WARN"?"text-orange-400 bg-orange-400/5":"text-[var(--text-dim)] hover:bg-white/5"}`,children:[o.jsxs("span",{className:"opacity-30 shrink-0",children:["[",c.time,"]"]}),o.jsx("span",{className:"break-words",children:c.msg})]},d))})]}),s==="REALITY"&&o.jsx(Em,{state:e,execute:t})]})]})})},Nm=({componentId:e,data:t,perspective:r,isTesting:n})=>{var l;const{state:s}=q(),i=t||((l=s.phenotype.artifacts)==null?void 0:l.find(c=>c.id===e))||{id:e};return o.jsxs("div",{className:`absolute inset-0 z-0 transition-all duration-1000 ease-[cubic-bezier(0.16,1,0.3,1)] 
            ${n?"scale-[0.98] opacity-60 blur-[2px] grayscale-[0.3]":"scale-100 opacity-100"}`,children:[o.jsx("div",{className:"w-full h-full flex items-center justify-center p-6 md:p-12 lg:p-20 bg-[radial-gradient(circle_at_center,_var(--bg-secondary)_0%,_transparent_70%)] opacity-30 pointer-events-none"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-8 md:p-14 lg:p-24 overflow-hidden",children:o.jsxs("div",{className:"w-full h-full max-w-[1800px] max-h-[1000px] flex flex-col relative group/deck",children:[o.jsxs("div",{className:"absolute -top-6 -left-2 flex flex-col gap-1 z-20 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 bg-[var(--accent)] animate-pulse shadow-[0_0_8px_var(--accent)]"}),o.jsx("span",{className:"text-[8px] font-black text-[var(--accent)] uppercase tracking-[0.3em]",children:"Televisor_Ready"})]}),o.jsx("div",{className:"h-[1px] w-20 bg-gradient-to-r from-[var(--accent)] to-transparent opacity-30"})]}),o.jsxs("div",{className:"absolute -top-6 -right-2 flex flex-col items-end gap-1 z-20",children:[o.jsxs("span",{className:"text-[7px] font-mono text-white/30 uppercase",children:["Perspective: ",r]}),o.jsx("div",{className:"flex gap-1",children:[0,1,2].map(c=>o.jsx("div",{className:"w-3 h-0.5 bg-white/10"},c))})]}),o.jsxs("div",{className:`
                        flex-1 glass rounded-[3rem] border border-white/5 shadow-[0_50px_100px_rgba(0,0,0,0.8)] 
                        relative flex flex-col overflow-hidden transition-all duration-700
                        ${n?"border-orange-500/30 ring-1 ring-orange-500/10":"hover:border-white/10"}
                    `,children:[o.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02]",style:{backgroundImage:"linear-gradient(var(--accent) 1px, transparent 1px), linear-gradient(90deg, var(--accent) 1px, transparent 1px)",backgroundSize:"40px 40px"}}),o.jsx("div",{className:"flex-1 relative overflow-hidden",children:o.jsx(Ln,{componentId:e,data:i,perspective:r})}),o.jsxs("div",{className:"h-8 bg-black/40 border-t border-white/5 backdrop-blur-md flex items-center justify-between px-10",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("span",{className:"text-[7px] font-mono text-white/20 uppercase tracking-widest",children:["Target_ID: ",e]}),o.jsx("div",{className:"w-1 h-3 bg-white/5 rounded-full"}),o.jsx("span",{className:"text-[7px] font-black text-[var(--accent)]/40 uppercase tracking-tighter",children:"Diagnostic_Affinities: NOMINAL"})]}),o.jsxs("div",{className:"flex gap-2 opacity-20 group-hover/deck:opacity-60 transition-opacity",children:[o.jsx("div",{className:"w-2 h-2 rounded-full border border-white/40"}),o.jsx("div",{className:"w-2 h-2 rounded-full border border-white/40"})]})]})]}),o.jsx("div",{className:"absolute -inset-10 bg-[var(--accent)]/5 blur-[100px] rounded-full opacity-20 pointer-events-none -z-10 animate-pulse"})]})})]})},bm=({activeTarget:e,activePerspective:t,onSelectTarget:r,onSelectPerspective:n,isMockEnabled:s,onToggleMock:a,isTesting:i,onRunChaosTest:l,onRunAudits:c,onRunDiagnostic:d})=>{const[h,m]=T.useState(!1),x=[{id:"VAULT",label:"Vault Engine",icon:L.Vault},{id:"DATABASE",label:"DB Engine",icon:L.Database},{id:"NODE",label:"Node Engine",icon:L.Terminal},{id:"COMMUNICATION",label:"Comm Engine",icon:L.Inbox},{id:"REALITY",label:"Reality Engine",icon:L.Cosmos}],[E,g]=T.useState(!1),[S,_]=T.useState(""),[f,u]=T.useState([]);return T.useEffect(()=>{X.isCompiled||(console.log("[DevLabHood] Forzando compilacin de leyes..."),X.compile());const v=(X.getRenderManifest()||[]).filter(y=>(y.LABEL||y.id).toLowerCase().includes(S.toLowerCase()));u(v.slice(0,50))},[S]),o.jsxs("div",{className:"fixed right-6 top-1/2 -translate-y-1/2 z-[400] flex flex-col items-center gap-8 animate-fade-in-right",children:[o.jsxs("div",{className:"relative group/search",children:[o.jsx("button",{onClick:()=>g(!E),className:`
                       w-11 h-11 rounded-full flex items-center justify-center transition-all duration-300 border
                       ${E?"bg-[var(--bg-secondary)] border-[var(--accent)] text-[var(--accent)]":"glass border-white/5 text-[var(--text-dim)] hover:text-white hover:bg-white/5"}
                   `,title:"Inspector de Artefactos",children:o.jsx(L.Search,{size:18})}),o.jsxs("div",{className:`
                    absolute right-14 top-0 w-64 bg-[var(--bg-deep)] border border-white/10 rounded-xl shadow-2xl p-2
                    transition-all duration-300 origin-top-right overflow-hidden
                    ${E?"opacity-100 scale-100 pointer-events-auto":"opacity-0 scale-95 pointer-events-none"}
                `,children:[o.jsx("input",{type:"text",placeholder:"Buscar ID o Etiqueta...",className:"w-full bg-black/20 text-xs p-2 rounded border border-white/5 focus:border-[var(--accent)] focus:outline-none mb-2 text-white",value:S,onChange:p=>_(p.target.value),autoFocus:!0}),o.jsx("div",{className:"flex flex-col gap-1 max-h-48 overflow-y-auto custom-scrollbar",children:f.map(p=>o.jsxs("button",{onClick:()=>{r(p.id),g(!1)},className:"text-left px-2 py-1.5 hover:bg-white/5 rounded flex items-center justify-between group/item",children:[o.jsx("span",{className:"text-[10px] font-mono text-[var(--text-secondary)] group-hover/item:text-white truncate max-w-[120px]",children:p.LABEL||p.id}),o.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-[var(--text-dim)] bg-white/5 px-1 rounded",children:p.ARCHETYPE||"UNK"})]},p.id))})]})]}),o.jsxs("div",{className:"flex flex-col gap-3 p-2 glass border border-white/5 rounded-full shadow-2xl relative group/vault",children:[o.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 opacity-0 group-hover/vault:opacity-100 transition-opacity whitespace-nowrap",children:o.jsx("span",{className:"text-[7px] font-black uppercase tracking-[0.3em] text-[var(--accent)]",children:"Projector_Vault"})}),x.map(p=>o.jsxs("button",{onClick:()=>n(p.id),className:`
                            w-11 h-11 rounded-full flex items-center justify-center transition-all duration-500 relative group/icon
                            ${t===p.id?"bg-[var(--accent)] text-black shadow-[0_0_20px_rgba(var(--accent-rgb),0.5)] scale-110":"text-[var(--text-dim)] hover:text-white hover:bg-white/5 border border-transparent hover:border-white/10"}
                        `,children:[o.jsx(p.icon,{size:20}),o.jsx("div",{className:"absolute right-14 scale-0 group-hover/icon:scale-100 transition-transform origin-right pointer-events-none",children:o.jsx("div",{className:"glass px-3 py-1 rounded-lg border border-white/10 shadow-xl",children:o.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest whitespace-nowrap",children:p.label})})})]},p.id))]}),o.jsxs("div",{className:"flex flex-col gap-2 p-2 glass border border-orange-500/20 rounded-full shadow-2xl relative group/fid",children:[o.jsxs("button",{onClick:a,className:`
                        w-11 h-11 rounded-full flex flex-col items-center justify-center transition-all duration-500 border
                        ${s?"bg-orange-500/10 border-orange-500/40 text-orange-400 shadow-[0_0_20px_rgba(249,115,22,0.3)]":"border-white/5 text-white/20 hover:text-white/60 hover:bg-white/5"}
                    `,title:s?"Realidad Simulada (MOCK)":"Realidad Soberana (LIVE)",children:[o.jsx(L.Sync,{size:16,className:s?"animate-[spin_4s_linear_infinite]":""}),o.jsx("span",{className:"text-[6px] font-black mt-1 tracking-tighter",children:"MOCK"})]}),o.jsxs("div",{className:"relative w-11 h-11 z-[500] flex items-center justify-center",children:[o.jsx("div",{className:`absolute right-0 top-0 h-11 flex items-center bg-black/80 backdrop-blur-xl rounded-full border border-white/10 shadow-2xl overflow-hidden transition-all duration-500 ease-out ${h?"w-[180px] pr-12":"w-11 delay-200"}`,children:o.jsxs("div",{className:`flex items-center gap-1 pl-3 w-full justify-start ${h?"opacity-100 delay-100 duration-500":"opacity-0 duration-0"}`,children:[o.jsx("button",{onClick:l,disabled:i,className:"text-orange-400 hover:text-orange-200 hover:bg-white/10 p-2 rounded-full transition-colors group/item relative",title:"Ignite Chaos Test",children:o.jsx("span",{className:"text-lg grayscale group-hover/item:grayscale-0 transition-all",children:""})}),o.jsx("button",{onClick:c,disabled:i,className:"text-blue-400 hover:text-blue-200 hover:bg-white/10 p-2 rounded-full transition-colors group/item relative",title:"V12 Sovereignty Audit",children:o.jsx("span",{className:"text-lg grayscale group-hover/item:grayscale-0 transition-all",children:""})}),o.jsx("button",{onClick:d,disabled:i,className:"text-emerald-400 hover:text-emerald-200 hover:bg-white/10 p-2 rounded-full transition-colors group/item relative",title:"System Diagnostic",children:o.jsx("span",{className:"text-lg grayscale group-hover/item:grayscale-0 transition-all",children:""})})]})}),o.jsxs("button",{onClick:()=>m(!h),className:`absolute right-0 top-0 z-50 w-11 h-11 rounded-full flex flex-col items-center justify-center transition-all duration-300 border ${h?"bg-blue-600 text-white border-blue-400 rotate-90 shadow-[0_0_15px_rgba(37,99,235,0.5)]":"border-white/5 text-white/20 hover:text-blue-400 hover:bg-blue-500/10 hover:border-blue-500/30"}`,title:"Chaos Commander (Diagnostics)",children:[i?o.jsx("div",{className:"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}):h?o.jsx(L.Close,{size:16}):o.jsx(L.Lab,{size:16}),!h&&o.jsx("span",{className:"text-[6px] font-black mt-1 tracking-tighter",children:"TEST"})]})]}),o.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 whitespace-nowrap",children:o.jsx("span",{className:`text-[6px] font-mono uppercase tracking-[0.2em] ${s?"text-orange-400 animate-pulse":"text-blue-400 opacity-40"}`,children:s?"Input: Synthetic":"Input: Sovereign"})})]})]})},Am=()=>{const{state:e,execute:t}=q(),[r,n]=T.useState(!1),[s,a]=T.useState(!1);F(g=>g.setLoading),F(g=>g.interdiction.active),F(g=>g.interdiction.reason);const i=e.phenotype.devLab||{},l=i.targetId||"DRIVE",c=i.perspective||"VAULT",d=T.useMemo(()=>{var _,f,u,p,v;if(i.isMockEnabled){const y=l==="VAULT"||l==="BRIDGE"?"DRIVE":l,b=ec.COMPONENT_REGISTRY[y]||ec.COMPONENT_REGISTRY[y.toUpperCase()];if(b)return{...b,id:y,_isMock:!0};const A=kh.find(N=>N.id===l);if(A)return{...A,_isMock:!0};const w=((f=(_=ae.L0)==null?void 0:_.COMPONENT_REGISTRY)==null?void 0:f[l])||X.getCanon(l);if(w)return{...w,id:l,_isMock:!0,LABEL:`${w.LABEL||l} (SIM)`,VITAL_SIGNS:{SIMULATION:{criticality:"NOMINAL",value:"ACTIVE",trend:"stable"},LATENCY:{criticality:"WARNING",value:"12ms",trend:"fluctuating"}},data:{columns:[{id:"id",label:"ID",type:"STRING"},{id:"sim_status",label:"SIM_STATUS",type:"TAG"},{id:"throughput",label:"THROUGHPUT",type:"NUMBER"}],rows:[{id:"sim_01",sim_status:"ACTIVE",throughput:120},{id:"sim_02",sim_status:"IDLE",throughput:0},{id:"sim_03",sim_status:"ERROR",throughput:45}]}};let O="SERVICE";return l==="NODE"||l==="ADAPTER"?O="NODE":l==="DATABASE"?O="DATABASE":(l==="VAULT"||l==="FILES")&&(O="VAULT"),{id:l,LABEL:`${l} (GHOST)`,ARCHETYPE:O,DOMAIN:"SYNTHETIC",CAPABILITIES:{ping:{io:"READ",type:"SIGNAL",desc:"Synthetic ping"},trace:{io:"WRITE",type:"LOG",desc:"Log output"}},_isMock:!0}}const g=((p=(u=ae.L0)==null?void 0:u.COMPONENT_REGISTRY)==null?void 0:p[l])||X.getCanon(l);if(g)return g;const S=(v=e.phenotype.artifacts)==null?void 0:v.find(y=>y.id===l);return S||{id:l,LABEL:l.toUpperCase(),ARCHETYPE:l==="VAULT"?"VAULT":"ADAPTER"}},[l,i.isMockEnabled,e.phenotype.artifacts]),h=d.id||d.ID,m=e.phenotype.ui.dnaPanelOpen,x=e.phenotype.ui.chaosPanelOpen,E=T.useMemo(()=>ym(t),[t]);return ae.isIgnited?o.jsxs("div",{className:"w-full h-full relative overflow-hidden bg-[var(--bg-deep)] text-white font-sans",children:[o.jsx(Nm,{componentId:h,data:d,perspective:c,isTesting:s,execute:t}),o.jsx(Sm,{state:e,execute:t,selectedId:h,isDnaOpen:m}),o.jsx(bm,{activeTarget:l,activePerspective:c,onSelectTarget:g=>t("SET_LAB_TARGET",g),onSelectPerspective:g=>t("SET_LAB_PERSPECTIVE",g),isMockEnabled:i.isMockEnabled,onToggleMock:()=>t("TOGGLE_LAB_MOCK"),onToggleChaos:()=>t("TOGGLE_UI_PANEL",{panel:"chaos"}),isChaosOpen:x,isTesting:s,onRunChaosTest:()=>E.igniteChaosTest(a),onRunAudits:()=>E.v12SovereigntyAudit(a),onRunDiagnostic:()=>t("RUN_DIAGNOSTIC")}),r&&o.jsxs("div",{className:"absolute inset-0 z-[1000] flex items-center justify-center animate-in fade-in duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[var(--bg-deep)]/80 backdrop-blur-md",onClick:()=>n(!1)}),o.jsx("div",{className:"relative z-10 animate-in zoom-in-95 duration-300",children:o.jsx(Sd,{onSelect:g=>{t("SET_LAB_TARGET",g),n(!1)},onClose:()=>n(!1)})})]})]}):o.jsxs("div",{className:"w-screen h-screen bg-[var(--bg-deep)] flex flex-col items-center justify-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 border-2 border-[var(--success)]/20 border-t-[var(--success)] rounded-full animate-spin"}),o.jsx("div",{className:"text-[var(--success)] font-mono text-xs tracking-[0.4em] animate-pulse uppercase",children:"Initialising Axiomatic Core..."})]})},Ca=({asOverlay:e=!1,onClose:t})=>{const{execute:r}=q(),[n,s]=T.useState(Lt.SYSTEM_TOKEN||""),[a,i]=T.useState(Lt.CORE_URL||""),[l,c]=T.useState(!1),[d,h]=T.useState(null);T.useEffect(()=>{const x=sessionStorage.getItem("INDRA_BOOT_ERROR");x&&(h(`FALLO_HANDSHAKE: ${x}`),sessionStorage.removeItem("INDRA_BOOT_ERROR"))},[]);const m=async()=>{if(!n||!a){h("FALTAN_CREDENCIALES: Se requiere URL y Clave de Enlace.");return}c(!0),h(null);try{console.log("[PortalDeAcceso] Reconfigurando enlace soberano..."),localStorage.setItem("INDRA_SESSION_TOKEN",n),localStorage.setItem("INDRA_OVERRIDE_URL",a);const{default:x}=await Pr(async()=>{const{default:g}=await Promise.resolve().then(()=>Ta);return{default:g}},void 0);x.init(a,n);const E=await ae.ignite();E.sovereignty==="ACTIVE"?(console.log("[PortalDeAcceso]  Enlace Establecido. Sincronizando realidades..."),e?(r("IGNITE_SYSTEM",{sovereignty:"ACTIVE",genotype:E.genotype}),t&&t()):hh(a)):h(E.error?`ERROR_VETO: ${E.error}`:"ERROR_VETO: El Core rechaz las credenciales o el enlace est roto.")}catch(x){console.error("[PortalDeAcceso] Ignition fail:",x),h(`CORE_INALCANZABLE: ${x.message}`)}finally{c(!1)}};return o.jsx("div",{className:`w-full flex items-center justify-center bg-[var(--bg-primary)] p-6 ${e?"h-auto rounded-3xl":"h-screen"}`,children:o.jsxs("div",{className:`w-full flex flex-col ${e?"gap-6":"max-w-md gap-10"}`,children:[o.jsxs("div",{className:"flex flex-col items-center gap-4 relative",children:[e&&o.jsx("button",{onClick:t,className:"absolute top-0 right-0 p-2 text-[var(--text-dim)] hover:text-[var(--accent)] font-mono text-xs uppercase",children:"[Cerrar] ESC"}),o.jsxs("div",{className:"w-16 h-16 rounded-full border border-[var(--accent)] flex items-center justify-center shadow-[var(--shadow-glow)] relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-[var(--accent)] opacity-5 animate-pulse"}),o.jsx("div",{className:"text-2xl font-black text-[var(--accent)] tracking-tighter",children:"I"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-lg font-black text-[var(--text-primary)] tracking-[0.3em] uppercase",children:"Portal de Soberana"}),o.jsx("p",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-widest mt-1",children:"Capa de Defensa Axiomtica v2.0"})]})]}),d&&o.jsxs("div",{className:"p-4 bg-red-500/5 border border-red-500/20 rounded-xl text-red-500 text-[10px] font-mono leading-relaxed",children:[o.jsx("span",{className:"font-black",children:" FALLO:"})," ",d]}),o.jsxs("div",{className:"flex flex-col gap-6 p-6 bg-[var(--bg-secondary)] border border-[var(--border-subtle)] rounded-2xl glass relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-20"}),o.jsxs("div",{className:"flex flex-col gap-5",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-wider ml-1",children:"URL de Conexin Core"}),o.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),placeholder:"https://script.google.com/...",className:"w-full px-4 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-xl text-[var(--text-primary)] font-mono text-[10px] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-wider ml-1",children:"Clave Soberana (Token)"}),o.jsx("input",{type:"password",value:n,onChange:x=>s(x.target.value),placeholder:"Clave de desencriptado cuntico...",className:"w-full px-4 py-2 bg-[var(--bg-primary)] border border-[var(--border-color)] rounded-xl text-[var(--text-primary)] font-mono text-[10px] focus:outline-none focus:border-[var(--accent)] transition-all"})]})]}),o.jsx("button",{onClick:m,disabled:l,className:`
                            mt-2 py-4 rounded-xl font-black text-[10px] uppercase tracking-[0.4em] transition-all duration-500
                            ${l?"bg-[var(--border-color)] text-[var(--text-dim)] cursor-not-allowed":"bg-[var(--accent)] text-black shadow-[var(--shadow-glow)] hover:scale-[1.01] active:scale-95"}
                        `,children:l?"Sincronizando...":"Vincular Soberana"}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border-color)] flex flex-col gap-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:"Avanzado: Sobrescribir Token en Core"}),o.jsx("div",{className:"h-[1px] flex-1 bg-[var(--border-color)] mx-3"})]}),o.jsx("p",{className:"text-[8px] font-mono text-[var(--text-dim)] opacity-60 leading-tight",children:"Usa esta opcin para registrar tu contrasea actual en el Core. Solo disponible durante la fase 'INDRA_SETUP_CORE'."}),o.jsx("button",{onClick:async()=>{if(!(!n||l)){c(!0);try{const{default:x}=await Pr(async()=>{const{default:g}=await Promise.resolve().then(()=>Ta);return{default:g}},void 0);x.init(a,n);const E=await ae.call("public","setSystemToken",{newToken:n});E&&E.success?(h(` XITO: Token del Core actualizado a ${n.substring(0,3)}... Reiniciando.`),setTimeout(()=>window.location.reload(),2e3)):h("FALLO: El Core rechaz la actualizacin del token.")}catch(x){h(`FALLO_OVERRIDE: ${x.message}`)}finally{c(!1)}}},className:"py-2 rounded-lg border border-[var(--accent)]/30 text-[var(--accent)] font-mono text-[9px] uppercase tracking-widest hover:bg-[var(--accent)]/10 transition-all",children:"Sincronizar Password con el Core"})]})]}),o.jsxs("div",{className:"flex justify-between items-center px-4",children:[o.jsx("div",{className:"text-[8px] font-mono text-[var(--accent)] opacity-50 uppercase tracking-tighter",children:e?"REL_MULTI_CORE_ACTIVO":"MEMBRANA_DE_ACCESO_ACTIVO"}),o.jsx("div",{className:"text-[8px] font-mono text-[var(--text-dim)] opacity-40 uppercase tracking-tighter",children:"Axioma: La conectividad es fluida."})]})]})})},_m=()=>{var v;const[e,t]=T.useState([]),[r,n]=T.useState({}),[s,a]=T.useState(null),[i,l]=T.useState(!1),[c,d]=T.useState(null),[h,m]=T.useState({}),x=F(y=>y.session.hashInitialized),g=F(y=>y.session.isLoading)||i;T.useEffect(()=>{x&&S()},[x]);const S=async()=>{l(!0),d(null);try{const y=await ae.call("cosmos","listAvailableCosmos",{includeAll:!0});y&&y.artifacts&&(t(y.artifacts),_(y.artifacts))}catch(y){console.error("[ArtifactExplorer] Error loading artifacts:",y),d(y.message)}finally{l(!1)}},_=y=>{const b={COSMOS_V1:[],FLOW_V1:[],LAYOUT_V1:[],SYSTEM_V1:[],UNDEFINED:[]};y.forEach(w=>{var N,I,M,R,V,B;const O=w.indx_schema||"UNDEFINED";b[O]?b[O].push(w):(N=w.name)!=null&&N.includes(".flow.")||(I=w.name)!=null&&I.includes(".logic.")||(M=w.name)!=null&&M.includes(".rule.")?b.FLOW_V1.push(w):(R=w.name)!=null&&R.includes(".layout.")?b.LAYOUT_V1.push(w):(V=w.name)!=null&&V.includes(".sys.")||(B=w.name)!=null&&B.includes(".config.")?b.SYSTEM_V1.push(w):b.UNDEFINED.push(w)}),n(b);const A={};Object.keys(b).forEach(w=>{b[w].length>0&&(A[w]=!0)}),m(A)},f=y=>{m(b=>({...b,[y]:!b[y]}))},u=async y=>{a(y)},p=y=>({COSMOS_V1:"",FLOW_V1:"",LAYOUT_V1:"",SYSTEM_V1:"",UNDEFINED:""})[y]||"";return o.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)",fontFamily:"monospace"},children:[o.jsxs("div",{style:{width:"350px",borderRight:"1px solid #333",overflowY:"auto",padding:"20px"},children:[o.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid var(--border-color)"},children:[o.jsx("h2",{style:{margin:0,fontSize:"18px",color:"#00ff88"},children:" Artifact Explorer"}),o.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["Total: ",e.length," artifacts"]})]}),g&&o.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#888"},children:"Loading artifacts..."}),c&&o.jsxs("div",{style:{padding:"10px",backgroundColor:"#ff000020",border:"1px solid #ff0000",borderRadius:"4px",marginBottom:"10px"},children:[" ",c]}),Object.entries(r).map(([y,b])=>b.length>0&&o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsxs("div",{onClick:()=>f(y),style:{padding:"8px",backgroundColor:"var(--bg-secondary)",cursor:"pointer",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[o.jsxs("span",{children:[p(y)," ",y]}),o.jsx("span",{style:{backgroundColor:"var(--bg-deep)",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},children:b.length})]}),h[y]&&o.jsx("div",{style:{paddingLeft:"15px"},children:b.map((A,w)=>{var O,N;return o.jsxs("div",{onClick:()=>u(A),style:{padding:"6px 8px",cursor:"pointer",backgroundColor:(s==null?void 0:s.id)===A.id?"#00ff8820":"transparent",borderLeft:(s==null?void 0:s.id)===A.id?"2px solid #00ff88":"2px solid transparent",marginBottom:"2px",fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[" ",((O=A.identity)==null?void 0:O.label)||A.name||"Unnamed",((N=A.discovery)==null?void 0:N.status)==="ARTIFACT_RAW"&&o.jsx("span",{style:{color:"#ff8800",fontSize:"10px",marginLeft:"5px"},children:"[RAW]"})]},w)})})]},y))]}),o.jsx("div",{style:{flex:1,padding:"20px",overflowY:"auto"},children:s?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid var(--border-color)"},children:[o.jsx("h3",{style:{margin:0,color:"#00ff88"},children:s.name||((v=s.identity)==null?void 0:v.label)||"Unnamed Artifact"}),o.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["ID: ",s.id]}),o.jsxs("p",{style:{margin:"5px 0",fontSize:"12px",color:"#888"},children:["Schema: ",s.indx_schema||"UNDEFINED"]})]}),o.jsx("pre",{style:{backgroundColor:"var(--bg-secondary)",padding:"15px",borderRadius:"4px",fontSize:"12px",overflow:"auto",border:"1px solid var(--border-color)"},children:JSON.stringify(s,null,2)})]}):o.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#555",fontSize:"14px"},children:"Select an artifact to view its content"})})]})},oc=()=>{const{state:e,execute:t}=q(),r=F(u=>u.session.isLoading),{availableCosmos:n,discoveryStatus:s}=e.phenotype,[a,i]=T.useState(!1),[l,c]=T.useState(!1),[d,h]=T.useState(null),[m,x]=T.useState(null),E=r||s==="SCANNING",g=()=>{t("START_DISCOVERY")},S=()=>{d&&t("MOUNT_COSMOS",{cosmosId:d})},_=async(u,p)=>{if(window.confirm(`Ests seguro de que deseas eliminar la realidad "${p||u}"?
Esta accin mover el archivo a la papelera.`))try{await ae.call("cosmos","deleteCosmos",{cosmosId:u}),t("START_DISCOVERY"),d===u&&h(null)}catch(v){x(`Delete Failed: ${v.message}`)}},f=async u=>{x(null),t("START_DISCOVERY");try{const p=u.identity||{label:u.label,description:u.description},v=`temp_${Date.now()}`,y=await ae.call("cosmos","saveCosmos",{cosmosId:v,cosmos:{id:v,...u,identity:{label:p.label||"Sin Ttulo",description:p.description||"Realidad persistida por Indra App"},artifacts:[],relationships:[],activeLayout:{VIEW_MODE:"GRAPH"},last_modified:new Date().toISOString()}});if(y&&(y.id||y.new_id))t("START_DISCOVERY"),i(!1);else throw new Error(y.error||"El servidor no devolvi una identidad vlida.")}catch(p){x(`Fallo en el Gnesis: ${p.message}`),t("UPDATE_COSMOS_REGISTRY",n)}};return a?o.jsx("div",{className:"w-full h-full flex flex-col justify-start items-center p-8 pt-28 bg-[var(--bg-primary)] overflow-hidden",children:o.jsx("div",{className:"max-w-2xl w-full max-h-[80vh] flex flex-col p-8 bg-[var(--bg-secondary)]/90 border border-[var(--border-subtle)] rounded-3xl backdrop-blur-xl shadow-2xl animate-in zoom-in-95 duration-500 overflow-hidden",children:o.jsx(Ln,{perspective:"SCHEMA_PROJECTION",schemaId:"COSMOS_V1",onCommit:f,onCancel:()=>i(!1),error:m})})}):l?o.jsxs("div",{className:"w-full h-full relative",children:[o.jsx("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 z-50 bg-red-500 text-white px-4 py-2 rounded-lg text-xs font-bold uppercase hover:brightness-125 transition-all",children:" Cerrar Diagnstico"}),o.jsx(_m,{})]}):o.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 bg-transparent",children:o.jsxs("div",{className:"max-w-2xl w-full flex flex-col gap-8",children:[o.jsxs("div",{className:"flex flex-col gap-2 border-b border-[var(--indra-glass-border)] pb-6 relative",children:[o.jsx("h1",{className:"text-3xl font-black text-[var(--text-primary)] tracking-tighter uppercase italic",children:"Seleccionar Cosmos"}),o.jsxs("p",{className:"text-sm text-[var(--text-secondary)] font-mono opacity-60",children:["Elige una ",o.jsx("span",{className:"text-[var(--accent)] font-bold",children:"Realidad Cuntica"})," para habitar."]}),o.jsxs("div",{className:"absolute right-0 top-0 flex gap-2",children:[o.jsx("button",{onClick:()=>c(!0),className:"bg-yellow-500/10 text-yellow-500 border border-yellow-500/30 px-3 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-yellow-500 hover:text-black transition-all active:scale-95",children:" Diagnstico"}),o.jsx("button",{onClick:()=>i(!0),className:"bg-[var(--accent)] text-black px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:brightness-110 transition-all active:scale-95 shadow-lg shadow-[var(--accent)]/20",children:"+ Nuevo Cosmos"})]})]}),o.jsx("div",{className:"flex-1 min-h-[300px] overflow-y-auto custom-scrollbar pr-2 flex flex-col gap-3",children:E&&n.length===0?o.jsx("div",{className:"flex items-center justify-center h-48 border border-[var(--indra-glass-border)] rounded-xl opacity-40 italic font-mono text-xs",children:"Escaneando Registro de Flujos..."}):n.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center h-48 border border-[var(--indra-glass-border)] rounded-xl text-[var(--text-dim)] gap-4 border-dashed",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"font-mono text-xs uppercase tracking-widest",children:"No se identificaron Cosmos en el directorio FLOWS"}),o.jsx("p",{className:"text-[10px] mt-2 opacity-50",children:"Carga un artefacto cosmos.json vlido para comenzar."})]})}):n.map(u=>{var p,v,y,b,A;return o.jsx("div",{role:"button",tabIndex:0,onClick:()=>h(u.id),className:`
                                    w-full p-5 rounded-xl border text-left transition-all group relative overflow-hidden
                                    ${d===u.id?"bg-[var(--accent)]/5 border-[var(--accent)] shadow-xl":"bg-[var(--bg-secondary)] border-[var(--indra-glass-border)] hover:border-[var(--text-dim)] shadow-sm"}
                                `,children:o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:`
                                        w-12 h-12 rounded-lg flex items-center justify-center font-black text-xl border
                                        ${d===u.id?"bg-[var(--accent)] text-black border-transparent":"bg-[var(--bg-deep)] border-[var(--indra-glass-border)] text-[var(--accent)]"}
                                    `,children:((v=(p=u.identity)==null?void 0:p.label)==null?void 0:v.charAt(0))||"C"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-sm font-bold text-[var(--text-primary)] uppercase tracking-wide",children:((y=u.identity)==null?void 0:y.label)||u.name}),o.jsxs("div",{className:"text-[9px] font-mono opacity-30",children:["ID: ",((b=u.id)==null?void 0:b.substring(0,8))||"...","..."]})]}),o.jsx("div",{className:"text-[11px] text-[var(--text-secondary)] mt-1 line-clamp-1 opacity-70",children:((A=u.identity)==null?void 0:A.description)||"Definicin axiomtica de un espacio de trabajo."})]}),o.jsx("button",{onClick:w=>{var O;w.stopPropagation(),_(u.id,(O=u.identity)==null?void 0:O.label)},className:"opacity-0 group-hover:opacity-100 p-2 hover:bg-red-500/20 rounded-lg text-red-500 transition-all z-20 absolute right-4",title:"Eliminar Realidad",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",viewBox:"0 0 16 16",children:[o.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),o.jsx("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})}),d===u.id&&o.jsx("div",{className:"absolute right-0 top-0 h-full w-1 bg-[var(--accent)]"})]})},u.id)})}),o.jsxs("div",{className:"flex gap-4 pt-4",children:[o.jsx("button",{onClick:g,disabled:E,className:"px-6 py-3 rounded-xl font-mono text-[10px] uppercase tracking-[0.2em] bg-[var(--bg-secondary)] border border-[var(--indra-glass-border)] text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-all shadow-sm",children:E?"Escaneando...":"Re-Escanear Flujos"}),o.jsx("button",{onClick:S,disabled:!d||E,className:`
                            flex-1 py-3 px-6 rounded-xl font-mono text-[10px] uppercase tracking-[0.3em] font-bold
                            transition-all duration-500
                            ${d?"bg-[var(--accent)] text-black shadow-xl hover:scale-[1.02] active:scale-95":"bg-white/5 text-[var(--text-dim)] cursor-not-allowed grayscale"}
                        `,children:"Habitar Realidad Cuntica"})]})]})})},wm=({law:e,cosmosContext:t,phenotype:r,slotId:n,perspective:s="STANDARD"})=>{var x,E;const{execute:a}=q(),[i,l]=T.useState(null);if(!e)return o.jsx("div",{className:"text-[var(--text-dim)] p-4 font-mono text-xs",children:"Unmapped Slot"});const c=e.artefacts||[],d=i||(c.length===1?c[0]:null),h=d?X.getCanon(d):null;if(s==="TOPOLOGICAL"){const g=((h==null?void 0:h.LABEL)||e.functional_name||"System Unit").toUpperCase(),S=((h==null?void 0:h.ARCHETYPE)||((x=e.config)==null?void 0:x.archetype)||"").toUpperCase(),_=S==="VAULT";let f=L.Sovereign;_&&L.Vault?f=L.Vault:(E=h==null?void 0:h.config)!=null&&E.icon&&L[h.config.icon]&&(f=L[h.config.icon]);const u=c.length>0,p=()=>{if(u){const v=d||c[0];console.log(`[Orb]  Igniting Focus: ${g} (${v})`),a("SELECT_ARTIFACT",v),!i&&c.length>0&&l(c[0])}};return o.jsxs("div",{className:"flex flex-col items-center gap-2 transition-all duration-500 group/orb",children:[o.jsxs("button",{onClick:p,title:g,className:`
                        w-14 h-14 rounded-full flex items-center justify-center relative
                        bg-[var(--bg-glass)] backdrop-blur-xl border transition-all duration-500
                        shadow-[0_0_20px_rgba(0,0,0,0.5)] group-hover/orb:shadow-[0_0_30px_rgba(var(--accent-rgb),0.3)]
                        ${u?"cursor-pointer border-[var(--border-subtle)] hover:border-[var(--accent)]":"cursor-default border-dashed border-[var(--border-subtle)] opacity-20"}
                        active:scale-95
                    `,children:[u&&o.jsx("div",{className:"absolute -inset-1.5 rounded-full border border-[var(--accent)]/10 animate-pulse"}),o.jsx("div",{className:`transition-all duration-500 ${u?"text-[var(--text-soft)] group-hover/orb:text-[var(--accent)] group-hover/orb:scale-110":"text-[var(--text-dim)]"}`,children:f?o.jsx(f,{size:24}):""}),u&&o.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-[var(--accent)] rounded-full shadow-[0_0_10px_var(--accent)] border-2 border-[var(--bg-deep)]"})]}),o.jsxs("div",{className:"flex flex-col items-center opacity-40 group-hover/orb:opacity-100 transition-opacity duration-500",children:[o.jsx("span",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-[var(--accent)] text-center max-w-[70px] leading-tight truncate",children:g}),o.jsx("span",{className:"text-[6px] font-mono text-[var(--text-dim)] uppercase mt-0.5 tracking-tighter",children:S||"CORE_ANCHOR"})]})]})}if(d&&h)return o.jsxs("div",{className:"relative group/skeleton h-full flex flex-col",children:[c.length>1&&o.jsx("button",{onClick:()=>l(null),className:"absolute top-2 right-2 z-10 p-1.5 rounded-lg bg-[var(--bg-deep)]/80 border border-[var(--border-subtle)] text-[var(--text-dim)] hover:text-[var(--accent)] transition-all opacity-0 group-hover/skeleton:opacity-100",children:L.ChevronRight?o.jsx(L.ChevronRight,{className:"rotate-180",size:14}):""}),o.jsx(Ln,{componentId:d,cosmosContext:t,phenotype:r,slotId:n})]});if(c.length>1&&!d)return o.jsxs("div",{className:"w-full h-full flex flex-col p-6 rounded-3xl border border-[var(--border-subtle)] bg-[var(--bg-secondary)]/20 backdrop-blur-sm animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-[var(--border-subtle)]/30",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] shadow-[0_0_8px_var(--accent)] animate-pulse"}),o.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-vibrant)]",children:e.functional_name||"Artifact Collection"}),o.jsxs("span",{className:"ml-auto text-[9px] font-mono text-[var(--accent)]/60",children:[c.length," units detected"]})]}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(g=>{const S=X.getCanon(g);return o.jsxs("button",{onClick:()=>l(g),className:"flex items-center gap-4 p-4 rounded-2xl bg-[var(--bg-primary)]/40 border border-[var(--border-subtle)] hover:border-[var(--accent)] transition-all text-left group/item",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-[var(--bg-deep)] flex items-center justify-center text-xl group-hover/item:scale-110 transition-all",children:(S==null?void 0:S.ARCHETYPE)==="VAULT"?"":""}),o.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[o.jsx("span",{className:"text-xs font-bold text-[var(--text-soft)] group-hover/item:text-[var(--accent)] truncate transition-colors",children:(S==null?void 0:S.LABEL)||g}),o.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-tighter opacity-60",children:(S==null?void 0:S.ARCHETYPE)||"CORE_UNIT"})]}),L.ChevronRight&&o.jsx(L.ChevronRight,{size:14,className:"text-[var(--text-dim)] opacity-0 group-hover/item:opacity-100 transform translate-x-1 group-hover/item:translate-x-0 transition-all"})]},g)})})]});const m=e.isAnchor&&c.length===0;return o.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-8 rounded-3xl border border-dashed border-[var(--border-subtle)]/30 bg-[var(--bg-secondary)]/10 group hover:border-[var(--accent)]/30 transition-all",style:{minHeight:"160px"},children:[o.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[var(--text-dim)] group-hover:text-[var(--accent)] transition-colors text-center",children:e.functional_name||"System Slot"}),m&&o.jsx("div",{className:"mt-2 text-[9px] font-mono text-red-500/30 uppercase tracking-[0.2em]",children:"Identity Not Found"}),o.jsx("div",{className:"mt-6 opacity-5 group-hover:opacity-20 transition-opacity",children:L.Sovereign?o.jsx(L.Sovereign,{size:32}):""})]})},Oo=({slotId:e,visibleSlots:t,cosmosContext:r})=>{const{state:n}=q();if(!t.includes(e))return null;const i=X.getRenderManifest().filter(c=>c.slot===e).filter(c=>{const d=c.functional_name||c.LABEL&&c.LABEL!=="UNIT_SKELETON",h=c.artefacts&&c.artefacts.length>0;return d||h});if(i.length===0)return o.jsx("div",{className:"w-full h-full flex items-center justify-center opacity-40 border border-[var(--border-subtle)] border-dashed m-1 rounded-lg",children:o.jsxs("span",{className:"text-[7px] font-mono text-[var(--text-dim)] uppercase tracking-widest",children:["Empty::",e]})});const l=e.includes("SIDEBAR");return o.jsx("div",{className:"w-full h-full overflow-y-auto scrollbar-hide flex flex-col",style:{gap:"var(--stark-gutter-size)",padding:"var(--stark-edge-margin)"},children:i.map(c=>{var d;return o.jsx("div",{className:"w-full stark-slot shrink-0 animate-fade-in flex justify-center","data-omd":c.omd,"data-cosmos-id":(d=r==null?void 0:r.identity)==null?void 0:d.id,children:o.jsx(wm,{law:c,slotId:e,perspective:"STANDARD",cosmosContext:r,phenotype:n.phenotype})},c.omd)})})},Tm=Object.freeze({PHYSICS:{CABLE_TENSION:.5,CABLE_WIDTH:2,GRID_SNAP:20,SEMANTIC_GRAVITY:.5},GEOMETRY:{NODE_WIDTH:256,HEADER_HEIGHT:40,ROW_HEIGHT:30,PORT_RADIUS:6,PORT_MAPPING:{INPUT:{x_offset:0,anchor_type:"left-center"},OUTPUT:{x_offset:256,anchor_type:"right-center"}}}}),Cm=({nodes:e=[],edges:t=[]})=>{var w,O;const{state:r,execute:n}=q(),[s,a]=T.useState({x:0,y:0,zoom:1}),[i,l]=T.useState(!1),[c,d]=T.useState({x:0,y:0}),h=T.useRef(null),m=T.useRef(new Set),[,x]=T.useState(0),E=N=>{if(N.ctrlKey||N.metaKey){N.preventDefault();const M=Math.min(Math.max(s.zoom-N.deltaY*.001,.1),5);a(R=>({...R,zoom:M}))}else a(I=>({...I,x:I.x-N.deltaX,y:I.y-N.deltaY}))},g=N=>{N.target===h.current&&(l(!0),d({x:N.clientX,y:N.clientY}))},S=N=>{if(i){const I=N.clientX-c.x,M=N.clientY-c.y;a(R=>({...R,x:R.x+I,y:R.y+M})),d({x:N.clientX,y:N.clientY})}else if(r.phenotype.ui.pendingConnection){const I=h.current.getBoundingClientRect(),M=(N.clientX-I.left-s.x-I.width/2)/s.zoom,R=(N.clientY-I.top-s.y-I.height/2)/s.zoom;n("SET_PENDING_CONNECTION",{...r.phenotype.ui.pendingConnection,currentX:M,currentY:R})}},_=()=>{l(!1),r.phenotype.ui.pendingConnection&&setTimeout(()=>n("CLEAR_PENDING_CONNECTION"),100)},f=(N,I)=>{const M=(N.ARCHETYPE||N.archetype||"").toUpperCase();let R=0;(M.includes("VAULT")||M.includes("ADAPTER"))&&(R=-450),M.includes("SLOT")&&(R=450);const V=I.filter(z=>{const U=(z.ARCHETYPE||z.archetype||"").toUpperCase();return R===-450?U.includes("VAULT")||U.includes("ADAPTER"):R===450?U.includes("SLOT"):!U.includes("VAULT")&&!U.includes("ADAPTER")&&!U.includes("SLOT")}),B=V.findIndex(z=>z.id===N.id);let Q=0;M.includes("VAULT")&&(Q=-100),M.includes("ADAPTER")&&(Q=100);const ce=R+Q+(B%2===0?0:40),k=(B-(V.length-1)/2)*380;return{x:ce,y:k}},u=()=>{const N=r.phenotype.ui.pendingConnection;if(!N)return null;const I=e.find(R=>R.id===N.sourceNodeId);if(!I)return null;const M=X.getCompatibleNodes(I.ARCHETYPE);return M.length===0?null:o.jsxs("div",{className:"absolute z-[1000] flex flex-col gap-2 p-3 bg-[var(--bg-glass)] backdrop-blur-xl border border-[var(--accent)]/30 rounded-2xl shadow-2xl pointer-events-auto animate-in fade-in zoom-in-90 duration-300",style:{left:N.currentX+100/s.zoom,top:N.currentY-M.length*20/s.zoom,transform:`scale(${1/s.zoom})`,transformOrigin:"left center"},children:[o.jsxs("header",{className:"flex items-center gap-2 mb-1 px-1",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse"}),o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[var(--accent)]",children:"Sugerencias Axiomticas"})]}),M.slice(0,4).map((R,V)=>o.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-xl bg-[var(--bg-primary)] hover:bg-[var(--accent)]/10 border border-[var(--border-subtle)] hover:border-[var(--accent)]/30 transition-all text-left group",onMouseDown:B=>{B.stopPropagation(),n("ADD_ARTIFACT_REQUEST",{artifact:R}),setTimeout(()=>{const Q=r.phenotype.artifacts,ce=Q[Q.length-1];ce&&n("ADD_RELATIONSHIP",{source:N.sourceNodeId,target:ce.id,sourcePort:N.portId,targetPort:Object.keys(ce.CAPABILITIES||{})[0]||"input"})},100)},children:[o.jsx("span",{className:"text-xl",children:""}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[11px] font-bold text-[var(--text-soft)] group-hover:text-white uppercase truncate max-w-[120px]",children:R.LABEL||R.label}),o.jsxs("span",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase",children:["Manifestar ",R.ARCHETYPE]})]})]},V))]})},p=()=>{const N=r.phenotype.ui.pendingConnection;if(!N)return null;const I=e.find(U=>U.id===N.sourceNodeId);if(!I)return null;const{x:M,y:R}=f(I,e),V=M+(N.portOffsetX||0),B=R+(N.portOffsetY||0),Q=N.currentX,ce=N.currentY,k=Math.abs(V-Q)*.5,z=`M ${V} ${B} C ${V+k} ${B}, ${Q-k} ${ce}, ${Q} ${ce}`;return o.jsx("path",{d:z,fill:"none",stroke:"var(--accent)",strokeWidth:"2",strokeDasharray:"5 5",strokeOpacity:"0.6",className:"animate-flow"})},v=()=>{const N=r.phenotype.activePulses||[];return t.filter(I=>!I._isDeleted).map((I,M)=>{const R=e.find(Ve=>Ve.id===I.source),V=e.find(Ve=>Ve.id===I.target);if(!R||!V)return null;const B=N.includes(I.id),{x:Q,y:ce}=f(R,e),{x:k,y:z}=f(V,e),{NODE_WIDTH:U}=Tm.GEOMETRY,$=Q+U/2,K=ce,me=k-U/2,Ee=z,je=Math.abs($-me)*.5,Se=`M ${$} ${K} C ${$+je} ${K}, ${me-je} ${Ee}, ${me} ${Ee}`;return o.jsxs("g",{children:[o.jsx("path",{d:Se,fill:"none",stroke:B?"var(--accent-glow)":"var(--accent)",strokeWidth:B?"3":"2",strokeOpacity:B?"0.8":"0.3",className:B?"glow-pulse":"animate-pulse"}),o.jsx("path",{d:Se,fill:"none",stroke:"url(#cableGradient)",strokeWidth:B?"2.5":"1.5",strokeDasharray:"10 5",className:B?"animate-flow-fast":"animate-flow",style:{filter:B?"drop-shadow(0 0 5px var(--accent-glow))":"none"}})]},I.id||M)})},y=N=>{N.preventDefault(),N.dataTransfer.dropEffect="copy"},b=N=>{N.preventDefault();const I=N.dataTransfer.getData("indra/artifact");if(I)try{const M=JSON.parse(I),R=h.current.getBoundingClientRect(),V=(N.clientX-R.left-s.x-R.width/2)/s.zoom,B=(N.clientY-R.top-s.y-R.height/2)/s.zoom;n("ADD_ARTIFACT_REQUEST",{artifact:M,position:{x:V,y:B}})}catch(M){console.error("[GraphEngine] Drop Error:",M)}},A=((w=r.phenotype.activeLayout)==null?void 0:w.id)&&((O=r.phenotype.cosmosIdentity)==null?void 0:O.id)&&r.phenotype.activeLayout.id!==r.phenotype.cosmosIdentity.id;return o.jsxs("div",{ref:h,className:`w-full h-full relative overflow-hidden bg-dot-pattern transition-all duration-700 ${A?"blur-md scale-95 opacity-30 grayscale":"blur-0 scale-100"}`,onWheel:E,onMouseDown:g,onMouseMove:S,onMouseUp:_,onMouseLeave:_,onDragOver:y,onDrop:b,style:{backgroundColor:"var(--bg-deep)",backgroundImage:"radial-gradient(var(--border-subtle) 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[o.jsxs("div",{className:"absolute transform-gpu transition-transform duration-75 ease-out origin-center",style:{transform:`translate(${s.x}px, ${s.y}px) scale(${s.zoom})`,left:"50%",top:"50%",width:0,height:0},children:[o.jsxs("svg",{className:"absolute overflow-visible",style:{left:0,top:0},children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"cableGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:"var(--accent)",stopOpacity:"0"}),o.jsx("stop",{offset:"50%",stopColor:"var(--accent)",stopOpacity:"1"}),o.jsx("stop",{offset:"100%",stopColor:"var(--accent)",stopOpacity:"0"})]})}),v(),p()]}),u(),e.filter(N=>!N._isDeleted).map(N=>{const{x:I,y:M}=f(N,e),R=!m.current.has(N.id);return R&&(m.current.add(N.id),setTimeout(()=>x(V=>V+1),1e3)),o.jsx("div",{className:`absolute cursor-pointer group ${R?"animate-manifest z-[500]":""}`,onDoubleClick:V=>{V.stopPropagation(),n("SELECT_ARTIFACT",N)},style:{transform:R?"none":`translate(${I}px, ${M}px) translate(-50%, -50%)`,transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",left:R?`${I}px`:"auto",top:R?`${M}px`:"auto"},children:o.jsx(Ln,{componentId:N.id,data:{...N,x:I,y:M},perspective:"NODE",schemaId:N.schemaId})},N.id)}),!A&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute top-[-500px] left-[-450px] transform -translate-x-1/2 -translate-y-full opacity-10 pointer-events-none",children:o.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"ORGENES"})}),o.jsx("div",{className:"absolute top-[-500px] left-[0px] transform -translate-x-1/2 -translate-y-full opacity-10 pointer-events-none",children:o.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"PROCESOS"})}),o.jsx("div",{className:"absolute top-[-500px] left-[450px] transform -translate-x-1/2 -translate-y-full opacity-10 pointer-events-none",children:o.jsx("span",{className:"text-6xl font-black uppercase tracking-[0.5em] text-[var(--text-primary)]",children:"RESULTADOS"})})]})]}),!A&&o.jsxs("div",{className:"absolute bottom-4 right-4 flex flex-col items-end gap-1 text-[9px] font-mono text-[var(--text-dim)] pointer-events-none",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse"}),o.jsx("span",{children:"DIAGRAMA_FRACTAL: ACTIVO"})]}),o.jsxs("span",{children:["ZOOM: ",Math.round(s.zoom*100),"% | MODO_MAPA: ON"]})]})]})},Im=()=>{var x,E;const{state:e,execute:t}=q(),[r,n]=T.useState("CORE_ORCHESTRATOR"),[s,a]=T.useState(!1),{ui:i}=e.phenotype,l=e.phenotype.activeLayout,{view:c,slots:d,layoutSchema:h,cosmosContext:m}=T.useMemo(()=>{var v,y;if(!l)return{view:{visible_slots:[]},slots:{},layoutSchema:{VIEW_MODE:"GRAPH"},cosmosContext:{}};const g=l.LAYOUTS||{},S=g[r]||g[Object.keys(g)[0]]||{},_={visible_slots:["SIDEBAR_PRIMARY","SIDEBAR_SECONDARY","CANVAS_MAIN","TERMINAL_STATUS"]},f=((v=S.VIEWS)==null?void 0:v[S.DEFAULT_VIEW||"DEFAULT"])||_,u={},p=l.SLOTS||{};return Object.keys(p).forEach(b=>{u[b]=X.compileSlot(p[b],e.sovereignty)}),{view:f,slots:u,layoutSchema:l,cosmosContext:{cosmosId:(y=e.phenotype.cosmosIdentity)==null?void 0:y.id,activeLayoutId:l.id}}},[l,r,e.sovereignty]);return o.jsxs("div",{className:"h-full w-full overflow-hidden flex flex-col bg-[var(--bg-primary)] text-[var(--text-primary)] relative",children:[o.jsx("main",{className:"flex-1 flex overflow-hidden w-full h-full relative",children:o.jsxs("section",{className:"flex-1 h-full flex flex-col relative overflow-hidden bg-[var(--bg-deep)]",style:{zIndex:"var(--stark-z-index-canvas)"},children:[o.jsx("div",{className:"w-full h-full flex flex-col overflow-hidden relative",children:e.phenotype.cosmosIdentity&&e.phenotype.activeLayout&&e.phenotype.activeLayout.id!==e.phenotype.cosmosIdentity.id?o.jsx("div",{className:"w-full h-full flex flex-row animate-in fade-in duration-500 relative",children:o.jsx("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:o.jsx(Ln,{componentId:e.phenotype.activeLayout.id,data:e.phenotype.activeLayout,perspective:["VAULT","BRIDGE"].includes((x=e.phenotype.devLab)==null?void 0:x.perspective)?"VAULT":((E=e.phenotype.devLab)==null?void 0:E.perspective)||"VAULT"})})}):h.VIEW_MODE==="GRAPH"||!h.VIEW_MODE?o.jsx(Cm,{nodes:(e.phenotype.artifacts||[]).filter(g=>!g._isDeleted),edges:(e.phenotype.relationships||[]).filter(g=>!g._isDeleted)}):o.jsx(Oo,{slotId:"CANVAS_MAIN",visibleSlots:(c==null?void 0:c.visible_slots)||[],cosmosContext:m})}),o.jsx("div",{className:"absolute bottom-10 right-10 pointer-events-none flex flex-col justify-end items-end",style:{zIndex:"var(--stark-z-index-overlay)"},children:o.jsx(Oo,{slotId:"FLOAT_CORNER",visibleSlots:(c==null?void 0:c.visible_slots)||[],cosmosContext:m})})]})}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:"var(--stark-z-index-system)"},children:o.jsx(Oo,{slotId:"AUTH_OVERLAY",visibleSlots:(c==null?void 0:c.visible_slots)||[],cosmosContext:m})})]})},Kr=40,jm=(e="top")=>{const[t,r]=T.useState({x:window.innerWidth/2,y:Kr}),[n,s]=T.useState(e),[a,i]=T.useState(!1),l=T.useRef({startX:0,startY:0,initialX:0,initialY:0,velocity:{x:0,y:0},lastTime:0}),c=()=>{const m=window.innerWidth,x=window.innerHeight,E=m/2,g=x/2;return{top:{x:E,y:Kr,label:"top"},bottom:{x:E,y:x-Kr,label:"bottom"},left:{x:Kr,y:g,label:"left"},right:{x:m-Kr,y:g,label:"right"}}},d=(m,x)=>{const E=c();let g=1/0,S=E.top;Object.values(E).forEach(_=>{const f=m-_.x,u=x-_.y,p=Math.sqrt(f*f+u*u);p<g&&(g=p,S=_)}),r({x:S.x,y:S.y}),s(S.label)},h=m=>{i(!0),l.current={startX:m.clientX,startY:m.clientY,initialX:t.x,initialY:t.y,velocity:{x:0,y:0},lastTime:Date.now()},m.stopPropagation()};return T.useEffect(()=>{const m=E=>{if(!a)return;const g=E.clientX-l.current.startX,S=E.clientY-l.current.startY;r({x:l.current.initialX+g,y:l.current.initialY+S})},x=()=>{a&&(i(!1),d(t.x,t.y))};return a&&(window.addEventListener("mousemove",m),window.addEventListener("mouseup",x)),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",x)}},[a,t]),T.useEffect(()=>{const m=()=>d(t.x,t.y);return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[n]),{position:t,dockSide:n,isDragging:a,startDrag:h}},Rm=({onSelect:e,onClose:t})=>{var x;const{state:r}=q(),[n,s]=T.useState(""),[a,i]=T.useState([]),l=((x=r.phenotype.artifacts)==null?void 0:x.length)||0;T.useEffect(()=>{X.isCompiled||X.compile();const g=X.getRenderManifest().map(S=>{if(S.visibility==="HIDDEN"||S.VISIBILITY==="HIDDEN")return null;const _=(S.DOMAIN||S.domain||"SYSTEM").toUpperCase(),f=(S.ARCHETYPE||S.archetype||"NODE").toUpperCase(),u=f.includes("VAULT")||f.includes("ADAPTER")||f.includes("TRIGGER"),p=l===0&&!u;if(f.includes("DESIGN_TOOL")||f.includes("STYLING"))return null;const y=["ADAPTER","VAULT","ORCHESTRATOR","AGENT","WIDGET","DATAGRID","SERVICE","TRANSFORM","GRID","COMPUTE","NODE","SLOT_NODE"].some(O=>f.includes(O)),b=f.includes("ADAPTER")||f.includes("VAULT")||f.includes("AGENT");return["SYSTEM_CORE","SYSTEM_INFRA","DATA_ENGINE","LOGIC","TEMPORAL"].includes(_)&&!b||!y&&!b||!S.LABEL&&!S.label&&!S.functional_name?null:{...S,isLocked:p}}).filter(Boolean);g.sort((S,_)=>{const f=(S.LABEL||S.label||"").toUpperCase(),u=(_.LABEL||_.label||"").toUpperCase();return f.localeCompare(u)}),i(g)},[l]);const c=E=>{const g=(E.ARCHETYPE||E.archetype||"").toUpperCase(),S=(E.DOMAIN||E.domain||"").toUpperCase();return g.includes("VAULT")||S.includes("KNOWLEDGE")||S.includes("DATA")?"KNOWLEDGE_VAULTS":S.includes("INTELLIGENCE")||S.includes("COGNITIVE")||g.includes("AGENT")?"COGNITIVE_ENGINES":g.includes("ADAPTER")||S.includes("COMMUNICATION")||S.includes("SPATIAL")||S.includes("MEDIA")?"BRIDGES_AND_ADAPTERS":g.includes("ORCHESTRATOR")||g.includes("TRANSFORM")||g.includes("GRID")?"ORCHESTRATION_UNITS":"UTILITIES"},d=[{id:"COGNITIVE_ENGINES",label:"Cerebros y Motores Cognitivos",icon:"",desc:"Sistemas de razonamiento y procesamiento inteligente."},{id:"KNOWLEDGE_VAULTS",label:"Bvedas de Conocimiento",icon:"",desc:"Repositorios de archivos, bases de datos y memoria."},{id:"BRIDGES_AND_ADAPTERS",label:"Puentes y Herramientas",icon:"",desc:"Conectores con el mundo exterior y herramientas operativas."},{id:"ORCHESTRATION_UNITS",label:"Unidades de Orquestacin",icon:"",desc:"Sistemas de control de flujos y estructuras complejas."},{id:"UTILITIES",label:"Utilidades Diversas",icon:"",desc:"Herramientas de soporte y servicios auxiliares."}],h=T.useMemo(()=>{const E=n.toLowerCase();return a.filter(g=>{const S=(g.LABEL||g.label||g.functional_name||"").toLowerCase(),_=(g.ARCHETYPE||g.archetype||"").toLowerCase(),f=(g.DOMAIN||g.domain||"").toLowerCase();return S.includes(E)||_.includes(E)||f.includes(E)})},[n,a]),m=T.useMemo(()=>{const E={};return h.forEach(g=>{const S=c(g);E[S]||(E[S]=[]),E[S].push(g)}),E},[h]);return o.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/70 backdrop-blur-md animate-in fade-in duration-300",onClick:t,children:o.jsxs("div",{className:"w-[800px] max-h-[85vh] bg-[var(--bg-deep)] border border-[var(--border-vibrant)]/30 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",onClick:E=>E.stopPropagation(),children:[o.jsxs("div",{className:"p-8 border-b border-[var(--border-subtle)] bg-gradient-to-b from-[var(--bg-secondary)]/50 to-transparent",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-[var(--accent)]/10 rounded-2xl border border-[var(--accent)]/20 shadow-[0_0_15px_rgba(var(--accent-rgb),0.1)]",children:o.jsx(L.Search,{size:24,className:"text-[var(--accent)]"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("h2",{className:"text-2xl font-black text-[var(--text-vibrant)] tracking-tighter uppercase italic",children:["Manifest ",o.jsx("span",{className:"text-[var(--accent)]",children:"Protocol"})]}),o.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)] tracking-[0.3em] uppercase opacity-70",children:"Reality_Synchronization_Interface // L1_GATE"})]})]}),o.jsx("button",{onClick:t,className:"text-[var(--text-dim)] hover:text-[var(--accent)] transition-all p-3 hover:bg-[var(--accent)]/5 rounded-full border border-transparent hover:border-[var(--accent)]/20",children:o.jsx(L.Close,{size:24})})]}),o.jsxs("div",{className:"relative group",children:[o.jsx("input",{type:"text",className:"w-full bg-[var(--bg-primary)]/80 border border-[var(--border-subtle)] rounded-2xl py-4 pl-12 pr-6 text-base text-[var(--text-vibrant)] placeholder:text-[var(--text-dim)] focus:border-[var(--accent)] focus:ring-4 focus:ring-[var(--accent)]/10 outline-none transition-all shadow-inner font-medium",placeholder:"Identify artifact by frequency name, archetype or domain...",value:n,onChange:E=>s(E.target.value),autoFocus:!0}),o.jsx("div",{className:"absolute inset-y-0 left-4 flex items-center pointer-events-none",children:o.jsx(L.Search,{size:18,className:"text-[var(--text-dim)] group-focus-within:text-[var(--accent)] transition-colors"})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-dot-pattern scrollbar-thin scrollbar-thumb-[var(--border-subtle)]",children:[d.map(E=>{const g=m[E.id];return!g||g.length===0?null:o.jsxs("div",{className:"mb-10 last:mb-0",children:[o.jsxs("header",{className:"flex flex-col gap-1 mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-subtle)] flex items-center justify-center text-lg shadow-sm",children:E.icon}),o.jsx("h3",{className:"text-xs font-black text-[var(--text-vibrant)] uppercase tracking-[0.25em]",children:E.label}),o.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-[var(--border-subtle)] to-transparent ml-2 opacity-50"}),o.jsxs("span",{className:"text-[10px] font-mono text-[var(--accent)] px-2 py-0.5 rounded bg-[var(--accent)]/5 border border-[var(--accent)]/20",children:[g.length," UNITS"]})]}),o.jsx("p",{className:"text-[10px] text-[var(--text-dim)] font-medium pl-11 opacity-60 italic",children:E.desc})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4 pl-11",children:g.map((S,_)=>o.jsxs("button",{onClick:()=>!S.isLocked&&e(S),className:`flex items-center gap-4 p-5 rounded-2xl border transition-all group text-left relative overflow-hidden ${S.isLocked?"bg-black/20 border-white/5 cursor-not-allowed opacity-50":"bg-[var(--bg-secondary)]/30 border-[var(--border-subtle)] hover:bg-[var(--bg-secondary)]/80 hover:border-[var(--accent)]/50 hover:shadow-[0_8px_30px_rgba(0,0,0,0.2)]"}`,children:[!S.isLocked&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--accent)]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),o.jsx("div",{className:`w-12 h-12 rounded-xl bg-[var(--bg-deep)] border border-[var(--border-subtle)] flex items-center justify-center transition-all shadow-sm ${S.isLocked?"grayscale":"group-hover:border-[var(--accent)] group-hover:text-[var(--accent)] group-hover:scale-110"} relative z-10`,children:o.jsx("span",{className:`text-2xl filter drop-shadow-md ${!S.isLocked&&"group-hover:drop-shadow-[0_0_8px_rgba(var(--accent-rgb),0.5)]"}`,children:S.isLocked?"":E.icon})}),o.jsxs("div",{className:"relative z-10 flex-1 min-w-0",children:[o.jsx("h4",{className:`font-bold text-sm mb-1 transition-colors truncate ${S.isLocked?"text-white/20":"text-[var(--text-soft)] group-hover:text-[var(--text-vibrant)]"}`,children:S.LABEL||S.label||S.functional_name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-[9px] font-black px-2 py-0.5 rounded bg-[var(--bg-deep)] border border-[var(--border-subtle)] tracking-tighter uppercase transition-colors ${S.isLocked?"text-white/10":"text-[var(--text-dim)] group-hover:text-[var(--accent)]"}`,children:S.isLocked?"SOCKED":(S.ARCHETYPE||S.archetype||"UNIT").split("_")[0]}),o.jsx("div",{className:"w-1 h-1 rounded-full bg-[var(--border-subtle)]"}),o.jsx("span",{className:"text-[9px] font-mono text-[var(--text-dim)] opacity-40 uppercase truncate",children:S.isLocked?"REQUIRES_DATA_SEED":S.DOMAIN||S.domain||"SYSTEM"})]})]})]},`${E.id}-${_}`))})]},E.id)}),h.length===0&&o.jsxs("div",{className:"py-24 text-center flex flex-col items-center justify-center gap-6 animate-in zoom-in-90 duration-300",children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-[var(--bg-secondary)] flex items-center justify-center text-5xl opacity-20 shadow-inner",children:""}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("div",{className:"font-black text-sm text-[var(--text-dim)] tracking-widest uppercase",children:"SIGNAL_LOSS // NO_RESULTS_FOUND"}),o.jsxs("div",{className:"font-mono text-[10px] text-[var(--text-dim)] opacity-50 italic",children:['Frequency "',n,'" does not match any known manifest circuit.']})]})]})]}),o.jsxs("div",{className:"px-8 py-5 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)]/50 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] animate-pulse"}),o.jsxs("span",{className:"text-[10px] font-mono text-[var(--text-dim)] uppercase tracking-wider",children:["L0_ONTOLOGY: ",a.length]})]}),o.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] opacity-50"}),o.jsx("span",{className:"text-[10px] font-mono text-[var(--text-dim)] uppercase tracking-wider",children:"ACTIVE_SIEVE: SOVEREIGN_V3"})]}),o.jsxs("div",{className:"flex items-center gap-2 font-black text-[9px] tracking-[0.3em] text-[var(--accent)] opacity-80 uppercase",children:[o.jsx("span",{children:"Indra_OS"}),o.jsx("span",{className:"text-[var(--text-dim)] opacity-30",children:"//"}),o.jsx("span",{children:"Manifest_v8.1"})]})]})]})})},Lm=(e,t,r,n,s)=>{const a=ac(e,t,r,s),i=ac(e,t,r,n),l=s-n<=180?"0":"1";return["M",a.x,a.y,"A",r,r,0,l,0,i.x,i.y].join(" ")},ac=(e,t,r,n)=>{const s=(n-90)*Math.PI/180;return{x:e+r*Math.cos(s),y:t+r*Math.sin(s)}},Om=({syncStatus:e="SYNCED",isOpen:t})=>{const r={SYNCED:{color:"#60a5fa",glow:"rgba(96, 165, 250, 0.6)"},RETRY:{color:"#fbbf24",glow:"rgba(251, 191, 36, 0.6)"},OFFLINE:{color:"#ef4444",glow:"rgba(239, 68, 68, 0.8)"}},n=r[e]||r.SYNCED;return o.jsxs("div",{className:"sphere-core","data-state":e,style:{"--core-color":n.color,"--glow-color":n.glow},children:[o.jsx("div",{className:"sphere-corona sphere-corona-outer"}),o.jsx("div",{className:"sphere-corona sphere-corona-middle"}),o.jsx("div",{className:"sphere-corona sphere-corona-inner"}),o.jsx("div",{className:"sphere-nucleus"}),[...Array(6)].map((s,a)=>o.jsx("div",{className:"sphere-particle",style:{"--particle-size":`${Math.random()*2+1}px`,"--particle-color":n.color,"--particle-opacity":Math.random()*.5+.3,transform:`rotate(${a*60}deg)`},children:o.jsx("div",{className:"particle-dot",style:{animation:`orbit ${Math.random()*4+4}s linear infinite`,animationDelay:`${Math.random()*-8}s`}})},a))]})},km=({manualLayer:e,setManualLayer:t})=>{const{state:r,execute:n}=q(),s=F(R=>R.session),[a,i]=T.useState(!1),[l,c]=T.useState(!1),[d,h]=T.useState([]),[m,x]=T.useState(""),[E,g]=T.useState(""),{position:S,dockSide:_,isDragging:f,startDrag:u}=jm("bottom"),p=!!r.phenotype.cosmosIdentity,v=e==="PORTAL"?"PORTAL":p?"COSMOS":"DEFAULT",y=[],A=(()=>{var R;if(e==="DEV_LAB"){const V=((R=r.phenotype.devLab)==null?void 0:R.perspective)||"BRIDGE";return[{id:"PERSPECTIVE_BRIDGE",label:"Vista Bridge",icon:L.Eye,isActive:V==="BRIDGE",action:()=>n("SET_LAB_PERSPECTIVE","BRIDGE")},{id:"PERSPECTIVE_WIDGET",label:"Vista Widget",icon:L.SidebarLeft,isActive:V==="WIDGET",action:()=>n("SET_LAB_PERSPECTIVE","WIDGET")},{id:"PERSPECTIVE_NODE",label:"Vista Nodo",icon:L.Terminal,isActive:V==="NODE",action:()=>n("SET_LAB_PERSPECTIVE","NODE")},{id:"SELECT_ADAPTER",label:"Seleccionar Adaptador",icon:L.Search,action:()=>c(!0)},{id:"TEST_SUITE",label:"Mdulo de Caos",icon:L.Activity,action:()=>n("TOGGLE_UI_PANEL",{panel:"chaos"})},{id:"NUCLEAR_PURGE",label:"Purgado Nuclear",icon:L.Sync,action:()=>{confirm(` PURGADO NUCLEAR

Esto borrar toda la memoria local (Genotipo L0) y forzar una descarga completa del Servidor.

Proceder?`)&&n("NUCLEAR_PURGE")}}]}return v==="COSMOS"?[{id:"ADD_ARTIFACT",label:"Manifestar Artefacto",icon:L.Plus,action:()=>c(!0)},{id:"TOGGLE_VISUALIZATION",label:"Modo de Realidad",icon:L.Eye,action:()=>n("TOGGLE_VISUALIZATION_MODE")},{id:"AUTO_LAYOUT",label:"Auto Agrupamiento",icon:L.List,action:()=>n("APPLY_AUTO_LAYOUT")}]:[]})(),w=R=>{var B;if(e==="DEV_LAB"){console.log("[SovereignSphere] DevLab Target Selected:",R),n("SET_LAB_TARGET",R),c(!1),i(!1);return}const V=(B=r.phenotype.cosmosIdentity)==null?void 0:B.id;console.log("[SovereignSphere] Manifesting:",R),n("ADD_ARTIFACT_REQUEST",{cosmosId:V,artifact:{...R,type:"MODULE",domain:R.DOMAIN},schemaId:R.technical_id}),c(!1),i(!1)},O=(R,V)=>{R.preventDefault(),R.stopPropagation();const B=R.deltaY>0?10:-10;I(Q=>({...Q,[V]:Q[V]+B}))},[N,I]=T.useState({outer:0,inner:0}),M=(R="outer",V=0)=>{const B=R==="inner",Q=B?32:40,ce=B?60:110,U=Math.max(Q/(2*Math.PI*ce)*360,15)*Math.max(V-1,0);let $=180;U>180&&($=U>270?360:270);const K={top:{center:90,span:$},bottom:{center:270,span:$},left:{center:0,span:$},right:{center:180,span:$}},me=K[_]||K.top,je=Math.max($-(B?15:0)*2,90),Se=me.center-je/2,Ve=me.center+je/2;return{start:Se,end:Ve,labelPos:_==="top"?"-bottom-8":_==="bottom"?"-top-8":_==="left"?"-right-24":"-left-24",arcSpan:je,canScroll:U>je,rotation:R==="outer"?N.outer:N.inner}};return o.jsxs(o.Fragment,{children:[l&&(e==="DEV_LAB"?o.jsx(Sd,{onSelect:w,onClose:()=>c(!1)}):o.jsx(Rm,{onSelect:w,onClose:()=>c(!1)})),o.jsxs("div",{className:"fixed z-[300] flex flex-col items-center gap-4 pointer-events-none transition-none",style:{left:S.x,top:S.y,transform:"translate(-50%, -50%)"},children:[o.jsxs("button",{onMouseDown:u,onClick:R=>{f||i(!a)},className:`
                        w-16 h-16 rounded-full
                        flex items-center justify-center cursor-pointer pointer-events-auto
                        transition-all duration-700 ease-[cubic-bezier(0.16,1,0.3,1)]
                        glass-sphere-button group relative
                        ${a?"scale-110":"hover:scale-105 active:scale-95"}
                        ${f?"cursor-grabbing scale-105":"cursor-grab"}
                    `,style:{zIndex:60},children:[o.jsx(Om,{syncStatus:s==null?void 0:s.syncStatus,isOpen:a}),o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-full pb-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:o.jsxs("div",{className:"glass px-2 py-1 rounded border border-[var(--accent)]/30 backdrop-blur-md",children:[o.jsx("p",{className:"text-[7px] font-black uppercase tracking-widest text-[var(--accent)] whitespace-nowrap",children:(s==null?void 0:s.syncStatus)==="SYNCED"?"Sincronizado":(s==null?void 0:s.syncStatus)==="RETRY"?`Reintentando (${s==null?void 0:s.failedSyncAttempts})`:"Arquitectura Offline"}),(s==null?void 0:s.lastSyncTimestamp)&&o.jsxs("p",{className:"text-[6px] text-white/40 mt-0.5 whitespace-nowrap",children:["Last: ",new Date(s.lastSyncTimestamp).toLocaleTimeString()]})]})})]}),o.jsxs("div",{className:`absolute top-1/2 left-1/2 w-0 h-0 flex items-center justify-center transition-all duration-500 ${a?"opacity-100":"opacity-0 pointer-events-none"}`,onWheel:R=>{const V=M("outer",y.length),B=M("inner",A.length);(V.canScroll||B.canScroll)&&O(R,V.canScroll?"outer":"inner")},children:[(()=>{const R=M("outer",y.length),V=M("inner",A.length);return(R.canScroll||V.canScroll)&&a?o.jsxs("div",{className:"absolute -bottom-24 left-1/2 -translate-x-1/2 flex items-center gap-2 glass px-3 py-1.5 rounded-full border border-[var(--accent)]/20 animate-pulse pointer-events-none",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--accent)]"}),o.jsx("span",{className:"text-[8px] font-mono text-[var(--accent)] uppercase tracking-wider",children:"Scroll to rotate"})]}):null})(),(()=>{M("outer",y.length);const R=M("inner",A.length);return o.jsx(o.Fragment,{children:A.length>0&&o.jsx("svg",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none",width:"140",height:"140",style:{opacity:a?.2:0,transition:"opacity 500ms"},children:o.jsx("path",{d:Lm(70,70,60,R.start+R.rotation,R.end+R.rotation),fill:"none",stroke:"var(--accent)",strokeWidth:"1",strokeDasharray:"2 2"})})})})(),A.length>0&&A.map((R,V)=>{const B=M("inner",A.length),Q=A.length,ce=Q>1?B.end-B.start:0,k=Q>1?B.start:(B.start+B.end)/2,z=Q>1?ce/(Q-1):0,$=(k+z*V+B.rotation)*Math.PI/180,K=Math.round(60*Math.cos($)),me=Math.round(60*Math.sin($)),Ee=R.isActive||!1;return o.jsxs("button",{onClick:je=>{je.stopPropagation(),console.log("[Sphere] Action:",R.id),R.action(),i(!1)},className:`absolute w-8 h-8 rounded-full flex items-center justify-center border transition-all duration-300 z-50 shadow-lg group/inner pointer-events-auto ${Ee?"bg-[var(--accent)] text-black border-[var(--accent)] shadow-[0_0_15px_var(--accent)]":"glass border-[var(--accent)]/30 hover:bg-[var(--accent)] hover:text-black"}`,style:{transform:a?`translate(${K}px, ${me}px)`:"translate(0px, 0px)",opacity:a?1:0,transitionDelay:`${V*30+100}ms`},children:[o.jsx(R.icon,{size:12}),o.jsx("div",{className:`absolute pointer-events-none opacity-0 group-hover/inner:opacity-100 transition-opacity whitespace-nowrap bg-black/90 px-2 py-1 rounded text-[var(--accent)] border border-[var(--accent)]/20 backdrop-blur-md z-[100] ${B.labelPos}`,children:o.jsx("span",{className:"text-[6px] font-black uppercase tracking-[0.2em]",children:R.label})})]},R.id)})]})]})]})},Dm=({onClose:e})=>{const{state:t,execute:r}=q(),[n,s]=T.useState(""),[a,i]=T.useState(Lt.CORE_URL||""),[l,c]=T.useState(!1),[d,h]=T.useState(null),m=async()=>{if(!(!n||l)){c(!0),h({type:"info",msg:"Sincronizando con el Core..."});try{if(a!==Lt.CORE_URL){localStorage.setItem("INDRA_OVERRIDE_URL",a);const{default:E}=await Pr(async()=>{const{default:g}=await Promise.resolve().then(()=>Ta);return{default:g}},void 0);E.init(a,localStorage.getItem("INDRA_SESSION_TOKEN"))}const x=await ae.call("public","setSystemToken",{newToken:n});x&&x.success?(localStorage.setItem("INDRA_SESSION_TOKEN",n),h({type:"success",msg:" Token Maestro actualizado exitosamente."}),r("LOG_ENTRY",{time:new Date().toLocaleTimeString(),msg:" Token del Sistema rotado con xito.",type:"SUCCESS"}),setTimeout(()=>{e(),window.location.reload()},1500)):h({type:"error",msg:" El Core rechaz la actualizacin."})}catch(x){h({type:"error",msg:` Error: ${x.message}`})}finally{c(!1)}}};return o.jsx("div",{className:"fixed inset-0 z-[500] flex items-center justify-center bg-black/60 dark:bg-black/80 backdrop-blur-md animate-fade-in p-6",children:o.jsxs("div",{className:"w-full max-w-md glass border border-[var(--border-subtle)] rounded-[2.5rem] p-8 shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-30"}),o.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2 text-[var(--text-dim)] hover:text-[var(--text-primary)] transition-colors",children:o.jsx(L.Close,{size:18})}),o.jsxs("div",{className:"flex flex-col gap-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-[var(--accent)]/10 flex items-center justify-center text-[var(--accent)] border border-[var(--accent)]/20 shadow-[0_0_20px_rgba(var(--accent-rgb),0.1)]",children:o.jsx(L.Lock,{size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-sm font-black tracking-widest uppercase",children:"Bveda de Seguridad"}),o.jsx("p",{className:"text-[9px] font-mono text-[var(--text-dim)] uppercase tracking-tight",children:"Configuracin del Token Maestro"})]})]}),d&&o.jsx("div",{className:`p-4 rounded-xl text-[10px] font-mono leading-relaxed border ${d.type==="success"?"bg-[var(--success)]/10 border-[var(--success)]/20 text-[var(--success)]":d.type==="error"?"bg-[var(--error-surface)] border-[var(--error)]/20 text-[var(--error)]":"bg-[var(--accent)]/10 border-[var(--accent)]/20 text-[var(--accent)]"}`,children:d.msg}),o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-widest ml-1",children:"URL de Conexin Core"}),o.jsx("input",{type:"text",value:a,onChange:x=>i(x.target.value),placeholder:"https://script.google.com/...",className:"w-full h-10 bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-xl px-4 text-[10px] font-mono text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("label",{className:"text-[8px] font-mono text-[var(--text-dim)] uppercase tracking-widest ml-1",children:"Nuevo Token Maestro / Contrasea"}),o.jsx("input",{type:"password",value:n,onChange:x=>s(x.target.value),placeholder:"Escribe tu nueva frase de acceso...",className:"w-full h-12 bg-[var(--bg-primary)] border border-[var(--border-subtle)] rounded-xl px-4 text-sm font-mono text-[var(--text-primary)] focus:outline-none focus:border-[var(--accent)] transition-all"})]}),o.jsx("p",{className:"text-[7px] font-mono text-[var(--text-dim)] opacity-50 px-1",children:"Advertencia: Actualizar esto rotar la clave maestra para todos los satlites interconectados."})]}),o.jsx("button",{onClick:m,disabled:!n||l,className:`
                            h-12 rounded-xl font-black text-[10px] uppercase tracking-[0.4em] transition-all duration-500 mt-2
                            ${!n||l?"bg-[var(--bg-secondary)] text-[var(--text-dim)] cursor-not-allowed border border-[var(--border-subtle)]":"bg-[var(--accent)] text-black shadow-lg hover:scale-[1.02] active:scale-95"}
                        `,children:l?"Sincronizando...":"Rotar Token Maestro"}),o.jsx("div",{className:"text-center mt-2",children:o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-dim)] opacity-30 uppercase tracking-[0.2em]",children:"Protocolo Axiomtico: La Identidad es la Prueba."})})]})]})})},Pm=()=>{var u,p;const{state:e,execute:t}=q(),r=F(v=>v.session),[n,s]=T.useState(!1),[a,i]=T.useState(!1),l=e.sovereignty.theme||"dark",c=e.sovereignty.mode==="DEV_LAB",d=(u=e.phenotype.devLab)==null?void 0:u.targetId,h=(p=e.phenotype.devLab)==null?void 0:p.perspective,{ui:m,focusStack:x,cosmosIdentity:E}=e.phenotype;e.ui_layer_override;const g=!!(E!=null&&E.id);let S=[];c?(S=[{id:"DEV_LAB",label:"Laboratory",archetype:"LAB",icon:L.Lab}],d&&S.push({id:"TARGET",label:d,archetype:"TARGET",icon:L.Terminal}),h&&S.push({id:"PERSPECTIVE",label:h,archetype:"VIEW",icon:L.Eye})):S=g?x&&x.length>0?x:[E]:[];const _=()=>{const v=l==="dark"?"light":"dark";t("SET_THEME",{theme:v}),localStorage.setItem("INDRA_THEME",v)},f=()=>{confirm(` NUCLEAR PURGE

Esto borrar toda la memoria local (Genotipo L0) y forzar una descarga completa del Servidor.

Proceder?`)&&t("NUCLEAR_PURGE")};return o.jsxs("div",{className:"fixed top-4 right-4 z-[350] flex items-center justify-end pointer-events-auto",children:[o.jsxs("div",{className:`
                flex items-center gap-2 p-1 rounded-full glass border transition-all duration-500 ease-out shadow-lg max-w-[90vw]
                ${c?"border-orange-500/50 shadow-[0_0_20px_rgba(249,115,22,0.1)]":"border-[var(--border-subtle)]"}
                ${n?"bg-[var(--bg-deep)] pr-2":""}
            `,children:[(r==null?void 0:r.syncStatus)==="OFFLINE"&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 ml-1 bg-[var(--error-surface)] text-[var(--error)] rounded-full border border-[var(--error)]/20 animate-pulse",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-[var(--error)]"}),o.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter",children:"Trabajo sin conexin"})]}),o.jsxs("div",{className:`
                    flex items-center gap-2 overflow-hidden transition-all duration-500
                    ${n?"max-w-[400px] opacity-100 ml-1":"max-w-0 opacity-0 ml-0"}
                `,children:[o.jsx("button",{onClick:()=>t("SET_CURRENT_LAYER","SELECTOR"),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${e.phenotype.ui.currentLayer==="SELECTOR"?"bg-[var(--accent)]/20 text-[var(--accent)]":"text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-secondary)]"}`,title:"Selector de Cosmos",children:o.jsx(L.Cosmos,{size:14})}),o.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] mx-1"}),o.jsxs("button",{onClick:()=>t("SET_MODE",{mode:e.sovereignty.mode==="LIVE"?"DEV_LAB":"LIVE"}),className:`h-8 px-3 rounded-full flex items-center gap-2 transition-all ${e.sovereignty.mode==="DEV_LAB"?"bg-[var(--accent)]/20 text-[var(--accent)]":"text-[var(--text-dim)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-secondary)]"}`,title:`Cambiar a Modo ${e.sovereignty.mode==="LIVE"?"Laboratorio":"Produccin"}`,children:[o.jsx(L.Sync,{size:12,className:e.sovereignty.mode==="DEV_LAB"?"animate-spin":""}),o.jsx("span",{className:"text-[8px] font-black tracking-[0.2em] uppercase",children:e.sovereignty.mode==="LIVE"?"Live":"Dev"})]}),o.jsx("div",{className:"w-[1px] h-4 bg-[var(--border-subtle)] mx-1"}),o.jsx("button",{onClick:_,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--bg-secondary)] transition-colors group",title:l==="dark"?"Light Mode":"Dark Mode",children:l==="dark"?o.jsx(L.Sun,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"}):o.jsx(L.Moon,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"})}),o.jsx("button",{onClick:()=>i(!0),className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--accent)]/10 transition-colors group",title:"Security / Tokens",children:o.jsx(L.Lock,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--accent)]"})}),o.jsx("button",{onClick:f,className:"w-8 h-8 rounded-full flex items-center justify-center hover:bg-[var(--error)]/10 transition-colors group",title:"Nuclear Purge",children:o.jsx(L.Sync,{size:14,className:"text-[var(--text-dim)] group-hover:text-[var(--error)]"})})]}),o.jsx("button",{onClick:()=>s(!n),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all border ${n?"border-[var(--accent)] bg-[var(--accent)] text-white shadow-[0_0_15px_rgba(var(--accent-rgb),0.3)]":"border-transparent hover:bg-[var(--bg-secondary)] text-[var(--text-dim)]"}`,children:o.jsx("div",{className:`transition-transform duration-500 ${n?"rotate-180":""}`,children:n?o.jsx(L.Close,{size:16}):o.jsx(L.List,{size:18})})})]}),a&&o.jsx(Dm,{onClose:()=>i(!1)})]})},Mm=()=>{const e=F(s=>s.session),t=e==null?void 0:e.isLoading;if((e==null?void 0:e.syncStatus)==="SYNCED"&&!t)return null;const r=(e==null?void 0:e.syncStatus)==="RETRY",n=(e==null?void 0:e.syncStatus)==="OFFLINE";return o.jsxs("div",{className:"fixed bottom-32 right-10 flex flex-col gap-2 z-[500] animate-fade-in group",children:[o.jsxs("div",{className:`
                glass rounded-2xl p-4 flex items-center gap-4 border transition-all duration-500
                ${n?"border-[var(--error)]/50 shadow-[0_0_20px_var(--error-surface)]":r?"border-[var(--warning)]/50 shadow-[0_0_20px_var(--warning-surface)]":"border-[var(--accent)]/30"}
                ${t?"shadow-[0_0_15px_rgba(0,210,255,0.1)]":""}
            `,children:[o.jsxs("div",{className:`relative ${t||r?"animate-spin-slow":""}`,children:[o.jsx(L.Sync,{className:`w-5 h-5 ${n?"text-[var(--error)]":r?"text-[var(--warning)]":"text-[var(--accent)]"}`}),t&&o.jsx("div",{className:"absolute inset-0 bg-[var(--accent)] blur-md opacity-20 animate-pulse"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"Sincrona de Realidad"}),o.jsx("span",{className:"text-[9px] font-mono opacity-60",children:t?"Transmitiendo Snapshot...":n?"Modo Offline (Soberana Local)":r?`Reintentando (${e.failedSyncAttempts}/4)`:"Sincronizado"})]})]}),n&&o.jsx("div",{className:"bg-[var(--error-surface)] backdrop-blur-md rounded-lg p-2 border border-[var(--error)]/20 text-[8px] font-mono text-[var(--error)] mt-1 max-w-[200px] animate-pulse",children:" MODO OFFLINE: Los cambios solo persisten localmente hasta recuperar conexin."}),r&&e.lastSyncError&&o.jsxs("div",{className:"bg-[var(--warning-surface)] backdrop-blur-md rounded-lg p-2 border border-[var(--warning)]/20 text-[8px] font-mono text-[var(--warning)] mt-1 max-w-[200px]",children:[" REINTENTO: ",e.lastSyncError.message||"Error de conexin"]})]})},Um=({onComplete:e})=>{const{state:t}=q(),{progress:r,label:n,color:s,iskResonance:a}=_i("system"),[i,l]=T.useState(!0);return T.useEffect(()=>{if(r>=100&&t.sovereignty.status!=="STANDBY"){const c=setTimeout(()=>{l(!1),e&&e()},1e3);return()=>clearTimeout(c)}},[r,t.sovereignty.status]),i?o.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black flex flex-col items-center justify-center transition-opacity duration-1000",children:[o.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--accent)_0%,_transparent_70%)]",style:{transform:`scale(${1+(a||0)*.1})`,opacity:.1+(a||0)*.2}})}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8",children:[o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-[var(--accent)]/30 flex items-center justify-center",children:o.jsx("div",{className:"w-16 h-16 rounded-full bg-[var(--accent)]/10 animate-pulse flex items-center justify-center",children:o.jsx("div",{className:"w-4 h-4 bg-[var(--accent)] rounded-full",style:{boxShadow:`0 0 20px ${s||"var(--accent)"}`}})})})}),o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("h1",{className:"text-xl font-black tracking-[0.5em] text-[var(--accent)] uppercase animate-pulse",children:"INDRA_OS"}),o.jsxs("span",{className:"text-[10px] font-mono text-[var(--text-dim)] tracking-widest uppercase",children:[n||"Initialising_Reality","..."]})]}),o.jsxs("div",{className:"w-64",children:[o.jsx("div",{className:"h-0.5 w-full bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-[var(--accent)] transition-all duration-500",style:{width:`${r}%`,boxShadow:"0 0 10px var(--accent)"}})}),o.jsxs("div",{className:"flex justify-between mt-2 font-mono text-[9px] text-[var(--text-dim)] opacity-50",children:[o.jsxs("span",{children:[r,"%"]}),o.jsx("span",{children:"v5.5.0-STARK"})]})]})]})]}):null},zm=()=>{const{state:e,execute:t}=q(),{ui:r,cosmosIdentity:n}=e.phenotype;return e.sovereignty.mode==="LIVE"&&!!n?o.jsx("div",{className:"fixed left-4 top-1/2 -translate-y-1/2 z-[350] flex flex-col items-center gap-4 animate-fade-in-left",children:o.jsxs("div",{className:"flex flex-col gap-2 p-1.5 glass border border-[var(--border-subtle)] rounded-full shadow-2xl",children:[o.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"}),className:`
                        w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500
                        ${r.vaultPanelOpen?"bg-[var(--accent)] text-black shadow-[0_0_20px_rgba(var(--accent-rgb),0.4)] rotate-12":"text-[var(--text-dim)] hover:text-[var(--text-vibrant)] hover:bg-[var(--bg-secondary)]"}
                    `,title:"Almacn de Artefactos (Vault)",children:o.jsx(L.Vault,{size:20})}),o.jsx("div",{className:"w-6 h-[1px] bg-[var(--border-subtle)] mx-auto opacity-30"})]})}):null},Fm=()=>{const{state:e,execute:t}=q(),{ui:r}=e.phenotype;if(!r.vaultPanelOpen)return null;const n={id:"vault_global",LABEL:"Almacn de Artefactos",DOMAIN:"SYSTEM_VAULT"};return o.jsxs("div",{className:"fixed inset-0 z-[400] flex animate-fade-in pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm pointer-events-auto",onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"})}),o.jsxs("div",{className:`
                relative w-full max-w-2xl h-full glass border-r border-[var(--border-subtle)] shadow-2xl
                flex flex-col animate-slide-in-left pointer-events-auto
            `,children:[o.jsx("div",{className:"absolute top-0 right-0 p-4",children:o.jsx("button",{onClick:()=>t("TOGGLE_UI_PANEL",{panel:"vault"}),className:"p-2 text-[var(--text-dim)] hover:text-white transition-colors",children:o.jsx(L.Close,{size:20})})}),o.jsx("div",{className:"flex-1 overflow-hidden",children:o.jsx(ps,{data:n,perspective:"VAULT"})})]})]})};T.lazy(()=>Pr(()=>import("./SemanticDataCube-RjLlZpz-.js"),__vite__mapDeps([0,1])));T.lazy(()=>Pr(()=>import("./SpatialCanvas-CNx1-iP3.js"),__vite__mapDeps([2,3])));const Bm={PORTAL:{id:"PORTAL",label:"Portal de Soberana",profile:"AMBIENT",component:"PortalDeAcceso"},SELECTOR:{id:"SELECTOR",label:"Selector de Cosmos",profile:"NAVIGATIONAL",component:"CosmosSelector"},DESKTOP:{id:"DESKTOP",label:"Escritorio de Indra",profile:"DEEP_FOCUS",component:"DynamicLayoutEngine"},DEV_LAB:{id:"DEV_LAB",label:"Laboratorio de Cnones",profile:"DEEP_FOCUS",component:"DevLab"}},Vm=({initialAssembly:e})=>{const{state:t,execute:r}=q(),n=F(a=>{var i;return(i=a.session)==null?void 0:i.isLoading});T.useEffect(()=>{e&&(e.status==="LOCKED"?r("SYSTEM_LOCKED"):(e.status==="ACTIVE"||e.status==="DEGRADED")&&r("IGNITE_SYSTEM",{sovereignty:e.status,genotype:e.genotype||t.genotype}))},[e]),T.useEffect(()=>{t.phenotype.cosmosIdentity&&t.phenotype.ui.currentLayer==="SELECTOR"&&(console.log("[Orchestrator]  Realidad Habitada. Colapsando Selector."),r("SET_CURRENT_LAYER",null))},[t.phenotype.cosmosIdentity]),T.useEffect(()=>{const a=t.sovereignty.theme;document.documentElement.setAttribute("data-theme",a),document.body.className="indra-os-shell bg-hex-grid transition-colors duration-1000"},[t.sovereignty.theme]);const s=()=>{var g;const a=t.phenotype.ui.currentLayer,i=S=>r("SET_CURRENT_LAYER",S),l=!!((g=t.phenotype.cosmosIdentity)!=null&&g.id),d=(S=>{if(!S)return null;const _=Object.values(Bm).find(f=>f.id===S);return _?_.profile:null})(a),h=t.sovereignty.status==="LOCKED",m=a==="PORTAL"||d==="AMBIENT",x=a==="SELECTOR"||d==="NAVIGATIONAL",E=h;return o.jsxs("div",{className:"w-full h-full relative overflow-hidden flex flex-col",children:[o.jsx("div",{className:"absolute inset-0 layer-transition",style:{zIndex:0,filter:x?"blur(15px) brightness(0.6) grayscale(0.5)":E?"brightness(0.2)":"none",transform:x?"scale(0.96) translateY(-20px)":"scale(1)",opacity:E?.3:1},children:t.sovereignty.mode==="DEV_LAB"||a==="DEV_LAB"?o.jsx(Am,{}):l?o.jsx(Im,{}):o.jsx(oc,{asHome:!0})}),o.jsx("div",{className:"absolute inset-0 z-[10] pointer-events-none",children:m&&o.jsx("div",{className:"absolute top-24 right-8 w-96 glass p-6 rounded-[2rem] border border-[var(--indra-glass-border)] shadow-2xl animate-fade-in pointer-events-auto",children:o.jsx(Ca,{asOverlay:!0,onClose:()=>i(null)})})}),x&&o.jsx("div",{onClick:()=>i(null),className:"absolute inset-0 flex items-center justify-center p-12 z-[20] animate-fade-in backdrop-blur-sm cursor-pointer",children:o.jsxs("div",{onClick:S=>S.stopPropagation(),className:"w-full max-w-7xl h-full glass rounded-[3rem] shadow-2xl overflow-hidden border border-[var(--indra-glass-border)] flex flex-col pointer-events-auto cursor-default",children:[o.jsx("div",{className:"h-1 bg-gradient-to-r from-transparent via-[var(--accent)] to-transparent opacity-20"}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsx(oc,{})})]})}),E&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-[100] animate-fade-in bg-black/60 backdrop-blur-md",children:o.jsx("div",{className:"w-full max-w-xl glass p-10 rounded-[2.5rem] border border-[var(--indra-glass-border)] shadow-2xl pointer-events-auto",children:o.jsx(Ca,{asOverlay:!1})})}),o.jsxs("div",{className:"absolute inset-0 z-[300] pointer-events-none overflow-hidden",children:[o.jsxs("div",{className:"pointer-events-auto",children:[o.jsx(km,{manualLayer:a,setManualLayer:i}),o.jsx(Pm,{}),o.jsx(zm,{}),o.jsx(Mm,{})]}),o.jsx(Fm,{}),n&&!t.phenotype.cosmosIdentity&&a!=="SELECTOR"&&o.jsxs("div",{className:"absolute inset-0 z-[1000] flex flex-col items-center justify-center bg-black/40 backdrop-blur-md animate-in fade-in duration-500 pointer-events-auto",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full border-t-2 border-b-2 border-[var(--accent)] animate-spin"}),o.jsx("div",{className:"absolute inset-0 w-24 h-24 rounded-full border-l-2 border-r-2 border-[var(--accent)]/30 animate-spin-reverse opacity-50"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-[var(--accent)] rounded-full shadow-[0_0_20px_var(--accent)] animate-pulse"})]}),o.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-[var(--accent)] animate-pulse",children:"Sintonizando Realidad"}),o.jsx("div",{className:"flex gap-1 h-1",children:[0,1,2].map(S=>o.jsx("div",{className:"w-8 h-full bg-[var(--accent)]/20 rounded-full overflow-hidden",children:o.jsx("div",{className:"w-full h-full bg-[var(--accent)] animate-[indra-loading-bar_1.5s_infinite]",style:{animationDelay:`${S*.2}s`}})},S))})]})]}),t.phenotype.isDeepHydrating&&!n&&o.jsxs("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 px-8 py-4 glass rounded-full border border-[var(--accent)]/30 shadow-[0_0_30px_rgba(0,210,255,0.2)] animate-pulse flex items-center gap-4 pointer-events-auto",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--accent)] shadow-[0_0_10px_var(--accent)]"}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-[var(--accent)]",children:"Materia Oscura Detectada"}),o.jsx("span",{className:"text-[8px] font-mono text-[var(--text-secondary)] uppercase tracking-widest opacity-60",children:"Hidratando Realidad en Profundidad (Deep Reading)..."})]}),o.jsxs("div",{className:"ml-4 flex gap-1",children:[o.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/20 rounded-full animate-[indra-breath_1s_infinite_ease-in-out]"}),o.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/40 rounded-full animate-[indra-breath_1.2s_infinite_ease-in-out]"}),o.jsx("div",{className:"w-1 h-3 bg-[var(--accent)]/60 rounded-full animate-[indra-breath_1.4s_infinite_ease-in-out]"})]})]})]})]})};return t.sovereignty.status==="STANDBY"?o.jsx(Um,{}):o.jsx("div",{className:"w-screen h-screen overflow-hidden layer-transition bg-black",children:s()})},$m=()=>{const{dispatch:e}=q(),[t,r]=T.useState("BOOTING"),[n,s]=T.useState(null);return T.useEffect(()=>{(async()=>{console.log(" [Main] Iniciando Bootloader...");const i=await om.assemble();i.success&&i.status==="ACTIVE"?(console.log(" [Main] Sistema Activo. Transfiriendo control a Orchestrator."),s(i),r("ACTIVE")):(console.warn(" [Main] Sistema Bloqueado o Requiere Autenticacin."),r("LOCKED"))})()},[e]),t==="BOOTING"?o.jsxs("div",{className:"w-screen h-screen bg-black flex flex-col items-center justify-center gap-6 text-[var(--accent)] font-mono",children:[o.jsx("div",{className:"w-16 h-16 border-2 border-[var(--accent)] border-t-transparent rounded-full animate-spin"}),o.jsx("div",{className:"text-xs tracking-[0.5em] animate-pulse uppercase",children:"INITIALIZING INDRA OS"})]}):t==="ACTIVE"?o.jsx(Vm,{initialAssembly:n}):o.jsx(Ca,{})};ko.createRoot(document.getElementById("root")).render(o.jsx(ve.StrictMode,{children:o.jsx(nm,{children:o.jsx($m,{})})}));export{o as j,T as r};
//# sourceMappingURL=index-Dt38JoQC.js.map
